(function(){"use strict";/*! (c) Andrea Giammarchi - ISC */var et={};try{et.WeakMap=WeakMap}catch{et.WeakMap=function(t,n){var a=n.defineProperty,r=n.hasOwnProperty,i=o.prototype;return i.delete=function(l){return this.has(l)&&delete l[this._]},i.get=function(l){return this.has(l)?l[this._]:void 0},i.has=function(l){return r.call(l,this._)},i.set=function(l,c){return a(l,this._,{configurable:!0,value:c}),this},o;function o(l){a(this,"_",{value:"_@ungap/weakmap"+t++}),l&&l.forEach(s,this)}function s(l){this.set(l[0],l[1])}}(Math.random(),Object)}var ne=et.WeakMap;/*! (c) Andrea Giammarchi - ISC */var tt={};try{tt.WeakSet=WeakSet}catch{(function(t,n){var a=r.prototype;a.add=function(i){return this.has(i)||n(i,this._,{value:!0,configurable:!0}),this},a.has=function(i){return this.hasOwnProperty.call(i,this._)},a.delete=function(i){return this.has(i)&&delete i[this._]},tt.WeakSet=r;function r(){n(this,"_",{value:"_@ungap/weakmap"+t++})}})(Math.random(),Object.defineProperty)}var Ft=tt.WeakSet;const{indexOf:Sa,slice:ol}=[],le=(e,t,n,a,r,i)=>{const o="selectedIndex"in t;let s=o;for(;a<r;){const l=e(n[a],1);if(t.insertBefore(l,i),o&&s&&l.selected){s=!s;let{selectedIndex:c}=t;t.selectedIndex=c<0?a:Sa.call(t.querySelectorAll("option"),l)}a++}},Ta=(e,t)=>e==t,Oa=e=>e,Bt=(e,t,n,a,r,i,o)=>{const s=i-r;if(s<1)return-1;for(;n-t>=s;){let l=t,c=r;for(;l<n&&c<i&&o(e[l],a[c]);)l++,c++;if(c===i)return t;t=l+1}return-1},Ia=(e,t,n,a,r,i)=>{for(;a<r&&i(n[a],e[t-1]);)a++,t--;return t===0},nt=(e,t,n,a,r)=>n<a?e(t[n],0):0<n?e(t[n-1],-0).nextSibling:r,ye=(e,t,n,a)=>{for(;n<a;)Na(e(t[n++],-1))},be=-1,Oe=1,Ie=0,Pa=50,Da=(e,t,n,a,r,i,o,s)=>{let l=0,c=a<s?a:s;const d=Array(c++),h=Array(c);h[0]=-1;for(let $=1;$<c;$++)h[$]=o;const f=r.slice(i,o);for(let $=t;$<n;$++){const v=f.indexOf(e[$]);if(-1<v){const E=v+i;l=Wa(h,c,E),-1<l&&(h[l]=E,d[l]={newi:$,oldi:E,prev:d[l-1]})}}for(l=--c,--o;h[l]>o;)--l;c=s+a-l;const g=Array(c);let y=d[l];for(--n;y;){const{newi:$,oldi:v}=y;for(;n>$;)g[--c]=Oe,--n;for(;o>v;)g[--c]=be,--o;g[--c]=Ie,--n,--o,y=y.prev}for(;n>=t;)g[--c]=Oe,--n;for(;o>=i;)g[--c]=be,--o;return g},La=(e,t,n,a,r,i,o)=>{const s=n+i,l=[];let c,d,h,f,g,y,$;e:for(c=0;c<=s;c++){if(c>Pa)return null;for($=c-1,g=c?l[c-1]:[0,0],y=l[c]=[],d=-c;d<=c;d+=2){for(d===-c||d!==c&&g[$+d-1]<g[$+d+1]?f=g[$+d+1]:f=g[$+d-1]+1,h=f-d;f<i&&h<n&&o(a[r+f],e[t+h]);)f++,h++;if(f===i&&h===n)break e;y[c+d]=f}}const v=Array(c/2+s/2);let E=v.length-1;for(c=l.length-1;c>=0;c--){for(;f>0&&h>0&&o(a[r+f-1],e[t+h-1]);)v[E--]=Ie,f--,h--;if(!c)break;$=c-1,g=c?l[c-1]:[0,0],d=f-h,d===-c||d!==c&&g[$+d-1]<g[$+d+1]?(h--,v[E--]=Oe):(f--,v[E--]=be)}return v},Ra=(e,t,n,a,r,i,o,s,l)=>{const c=[],d=e.length;let h=o,f=0;for(;f<d;)switch(e[f++]){case Ie:r++,h++;break;case Oe:c.push(a[r]),le(t,n,a,r++,r,h<s?t(i[h],0):l);break;case be:h++;break}for(f=0;f<d;)switch(e[f++]){case Ie:o++;break;case be:-1<c.indexOf(i[o])?o++:ye(t,i,o++,o);break}},Wa=(e,t,n)=>{let a=1,r=t;for(;a<r;){const i=(a+r)/2>>>0;n<e[i]?r=i:a=i+1}return a},_a=(e,t,n,a,r,i,o,s,l,c,d,h,f)=>{Ra(La(n,a,i,o,s,c,h)||Da(n,a,r,i,o,s,l,c),e,t,n,a,o,s,d,f)},Na=e=>(e.remove||Ua).call(e);function Ua(){const{parentNode:e}=this;e&&e.removeChild(this)}/*! (c) 2018 Andrea Giammarchi (ISC) */const ae=(e,t,n,a)=>{a||(a={});const r=a.compare||Ta,i=a.node||Oa,o=a.before==null?null:i(a.before,0),s=t.length;let l=s,c=0,d=n.length,h=0;for(;c<l&&h<d&&r(t[c],n[h]);)c++,h++;for(;c<l&&h<d&&r(t[l-1],n[d-1]);)l--,d--;const f=c===l,g=h===d;if(f&&g)return n;if(f&&h<d)return le(i,e,n,h,d,nt(i,t,c,s,o)),n;if(g&&c<l)return ye(i,t,c,l),n;const y=l-c,$=d-h;let v=-1;if(y<$){if(v=Bt(n,h,d,t,c,l,r),-1<v)return le(i,e,n,h,v,i(t[c],0)),le(i,e,n,v+y,d,nt(i,t,l,s,o)),n}else if($<y&&(v=Bt(t,c,l,n,h,d,r),-1<v))return ye(i,t,c,v),ye(i,t,v+$,l),n;return y<2||$<2?(le(i,e,n,h,d,i(t[c],0)),ye(i,t,c,l),n):y===$&&Ia(n,d,t,c,l,r)?(le(i,e,n,h,d,nt(i,t,l,s,o)),n):(_a(i,e,n,h,d,$,t,c,l,y,s,r,o),n)};/*! (c) Andrea Giammarchi - ISC */var qt={};qt.CustomEvent=typeof CustomEvent=="function"?CustomEvent:function(e){return t[e]=new t("").constructor[e],t;function t(n,a){a||(a={});var r=document.createEvent("CustomEvent");return r.initCustomEvent(n,!!a.bubbles,!!a.cancelable,a.detail),r}}("prototype");var Gt=qt.CustomEvent;/*! (c) Andrea Giammarchi - ISC */var at={};try{at.Map=Map}catch{at.Map=function(){var n=0,a=[],r=[];return{delete:function(o){var s=i(o);return s&&(a.splice(n,1),r.splice(n,1)),s},forEach:function(s,l){a.forEach(function(c,d){s.call(l,r[d],c,this)},this)},get:function(s){return i(s)?r[n]:void 0},has:function(s){return i(s)},set:function(s,l){return r[i(s)?n:a.push(s)-1]=l,this}};function i(o){return n=a.indexOf(o),-1<n}}}var za=at.Map;function we(){return this}function ja(e){const t=new ne,n=Object.create,a=(s,l,c)=>(s.set(l,c),c),r=(s,l,c,d)=>{const h=l.get(s)||i(s,l);switch(typeof d){case"object":case"function":const f=h.w||(h.w=new ne);return f.get(d)||a(f,d,new s(c));default:const g=h.p||(h.p=n(null));return g[d]||(g[d]=new s(c))}},i=(s,l)=>{const c={w:null,p:null};return l.set(s,c),c},o=s=>{const l=new za;return t.set(s,l),l};Object.defineProperties(we,{for:{configurable:!0,value(s,l){return r(this,t.get(s)||o(s),s,l??"default")}}}),Object.defineProperties(we.prototype,{handleEvent:{value(s){const l=s.currentTarget;this["getAttribute"in l&&l.getAttribute("data-call")||"on"+s.type](s)}},html:rt("html",e),svg:rt("svg",e),state:rt("state",function(){return this.defaultState}),defaultState:{get(){return{}}},dispatch:{value(s,l){const{_wire$:c}=this;if(c){const d=new Gt(s,{bubbles:!0,cancelable:!0,detail:l});return d.component=this,(c.dispatchEvent?c:c.firstChild).dispatchEvent(d)}return!1}},setState:{value(s,l){const c=this.state,d=typeof s=="function"?s.call(this,c):s;for(const h in d)c[h]=d[h];return l!==!1&&this.render(),this}}})}const rt=(e,t)=>{const n="_"+e+"$";return{get(){return this[n]||Ht(this,n,t.call(this,e))},set(a){Ht(this,n,a)}}},Ht=(e,t,n)=>Object.defineProperty(e,t,{configurable:!0,value:typeof n=="function"?function(){return e._wire$=n.apply(this,arguments)}:n})[t];Object.defineProperties(we.prototype,{ELEMENT_NODE:{value:1},nodeType:{value:-1}});const Yt={},Pe={},Xt=[],Fa=Pe.hasOwnProperty;let Kt=0;var ce={attributes:Yt,define:(e,t)=>{e.indexOf("-")<0?(e in Pe||(Kt=Xt.push(e)),Pe[e]=t):Yt[e]=t},invoke:(e,t)=>{for(let n=0;n<Kt;n++){let a=Xt[n];if(Fa.call(e,a))return Pe[a](e[a],t)}}},Zt=Array.isArray||function(e){var t=e.call([]);return function(a){return e.call(a)===t}}({}.toString);/*! (c) Andrea Giammarchi - ISC */var Jt=function(e){var t="fragment",n="template",a="content"in o(n),r=a?function(l){var c=o(n);return c.innerHTML=l,c.content}:function(l){var c=o(t),d=o(n),h=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(l)){var f=RegExp.$1;d.innerHTML="<table>"+l+"</table>",h=d.querySelectorAll(f)}else d.innerHTML=l,h=d.childNodes;return i(c,h),c};return function(c,d){return(d==="svg"?s:r)(c)};function i(l,c){for(var d=c.length;d--;)l.appendChild(c[0])}function o(l){return l===t?e.createDocumentFragment():e.createElementNS("http://www.w3.org/1999/xhtml",l)}function s(l){var c=o(t),d=o("div");return d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+l+"</svg>",i(c,d.firstChild.childNodes),c}}(document);/*! (c) Andrea Giammarchi */function Ba(e){var t=e.Event,n=e.WeakSet,a=!0,r=null;return function(s){return a&&(a=!a,r=new n,i(s.ownerDocument)),r.add(s),s};function i(o){var s=new n,l=new n;try{new MutationObserver(f).observe(o,{subtree:!0,childList:!0})}catch{var c=0,d=[],h=function(v){d.push(v),clearTimeout(c),c=setTimeout(function(){f(d.splice(c=0,d.length))},0)};o.addEventListener("DOMNodeRemoved",function(v){h({addedNodes:[],removedNodes:[v.target]})},!0),o.addEventListener("DOMNodeInserted",function(v){h({addedNodes:[v.target],removedNodes:[]})},!0)}function f($){for(var v,E=$.length,k=0;k<E;k++)v=$[k],g(v.removedNodes,"disconnected",l,s),g(v.addedNodes,"connected",s,l)}function g($,v,E,k){for(var M,I=new t(v),S=$.length,P=0;P<S;(M=$[P++]).nodeType===1&&y(M,I,v,E,k));}function y($,v,E,k,M){r.has($)&&!k.has($)&&(M.delete($),k.add($),$.dispatchEvent(v));for(var I=$.children||[],S=I.length,P=0;P<S;y(I[P++],v,E,k,M));}}}/*! (c) Andrea Giammarchi - ISC */var qa=function(e,t,n,a,r){var i=r in e,o=e.createDocumentFragment();o[t](e[a]("g")),o[t](e[a](""));var s=i?e[r](o,!0):o[n](!0);return s.childNodes.length<2?function l(c,d){for(var h=c[n](),f=c.childNodes||[],g=f.length,y=0;d&&y<g;y++)h[t](l(f[y],d));return h}:i?e[r]:function(l,c){return l[n](!!c)}}(document,"appendChild","cloneNode","createTextNode","importNode"),Qt="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")};/*! (c) Andrea Giammarchi - ISC */var X="-"+Math.random().toFixed(6)+"%",it=!1;try{(function(e,t,n){return t in e&&(e.innerHTML="<p "+n+'="'+X+'"></p>',e[t].childNodes[0].getAttribute(n)==X)})(document.createElement("template"),"content","tabindex")||(X="_dt: "+X.slice(1,-1)+";",it=!0)}catch{}var De="<!--"+X+"-->",Ga=8,Ha=1,Ya=3,Vt=/^(?:plaintext|script|style|textarea|title|xmp)$/i,Xa=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function Ka(e){return e.join(De).replace(Ja,tr).replace(Za,Va)}var Le=" \\f\\n\\r\\t",en="[^"+Le+`\\/>"'=]+`,st="["+Le+"]+"+en,tn="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",nn=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+en.replace("\\/","")+"))?)",Za=new RegExp(tn+st+nn+"+)(["+Le+"]*/?>)","g"),Ja=new RegExp(tn+st+nn+"*)(["+Le+"]*/>)","g"),Qa=new RegExp("("+st+`\\s*=\\s*)(['"]?)`+De+"\\2","gi");function Va(e,t,n,a){return"<"+t+n.replace(Qa,er)+a}function er(e,t,n){return t+(n||'"')+X+(n||'"')}function tr(e,t,n){return Xa.test(t)?e:"<"+t+n+"></"+t+">"}var nr=e=>({get:t=>e.get(t),set:(t,n)=>(e.set(t,n),n)}),ar=it?function(e,t){var n=t.join(" ");return t.slice.call(e,0).sort(function(a,r){return n.indexOf(a.name)<=n.indexOf(r.name)?-1:1})}:function(e,t){return t.slice.call(e,0)};function rr(e,t){for(var n=t.length,a=0;a<n;)e=e.childNodes[t[a++]];return e}function an(e,t,n,a){for(var r=e.childNodes,i=r.length,o=0;o<i;){var s=r[o];switch(s.nodeType){case Ha:var l=a.concat(o);ir(s,t,n,l),an(s,t,n,l);break;case Ga:var c=s.textContent;if(c===X)n.shift(),t.push(Vt.test(e.nodeName)?sn(e,a):sr(s,a.concat(o)));else switch(c.slice(0,2)){case"/*":if(c.slice(-2)!=="*/")break;case"\u{1F47B}":e.removeChild(s),o--,i--}break;case Ya:Vt.test(e.nodeName)&&Qt.call(s.textContent)===De&&(n.shift(),t.push(sn(e,a)));break}o++}}function ir(e,t,n,a){for(var r=e.attributes,i=[],o=[],s=ar(r,n),l=s.length,c=0;c<l;){var d=s[c++],h=d.value===X,f;if(h||1<(f=d.value.split(De)).length){var g=d.name;if(i.indexOf(g)<0){i.push(g);var y=n.shift().replace(h?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+g+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),$=r[y]||r[y.toLowerCase()];if(h)t.push(rn($,a,y,null));else{for(var v=f.length-2;v--;)n.shift();t.push(rn($,a,y,f))}}o.push(d)}}l=o.length,c=0;for(var E=0<l&&it&&!("ownerSVGElement"in e);c<l;){var k=o[c++];E&&(k.value=""),e.removeAttribute(k.name)}var M=e.nodeName;if(/^script$/i.test(M)){var I=document.createElement(M);for(l=r.length,c=0;c<l;)I.setAttributeNode(r[c++].cloneNode(!0));I.textContent=e.textContent,e.parentNode.replaceChild(I,e)}}function sr(e,t){return{type:"any",node:e,path:t}}function rn(e,t,n,a){return{type:"attr",node:e,path:t,name:n,sparse:a}}function sn(e,t){return{type:"text",node:e,path:t}}var on=nr(new ne);function or(e,t){var n=(e.convert||Ka)(t),a=e.transform;a&&(n=a(n));var r=Jt(n,e.type);ln(r);var i=[];return an(r,i,t.slice(0),[]),{content:r,updates:function(o){for(var s=[],l=i.length,c=0,d=0;c<l;){var h=i[c++],f=rr(o,h.path);switch(h.type){case"any":s.push({fn:e.any(f,[]),sparse:!1});break;case"attr":var g=h.sparse,y=e.attribute(f,h.name,h.node);g===null?s.push({fn:y,sparse:!1}):(d+=g.length-2,s.push({fn:y,sparse:!0,values:g}));break;case"text":s.push({fn:e.text(f),sparse:!1}),f.textContent="";break}}return l+=d,function(){var $=arguments.length;if(l!==$-1)throw new Error($-1+" values instead of "+l+`
`+t.join("${value}"));for(var v=1,E=1;v<$;){var k=s[v-E];if(k.sparse){var M=k.values,I=M[0],S=1,P=M.length;for(E+=P-2;S<P;)I+=arguments[v++]+M[S++];k.fn(I)}else k.fn(arguments[v++])}return o}}}}function lr(e,t){var n=on.get(t)||on.set(t,or(e,t));return n.updates(qa.call(document,n.content,!0))}var cr=[];function pr(e){var t=cr,n=ln;return function(a){return t!==a&&(n=lr(e,t=a)),n.apply(null,arguments)}}function ln(e){for(var t=e.childNodes,n=t.length;n--;){var a=t[n];a.nodeType!==1&&Qt.call(a.textContent).length===0&&e.removeChild(a)}}/*! (c) Andrea Giammarchi - ISC */var dr=function(){var e=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,t=/([^A-Z])([A-Z]+)/g;return function(s,l){return"ownerSVGElement"in s?a(s,l):i(s.style,!1)};function n(o,s,l){return s+"-"+l.toLowerCase()}function a(o,s){var l;return s?l=s.cloneNode(!0):(o.setAttribute("style","--hyper:style;"),l=o.getAttributeNode("style")),l.value="",o.setAttributeNode(l),i(l,!0)}function r(o){var s,l=[];for(s in o)l.push(s.replace(t,n),":",o[s],";");return l.join("")}function i(o,s){var l,c;return function(d){var h,f,g,y;switch(typeof d){case"object":if(d){if(l==="object"){if(!s&&c!==d)for(f in c)f in d||(o[f]="")}else s?o.value="":o.cssText="";h=s?{}:o;for(f in d)y=d[f],g=typeof y=="number"&&!e.test(f)?y+"px":y,!s&&/^--/.test(f)?h.setProperty(f,g):h[f]=g;l="object",s?o.value=r(c=h):c=d;break}default:c!=d&&(l="string",c=d,s?o.value=d||"":o.cssText=d||"");break}}}}();/*! (c) Andrea Giammarchi - ISC */var cn=function(e,t){return t=n.prototype,t.ELEMENT_NODE=1,t.nodeType=111,t.remove=function(a){var r=this.childNodes,i=this.firstChild,o=this.lastChild;if(this._=null,a&&r.length===2)o.parentNode.removeChild(o);else{var s=this.ownerDocument.createRange();s.setStartBefore(a?r[1]:i),s.setEndAfter(o),s.deleteContents()}return i},t.valueOf=function(a){var r=this._,i=r==null;if(i&&(r=this._=this.ownerDocument.createDocumentFragment()),i||a)for(var o=this.childNodes,s=0,l=o.length;s<l;s++)r.appendChild(o[s]);return r},n;function n(a){var r=this.childNodes=e.call(a,0);this.firstChild=r[0],this.lastChild=r[r.length-1],this.ownerDocument=r[0].ownerDocument,this._=null}}([].slice);const hr=11,ot="ownerSVGElement",pn="connected",ur="dis"+pn,fr=we.prototype.nodeType,mr=cn.prototype.nodeType,dn=Ba({Event:Gt,WeakSet:Ft}),gr=e=>({html:e}),hn=(e,t)=>{switch(e.nodeType){case mr:return 1/t<0?t?e.remove(!0):e.lastChild:t?e.valueOf(!0):e.firstChild;case fr:return hn(e.render(),t);default:return e}},vr=e=>"ELEMENT_NODE"in e,$r=(e,t,n)=>a=>{n!==!!a&&((n=!!a)?e.setAttribute(t,""):e.removeAttribute(t))},yr=(e,t,n)=>n?a=>{try{e[t]=a}catch{e.setAttribute(t,a)}}:a=>{e[t]=a},un=(e,t)=>{t(e.placeholder),"text"in e?Promise.resolve(e.text).then(String).then(t):"any"in e?Promise.resolve(e.any).then(t):"html"in e?Promise.resolve(e.html).then(gr).then(t):Promise.resolve(ce.invoke(e,t)).then(t)},lt=e=>e!=null&&"then"in e,br=/^(?:form|list)$/i,Re=[].slice,wr=(e,t)=>e.ownerDocument.createTextNode(t);function We(e){return this.type=e,pr(this)}We.prototype={attribute(e,t,n){const a=ot in e;let r;if(t==="style")return dr(e,n,a);if(t.slice(0,1)===".")return yr(e,t.slice(1),a);if(t.slice(0,1)==="?")return $r(e,t.slice(1));if(/^on/.test(t)){let i=t.slice(2);return i===pn||i===ur?dn(e):t.toLowerCase()in e&&(i=i.toLowerCase()),o=>{r!==o&&(r&&e.removeEventListener(i,r,!1),r=o,o&&e.addEventListener(i,o,!1))}}else{if(t==="data"||!a&&t in e&&!br.test(t))return i=>{r!==i&&(r=i,e[t]!==i&&i==null?(e[t]="",e.removeAttribute(t)):e[t]=i)};if(t in ce.attributes)return i=>{const o=ce.attributes[t](e,i);r!==o&&(r=o,o==null?e.removeAttribute(t):e.setAttribute(t,o))};{let i=!1;const o=n.cloneNode(!0);return s=>{r!==s&&(r=s,o.value!==s&&(s==null?(i&&(i=!1,e.removeAttributeNode(o)),o.value=s):(o.value=s,i||(i=!0,e.setAttributeNode(o)))))}}}},any(e,t){const n={node:hn,before:e},a=ot in e?"svg":"html";let r=!1,i;const o=s=>{switch(typeof s){case"string":case"number":case"boolean":r?i!==s&&(i=s,t[0].textContent=s):(r=!0,i=s,t=ae(e.parentNode,t,[wr(e,s)],n));break;case"function":o(s(e));break;case"object":case"undefined":if(s==null){r=!1,t=ae(e.parentNode,t,[],n);break}default:if(r=!1,i=s,Zt(s))if(s.length===0)t.length&&(t=ae(e.parentNode,t,[],n));else switch(typeof s[0]){case"string":case"number":case"boolean":o({html:s});break;case"object":if(Zt(s[0])&&(s=s.concat.apply([],s)),lt(s[0])){Promise.all(s).then(o);break}default:t=ae(e.parentNode,t,s,n);break}else vr(s)?t=ae(e.parentNode,t,s.nodeType===hr?Re.call(s.childNodes):[s],n):lt(s)?s.then(o):"placeholder"in s?un(s,o):"text"in s?o(String(s.text)):"any"in s?o(s.any):"html"in s?t=ae(e.parentNode,t,Re.call(Jt([].concat(s.html).join(""),a).childNodes),n):"length"in s?o(Re.call(s)):o(ce.invoke(s,o));break}};return o},text(e){let t;const n=a=>{if(t!==a){t=a;const r=typeof a;r==="object"&&a?lt(a)?a.then(n):"placeholder"in a?un(a,n):"text"in a?n(String(a.text)):"any"in a?n(a.any):"html"in a?n([].concat(a.html).join("")):"length"in a?n(Re.call(a).join("")):n(ce.invoke(a,n)):r==="function"?n(a(e)):e.textContent=a??""}};return n}};var fn=typeof document!="object",ct=function(e){var t="raw",n=function(c){return/(Firefox|Safari)\/(\d+)/.test(c)&&!/(Chrom[eium]+|Android)\/(\d+)/.test(c)},a=n((document.defaultView.navigator||{}).userAgent),r=!(t in e)||e.propertyIsEnumerable(t)||!Object.isFrozen(e[t]);if(a||r){var i={},o=function(c){for(var d=".",h=0;h<c.length;h++)d+=c[h].length+"."+c[h];return i[d]||(i[d]=c)};if(r)ct=o;else{var s=new ne,l=function(c,d){return s.set(c,d),d};ct=function(c){return s.get(c)||l(c,o(c))}}}else fn=!0;return mn(e)};function mn(e){return fn?e:ct(e)}function gn(e){for(var t=arguments.length,n=[mn(e)],a=1;a<t;)n.push(arguments[a++]);return n}const vn=new ne,$n=(e,t)=>e==null?pe(t||"html"):yn(e,t||"html"),pe=e=>{let t,n,a;return function(){const r=gn.apply(null,arguments);return a!==r[0]?(a=r[0],n=new We(e),t=xr(n.apply(n,r))):n.apply(n,r),t}},yn=(e,t)=>{const n=t.indexOf(":");let a=vn.get(e),r=t;return-1<n&&(r=t.slice(n+1),t=t.slice(0,n)||"html"),a||vn.set(e,a={}),a[r]||(a[r]=pe(t))},xr=e=>{const t=e.childNodes,{length:n}=t;return n===1?t[0]:n?new cn(t):e},bn=new ne;function Er(){const e=bn.get(this),t=gn.apply(null,arguments);return e&&e.template===t[0]?e.tagger.apply(null,t):Ar.apply(this,t),this}function Ar(e){const t=ot in this?"svg":"html",n=new We(t);bn.set(this,{tagger:n,template:e}),this.textContent="",this.appendChild(n.apply(null,arguments))}/*! (c) Andrea Giammarchi (ISC) */const wn=e=>Er.bind(e),kr=ce.define,Cr=We.prototype;R.Component=we,R.bind=wn,R.define=kr,R.diff=ae,R.hyper=R,R.observe=dn,R.tagger=Cr,R.wire=$n,R._={WeakMap:ne,WeakSet:Ft},ja(pe);function R(e){return arguments.length<2?e==null?pe("html"):typeof e=="string"?R.wire(null,e):"raw"in e?pe("html")(e):"nodeType"in e?R.bind(e):yn(e,"html"):("raw"in e?pe("html"):R.wire).apply(null,arguments)}var w={hyperhtml:{wire:$n,bind:wn},globals:{infinity:Number.POSITIVE_INFINITY,pi:Math.PI,pi2:Math.PI*2,min:Math.min,max:Math.max,abs:Math.abs,trunc:Math.trunc,round:Math.round,sqrt:Math.sqrt,cos:Math.cos,sin:Math.sin,atan2:Math.atan2,random:Math.random,now:Date.now,window,requestAnimationFrame,document}};const{requestAnimationFrame:Mr}=w.globals,xn=e=>()=>Mr(xn(e()));var Sr=e=>xn(e)(),Tr=e=>{let t=e;const n=new Map;return{next:a=>{t=a(t),n.forEach(r=>r(t))},subscribe:a=>{a(t);const r={};return n.set(r,a),r},unsubscribe:a=>n.delete(a)}};let _e=[];const En=Tr(0),Or=e=>{_e.push(e),_e.length===6&&(En.next(()=>5e3/(e-_e[0])),_e=[])};var x={title:{},practice:{},start:{},main:{},pause:{},death:{},over:{}};const{wire:Ir}=w.hyperhtml;var K=(e,t)=>{const n=t(Ir());let a=e;return{render:()=>n(a),update:r=>{a={...a,...r(a)},n(a)}}};const{pi2:de,cos:Pr,sin:Dr,document:Lr}=w.globals,b=200,C=b*2+10,m=C/2,Z=Lr.createElement("canvas");Z.width=C,Z.height=C,Object.assign(Z.style,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"min(70vw, 70vh)",height:"min(70vw, 70vh)"});const u=Z.getContext("2d"),Ne=Z.cloneNode(),T=Ne.getContext("2d"),pt=K({width:0,opacity:1},e=>({opacity:t})=>(Z.style.opacity=t,Ne.style.opacity=t,e`${Z}${Ne}`)),Ue=()=>{Z.width=C,Ne.width=C,u.clip(u.arc(m,m,b,0,de))},dt=()=>{u.save(),u.beginPath(),u.fillStyle="black",u.arc(m,m,b,0,de),u.fill(),u.closePath(),u.restore()},ht=(e=1)=>{u.save(),u.beginPath(),u.strokeStyle="white",u.lineWidth=1,u.moveTo(m,m),u.lineTo(m+e*b,m),u.stroke(),u.closePath(),u.restore()},xe=(e,t=1,n="red")=>{u.save(),u.beginPath(),u.strokeStyle=n,u.lineWidth=1,u.moveTo(m,m);const a=t*b;u.lineTo(m+a*Pr(-e),m+a*Dr(-e)),u.stroke(),u.closePath(),u.restore()},ze=(e,t)=>{u.save(),u.beginPath();const n=u.createRadialGradient(e,t,0,e,t,20);n.addColorStop(0,"red"),n.addColorStop(1,"rgba(255, 0, 0, 0)"),u.fillStyle=n,u.arc(e,t,20,0,de),u.fill(),u.closePath(),u.restore()},je=()=>{u.save(),u.beginPath(),u.fillStyle="white",u.arc(m,m,3,0,de),u.fill(),u.closePath(),u.restore()},ut=(e=-de)=>{T.clearRect(0,0,C,C),T.save(),T.beginPath(),T.setLineDash([10,10]),T.strokeStyle="white",T.lineWidth=3,T.arc(m,m,b,0,e,!0),T.stroke(),T.closePath(),T.restore()},An=e=>{T.save(),T.beginPath(),T.setLineDash([10,10]),T.strokeStyle="magenta",T.lineWidth=3,T.arc(m,m,b,0,-e*de,!0),T.stroke(),T.closePath(),T.restore()};var p={easy:{},normal:{},hard:{}};let ft=[];const q={mode:{},start:{},practice:{},stage:{}},mt=(e,t)=>ft.push({id:e,param:t}),kn=()=>ft.map(({id:e,param:t})=>({id:e,param:t})),gt=()=>{ft=[]},{max:Rr}=w.globals,Wr={startOpacity:0,practiceOpacity:0,mode:p.normal,fontSize:0},Cn=e=>()=>mt(e),Fe="min(3vw, 3vh)",_r=e=>({display:e>0?"block":"none",position:"absolute",left:"50%",top:"calc(50vh + min(10vw, 10vh))",transform:"translate(-50%, 0)",textAlign:"center",lineHeight:`calc(${Fe} * 1.5)`,fontFamily:"serif"}),Mn=e=>({outline:"none",border:"none",margin:`calc(${Fe} / 4) 0 calc(${Fe} / 2)`,fontSize:Fe,color:"white",backgroundColor:"transparent",opacity:e}),Sn=K(Wr,e=>({startOpacity:t,practiceOpacity:n})=>e`<div style=${_r(Rr(t,n))}><button style=${Mn(t)} onClick=${Cn(q.start)}>Start Game</button><br><button style=${Mn(n)} onClick=${Cn(q.practice)}>Practice</button><br></div>`),Nr={opacity:0,mode:p.normal},vt=e=>()=>mt(q.mode,e),Ur=e=>({display:e>0?"block":"none",position:"absolute",left:"50%",top:"calc(50vh + min(25vw, 25vh))",transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:e}),Tn="min(2.6vw, 2.6vh)",$t=e=>({margin:`0 calc(${Tn} / 4)`,outline:"none",border:`2px solid ${e?"white":"transparent"}`,fontSize:Tn,color:"white",backgroundColor:"transparent"}),Ee=K(Nr,e=>({opacity:t,mode:n,top:a})=>e`<div style=${Ur(t)}><button style=${$t(n===p.easy)} onClick=${vt(p.easy)}>EASY</button><button style=${$t(n===p.normal)} onClick=${vt(p.normal)}>NORMAL</button><button style=${$t(n===p.hard)} onClick=${vt(p.hard)}>HARD</button></div>`),{pi2:zr,trunc:jr}=w.globals,Fr={level:1,playerAngle:0,appearance:0},he="min(70vw, 70vh)",On={position:"absolute",left:`calc(50vw - ${he} * 0.525)`,top:`calc(50vh - ${he} * 0.525)`,width:`calc(${he} * 0.2)`,height:`calc(${he} * 0.2)`},ue=K(Fr,e=>({level:t,playerAngle:n,appearance:a})=>{const r=a*100,i=r/2,o={...On,backgroundColor:"#966",clipPath:`polygon(100% 0, 50% 0, ${50-i}% ${i}%, ${100-r}% ${r}%)`},s={...On,color:"white",fontSize:`calc(${he} * 0.04)`,margin:`calc(${he} * 0.02)`,opacity:a},l=jr(n/zr*100);return e`<div style="${o}"></div><div style="${s}">Lv.${t}<br>${l}%</div>`}),{trunc:In}=w.globals,Br={mode:p.normal,fpsText:"60.00",appearance:0},Pn=new Map([[p.easy,"EASY"],[p.normal,"NORMAL"],[p.hard,"HARD"]]),re="min(70vw, 70vh)",Dn={position:"absolute",left:`calc(50vw - ${re} * 0.525)`,top:`calc(50vh + ${re} * 0.325)`,width:`calc(${re} * 0.2)`,height:`calc(${re} * 0.2)`},ie=K(Br,e=>({mode:t,fpsText:n,appearance:a})=>{const r=a*100,i=r/2,o={...Dn,backgroundColor:"#696",clipPath:`polygon(0 0, 0 50%, ${i}% ${50+i}%, ${r}% ${r}%)`},s={position:"absolute",bottom:`calc(${re} * 0.02)`,left:`calc(${re} * 0.02)`,color:"white",fontSize:`calc(${re} * 0.04)`,opacity:a};return e`<div style="${o}"></div><div style="${Dn}"><div style="position:relative;width:100%;height:100%"><div style="${s}">${Pn.get(t)}<br>${n}FPS</div></div></div>`});En.subscribe(e=>ie.update(()=>{const t=In(e*100);return{fpsText:`${In(t/100)}.${(t%100).toString().padStart(2,"0")}`}}));const qr={deaths:0,appearance:0},se="min(70vw, 70vh)",Ln={position:"absolute",left:`calc(50vw + ${se} * 0.325)`,top:`calc(50vh + ${se} * 0.325)`,width:`calc(${se} * 0.2)`,height:`calc(${se} * 0.2)`},Ae=K(qr,e=>({deaths:t,appearance:n})=>{const a=n*100,r=a/2,i={...Ln,backgroundColor:"#669",clipPath:`polygon(50% 100%, ${50+r}% ${100-r}%, ${a}% ${100-a}%, 0 100%)`},o={position:"absolute",bottom:`calc(${se} * 0.02)`,right:`calc(${se} * 0.02)`,textAlign:"right",fontSize:`calc(${se} * 0.04)`,color:"white",opacity:n};return e`<div style="${i}"></div><div style="${Ln}"><div style="position:relative;width:100%;height:100%"><div style="${o}">${t}<br>death${t>1?"s":""}</div></div></div>`}),Gr={name:"-",appearance:0},oe="min(70vw, 70vh)",Rn={position:"absolute",left:`calc(50vw + ${oe} * 0.325)`,top:`calc(50vh - ${oe} * 0.525)`,width:`calc(${oe} * 0.2)`,height:`calc(${oe} * 0.2)`},ke=K(Gr,e=>({name:t,appearance:n})=>{const a=n*100,r=a/2,i={...Rn,backgroundColor:"#969",clipPath:`polygon(100% 50%, ${100-r}% ${50-r}%, ${100-a}% ${100-a}%, 100% 100%)`},o={position:"absolute",top:`calc(${oe} * 0.02)`,right:`calc(${oe} * 0.02)`,textAlign:"right",fontSize:`calc(${oe} * 0.04)`,color:"white",opacity:n};return e`<div style="${i}"></div><div style="${Rn}"><div style="position:relative;width:100%;height:100%"><div style="${o}">Event<br>${t||"-"}</div></div></div>`});var A={swimOrb:{},linearOrb:{},lazer:{},landolt:{}};const{pi:Hr,pi2:Wn,min:yt,cos:Be,sin:qe}=w.globals,Ge=(e,t,n,a,r)=>{const i=e-n,o=t-a,s=r/2+3;return i*i+o*o<=s*s},_n=(e,t,n,a,r,i)=>{e.save(),e.beginPath(),e.globalAlpha=.5,e.fillStyle=i,e.arc(n,a,r*(2-t/30),0,Wn),e.fill(),e.closePath(),e.restore()},Nn=(e,t,n,a,r,i,o)=>{e.save(),e.beginPath(),e.globalAlpha=o,e.fillStyle=r,e.strokeStyle=i,e.arc(t,n,a,0,Wn),e.fill(),e.stroke(),e.closePath(),e.restore()},U=(e,t,n,a,r=0,i="lime")=>({id:A.swimOrb,time:r,angle:e,radius:t,speed:n,width:a,color:i}),Yr=(e,{time:t,angle:n,radius:a,width:r,color:i})=>{const o=m+a*Be(n),s=m+a*qe(n);if(t<=30&&_n(e,t,o,s,r,i),t>=15){const l=yt(yt((t-15)/30,1),(300-t)/30);Nn(e,o,s,r,"white",i,l)}},Xr=(e,t,n)=>{const{time:a,angle:r,radius:i,speed:o,width:s}=e,l=m+i*Be(r),c=m+i*qe(r);return{nextEnemies:a>=300?[]:[{...e,angle:r+(a<45?0:o),time:a+1}],hit:a<45||a>270?!1:Ge(t,n,l,c,s)}},J=(e,t,n,a,r,i,o,s=0)=>({id:A.linearOrb,time:s,x:e,y:t,angle:n,speed:a,width:r,fillColor:i,strokeColor:o}),Un=(e,{time:t,x:n,y:a,width:r,fillColor:i,strokeColor:o})=>{if(t<=30&&_n(e,t,n,a,r,o),t>=15){const s=yt((t-15)/30,1);Nn(e,n,a,r,i,o,s)}},zn=(e,t,n)=>{const{time:a,x:r,y:i,angle:o,speed:s,width:l}=e;if(a<45)return{nextEnemies:[{...e,time:a+1}],hit:!1};const c=r+s*Be(o),d=i+s*qe(o),h=c-m,f=d-m,g=b+l/2;return h*h+f*f>g*g?{nextEnemies:[],hit:!1}:{nextEnemies:[{...e,x:c,y:d,time:a+1}],hit:Ge(t,n,r,i,l)}},Kr=(e,t,n,a,r,i=0)=>({id:A.orbToCenter,time:i,x:m+b*Be(e),y:m+b*qe(e),angle:e+Hr,speed:t,width:n,fillColor:a,strokeColor:r}),Zr=(e,t,n)=>{const{x:a,y:r,speed:i}=e;return Ge(m,m,a,r,i-3)?{nextEnemies:[],hit:!1}:zn(e,t,n)};var Q={none:{},rotate:{},gravity:{},swap:{},mirror:{},memorial:{}};const jn=e=>e;var fe=({id:e,name:t,wait:n,duration:a,inputEffect:r=jn,afterEffect:i=jn,props:o})=>({id:e,name:t,wait:n,waitTime:0,duration:a,eventTime:0,inputEffect:r,afterEffect:i,props:o});const{infinity:Jr}=w.globals;var D=()=>fe({id:Q.none,name:"-",wait:Jr,duration:0,props:{}});const{max:Qr,cos:Vr,sin:ei}=w.globals,{swimOrb:bt,linearOrb:ti,orbToCenter:ni}=A,z=e=>e.flatMap(t=>t.id===bt?[{...t,time:Qr(t.time,270)}]:[]),_=(e,t,n)=>a=>{const{id:r,angle:i,radius:o}=a;if([bt,ti,ni].includes(r)){const{x:s,y:l}=r===bt?{x:m+o*Vr(i),y:m+o*ei(i)}:a,c=s-t,d=l-n,h=60-e;return c*c+d*d<=h*h?[]:[a]}return[a]},Ce=(e,t)=>(n,a,r,i)=>{const{id:o,eventTime:s,duration:l}=i;return o===Q.none?r===30?{nextEvt:e(n,a),nextEvtTime:r+1}:{nextEvt:i,nextEvtTime:r+1}:o!==Q.none&&s<l?{nextEvt:i,nextEvtTime:r+1}:{nextEvt:D(),nextEvtTime:-t.get(n)}},ai=(e,t,n)=>(n.save(),n.resetTransform(),n.translate(m,m),n.rotate(t*e.speed),n.translate(-m,-m),n.drawImage(n.canvas,0,0),n.restore(),e);var Fn=(e,t)=>fe({id:Q.rotate,name:"\u6D41\u8EE2",wait:300,duration:t,afterEffect:ai,props:{speed:e}});const{document:ri,min:Bn,max:qn,abs:ii,cos:wt,sin:xt}=w.globals,Et=(e,t,n,a=0)=>({id:A.lazer,time:a,x:e,y:t,angle:n}),Gn=e=>qn(C*2*((e-60)/15),0),Hn=e=>qn(Bn(e-75,155-e,15),1),si=(e,t,n,a,r,i)=>{const o=e-n,s=t-a,l=o*wt(r)+s*xt(r),c=ii(-o*xt(r)+s*wt(r))-3;return l>=0&&l<=Gn(i)&&c<=Hn(i)/2},oi=({time:e,x:t,y:n,angle:a},r,i)=>({nextEnemies:e>=185?[]:[Et(t,n,a,e+1)],hit:e>45&&e<155&&si(r,i,t,n,a,e)}),li=(e,t,n,a)=>{const r=1-t/30;e.save(),e.fillStyle=`rgba(255, 255, 0, ${r/2})`,e.beginPath();const i=20+r*40,o=i/2;e.fillRect(n-o,a-o,i,i),e.restore()},He=ri.createElement("canvas");He.width=20,He.height=20;const O=He.getContext("2d");O.strokeStyle="black",O.lineWidth=1,O.beginPath(),O.fillStyle="#ff0",O.moveTo(0,0),O.lineTo(8,2),O.lineTo(8,18),O.lineTo(0,20),O.closePath(),O.fill(),O.stroke(),O.fillStyle="#66f",O.fillRect(5,5,15,10),O.strokeRect(5,5,15,10),O.beginPath(),O.moveTo(10,10),O.lineTo(20,10),O.closePath(),O.stroke();const ci=(e,t,n,a)=>{e.save(),e.strokeStyle="rgba(255, 255, 255, 0.3)",e.lineWidth=1,e.beginPath(),e.moveTo(t,n),e.lineTo(t+C*2*wt(a),n+C*2*xt(a)),e.closePath(),e.stroke(),e.restore()},pi=(e,t,n,a)=>{e.save();const r=Hn(a),i=e.createLinearGradient(t,n-r,t,n+r);i.addColorStop(0,"rgba(255, 255, 0, 0)"),i.addColorStop(.25,"rgba(255, 255, 0, 1)"),i.addColorStop(.75,"rgba(255, 255, 0, 1)"),i.addColorStop(1,"rgba(255, 255, 0, 0)"),e.fillStyle=i,e.fillRect(t,n-r,Gn(a),r*2),e.restore()},di=(e,{time:t,x:n,y:a,angle:r})=>{t>=15&&t<=60&&ci(e,n,a,r),e.save(),e.translate(n,a),e.rotate(r),e.translate(-n,-a),t<30&&li(e,t,n,a),t>15&&(e.globalAlpha=Bn((t-15)/30,(185-t)/30,1),e.drawImage(He,n-10,a-10)),t>60&&t<155&&(e.globalAlpha=1,pi(e,n,a,t)),e.restore()},{max:At}=w.globals,hi=(e,t)=>{const{radius:n,time:a}=e;return a<30?e:n===0?{...e,time:At(a,270)}:{...e,radius:At(n-t,0)}},ui=(e,{props:{gravity:t}})=>{const{pr:n,enemies:a}=e;return{...e,pr:At(n-t,10),enemies:a.map(r=>r.id!==A.swimOrb?r:hi(r,t))}};var Ye=(e,t)=>fe({id:Q.gravity,name:"\u91CD\u529B",wait:300,duration:t,inputEffect:ui,props:{gravity:e,lines:[]}});const{pi:Yn,max:Xn,sqrt:fi,cos:Kn,sin:Zn}=w.globals,Jn=(e,t,n,a,r,i,o,s)=>({id:A.landolt,x:e,y:t,angle:n,radius:a,angleSpeed:r,radiusSpeed:i,holeWidth:o,lineWidth:s}),mi=(e,{x:t,y:n,angle:a,radius:r,holeWidth:i,lineWidth:o})=>{e.save(),e.beginPath();const s=Xn(r-o,0),l=Xn(r+o,0),c=e.createRadialGradient(t,n,s,t,n,l);c.addColorStop(0,"rgba(200, 200, 200, 0.5)"),c.addColorStop(.25,"rgba(200, 200, 200, 1)"),c.addColorStop(.75,"rgba(200, 200, 200, 1)"),c.addColorStop(1,"rgba(200, 200, 200, 0.5)"),e.strokeStyle=c,e.lineWidth=o*2,e.lineCap="round",e.arc(t,n,r,a-i/2,a+i/2,!0),e.stroke(),e.restore()},gi=(e,t,n,a)=>{const r=e-m,i=t-m;return n>fi(r*r+i*i)+b+a*2},vi=(e,t,n,a,r,i,o,s)=>{const l=o-e,c=s-t,d=l*l+c*c,h=a-i/2-3,f=a+i/2+3;if(d<h*h||d>f*f)return!1;const g=n-r/2+Yn/2,y=n+r/2-Yn/2;return Kn(g)*l+Zn(g)*c<0||Kn(y)*l+Zn(y)*c<0},$i=(e,t,n)=>{const{x:a,y:r,angle:i,radius:o,angleSpeed:s,radiusSpeed:l,holeWidth:c,lineWidth:d}=e;return{nextEnemies:gi(a,r,o,d)?[]:[{...e,angle:i+s,radius:o+l}],hit:vi(a,r,i,o,c,d,t,n)}},{pi:yi,sqrt:bi,cos:Qn,sin:Vn,atan2:ea}=w.globals,ta={inner:!1,outer:!1,quick:!1,brake:!1},wi=(e,{eventTime:t,duration:n,props:{speed:a}})=>{if(t>=n)return{enemies:e.enemies.map(v=>v.id===A.swimOrb?{...v,color:"lime"}:v)};const{inner:r,outer:i,quick:o,brake:s,enemies:l}=e,c=i-r,d=s-o;if(c===0&&d===0)return{...ta,enemies:l.map(v=>v.id===A.swimOrb?{...v,color:"red"}:v)};const h=ea(d,c),f=Qn(h),g=Vn(h),y=a*f,$=a*g;return{...ta,enemies:l.map(v=>{if(v.id!==A.swimOrb)return v;const{angle:E,radius:k}=v,M=k*Qn(E)+y,I=k*Vn(E)+$,S=ea(I,M),P=bi(M*M+I*I),$e=b+v.width;return{...v,angle:P>$e?S+yi:S,radius:P>$e?$e*2-P:P,color:"red"}})}};var Xe=(e,t)=>fe({id:Q.swap,name:"\u904D\u6191",wait:300,duration:t,inputEffect:wi,props:{speed:e}});const{pi:Ke,min:xi,cos:na,sin:aa,random:Ei}=w.globals,Ai=({playerInvincible:e,pa:t,pr:n,enemies:a},r)=>{const{time:i}=r.props,o=xi(i/60,1);xe(t-Ke,o,"cyan");const s=m+n*na(-t+Ke),l=m+n*aa(-t+Ke);return(o===1&&e===0||Ei()<.5)&&ze(s,l),{pa:o===1&&e===0&&a.some(({id:c,angle:d,radius:h,width:f})=>{if(c===A.swimOrb){const g=m+h*na(d),y=m+h*aa(d);return Ge(g,y,s,l,f)}return!1})?t-Ke:t,evt:{...r,props:{time:i+1}},enemies:e>0?a.flatMap(_(e,s,l)):a}};var kt=e=>fe({id:Q.mirror,name:"\u88CF\u73FE",wait:300,duration:e,inputEffect:Ai,props:{time:0}});const{pi2:ki,infinity:Ci}=w.globals,Mi=({deaths:e,pa:t},n)=>{const{props:{done:a,speed:r}}=n;return{pa:a?t+r:t+r-e*ki,evt:{...n,props:{done:!0,speed:r+1e-4}}}};var Si=()=>fe({id:Q.memorial,name:"\u56DE\u5411",wait:300,duration:Ci,inputEffect:Mi,props:{done:!1,speed:0}});const{pi:V,pi2:Ti,infinity:ra,max:Oi,trunc:Ii,cos:Ct,sin:Mt,atan2:Pi,random:G}=w.globals,Di=new Map([[p.easy,40],[p.normal,20],[p.hard,10]]),Li=new Map([[p.easy,()=>6+G()*2],[p.normal,()=>6+G()*3],[p.hard,()=>6+G()*4]]),Ri=new Map([[p.easy,()=>-.008*G()],[p.normal,()=>-.01*G()],[p.hard,()=>-.016*G()]]),Wi=(e,t)=>U(-t+.4+G()*V*1.6,G()*b,Ri.get(e)(),Li.get(e)()),_i=new Map([[p.easy,.02],[p.normal,.035],[p.hard,.05]]),Ni=new Map([[p.easy,500],[p.normal,350],[p.hard,250]]),Ui=e=>[...Array(4)].map((t,n)=>{const a=e+n*(V/2);return Et(m+b*Ct(a),m+b*Mt(a),a+1.125*V)}),zi=new Map([[p.easy,1],[p.normal,1.3],[p.hard,1.7]]),ji=new Map([[p.easy,500],[p.normal,450],[p.hard,350]]),Fi=new Map([[p.easy,{speed:.3,hole:V/1.2,width:5}],[p.normal,{speed:.35,hole:V/1.3,width:6}],[p.hard,{speed:.4,hole:V/2,width:7}]]),Bi=(e,t)=>{const{speed:n,hole:a,width:r}=Fi.get(e),i=-t-V*.7,o=m+b*.5*Ct(i),s=m+b*.5*Mt(i);return Jn(o,s,-t,1,.03,n,a,r)},qi=new Map([[p.easy,1],[p.normal,1.5],[p.hard,2]]),Gi=new Map([[p.easy,35],[p.normal,20],[p.hard,15]]),ia=["red","yellow","lime","cyan","blue","magenta"],Hi=(e,t,n,a)=>{const r=m+b*Ct(e),i=m+b*Mt(e),o=Pi(n-i,t-r);return J(r,i,o,1,6,"white",ia[a])},Yi=new Map([[p.easy,400],[p.normal,350],[p.hard,200]]),Xi=new Map([[p.easy,{width:6,speed:.08}],[p.normal,{width:7,speed:.013}],[p.hard,{width:8,speed:.017}]]),Ki=(e,t,n,a)=>{const{width:r,speed:i}=Xi.get(e),o=r*3.5,s=-t-V*.6,l=(n+(a?r:0))%o;return[...Array(Ii(b/o)+1)].map((c,d)=>U(s,l+d*o,i,r,0,"gray"))},Zi=new Map([[p.easy,150],[p.normal,100],[p.hard,80]]),Ji=new Map([[p.easy,{speed:.8,length:8}],[p.normal,{speed:.9,length:12}],[p.hard,{speed:1,length:16}]]),Qi=(e,t)=>{const{speed:n,length:a}=Ji.get(e),r=Ti/a;return[...Array(a)].map((i,o)=>J(m,m,t+o*r,n,6,"white","blue"))},Vi=Ce((e,t)=>t===1?{...Fn((G()<.5?-1:1)*_i.get(e),ra),wait:120}:t===3?{...Ye(zi.get(e),ra),wait:120}:t===5?{...Xe(qi.get(e),e===p.hard?30:60),wait:60}:t===9?Si():D(),new Map([[p.easy,0],[p.normal,0],[p.hard,0]])),es=(e,t)=>e===6?t.map(n=>n.id===A.swimOrb?{...n,color:"lime"}:n):e===5?t.filter(({id:n})=>n!==A.landolt):e===8?t.map(n=>n.id===A.lazer?{...n,time:Oi(n.time,155)}:n):e===9?z(t):t,St=(e=30,t=0,n=0,a=0,r=0,i=0,o=0,s=0,l=!1,c=0,d=0)=>(h,f,g,{enemies:y,px:$,py:v,pa:E,pr:k,playerInvincible:M,evt:I})=>{const S=(f-1)%10,P=t>=Di.get(h),$e=S>=2&&S<=7&&n>=Ni.get(h),Ca=S===4&&a>=ji.get(h),Ve=S>=6&&r>=Gi.get(h),zt=S>=7&&s>=Yi.get(h),jt=S>=8&&c>=Zi.get(h),rl=S===9?[]:[P?[Wi(h,E)]:[],$e?Ui(-E):[],Ca?[Bi(h,E)]:[],Ve?[Hi(i,$,v,o)]:[],zt?Ki(h,E,k,l):[],jt?Qi(h,d):[]].flat(),Ma=(M>0?y.flatMap(_(M,$,v)):y).concat(rl),{nextEvt:il,nextEvtTime:sl}=S%2?Vi(h,S,e,I):{nextEvt:D(),nextEvtTime:30};return{enemies:g?es(S,Ma):Ma,nextStage:St(sl,P?0:t+1,$e?0:n+1,Ca?0:a+1,Ve?0:r+1,Ve?i+.5:i,Ve?(o+1)%ia.length:o,zt?0:s+1,zt?!l:l,jt?0:c+1,jt?d:d-.3),evt:il}},{pi:sa,pi2:ts,trunc:oa}=w.globals,ns=new Map([[p.easy,e=>200-e*10],[p.normal,e=>160-e*10],[p.hard,e=>120-e*8]]),la=new Map([[p.easy,e=>({length:6+oa(e/2),width:6,speed:1})],[p.normal,e=>({length:7+e,width:6,speed:1})],[p.hard,e=>({length:10+oa(e/2),width:7,speed:1.5})]]),ca=(e,t,n,a)=>{const{length:r,width:i,speed:o}=la.get(e)(t),s=a?"blue":"magenta";return[...Array(r)].map((l,c)=>{const d=n+ts*(c/r)+(a?0:sa/r);return a?J(m,m,d,o,i,"white",s):Kr(d,o,i,"white",s)})},Tt=(e=0,t=0)=>(n,a,r,{enemies:i,px:o,py:s,pa:l,pr:c,playerInvincible:d})=>{const h=(a-1)%10,f=ns.get(n)(h),g=[d>0?i.flatMap(_(d,o,s)):i,e===f/2?ca(n,h,t,!0):[],e>=f&&(n!==p.hard||h>=5)?ca(n,h,t,!1):[],n===p.hard&&e>=f?[U(-l-.63,c,.01,6)]:[]].flat();return r&&a%10===1?{enemies:z(g),nextStage:St(),evt:D()}:{enemies:g,nextStage:Tt(e>=f?0:e+1,e>=f?t+sa/la.get(n)(h).length*1.2:t),evt:D()}},{pi:as,random:rs}=w.globals,is=new Map([[p.easy,e=>200-e*20],[p.normal,e=>175-e*20],[p.hard,e=>160-e*18]]),ss=new Map([[p.easy,e=>({length:5,width:8,speed:.01+e*.0015})],[p.normal,e=>({length:5,width:9,speed:.013+e*.002})],[p.hard,e=>({length:7,width:8.3,speed:.016+e*.0026})]]),os=(e,t,n,a)=>{const r=-n+(a?1:-1)*as*(.3+.4*rs()),{length:i,width:o,speed:s}=ss.get(e)(t),l=(a?-1:1)*s;return[...Array(i+1-a)].map((c,d)=>U(r,b*((d+a*.5)/i),l,o))},ls=new Map([[p.easy,e=>kt(200+e*10)],[p.normal,e=>kt(250+e*25)],[p.hard,e=>kt(300+e*25)]]),cs=new Map([[p.easy,200],[p.normal,100],[p.hard,0]]),ps=Ce((e,t)=>ls.get(e)(t),cs),Ot=(e=130,t=0,n=0)=>(a,r,i,{enemies:o,evt:s,px:l,py:c,pa:d,playerInvincible:h})=>{const f=(r-1)%10,g=e>=is.get(a)(f%5),y=[h>0?o.flatMap(_(h,l,c)):o,g?os(a,f%5,d,t):[]].flat(),{nextEvt:$,nextEvtTime:v}=f<5?{nextEvt:s,nextEvtTime:n}:ps(a,f,n,s);return i&&r%10===1?{enemies:z(y),nextStage:Tt(),evt:D()}:{enemies:y,nextStage:Ot(g?0:e+1,g?1-t:t,v),evt:$}},{pi:ds,cos:hs,sin:us,atan2:fs}=w.globals,ms=new Map([[p.easy,e=>30-e],[p.normal,e=>20-e],[p.hard,e=>15-e]]),gs=new Map([[p.easy,6],[p.normal,5],[p.hard,6]]),pa=["red","yellow","lime","cyan","blue","magenta"],vs=(e,t,n,a,r,i)=>{const o=m+b*hs(a),s=m+b*us(a),l=fs(n-s,t-o);return e<5?[J(o,s,l,1,r,"white",i)]:[J(o,s,l,1,r,"white",i),J(m*2-o,m*2-s,l+ds,1,r,"white",i)]},It=(e=0,t=0,n=0)=>(a,r,i,{enemies:o,px:s,py:l,playerInvincible:c,evt:d})=>{const h=(r-1)%10,f=e>=ms.get(a)(h%5),g=[c>0?o.flatMap(_(c,s,l)):o,f?vs(h,s,l,t,gs.get(a),pa[n]):[]].flat();return i&&r%10===1?{enemies:z(g),nextStage:Ot(),evt:D()}:{enemies:g,nextStage:It(f?0:e+1,t+.02,f?(n+1)%pa.length:n),evt:d}},{pi:da,random:ee}=w.globals,$s=new Map([[p.easy,e=>30-e*2],[p.normal,e=>25-e*2],[p.hard,e=>15-e]]),ys=new Map([[p.easy,()=>-.008+.016*ee()],[p.normal,()=>-.01+.02*ee()],[p.hard,()=>-.016+.032*ee()]]),bs=new Map([[p.easy,()=>6+ee()*3],[p.normal,()=>7+ee()*4],[p.hard,()=>8+ee()*5]]),ws=new Map([[p.easy,e=>Xe(1,150+e*10)],[p.normal,e=>Xe(1.5,200+e*20)],[p.hard,e=>Xe(2,250+e*30)]]),xs=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),Es=Ce((e,t)=>ws.get(e)(t),xs),Pt=(e=0,t=0)=>(n,a,r,{enemies:i,evt:o,px:s,py:l,pa:c,playerInvincible:d})=>{const h=(a-1)%10,f=e>=$s.get(n)(h),g=[d>0?i.flatMap(_(d,s,l)):i,f?[U(-c+da*.2+ee()*da*1.6,b*ee(),ys.get(n)(),bs.get(n)())]:[]].flat(),{nextEvt:y,nextEvtTime:$}=Es(n,h,t,o);return r&&a%10===1?{enemies:z(g),nextStage:It(),evt:D()}:{enemies:g,nextStage:Pt(f?0:e+1,$),evt:y}},{pi:Me,pi2:As,cos:ks,sin:Cs,random:j}=w.globals,Ms=new Map([[p.easy,e=>60-e*3],[p.normal,e=>54-e*4],[p.hard,e=>26-e*2]]),Ss=new Map([[p.easy,()=>-.008*j()],[p.normal,()=>-.01*j()],[p.hard,()=>-.01*j()]]),Ts=new Map([[p.easy,()=>6+j()*2],[p.normal,()=>6+j()*3],[p.hard,()=>6+j()*4]]),Os=new Map([[p.easy,e=>500-e*20],[p.normal,e=>300-e*30],[p.hard,e=>250-e*30]]),Is=new Map([[p.easy,{speed:.4,hole:Me/1.3,width:5}],[p.normal,{speed:.5,hole:Me/1.5,width:6}],[p.hard,{speed:.6,hole:Me/2.3,width:7}]]),Ps=(e,t,n)=>{const{speed:a,hole:r,width:i}=Is.get(e),o=m+(t<=45?0:b/2*ks(n)),s=m+(t<=45?0:b/2*Cs(n));return Jn(o,s,j()*As,1,j()<.5?.03:-.03,a,r,i)},Dt=(e=0,t=100)=>(n,a,r,{enemies:i,pa:o,px:s,py:l,playerInvincible:c})=>{const d=e>=Ms.get(n)(a-40),h=t>=Os.get(n)((a-1)%5),f=[c>0?i.flatMap(_(c,s,l)):i,d?[U(-o+.4+j()*Me*1.6,b*j(),Ss.get(n)(),Ts.get(n)())]:[],h?[Ps(n,a,Me-o)]:[]].flat();return r&&a%10===1?{enemies:z(f),nextStage:Pt(),evt:D()}:{enemies:f,nextStage:Dt(d?0:e+1,h?0:t+1),evt:D()}},{pi:Ds,pi2:ha,min:Ls,random:H}=w.globals,Rs=new Map([[p.easy,e=>28-e*2],[p.normal,e=>25-e*2],[p.hard,e=>15-e]]),Ws=new Map([[p.easy,()=>-.008*H()],[p.normal,()=>-.01*H()],[p.hard,()=>-.018*H()]]),_s=new Map([[p.easy,()=>6+H()*2],[p.normal,()=>6+H()*3],[p.hard,()=>6+H()*4]]),Ns=new Map([[p.easy,e=>Ye(.5+e*.05,200)],[p.normal,e=>Ye(.5+e*.08,200)],[p.hard,e=>Ye(.5+e*.12,200)]]),Us=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),zs=Ce((e,t)=>Ns.get(e)(t),Us),Lt=(e=0,t=0,n=0)=>(a,r,i,{enemies:o,evt:s,px:l,py:c,pa:d,playerInvincible:h})=>{const f=(r-1)%10,g=e>=Rs.get(a)(f),y=a!==p.easy&&f>5&&t>=250-f*10,$=[h>0?o.flatMap(_(h,l,c)):o,g?[U(-d+.4+H()*Ds*1.6,b*Ls(.7+H()*.4,1),Ws.get(a)(),_s.get(a)())]:[],y?new Array(10).fill(H()*ha).map((k,M)=>J(m,m,M/10*ha+k,2,7,"white","blue")):[]].flat(),{nextEvt:v,nextEvtTime:E}=zs(a,f,n,s);return i&&r%10===1?{enemies:z($),nextStage:Dt(),evt:D()}:{enemies:$,nextStage:Lt(g?0:e+1,y?0:t+1,E),evt:v}},{pi:me,cos:js,sin:Fs,random:N}=w.globals,Bs=new Map([[p.easy,e=>30-e*2],[p.normal,e=>27-e*2],[p.hard,e=>14-e]]),qs=new Map([[p.easy,()=>-.008*N()],[p.normal,()=>-.01*N()],[p.hard,()=>-.01*N()]]),Gs=new Map([[p.easy,()=>6+N()*2],[p.normal,()=>6+N()*3],[p.hard,()=>6+N()*4]]),Hs=new Map([[p.easy,{wait:e=>300-e*10,radius:.7,angle:e=>e+me*(.9+N()*.2)}],[p.normal,{wait:e=>200-e*10,radius:.8,angle:e=>e+me*(.9+N()*.2)}],[p.hard,{wait:e=>150-e*10,radius:.95,angle:e=>e+me*(.8+N()*.4)}]]),Rt=(e=0,t=0,n=me/3)=>(a,r,i,{enemies:o,px:s,py:l,pa:c,playerInvincible:d})=>{const h=e>=Bs.get(a)(r-20),{wait:f,radius:g,angle:y}=Hs.get(a),$=t>=f(r-20),v=[d>0?o.flatMap(_(d,s,l)):o,h?[U(-c+.4+N()*me*1.6,N()*b,qs.get(a)(),Gs.get(a)())]:[],$?[Et(m+g*b*js(n),m+g*b*Fs(n),y(n))]:[]].flat();return i&&r%10===1?{enemies:z(v),evt:D(),nextStage:Lt()}:{enemies:v,evt:D(),nextStage:Rt(h?0:e+1,$?0:t+1,$?n+me/3:n)}},{pi:Ys,pi2:Xs,random:Y}=w.globals,Ks=new Map([[p.easy,e=>28-e*2],[p.normal,e=>25-e*2],[p.hard,e=>12-e]]),Zs=new Map([[p.easy,()=>-.008*Y()],[p.normal,()=>-.01*Y()],[p.hard,()=>-.02*Y()]]),Js=new Map([[p.easy,()=>6+Y()*2],[p.normal,()=>6+Y()*3],[p.hard,()=>6+Y()*4]]),Qs=new Map([[p.easy,e=>({speed:.02,rotateCount:e>5?2:1})],[p.normal,e=>({speed:.02,rotateCount:e>5?3:2})],[p.hard,e=>({speed:.05,rotateCount:e>5?4:2})]]),Vs=new Map([[p.easy,600],[p.normal,300],[p.hard,0]]),eo=Ce((e,t)=>{const{speed:n,rotateCount:a}=Qs.get(e)(t);return Fn((Y()<.5?-1:1)*n,Xs/n*a)},Vs),Wt=(e=0,t=0)=>(n,a,r,{enemies:i,evt:o,px:s,py:l,pa:c,playerInvincible:d})=>{const h=(a-1)%10,f=e>=Ks.get(n)(h),g=[d>0?i.flatMap(_(d,s,l)):i,f?[U(-c+.4+Y()*Ys*1.6,Y()*b,Zs.get(n)(),Js.get(n)())]:[]].flat(),{nextEvt:y,nextEvtTime:$}=eo(n,h,t,o);return r&&a%10===1?{enemies:z(g),nextStage:Rt(),evt:D()}:{enemies:g,nextStage:Wt(f?0:e+1,$),evt:y}},{pi:to,pi2:no,random:L}=w.globals,ua=new Map([[p.easy,()=>6+L()*2],[p.normal,()=>6+L()*3],[p.hard,()=>6+L()*4]]),ao=new Map([[p.easy,e=>30-e*2],[p.normal,e=>27-e*2],[p.hard,e=>13-e]]),ro=new Map([[p.easy,()=>-.008*L()],[p.normal,()=>-.01*L()],[p.hard,()=>-.016*L()]]),io=new Map([[p.easy,()=>!1],[p.normal,(e,t)=>e>5&&t>=30-e*2],[p.hard,(e,t)=>e>5&&t>=27-e*2]]),so=new Map([[p.easy,()=>.5+L()*.5],[p.normal,()=>.7+L()*.6],[p.hard,()=>1+L()]]),Se=(e=0,t=0)=>(n,a,r,i)=>{const{enemies:o,evt:s,px:l,py:c,pa:d,playerInvincible:h}=i,f=e>=ao.get(n)(a),g=io.get(n)(a,t),y=[h>0?o.flatMap(_(h,l,c)):o,f?[U(-d+.4+L()*to*1.6,L()*b,ro.get(n)(),ua.get(n)())]:[],g?[J(m+(2*L()-1)*20,m+(2*L()-1)*20,L()*no,so.get(n)(),ua.get(n)(),"white","blue")]:[]].flat();return r&&a%10===1?{enemies:z(y),nextStage:Wt(),evt:s}:{enemies:y,nextStage:Se(f?0:e+1,g?0:t+1),evt:s}};var Ze=()=>({level:1,mode:p.normal,practice:!1,stage:Se(),evt:D(),playerAngle:0,playerRadius:b/2,playerInvincible:0,deaths:0,frames:0,enemies:[]});const{min:fa,max:oo,round:ma,random:ga}=w.globals,lo=e=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 255, 255, ${e})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${C/4}px serif`,u.textAlign="center",u.fillText("\u8F2A\u5EFB",m,m-C/10),u.closePath(),u.restore()},co=e=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 255, 255, ${e})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${C/10}px serif`,u.textAlign="center",u.fillText("\u2212\u56DE\u5411\u2212",m,m+C/30),u.closePath(),u.restore()};var va=(e=0)=>({mode:t,level:n,practice:a})=>{e===0&&(ue.update(()=>({appearance:0,playerAngle:0})),ie.update(()=>({appearance:0})),Ae.update(()=>({appearance:0,deaths:0})),ke.update(()=>({appearance:0,name:"-"}))),Ue(),lo(fa(e/60,(165-e)/60,1));const r=oo(fa((e-75)/30,(165-e)/60,1),0);if(co(r),Sn.update(()=>({startOpacity:(e>105&&!a?ma(ga()):1)*r,practiceOpacity:(e>105&&a?ma(ga()):1)*r})),Ee.update(()=>({opacity:e>105&&a?1:r})),e===105){const[i,o]=kn().reduce(([s,l],{id:c,param:d})=>c===q.mode?[d,l]:[q.start,q.practice].includes(c)?[s,c]:[s,l],[t,null]);return gt(),Ee.update(()=>({mode:i})),{nextId:x.title,nextArgs:[o===null?105:106],stateUpdate:{mode:i,practice:o===q.practice}}}return gt(),e===165?{nextId:a?x.practice:x.start,nextArgs:[],stateUpdate:{level:a?1:n,stage:Se()}}:{nextId:x.title,nextArgs:[e+1],stateUpdate:e===0?{...Ze(),mode:t}:{}}};const{pi2:po,min:ge,max:_t,trunc:ho}=w.globals,uo=e=>{u.save(),u.beginPath();const t=1-ge(_t((e%60-15)/30,0),1);u.fillStyle=`rgba(255, 255, 255, ${t})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${b/3}px serif`,u.textAlign="center",u.fillText(3-ho(e/60),m,b/2),u.restore()};var fo=(e=0)=>({level:t,mode:n})=>{e===0&&(ue.update(()=>({level:t})),ie.update(()=>({mode:n})));const a=ge(e/30,1);return ue.update(()=>({appearance:a})),ie.update(()=>({appearance:a})),Ae.update(()=>({appearance:a})),ke.update(()=>({appearance:a,name:"-"})),Ue(),dt(),ht(ge(e/30,1)),xe(0,ge(_t((e-60)/30,0),1)),u.globalAlpha=ge(_t((e-30)/30,0),1),ze(m+b/2,m),u.globalAlpha=ge(e/30,1),je(),u.globalAlpha=1,e<180&&uo(e),ut(-(e/160)*po),e<180?{nextId:x.start,nextArgs:[e+1],stateUpdate:{}}:{nextId:x.main,nextArgs:[],stateUpdate:{frames:0}}};const mo={opacity:0,top:0,fontSize:0,selected:null},F=e=>()=>mt(q.stage,e),Te="min(3vw, 3vh)",go=e=>({display:e>0?"block":"none",position:"absolute",left:"50%",top:"20%",transform:"translate(-50%, 0)",textAlign:"center",fontSize:`calc(${Te} * 1.7)`,fontFamily:"serif",color:"white",opacity:e}),vo=e=>({display:e>0?"block":"none",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:e}),B=e=>({outline:"none",border:`2px solid ${e?"white":"transparent"}`,margin:`calc(${Te} / 4) 0 calc(${Te} / 2)`,width:`calc(${Te} * 7)`,fontSize:Te,color:"white",backgroundColor:"transparent"}),Nt=K(mo,e=>({opacity:t,selected:n})=>e`<div style=${go(t)}>Select Level</div><div style=${vo(t)}><button style=${B(n===1)} onClick=${F(1)}>Lv.1~10</button><button style=${B(n===2)} onClick=${F(2)}>Lv.11~20</button><br><button style=${B(n===3)} onClick=${F(3)}>Lv.21~30</button><button style=${B(n===4)} onClick=${F(4)}>Lv.31~40</button><br><button style=${B(n===5)} onClick=${F(5)}>Lv.41~50</button><button style=${B(n===6)} onClick=${F(6)}>Lv.51~60</button><br><button style=${B(n===7)} onClick=${F(7)}>Lv.61~70</button><button style=${B(n===8)} onClick=${F(8)}>Lv.71~80</button><br><button style=${B(n===9)} onClick=${F(9)}>Lv.81~90</button><button style=${B(n===10)} onClick=${F(10)}>Lv.91~100</button></div>`),{window:te}=w.globals,W={};te.addEventListener("keydown",({key:e})=>{W[e]=!0}),te.addEventListener("keyup",({key:e})=>{W[e]=!1});let $a=[];const Je=e=>{$a=[...e.touches]};te.addEventListener("touchstart",Je),te.addEventListener("touchmove",Je),te.addEventListener("touchend",Je),te.addEventListener("touchcancel",Je);const $o=(e,t,n)=>{const a=n/t;return e.reduce((r,{clientX:i,clientY:o})=>{const s=i*a<o,l=o<n-i*a;return{left:r.left||s&&l,right:r.right||!s&&!l,up:r.up||!s&&l,down:r.down||s&&!l}},{})};var Ut=()=>{const e=$o($a,te.innerWidth,te.innerHeight);return{inner:W.a||W.ArrowLeft||e.left||!1,outer:W.d||W.ArrowRight||e.right||!1,quick:W.w||W.ArrowUp||e.up||!1,brake:W.s||W.ArrowDown||e.down||!1,pause:W.p||!1,escape:W.Escape||!1}};const{min:ya}=w.globals,yo=[Se,Wt,Rt,Lt,Dt,Pt,It,Ot,Tt,St];var bo=(e=0,t=null)=>({mode:n})=>{if(Nt.update(()=>({selected:t,opacity:ya(e/30,(60-e)/30)})),Ee.update(()=>({mode:n,opacity:ya((60-e)/30,1)})),e===30){if(Ut().escape)return Nt.update(()=>({opacity:0})),Ee.update(()=>({opacity:0})),{nextId:x.title,nextArgs:[],stateUpdate:{}};const[a,r]=kn().reduce(([i,o],{id:s,param:l})=>s===q.mode?[l,o]:[i,l],[n,null]);return{nextId:x.practice,nextArgs:[r===null?30:31,r],stateUpdate:{mode:a,level:r&&(r-1)*10+1,stage:(yo[r-1]||Se)()}}}return gt(),e<60?{nextId:x.practice,nextArgs:[e+1,t],stateUpdate:{}}:{nextId:x.start,nextArgs:[],stateUpdate:{}}};const wo=new Map([[A.swimOrb,Xr],[A.linearOrb,zn],[A.orbToCenter,Zr],[A.lazer,oi],[A.landolt,$i]]),ba=new Map([[A.swimOrb,Yr],[A.linearOrb,Un],[A.orbToCenter,Un],[A.lazer,di],[A.landolt,mi]]),{pi2:wa,cos:xo,sin:Eo,min:Ao,max:xa,random:ko}=w.globals,Co=()=>({state:Ut()}),Mo=({escape:e,mode:t})=>({returns:e?{nextId:x.title,nextArgs:[],stateUpdate:{...Ze(),mode:t}}:!1}),So=({pause:e,pauseTime:t})=>({returns:e&&t>10?{nextId:x.pause,nextArgs:[0],stateUpdate:{}}:!1}),To=({evt:e,...t})=>e.waitTime>=e.wait?{state:e.inputEffect(t,e)}:{},Oo=({inner:e,outer:t,quick:n,brake:a,pa:r,pr:i})=>({state:{pa:r+.007+(n-a)*.005,pr:Ao(xa(i+(t-e)*2,10),b-10)}}),Io=()=>(dt(),ht(),ut(),{}),Ea=({pa:e,pr:t})=>({state:{px:m+t*xo(-e),py:m+t*Eo(-e)}}),Po=({practice:e,pa:t,pr:n,level:a,deaths:r,frames:i})=>{const o=t>=wa,s=a+(o?1:0);if(e&&o&&s%10===1)return{returns:{nextId:x.title,nextArgs:[],stateUpdate:{}}};if(a===101){if(r>=100)return{returns:{nextId:x.title,nextArgs:[],stateUpdate:{}}};xe(t);const{state:{px:l,py:c}}=Ea({pa:t,pr:n});return ze(l,c),je(),{returns:{nextId:x.over,nextArgs:[],stateUpdate:{frames:i+1}}}}return{state:{pa:o?t%wa:t,level:s,levelUp:o}}},Do=({playerInvincible:e,pa:t,px:n,py:a})=>(xe(t),(e===0||ko()<.5)&&ze(n,a),{}),Lo=({mode:e,level:t,levelUp:n,stage:a,pa:r,pr:i,px:o,py:s,playerInvincible:l,enemies:c,evt:d})=>{const h=a(e,t,n,{px:o,py:s,pa:r,pr:i,playerInvincible:l,enemies:c,evt:d});return{state:{stage:h.nextStage,evt:h.evt,enemies:h.enemies}}},Ro=({enemies:e,px:t,py:n})=>{const a=e.reduce((r,i)=>{const{id:o}=i,{nextEnemies:s,hit:l}=wo.get(o)(i,t,n);return ba.get(o)(u,i),{nextEnemies:r.nextEnemies.concat(s),hit:r.hit||l}},{nextEnemies:[],hit:!1});return{state:{enemies:a.nextEnemies,hit:a.hit}}},Wo=({evt:e})=>{const{eventTime:t,duration:n,waitTime:a,wait:r,afterEffect:i,props:o}=e,s=a>=r;return An(s?1-t/n:a/r),{state:{evt:{...e,waitTime:a+1,eventTime:s?t+1:0,props:s?i(o,t,u):o}}}},_o=({mode:e,level:t,pa:n,evt:a})=>(ue.update(()=>({level:t,playerAngle:n})),ie.update(()=>({mode:e})),ke.update(()=>({name:a.name})),je(),{}),No=({pa:e,pr:t})=>({state:{playerAngle:e,playerRadius:t}}),Uo=e=>{const{level:t,mode:n,practice:a,stage:r,evt:i,playerAngle:o,playerRadius:s,playerInvincible:l,deaths:c,frames:d,enemies:h,hit:f}=e;return f&&l===0?(Ae.update(()=>({deaths:c+1})),{returns:{nextId:x.death,nextArgs:[],stateUpdate:{level:t,mode:n,practice:a,stage:r,evt:i,playerAngle:o,playerRadius:s,playerInvincible:l,deaths:c+1,frames:d+1,enemies:h}}}):{}},zo=({pauseTime:e,level:t,mode:n,practice:a,stage:r,evt:i,playerAngle:o,playerRadius:s,playerInvincible:l,deaths:c,frames:d,enemies:h})=>({returns:{nextId:x.main,nextArgs:[e+1],stateUpdate:{level:t,mode:n,practice:a,stage:r,evt:i,playerAngle:o,playerRadius:s,playerInvincible:xa(l-1,0),deaths:c,frames:d+1,enemies:h}}});var jo=(e=0)=>t=>[Co,Mo,So,Io,To,Oo,Po,Ea,Do,Lo,Ro,Wo,_o,No,Uo,zo].reduce((n,a,r,i)=>{const{state:o,returns:s}=a(n);return s?(i.splice(r),s):Object.assign(n,o)},{...t,pauseTime:e,pa:t.playerAngle,pr:t.playerRadius}),Fo=e=>({mode:t})=>{const{escape:n,pause:a}=Ut();return n?{nextId:x.title,nextArgs:[],stateUpdate:{...Ze(),mode:t}}:e>10&&a?{nextId:x.main,nextArgs:[0],stateUpdate:{}}:{nextId:x.pause,nextArgs:[e+1],stateUpdate:{}}};const{pi2:Aa,cos:Bo,sin:qo}=w.globals,Go=(e,t,n)=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 0, 0, ${1-n/90})`,u.arc(e,t,20+n/4.5,0,Aa),u.fill(),u.closePath(),u.restore()},Ho=(e,t,n)=>{u.save(),u.beginPath();const a=u.createRadialGradient(e,t,0,e,t,b*2);a.addColorStop(0,"rgba(255, 0, 0, 0)"),a.addColorStop(.05,"rgba(255, 0, 0, 0)"),a.addColorStop(.3+.7*(n/90),"rgba(255, 0, 0, 0.5)"),u.fillStyle=a,u.arc(e,t,b*2,0,Aa),u.fill(),u.closePath(),u.restore()};var Yo=(e=0)=>({playerAngle:t,playerRadius:n,enemies:a,evt:{wait:r,waitTime:i,eventTime:o,duration:s,afterEffect:l,props:c}})=>{Ue(),dt(),ht(),xe(t);const d=m+n*Bo(-t),h=m+n*qo(-t);return Go(d,h,e),a.forEach(f=>ba.get(f.id)(u,f)),je(),ut(),An(i>=r?1-o/s:i/r),Ho(d,h,e),l(c,o,u),e<90?{nextId:x.death,nextArgs:[e+1],stateUpdate:{}}:{nextId:x.main,nextArgs:[],stateUpdate:{playerInvincible:60,playerAngle:0,playerRadius:b/2}}};const{pi2:Xo,min:Qe,trunc:ve}=w.globals,Ko=e=>{u.save(),u.fillStyle=`rgba(255, 255, 255, ${e})`,u.arc(m,m,b,0,Xo),u.restore()},Zo=e=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${e})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${C/4}px serif`,u.textAlign="center",u.fillText("\u89E3\u8131",m,m-C/8),u.closePath(),u.restore()},Jo=e=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${e})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${C/10}px serif`,u.textAlign="center",u.fillText("GAME OVER",m,m),u.closePath(),u.restore()},Qo=e=>{const t=e/60,n=ve(t/60).toString().padStart(2,"0"),a=(ve(t)%60).toString().padStart(2,"0"),r=ve((t-ve(t))*1e3).toString().padStart(3,"0");return`${n}:${a}.${r}`},Vo=(e,t,n,a)=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${a})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${C/20}px serif`,u.textAlign="center",u.fillText(`Mode: ${Pn.get(e)}`,m,m+C*.1),u.fillText(`Death${t>=2?"s":""}: ${t}`,m,m+C*.2),u.fillText(`Time: ${n}`,m,m+C*.3)};var el=(e=0,t=null)=>({mode:n,deaths:a,frames:r})=>{if(e>690)return{nextId:x.over,nextArgs:[e,t],stateUpdate:{}};if(e<=120){const i=1-e/120;ue.update(()=>({appearance:i,level:100})),ie.update(()=>({appearance:i})),Ae.update(()=>({appearance:i})),ke.update(()=>({appearance:i})),pt.update(()=>({opacity:i}))}if(e>=120&&e<=420){const i=ve((e-120)*.85),o=ve((i+102)/2),s=`rgb(${i}, ${i}, ${i})`,l=`rgb(${o}, ${o}, ${o})`;document.body.style.backgroundImage=`radial-gradient(circle closest-side, ${s} 60%, ${l} 100%, #666 200%)`}return e===420&&pt.update(()=>({opacity:1})),e>=420&&(Ue(),Ko(Qe((e-420)/120,1))),e>=420&&Zo(Qe((e-420)/120,1)),e>=570&&Jo(Qe((e-570)/60,1)),e>=630&&Vo(n,a,t,Qe((e-630)/60,1)),{nextId:x.over,nextArgs:[e+1,t||Qo(r)],stateUpdate:{}}};const{now:tl}=w.globals,nl=new Map([[x.title,va],[x.start,fo],[x.practice,bo],[x.main,jo],[x.pause,Fo],[x.death,Yo],[x.over,el]]),ka=(e,t)=>()=>{Or(tl());const{nextId:n,nextArgs:a,stateUpdate:r}=e(t);return ka(nl.get(n)(...a),Object.assign(t,r))},{bind:al}=w.hyperhtml;al(document.body)` ${pt.render()} ${ue.render()} ${ie.render()} ${Ae.render()} ${ke.render()} ${Sn.render()} ${Nt.render()} ${Ee.render()}`,Sr(ka(va(),Ze()))})();
