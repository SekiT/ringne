(function(){"use strict";/*! (c) Andrea Giammarchi - ISC */var te={};try{te.WeakMap=WeakMap}catch(t){te.WeakMap=function(e,n){var s=n.defineProperty,a=n.hasOwnProperty,r=i.prototype;return r.delete=function(c){return this.has(c)&&delete c[this._]},r.get=function(c){return this.has(c)?c[this._]:void 0},r.has=function(c){return a.call(c,this._)},r.set=function(c,l){return s(c,this._,{configurable:!0,value:l}),this},i;function i(c){s(this,"_",{value:"_@ungap/weakmap"+e++}),c&&c.forEach(o,this)}function o(c){this.set(c[0],c[1])}}(Math.random(),Object)}var rt=te.WeakMap;/*! (c) Andrea Giammarchi - ISC */var ee={};try{ee.WeakSet=WeakSet}catch(t){(function(e,n){var s=a.prototype;s.add=function(r){return this.has(r)||n(r,this._,{value:!0,configurable:!0}),this},s.has=function(r){return this.hasOwnProperty.call(r,this._)},s.delete=function(r){return this.has(r)&&delete r[this._]},ee.WeakSet=a;function a(){n(this,"_",{value:"_@ungap/weakmap"+e++})}})(Math.random(),Object.defineProperty)}var Is=ee.WeakSet;const{indexOf:Ds,slice:xc}=[],ot=(t,e,n,s,a,r)=>{const i="selectedIndex"in e;let o=i;for(;s<a;){const c=t(n[s],1);if(e.insertBefore(c,r),i&&o&&c.selected){o=!o;let{selectedIndex:l}=e;e.selectedIndex=l<0?s:Ds.call(e.querySelectorAll("option"),c)}s++}},Ws=(t,e)=>t==e,Rs=t=>t,He=(t,e,n,s,a,r,i)=>{const o=r-a;if(o<1)return-1;for(;n-e>=o;){let c=e,l=a;for(;c<n&&l<r&&i(t[c],s[l]);)c++,l++;if(l===r)return e;e=c+1}return-1},js=(t,e,n,s,a,r)=>{for(;s<a&&r(n[s],t[e-1]);)s++,e--;return e===0},ne=(t,e,n,s,a)=>n<s?t(e[n],0):0<n?t(e[n-1],-0).nextSibling:a,yt=(t,e,n,s)=>{for(;n<s;)qs(t(e[n++],-1))},xt=-1,Ct=1,At=0,Us=50,Ns=(t,e,n,s,a,r,i,o)=>{let c=0,l=s<o?s:o;const d=Array(l++),u=Array(l);u[0]=-1;for(let b=1;b<l;b++)u[b]=i;const f=a.slice(r,i);for(let b=e;b<n;b++){const $=f.indexOf(t[b]);if(-1<$){const E=$+r;c=zs(u,l,E),-1<c&&(u[c]=E,d[c]={newi:b,oldi:E,prev:d[c-1]})}}for(c=--l,--i;u[c]>i;)--c;l=o+s-c;const v=Array(l);let w=d[c];for(--n;w;){const{newi:b,oldi:$}=w;for(;n>b;)v[--l]=Ct,--n;for(;i>$;)v[--l]=xt,--i;v[--l]=At,--n,--i,w=w.prev}for(;n>=e;)v[--l]=Ct,--n;for(;i>=r;)v[--l]=xt,--i;return v},Fs=(t,e,n,s,a,r,i)=>{const o=n+r,c=[];let l,d,u,f,v,w,b;t:for(l=0;l<=o;l++){if(l>Us)return null;for(b=l-1,v=l?c[l-1]:[0,0],w=c[l]=[],d=-l;d<=l;d+=2){for(d===-l||d!==l&&v[b+d-1]<v[b+d+1]?f=v[b+d+1]:f=v[b+d-1]+1,u=f-d;f<r&&u<n&&i(s[a+f],t[e+u]);)f++,u++;if(f===r&&u===n)break t;w[l+d]=f}}const $=Array(l/2+o/2);let E=$.length-1;for(l=c.length-1;l>=0;l--){for(;f>0&&u>0&&i(s[a+f-1],t[e+u-1]);)$[E--]=At,f--,u--;if(!l)break;b=l-1,v=l?c[l-1]:[0,0],d=f-u,d===-l||d!==l&&v[b+d-1]<v[b+d+1]?(u--,$[E--]=Ct):(f--,$[E--]=xt)}return $},Bs=(t,e,n,s,a,r,i,o,c)=>{const l=[],d=t.length;let u=i,f=0;for(;f<d;)switch(t[f++]){case At:a++,u++;break;case Ct:l.push(s[a]),ot(e,n,s,a++,a,u<o?e(r[u],0):c);break;case xt:u++;break}for(f=0;f<d;)switch(t[f++]){case At:i++;break;case xt:-1<l.indexOf(r[i])?i++:yt(e,r,i++,i);break}},zs=(t,e,n)=>{let s=1,a=e;for(;s<a;){const r=(s+a)/2>>>0;n<t[r]?a=r:s=r+1}return s},Hs=(t,e,n,s,a,r,i,o,c,l,d,u,f)=>{Bs(Fs(n,s,r,i,o,l,u)||Ns(n,s,a,r,i,o,c,l),t,e,n,s,i,o,d,f)},qs=t=>(t.remove||Gs).call(t);function Gs(){const{parentNode:t}=this;t&&t.removeChild(this)}/*! (c) 2018 Andrea Giammarchi (ISC) */const it=(t,e,n,s)=>{s||(s={});const a=s.compare||Ws,r=s.node||Rs,i=s.before==null?null:r(s.before,0),o=e.length;let c=o,l=0,d=n.length,u=0;for(;l<c&&u<d&&a(e[l],n[u]);)l++,u++;for(;l<c&&u<d&&a(e[c-1],n[d-1]);)c--,d--;const f=l===c,v=u===d;if(f&&v)return n;if(f&&u<d)return ot(r,t,n,u,d,ne(r,e,l,o,i)),n;if(v&&l<c)return yt(r,e,l,c),n;const w=c-l,b=d-u;let $=-1;if(w<b){if($=He(n,u,d,e,l,c,a),-1<$)return ot(r,t,n,u,$,r(e[l],0)),ot(r,t,n,$+w,d,ne(r,e,c,o,i)),n}else if(b<w&&($=He(e,l,c,n,u,d,a),-1<$))return yt(r,e,l,$),yt(r,e,$+b,c),n;return w<2||b<2?(ot(r,t,n,u,d,r(e[l],0)),yt(r,e,l,c),n):w===b&&js(n,d,e,l,c,a)?(ot(r,t,n,u,d,ne(r,e,c,o,i)),n):(Hs(r,t,n,u,d,b,e,l,c,w,o,a,i),n)};/*! (c) Andrea Giammarchi - ISC */var qe={};qe.CustomEvent=typeof CustomEvent=="function"?CustomEvent:function(t){return e[t]=new e("").constructor[t],e;function e(n,s){s||(s={});var a=document.createEvent("CustomEvent");return a.initCustomEvent(n,!!s.bubbles,!!s.cancelable,s.detail),a}}("prototype");var Ge=qe.CustomEvent;/*! (c) Andrea Giammarchi - ISC */var se={};try{se.Map=Map}catch(t){se.Map=function(){var n=0,s=[],a=[];return{delete:function(i){var o=r(i);return o&&(s.splice(n,1),a.splice(n,1)),o},forEach:function(o,c){s.forEach(function(l,d){o.call(c,a[d],l,this)},this)},get:function(o){return r(o)?a[n]:void 0},has:function(o){return r(o)},set:function(o,c){return a[r(o)?n:s.push(o)-1]=c,this}};function r(i){return n=s.indexOf(i),-1<n}}}var Ys=se.Map;function Pt(){return this}function Xs(t){const e=new rt,n=Object.create,s=(o,c,l)=>(o.set(c,l),l),a=(o,c,l,d)=>{const u=c.get(o)||r(o,c);switch(typeof d){case"object":case"function":const f=u.w||(u.w=new rt);return f.get(d)||s(f,d,new o(l));default:const v=u.p||(u.p=n(null));return v[d]||(v[d]=new o(l))}},r=(o,c)=>{const l={w:null,p:null};return c.set(o,l),l},i=o=>{const c=new Ys;return e.set(o,c),c};Object.defineProperties(Pt,{for:{configurable:!0,value(o,c){return a(this,e.get(o)||i(o),o,c==null?"default":c)}}}),Object.defineProperties(Pt.prototype,{handleEvent:{value(o){const c=o.currentTarget;this["getAttribute"in c&&c.getAttribute("data-call")||"on"+o.type](o)}},html:ae("html",t),svg:ae("svg",t),state:ae("state",function(){return this.defaultState}),defaultState:{get(){return{}}},dispatch:{value(o,c){const{_wire$:l}=this;if(l){const d=new Ge(o,{bubbles:!0,cancelable:!0,detail:c});return d.component=this,(l.dispatchEvent?l:l.firstChild).dispatchEvent(d)}return!1}},setState:{value(o,c){const l=this.state,d=typeof o=="function"?o.call(this,l):o;for(const u in d)l[u]=d[u];return c!==!1&&this.render(),this}}})}const ae=(t,e)=>{const n="_"+t+"$";return{get(){return this[n]||Ye(this,n,e.call(this,t))},set(s){Ye(this,n,s)}}},Ye=(t,e,n)=>Object.defineProperty(t,e,{configurable:!0,value:typeof n=="function"?function(){return t._wire$=n.apply(this,arguments)}:n})[e];Object.defineProperties(Pt.prototype,{ELEMENT_NODE:{value:1},nodeType:{value:-1}});const Xe={},Tt={},Ze=[],Zs=Tt.hasOwnProperty;let Ke=0;var Et={attributes:Xe,define:(t,e)=>{t.indexOf("-")<0?(t in Tt||(Ke=Ze.push(t)),Tt[t]=e):Xe[t]=e},invoke:(t,e)=>{for(let n=0;n<Ke;n++){let s=Ze[n];if(Zs.call(t,s))return Tt[s](t[s],e)}}},Ve=Array.isArray||function(t){var e=t.call([]);return function(s){return t.call(s)===e}}({}.toString);/*! (c) Andrea Giammarchi - ISC */var Je=function(t){var e="fragment",n="template",s="content"in i(n),a=s?function(c){var l=i(n);return l.innerHTML=c,l.content}:function(c){var l=i(e),d=i(n),u=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(c)){var f=RegExp.$1;d.innerHTML="<table>"+c+"</table>",u=d.querySelectorAll(f)}else d.innerHTML=c,u=d.childNodes;return r(l,u),l};return function(l,d){return(d==="svg"?o:a)(l)};function r(c,l){for(var d=l.length;d--;)c.appendChild(l[0])}function i(c){return c===e?t.createDocumentFragment():t.createElementNS("http://www.w3.org/1999/xhtml",c)}function o(c){var l=i(e),d=i("div");return d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+c+"</svg>",r(l,d.firstChild.childNodes),l}}(document);/*! (c) Andrea Giammarchi */function Ks(t){var e=t.Event,n=t.WeakSet,s=!0,a=null;return function(o){return s&&(s=!s,a=new n,r(o.ownerDocument)),a.add(o),o};function r(i){var o=new n,c=new n;try{new MutationObserver(f).observe(i,{subtree:!0,childList:!0})}catch(b){var l=0,d=[],u=function($){d.push($),clearTimeout(l),l=setTimeout(function(){f(d.splice(l=0,d.length))},0)};i.addEventListener("DOMNodeRemoved",function($){u({addedNodes:[],removedNodes:[$.target]})},!0),i.addEventListener("DOMNodeInserted",function($){u({addedNodes:[$.target],removedNodes:[]})},!0)}function f(b){for(var $,E=b.length,O=0;O<E;O++)$=b[O],v($.removedNodes,"disconnected",c,o),v($.addedNodes,"connected",o,c)}function v(b,$,E,O){for(var k,T=new e($),C=b.length,_=0;_<C;(k=b[_++]).nodeType===1&&w(k,T,$,E,O));}function w(b,$,E,O,k){a.has(b)&&!O.has(b)&&(k.delete(b),O.add(b),b.dispatchEvent($));for(var T=b.children||[],C=T.length,_=0;_<C;w(T[_++],$,E,O,k));}}}/*! (c) Andrea Giammarchi - ISC */var Vs=function(t,e,n,s,a){var r=a in t,i=t.createDocumentFragment();i[e](t[s]("g")),i[e](t[s](""));var o=r?t[a](i,!0):i[n](!0);return o.childNodes.length<2?function c(l,d){for(var u=l[n](),f=l.childNodes||[],v=f.length,w=0;d&&w<v;w++)u[e](c(f[w],d));return u}:r?t[a]:function(c,l){return c[n](!!l)}}(document,"appendChild","cloneNode","createTextNode","importNode"),Qe="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")};/*! (c) Andrea Giammarchi - ISC */var K="-"+Math.random().toFixed(6)+"%",re=!1;try{(function(t,e,n){return e in t&&(t.innerHTML="<p "+n+'="'+K+'"></p>',t[e].childNodes[0].getAttribute(n)==K)})(document.createElement("template"),"content","tabindex")||(K="_dt: "+K.slice(1,-1)+";",re=!0)}catch(t){}var _t="<!--"+K+"-->",Js=8,Qs=1,ta=3,tn=/^(?:style|textarea)$/i,ea=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function na(t){return t.join(_t).replace(aa,ca).replace(sa,oa)}var Lt=" \\f\\n\\r\\t",en="[^"+Lt+`\\/>"'=]+`,oe="["+Lt+"]+"+en,nn="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",sn=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+en.replace("\\/","")+"))?)",sa=new RegExp(nn+oe+sn+"+)(["+Lt+"]*/?>)","g"),aa=new RegExp(nn+oe+sn+"*)(["+Lt+"]*/>)","g"),ra=new RegExp("("+oe+`\\s*=\\s*)(['"]?)`+_t+"\\2","gi");function oa(t,e,n,s){return"<"+e+n.replace(ra,ia)+s}function ia(t,e,n){return e+(n||'"')+K+(n||'"')}function ca(t,e,n){return ea.test(e)?t:"<"+e+n+"></"+e+">"}var la=t=>({get:e=>t.get(e),set:(e,n)=>(t.set(e,n),n)}),pa=re?function(t,e){var n=e.join(" ");return e.slice.call(t,0).sort(function(s,a){return n.indexOf(s.name)<=n.indexOf(a.name)?-1:1})}:function(t,e){return e.slice.call(t,0)};function da(t,e){for(var n=e.length,s=0;s<n;)t=t.childNodes[e[s++]];return t}function an(t,e,n,s){for(var a=t.childNodes,r=a.length,i=0;i<r;){var o=a[i];switch(o.nodeType){case Qs:var c=s.concat(i);ua(o,e,n,c),an(o,e,n,c);break;case Js:var l=o.textContent;if(l===K)n.shift(),e.push(tn.test(t.nodeName)?on(t,s):ha(o,s.concat(i)));else switch(l.slice(0,2)){case"/*":if(l.slice(-2)!=="*/")break;case"\u{1F47B}":t.removeChild(o),i--,r--}break;case ta:tn.test(t.nodeName)&&Qe.call(o.textContent)===_t&&(n.shift(),e.push(on(t,s)));break}i++}}function ua(t,e,n,s){for(var a=t.attributes,r=[],i=[],o=pa(a,n),c=o.length,l=0;l<c;){var d=o[l++],u=d.value===K,f;if(u||1<(f=d.value.split(_t)).length){var v=d.name;if(r.indexOf(v)<0){r.push(v);var w=n.shift().replace(u?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+v+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),b=a[w]||a[w.toLowerCase()];if(u)e.push(rn(b,s,w,null));else{for(var $=f.length-2;$--;)n.shift();e.push(rn(b,s,w,f))}}i.push(d)}}c=i.length,l=0;for(var E=0<c&&re&&!("ownerSVGElement"in t);l<c;){var O=i[l++];E&&(O.value=""),t.removeAttribute(O.name)}var k=t.nodeName;if(/^script$/i.test(k)){var T=document.createElement(k);for(c=a.length,l=0;l<c;)T.setAttributeNode(a[l++].cloneNode(!0));T.textContent=t.textContent,t.parentNode.replaceChild(T,t)}}function ha(t,e){return{type:"any",node:t,path:e}}function rn(t,e,n,s){return{type:"attr",node:t,path:e,name:n,sparse:s}}function on(t,e){return{type:"text",node:t,path:e}}var cn=la(new rt);function fa(t,e){var n=(t.convert||na)(e),s=t.transform;s&&(n=s(n));var a=Je(n,t.type);ln(a);var r=[];return an(a,r,e.slice(0),[]),{content:a,updates:function(i){for(var o=[],c=r.length,l=0,d=0;l<c;){var u=r[l++],f=da(i,u.path);switch(u.type){case"any":o.push({fn:t.any(f,[]),sparse:!1});break;case"attr":var v=u.sparse,w=t.attribute(f,u.name,u.node);v===null?o.push({fn:w,sparse:!1}):(d+=v.length-2,o.push({fn:w,sparse:!0,values:v}));break;case"text":o.push({fn:t.text(f),sparse:!1}),f.textContent="";break}}return c+=d,function(){var b=arguments.length;if(c!==b-1)throw new Error(b-1+" values instead of "+c+`
`+e.join("${value}"));for(var $=1,E=1;$<b;){var O=o[$-E];if(O.sparse){var k=O.values,T=k[0],C=1,_=k.length;for(E+=_-2;C<_;)T+=arguments[$++]+k[C++];O.fn(T)}else O.fn(arguments[$++])}return i}}}}function ga(t,e){var n=cn.get(e)||cn.set(e,fa(t,e));return n.updates(Vs.call(document,n.content,!0))}var va=[];function ba(t){var e=va,n=ln;return function(s){return e!==s&&(n=ga(t,e=s)),n.apply(null,arguments)}}function ln(t){for(var e=t.childNodes,n=e.length;n--;){var s=e[n];s.nodeType!==1&&Qe.call(s.textContent).length===0&&t.removeChild(s)}}/*! (c) Andrea Giammarchi - ISC */var $a=function(){var t=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,e=/([^A-Z])([A-Z]+)/g;return function(o,c){return"ownerSVGElement"in o?s(o,c):r(o.style,!1)};function n(i,o,c){return o+"-"+c.toLowerCase()}function s(i,o){var c;return o?c=o.cloneNode(!0):(i.setAttribute("style","--hyper:style;"),c=i.getAttributeNode("style")),c.value="",i.setAttributeNode(c),r(c,!0)}function a(i){var o,c=[];for(o in i)c.push(o.replace(e,n),":",i[o],";");return c.join("")}function r(i,o){var c,l;return function(d){var u,f,v,w;switch(typeof d){case"object":if(d){if(c==="object"){if(!o&&l!==d)for(f in l)f in d||(i[f]="")}else o?i.value="":i.cssText="";u=o?{}:i;for(f in d)w=d[f],v=typeof w=="number"&&!t.test(f)?w+"px":w,!o&&/^--/.test(f)?u.setProperty(f,v):u[f]=v;c="object",o?i.value=a(l=u):l=d;break}default:l!=d&&(c="string",l=d,o?i.value=d||"":i.cssText=d||"");break}}}}();/*! (c) Andrea Giammarchi - ISC */var pn=function(t,e){return e=n.prototype,e.ELEMENT_NODE=1,e.nodeType=111,e.remove=function(s){var a=this.childNodes,r=this.firstChild,i=this.lastChild;if(this._=null,s&&a.length===2)i.parentNode.removeChild(i);else{var o=this.ownerDocument.createRange();o.setStartBefore(s?a[1]:r),o.setEndAfter(i),o.deleteContents()}return r},e.valueOf=function(s){var a=this._,r=a==null;if(r&&(a=this._=this.ownerDocument.createDocumentFragment()),r||s)for(var i=this.childNodes,o=0,c=i.length;o<c;o++)a.appendChild(i[o]);return a},n;function n(s){var a=this.childNodes=t.call(s,0);this.firstChild=a[0],this.lastChild=a[a.length-1],this.ownerDocument=a[0].ownerDocument,this._=null}}([].slice);const wa=11,ie="ownerSVGElement",dn="connected",ma="dis"+dn,ya=Pt.prototype.nodeType,xa=pn.prototype.nodeType,Ea=Ks({Event:Ge,WeakSet:Is}),Sa=t=>({html:t}),un=(t,e)=>{switch(t.nodeType){case xa:return 1/e<0?e?t.remove(!0):t.lastChild:e?t.valueOf(!0):t.firstChild;case ya:return un(t.render(),e);default:return t}},Oa=t=>"ELEMENT_NODE"in t,Ma=(t,e,n)=>n?s=>{try{t[e]=s}catch(a){t.setAttribute(e,s)}}:s=>{t[e]=s},hn=(t,e)=>{e(t.placeholder),"text"in t?Promise.resolve(t.text).then(String).then(e):"any"in t?Promise.resolve(t.any).then(e):"html"in t?Promise.resolve(t.html).then(Sa).then(e):Promise.resolve(Et.invoke(t,e)).then(e)},ce=t=>t!=null&&"then"in t,ka=/^(?:form|list)$/i,It=[].slice,Ca=(t,e)=>t.ownerDocument.createTextNode(e);function le(t){return this.type=t,ba(this)}le.prototype={attribute(t,e,n){const s=ie in t;let a;if(e==="style")return $a(t,n,s);if(e.slice(0,1)===".")return Ma(t,e.slice(1),s);if(/^on/.test(e)){let r=e.slice(2);return r===dn||r===ma?Ea(t):e.toLowerCase()in t&&(r=r.toLowerCase()),i=>{a!==i&&(a&&t.removeEventListener(r,a,!1),a=i,i&&t.addEventListener(r,i,!1))}}else{if(e==="data"||!s&&e in t&&!ka.test(e))return r=>{a!==r&&(a=r,t[e]!==r&&r==null?(t[e]="",t.removeAttribute(e)):t[e]=r)};if(e in Et.attributes)return r=>{const i=Et.attributes[e](t,r);a!==i&&(a=i,i==null?t.removeAttribute(e):t.setAttribute(e,i))};{let r=!1;const i=n.cloneNode(!0);return o=>{a!==o&&(a=o,i.value!==o&&(o==null?(r&&(r=!1,t.removeAttributeNode(i)),i.value=o):(i.value=o,r||(r=!0,t.setAttributeNode(i)))))}}}},any(t,e){const n={node:un,before:t},s=ie in t?"svg":"html";let a=!1,r;const i=o=>{switch(typeof o){case"string":case"number":case"boolean":a?r!==o&&(r=o,e[0].textContent=o):(a=!0,r=o,e=it(t.parentNode,e,[Ca(t,o)],n));break;case"function":i(o(t));break;case"object":case"undefined":if(o==null){a=!1,e=it(t.parentNode,e,[],n);break}default:if(a=!1,r=o,Ve(o))if(o.length===0)e.length&&(e=it(t.parentNode,e,[],n));else switch(typeof o[0]){case"string":case"number":case"boolean":i({html:o});break;case"object":if(Ve(o[0])&&(o=o.concat.apply([],o)),ce(o[0])){Promise.all(o).then(i);break}default:e=it(t.parentNode,e,o,n);break}else Oa(o)?e=it(t.parentNode,e,o.nodeType===wa?It.call(o.childNodes):[o],n):ce(o)?o.then(i):"placeholder"in o?hn(o,i):"text"in o?i(String(o.text)):"any"in o?i(o.any):"html"in o?e=it(t.parentNode,e,It.call(Je([].concat(o.html).join(""),s).childNodes),n):"length"in o?i(It.call(o)):i(Et.invoke(o,i));break}};return i},text(t){let e;const n=s=>{if(e!==s){e=s;const a=typeof s;a==="object"&&s?ce(s)?s.then(n):"placeholder"in s?hn(s,n):"text"in s?n(String(s.text)):"any"in s?n(s.any):"html"in s?n([].concat(s.html).join("")):"length"in s?n(It.call(s).join("")):n(Et.invoke(s,n)):a==="function"?n(s(t)):t.textContent=s==null?"":s}};return n}};var fn=typeof document!="object",pe=function(t){var e="raw",n=function(l){return/(Firefox|Safari)\/(\d+)/.test(l)&&!/(Chrom[eium]+|Android)\/(\d+)/.test(l)},s=n((document.defaultView.navigator||{}).userAgent),a=!(e in t)||t.propertyIsEnumerable(e)||!Object.isFrozen(t[e]);if(s||a){var r={},i=function(l){for(var d=".",u=0;u<l.length;u++)d+=l[u].length+"."+l[u];return r[d]||(r[d]=l)};if(a)pe=i;else{var o=new rt,c=function(l,d){return o.set(l,d),d};pe=function(l){return o.get(l)||c(l,i(l))}}}else fn=!0;return gn(t)};function gn(t){return fn?t:pe(t)}function vn(t){for(var e=arguments.length,n=[gn(t)],s=1;s<e;)n.push(arguments[s++]);return n}const bn=new rt,Aa=(t,e)=>t==null?de(e||"html"):Pa(t,e||"html"),de=t=>{let e,n,s;return function(){const a=vn.apply(null,arguments);return s!==a[0]?(s=a[0],n=new le(t),e=Ta(n.apply(n,a))):n.apply(n,a),e}},Pa=(t,e)=>{const n=e.indexOf(":");let s=bn.get(t),a=e;return-1<n&&(a=e.slice(n+1),e=e.slice(0,n)||"html"),s||bn.set(t,s={}),s[a]||(s[a]=de(e))},Ta=t=>{const e=t.childNodes,{length:n}=e;return n===1?e[0]:n?new pn(e):t},$n=new rt;function _a(){const t=$n.get(this),e=vn.apply(null,arguments);return t&&t.template===e[0]?t.tagger.apply(null,e):La.apply(this,e),this}function La(t){const e=ie in this?"svg":"html",n=new le(e);$n.set(this,{tagger:n,template:t}),this.textContent="",this.appendChild(n.apply(null,arguments))}/*! (c) Andrea Giammarchi (ISC) */const Ia=t=>_a.bind(t);Xs(de);var y={hyperhtml:{wire:Aa,bind:Ia},globals:{infinity:Number.POSITIVE_INFINITY,pi:Math.PI,pi2:Math.PI*2,min:Math.min,max:Math.max,abs:Math.abs,trunc:Math.trunc,round:Math.round,sqrt:Math.sqrt,cos:Math.cos,sin:Math.sin,atan2:Math.atan2,random:Math.random,now:Date.now,window,requestAnimationFrame,document}};const{requestAnimationFrame:Da}=y.globals,wn=t=>()=>Da(wn(t()));var Wa=t=>wn(t)(),mn=t=>{let e=t;const n=new Map;return{next:s=>{e=s(e),n.forEach(a=>a(e))},subscribe:s=>{s(e);const a={};return n.set(a,s),a},unsubscribe:s=>n.delete(s)}};let Dt=[];const yn=mn(0),Ra=t=>{Dt.push(t),Dt.length===6&&(yn.next(()=>5e3/(t-Dt[0])),Dt=[])};var x={title:{},practice:{},start:{},main:{},pause:{},death:{},over:{}},xn=Object.assign;const{wire:ja}=y.hyperhtml;var V=(t,e)=>{const n=e(ja());let s=t;return{render:()=>n(s),update:a=>{s=xn(xn({},s),a(s)),n(s)}}};const{window:ue}=y.globals,En=()=>({width:ue.innerWidth,height:ue.innerHeight}),j=mn(En());ue.addEventListener("resize",()=>j.next(En));const{pi2:ct,min:Ua,cos:Na,sin:Fa,document:Ba}=y.globals,m=200,M=m*2+10,g=M/2,J=Ba.createElement("canvas");J.width=M,J.height=M,Object.assign(J.style,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"});const h=J.getContext("2d"),Wt=J.cloneNode(),A=Wt.getContext("2d"),Rt=V({width:0,opacity:1},t=>({width:e,opacity:n})=>{const s={width:`${e}px`,height:`${e}px`,opacity:n};return Object.assign(J.style,s),Object.assign(Wt.style,s),t`${J}${Wt}`});j.subscribe(({width:t,height:e})=>{const n=Ua(t,e)*.7;Rt.update(()=>({width:n}))});const jt=()=>{J.width=M,Wt.width=M,h.clip(h.arc(g,g,m,0,ct))},he=()=>{h.save(),h.beginPath(),h.fillStyle="black",h.arc(g,g,m,0,ct),h.fill(),h.closePath(),h.restore()},fe=(t=1)=>{h.save(),h.beginPath(),h.strokeStyle="white",h.lineWidth=1,h.moveTo(g,g),h.lineTo(g+t*m,g),h.stroke(),h.closePath(),h.restore()},St=(t,e=1,n="red")=>{h.save(),h.beginPath(),h.strokeStyle=n,h.lineWidth=1,h.moveTo(g,g);const s=e*m;h.lineTo(g+s*Na(-t),g+s*Fa(-t)),h.stroke(),h.closePath(),h.restore()},Ut=(t,e)=>{h.save(),h.beginPath();const n=h.createRadialGradient(t,e,0,t,e,20);n.addColorStop(0,"red"),n.addColorStop(1,"rgba(255, 0, 0, 0)"),h.fillStyle=n,h.arc(t,e,20,0,ct),h.fill(),h.closePath(),h.restore()},Nt=()=>{h.save(),h.beginPath(),h.fillStyle="white",h.arc(g,g,3,0,ct),h.fill(),h.closePath(),h.restore()},ge=(t=-ct)=>{A.clearRect(0,0,M,M),A.save(),A.beginPath(),A.setLineDash([10,10]),A.strokeStyle="white",A.lineWidth=3,A.arc(g,g,m,0,t,!0),A.stroke(),A.closePath(),A.restore()},Sn=t=>{A.save(),A.beginPath(),A.setLineDash([10,10]),A.strokeStyle="magenta",A.lineWidth=3,A.arc(g,g,m,0,-t*ct,!0),A.stroke(),A.closePath(),A.restore()};var p={easy:{},normal:{},hard:{}};let ve=[];const G={mode:{},start:{},practice:{},stage:{}},be=(t,e)=>ve.push({id:t,param:e}),On=()=>ve.map(({id:t,param:e})=>({id:t,param:e})),$e=()=>{ve=[]},{min:za,max:Ha}=y.globals,qa={startOpacity:0,practiceOpacity:0,mode:p.normal,fontSize:0},Mn=t=>()=>be(t),Ga=(t,e,n)=>({display:n>0?"block":"none",position:"absolute",left:"50%",top:`${t}px`,transform:"translate(-50%, 0)",textAlign:"center",lineHeight:`${e*1.5}px`,fontFamily:"serif"}),kn=(t,e)=>({outline:"none",border:"none",margin:`${t/4}px 0 ${t/2}px`,fontSize:`${t}px`,color:"white",backgroundColor:"transparent",opacity:e}),we=V(qa,t=>({startOpacity:e,practiceOpacity:n,top:s,fontSize:a})=>t`  <div style=${Ga(s,a,Ha(e,n))}>    <button      style=${kn(a,e)}      onClick=${Mn(G.start)}>Start Game</button><br>    <button      style=${kn(a,n)}      onClick=${Mn(G.practice)}>Practice</button><br>  </div>`);j.subscribe(({width:t,height:e})=>{const n=za(t,e),s=e/2+n*.1,a=n*.03;we.update(()=>({top:s,fontSize:a}))});const{min:Ya}=y.globals,Xa={opacity:0,mode:p.normal,top:0,fontSize:0},me=t=>()=>be(G.mode,t),Za=(t,e)=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:`${e}px`,transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:t}),ye=(t,e)=>({margin:`0 ${e/4}px`,outline:"none",border:`2px solid ${t?"white":"transparent"}`,fontSize:`${e}px`,color:"white",backgroundColor:"transparent"}),lt=V(Xa,t=>({opacity:e,mode:n,top:s,fontSize:a})=>t`  <div style=${Za(e,s)}>    <button      style=${ye(n===p.easy,a)}      onClick=${me(p.easy)}>EASY</button>    <button      style=${ye(n===p.normal,a)}      onClick=${me(p.normal)}>NORMAL</button>    <button      style=${ye(n===p.hard,a)}      onClick=${me(p.hard)}>HARD</button>  </div>`);j.subscribe(({width:t,height:e})=>{const n=Ya(t,e),s=e/2+n*.25,a=n*.026;lt.update(()=>({top:s,fontSize:a}))});var Ft=Object.assign;const{pi2:Ka,min:Va,trunc:Ja}=y.globals,at=V({level:1,playerAngle:0,appearance:0,x:0,y:0,w:0},t=>({level:e,playerAngle:n,appearance:s,x:a,y:r,w:i})=>{const o={position:"absolute",left:`${a}px`,top:`${r}px`,width:`${i}px`,height:`${i}px`},c=s*100,l=c/2,d=Ft(Ft({},o),{backgroundColor:"#966",clipPath:`polygon(100% 0, 50% 0, ${50-l}% ${l}%, ${100-c}% ${c}%)`}),u=Ft(Ft({},o),{color:"white",fontSize:`${i/5}px`,margin:`${i/10}px`,opacity:s}),f=Ja(n/Ka*100);return t`    <div style="${d}"></div>    <div style="${u}">Lv.${e}<br>${f}%</div>  `});j.subscribe(({width:t,height:e})=>{const n=Va(t,e)*.7;at.update(()=>({x:(t-n*1.05)/2,y:(e-n*1.05)/2,w:n*.2}))});var Cn=Object.assign;const{min:Qa,trunc:An}=y.globals,tr={mode:p.normal,fpsText:"60.00",appearance:0,x:0,y:0,w:0},Pn=new Map([[p.easy,"EASY"],[p.normal,"NORMAL"],[p.hard,"HARD"]]),Q=V(tr,t=>({mode:e,fpsText:n,appearance:s,x:a,y:r,w:i})=>{const o={position:"absolute",left:`${a}px`,top:`${r}px`,width:`${i}px`,height:`${i}px`},c=s*100,l=c/2,d=Cn(Cn({},o),{backgroundColor:"#696",clipPath:`polygon(0 0, 0 50%, ${l}% ${50+l}%, ${c}% ${c}%)`}),u={position:"absolute",bottom:`${i/10}px`,left:`${i/10}px`,color:"white",fontSize:`${i/5}px`,opacity:s};return t`    <div style="${d}"></div>    <div style="${o}">      <div style="position:relative;width:100%;height:100%">        <div style="${u}">${Pn.get(e)}<br>${n}FPS</div>      </div>    </div>  `});j.subscribe(({width:t,height:e})=>{const n=Qa(t,e)*.7;Q.update(()=>({x:(t-n*1.05)/2,y:(e+n*.65)/2,w:n*.2}))}),yn.subscribe(t=>Q.update(()=>{const e=An(t*100);return{fpsText:`${An(e/100)}.${(e%100).toString().padStart(2,"0")}`}}));var Tn=Object.assign;const{min:er}=y.globals,pt=V({deaths:0,appearance:0,x:0,y:0,w:0},t=>({deaths:e,appearance:n,x:s,y:a,w:r})=>{const i={position:"absolute",left:`${s}px`,top:`${a}px`,width:`${r}px`,height:`${r}px`},o=n*100,c=o/2,l=Tn(Tn({},i),{backgroundColor:"#669",clipPath:`polygon(50% 100%, ${50+c}% ${100-c}%, ${o}% ${100-o}%, 0 100%)`}),d={position:"absolute",bottom:`${r/10}px`,right:`${r/10}px`,textAlign:"right",fontSize:`${r/5}px`,color:"white",opacity:n};return t`    <div style="${l}"></div>    <div style="${i}">      <div style="position:relative;width:100%;height:100%">        <div style="${d}">${e}<br>death${e>1?"s":""}</div>      </div>    </div>  `});j.subscribe(({width:t,height:e})=>{const n=er(t,e)*.7;pt.update(()=>({x:(t+n*.65)/2,y:(e+n*.65)/2,w:n*.2}))});var _n=Object.assign;const{min:nr}=y.globals,dt=V({name:"-",appearance:0,x:0,y:0,w:0},t=>({name:e,appearance:n,x:s,y:a,w:r})=>{const i={position:"absolute",left:`${s}px`,top:`${a}px`,width:`${r}px`,height:`${r}px`},o=n*100,c=o/2,l=_n(_n({},i),{backgroundColor:"#969",clipPath:`polygon(100% 50%, ${100-c}% ${50-c}%, ${100-o}% ${100-o}%, 100% 100%)`}),d={position:"absolute",top:`${r/10}px`,right:`${r/10}px`,textAlign:"right",fontSize:`${r/5}px`,color:"white",opacity:n};return t`    <div style="${l}"></div>    <div style="${i}">      <div style="position:relative;width:100%;height:100%">        <div style="${d}">Event<br>${e||"-"}</div>      </div>    </div>  `});j.subscribe(({width:t,height:e})=>{const n=nr(t,e)*.7;dt.update(()=>({x:(t+n*.65)/2,y:(e-n*1.05)/2,w:n*.2}))});var S={swimOrb:{},linearOrb:{},lazer:{},landolt:{}},ut=Object.assign;const{pi:sr,pi2:Ln,min:xe,cos:Bt,sin:zt}=y.globals,Ht=(t,e,n,s,a)=>{const r=t-n,i=e-s,o=a/2+3;return r*r+i*i<=o*o},In=(t,e,n,s,a,r)=>{t.save(),t.beginPath(),t.globalAlpha=.5,t.fillStyle=r,t.arc(n,s,a*(2-e/30),0,Ln),t.fill(),t.closePath(),t.restore()},Dn=(t,e,n,s,a,r,i)=>{t.save(),t.beginPath(),t.globalAlpha=i,t.fillStyle=a,t.strokeStyle=r,t.arc(e,n,s,0,Ln),t.fill(),t.stroke(),t.closePath(),t.restore()},U=(t,e,n,s,a=0,r="lime")=>({id:S.swimOrb,time:a,angle:t,radius:e,speed:n,width:s,color:r}),ar=(t,{time:e,angle:n,radius:s,width:a,color:r})=>{const i=g+s*Bt(n),o=g+s*zt(n);if(e<=30&&In(t,e,i,o,a,r),e>=15){const c=xe(xe((e-15)/30,1),(300-e)/30);Dn(t,i,o,a,"white",r,c)}},rr=(t,e,n)=>{const{time:s,angle:a,radius:r,speed:i,width:o}=t,c=g+r*Bt(a),l=g+r*zt(a);return{nextEnemies:s>=300?[]:[ut(ut({},t),{angle:a+(s<45?0:i),time:s+1})],hit:s<45||s>270?!1:Ht(e,n,c,l,o)}},tt=(t,e,n,s,a,r,i,o=0)=>({id:S.linearOrb,time:o,x:t,y:e,angle:n,speed:s,width:a,fillColor:r,strokeColor:i}),Wn=(t,{time:e,x:n,y:s,width:a,fillColor:r,strokeColor:i})=>{if(e<=30&&In(t,e,n,s,a,i),e>=15){const o=xe((e-15)/30,1);Dn(t,n,s,a,r,i,o)}},Rn=(t,e,n)=>{const{time:s,x:a,y:r,angle:i,speed:o,width:c}=t;if(s<45)return{nextEnemies:[ut(ut({},t),{time:s+1})],hit:!1};const l=a+o*Bt(i),d=r+o*zt(i),u=l-g,f=d-g,v=m+c/2;return u*u+f*f>v*v?{nextEnemies:[],hit:!1}:{nextEnemies:[ut(ut({},t),{x:l,y:d,time:s+1})],hit:Ht(e,n,a,r,c)}},or=(t,e,n,s,a,r=0)=>({id:S.orbToCenter,time:r,x:g+m*Bt(t),y:g+m*zt(t),angle:t+sr,speed:e,width:n,fillColor:s,strokeColor:a}),ir=(t,e,n)=>{const{x:s,y:a,speed:r}=t;return Ht(g,g,s,a,r-3)?{nextEnemies:[],hit:!1}:Rn(t,e,n)};var et={none:{},rotate:{},gravity:{},swap:{},mirror:{},memorial:{}};const jn=t=>t;var ht=({id:t,name:e,wait:n,duration:s,inputEffect:a=jn,afterEffect:r=jn,props:i})=>({id:t,name:e,wait:n,waitTime:0,duration:s,eventTime:0,inputEffect:a,afterEffect:r,props:i});const{infinity:cr}=y.globals;var L=()=>ht({id:et.none,name:"-",wait:cr,duration:0,props:{}}),Un=Object.assign;const{max:lr,cos:pr,sin:dr}=y.globals,{swimOrb:Ee,linearOrb:ur,orbToCenter:hr}=S,N=t=>t.flatMap(e=>e.id===Ee?[Un(Un({},e),{time:lr(e.time,270)})]:[]),W=(t,e,n)=>s=>{const{id:a,angle:r,radius:i}=s;if([Ee,ur,hr].includes(a)){const{x:o,y:c}=a===Ee?{x:g+i*pr(r),y:g+i*dr(r)}:s,l=o-e,d=c-n,u=60-t;return l*l+d*d<=u*u?[]:[s]}return[s]},Ot=(t,e)=>(n,s,a,r)=>{const{id:i,eventTime:o,duration:c}=r;return i===et.none?a===30?{nextEvt:t(n,s),nextEvtTime:a+1}:{nextEvt:r,nextEvtTime:a+1}:i!==et.none&&o<c?{nextEvt:r,nextEvtTime:a+1}:{nextEvt:L(),nextEvtTime:-e.get(n)}},fr=(t,e,n)=>(n.save(),n.resetTransform(),n.translate(g,g),n.rotate(e*t.speed),n.translate(-g,-g),n.drawImage(n.canvas,0,0),n.restore(),t);var Nn=(t,e)=>ht({id:et.rotate,name:"\u6D41\u8EE2",wait:300,duration:e,afterEffect:fr,props:{speed:t}});const{document:gr,min:Fn,max:Bn,abs:vr,cos:Se,sin:Oe}=y.globals,Me=(t,e,n,s=0)=>({id:S.lazer,time:s,x:t,y:e,angle:n}),zn=t=>Bn(M*2*((t-60)/15),0),Hn=t=>Bn(Fn(t-75,155-t,15),1),br=(t,e,n,s,a,r)=>{const i=t-n,o=e-s,c=i*Se(a)+o*Oe(a),l=vr(-i*Oe(a)+o*Se(a))-3;return c>=0&&c<=zn(r)&&l<=Hn(r)/2},$r=({time:t,x:e,y:n,angle:s},a,r)=>({nextEnemies:t>=185?[]:[Me(e,n,s,t+1)],hit:t>45&&t<155&&br(a,r,e,n,s,t)}),wr=(t,e,n,s)=>{const a=1-e/30;t.save(),t.fillStyle=`rgba(255, 255, 0, ${a/2})`,t.beginPath();const r=20+a*40,i=r/2;t.fillRect(n-i,s-i,r,r),t.restore()},qt=gr.createElement("canvas");qt.width=20,qt.height=20;const P=qt.getContext("2d");P.strokeStyle="black",P.lineWidth=1,P.beginPath(),P.fillStyle="#ff0",P.moveTo(0,0),P.lineTo(8,2),P.lineTo(8,18),P.lineTo(0,20),P.closePath(),P.fill(),P.stroke(),P.fillStyle="#66f",P.fillRect(5,5,15,10),P.strokeRect(5,5,15,10),P.beginPath(),P.moveTo(10,10),P.lineTo(20,10),P.closePath(),P.stroke();const mr=(t,e,n,s)=>{t.save(),t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=1,t.beginPath(),t.moveTo(e,n),t.lineTo(e+M*2*Se(s),n+M*2*Oe(s)),t.closePath(),t.stroke(),t.restore()},yr=(t,e,n,s)=>{t.save();const a=Hn(s),r=t.createLinearGradient(e,n-a,e,n+a);r.addColorStop(0,"rgba(255, 255, 0, 0)"),r.addColorStop(.25,"rgba(255, 255, 0, 1)"),r.addColorStop(.75,"rgba(255, 255, 0, 1)"),r.addColorStop(1,"rgba(255, 255, 0, 0)"),t.fillStyle=r,t.fillRect(e,n-a,zn(s),a*2),t.restore()},xr=(t,{time:e,x:n,y:s,angle:a})=>{e>=15&&e<=60&&mr(t,n,s,a),t.save(),t.translate(n,s),t.rotate(a),t.translate(-n,-s),e<30&&wr(t,e,n,s),e>15&&(t.globalAlpha=Fn((e-15)/30,(185-e)/30,1),t.drawImage(qt,n-10,s-10)),e>60&&e<155&&(t.globalAlpha=1,yr(t,n,s,e)),t.restore()};var ft=Object.assign;const{max:ke}=y.globals,Er=(t,e)=>{const{radius:n,time:s}=t;return s<30?t:n===0?ft(ft({},t),{time:ke(s,270)}):ft(ft({},t),{radius:ke(n-e,0)})},Sr=(t,{props:{gravity:e}})=>{const{pr:n,enemies:s}=t;return ft(ft({},t),{pr:ke(n-e,10),enemies:s.map(a=>a.id!==S.swimOrb?a:Er(a,e))})};var Gt=(t,e)=>ht({id:et.gravity,name:"\u91CD\u529B",wait:300,duration:e,inputEffect:Sr,props:{gravity:t,lines:[]}}),qn=Object.assign;const{pi:Gn,max:Yn,sqrt:Or,cos:Xn,sin:Zn}=y.globals,Kn=(t,e,n,s,a,r,i,o)=>({id:S.landolt,x:t,y:e,angle:n,radius:s,angleSpeed:a,radiusSpeed:r,holeWidth:i,lineWidth:o}),Mr=(t,{x:e,y:n,angle:s,radius:a,holeWidth:r,lineWidth:i})=>{t.save(),t.beginPath();const o=Yn(a-i,0),c=Yn(a+i,0),l=t.createRadialGradient(e,n,o,e,n,c);l.addColorStop(0,"rgba(200, 200, 200, 0.5)"),l.addColorStop(.25,"rgba(200, 200, 200, 1)"),l.addColorStop(.75,"rgba(200, 200, 200, 1)"),l.addColorStop(1,"rgba(200, 200, 200, 0.5)"),t.strokeStyle=l,t.lineWidth=i*2,t.lineCap="round",t.arc(e,n,a,s-r/2,s+r/2,!0),t.stroke(),t.restore()},kr=(t,e,n,s)=>{const a=t-g,r=e-g;return n>Or(a*a+r*r)+m+s*2},Cr=(t,e,n,s,a,r,i,o)=>{const c=i-t,l=o-e,d=c*c+l*l,u=s-r/2-3,f=s+r/2+3;if(d<u*u||d>f*f)return!1;const v=n-a/2+Gn/2,w=n+a/2-Gn/2;return Xn(v)*c+Zn(v)*l<0||Xn(w)*c+Zn(w)*l<0},Ar=(t,e,n)=>{const{x:s,y:a,angle:r,radius:i,angleSpeed:o,radiusSpeed:c,holeWidth:l,lineWidth:d}=t;return{nextEnemies:kr(s,a,i,d)?[]:[qn(qn({},t),{angle:r+o,radius:i+c})],hit:Cr(s,a,r,i,l,d,e,n)}};var F=Object.assign;const{pi:Pr,sqrt:Tr,cos:Vn,sin:Jn,atan2:Qn}=y.globals,ts={inner:!1,outer:!1,quick:!1,brake:!1},_r=(t,{eventTime:e,duration:n,props:{speed:s}})=>{if(e>=n)return{enemies:t.enemies.map($=>$.id===S.swimOrb?F(F({},$),{color:"lime"}):$)};const{inner:a,outer:r,quick:i,brake:o,enemies:c}=t,l=r-a,d=o-i;if(l===0&&d===0)return F(F({},ts),{enemies:c.map($=>$.id===S.swimOrb?F(F({},$),{color:"red"}):$)});const u=Qn(d,l),f=Vn(u),v=Jn(u),w=s*f,b=s*v;return F(F({},ts),{enemies:c.map($=>{if($.id!==S.swimOrb)return $;const{angle:E,radius:O}=$,k=O*Vn(E)+w,T=O*Jn(E)+b,C=Qn(T,k),_=Tr(k*k+T*T),mt=m+$.width;return F(F({},$),{angle:_>mt?C+Pr:C,radius:_>mt?mt*2-_:_,color:"red"})})})};var Yt=(t,e)=>ht({id:et.swap,name:"\u904D\u6191",wait:300,duration:e,inputEffect:_r,props:{speed:t}}),es=Object.assign;const{pi:Xt,min:Lr,cos:ns,sin:ss,random:Ir}=y.globals,Dr=({playerInvincible:t,pa:e,pr:n,enemies:s},a)=>{const{time:r}=a.props,i=Lr(r/60,1);St(e-Xt,i,"cyan");const o=g+n*ns(-e+Xt),c=g+n*ss(-e+Xt);return(i===1&&t===0||Ir()<.5)&&Ut(o,c),{pa:i===1&&t===0&&s.some(({id:d,angle:u,radius:f,width:v})=>{if(d===S.swimOrb){const w=g+f*ns(u),b=g+f*ss(u);return Ht(w,b,o,c,v)}return!1})?e-Xt:e,evt:es(es({},a),{props:{time:r+1}}),enemies:t>0?s.flatMap(W(t,o,c)):s}};var Ce=t=>ht({id:et.mirror,name:"\u88CF\u73FE",wait:300,duration:t,inputEffect:Dr,props:{time:0}}),as=Object.assign;const{pi2:Wr,infinity:Rr}=y.globals,jr=({deaths:t,pa:e},n)=>{const{props:{done:s,speed:a}}=n;return{pa:s?e+a:e+a-t*Wr,evt:as(as({},n),{props:{done:!0,speed:a+1e-4}})}};var Ur=()=>ht({id:et.memorial,name:"\u56DE\u5411",wait:300,duration:Rr,inputEffect:jr,props:{done:!1,speed:0}}),B=Object.assign;const{pi:nt,pi2:Nr,infinity:rs,max:Fr,trunc:Br,cos:Ae,sin:Pe,atan2:zr,random:Y}=y.globals,Hr=new Map([[p.easy,40],[p.normal,20],[p.hard,10]]),qr=new Map([[p.easy,()=>6+Y()*2],[p.normal,()=>6+Y()*3],[p.hard,()=>6+Y()*4]]),Gr=new Map([[p.easy,()=>-.008*Y()],[p.normal,()=>-.01*Y()],[p.hard,()=>-.016*Y()]]),Yr=(t,e)=>U(-e+.4+Y()*nt*1.6,Y()*m,Gr.get(t)(),qr.get(t)()),Xr=new Map([[p.easy,.02],[p.normal,.035],[p.hard,.05]]),Zr=new Map([[p.easy,500],[p.normal,350],[p.hard,250]]),Kr=t=>[...Array(4)].map((e,n)=>{const s=t+n*(nt/2);return Me(g+m*Ae(s),g+m*Pe(s),s+1.125*nt)}),Vr=new Map([[p.easy,1],[p.normal,1.3],[p.hard,1.7]]),Jr=new Map([[p.easy,500],[p.normal,450],[p.hard,350]]),Qr=new Map([[p.easy,{speed:.3,hole:nt/1.2,width:5}],[p.normal,{speed:.35,hole:nt/1.3,width:6}],[p.hard,{speed:.4,hole:nt/2,width:7}]]),to=(t,e)=>{const{speed:n,hole:s,width:a}=Qr.get(t),r=-e-nt*.7,i=g+m*.5*Ae(r),o=g+m*.5*Pe(r);return Kn(i,o,-e,1,.03,n,s,a)},eo=new Map([[p.easy,1],[p.normal,1.5],[p.hard,2]]),no=new Map([[p.easy,35],[p.normal,20],[p.hard,15]]),os=["red","yellow","lime","cyan","blue","magenta"],so=(t,e,n,s)=>{const a=g+m*Ae(t),r=g+m*Pe(t),i=zr(n-r,e-a);return tt(a,r,i,1,6,"white",os[s])},ao=new Map([[p.easy,400],[p.normal,350],[p.hard,200]]),ro=new Map([[p.easy,{width:6,speed:.08}],[p.normal,{width:7,speed:.013}],[p.hard,{width:8,speed:.017}]]),oo=(t,e,n,s)=>{const{width:a,speed:r}=ro.get(t),i=a*3.5,o=-e-nt*.6,c=(n+(s?a:0))%i;return[...Array(Br(m/i)+1)].map((l,d)=>U(o,c+d*i,r,a,0,"gray"))},io=new Map([[p.easy,150],[p.normal,100],[p.hard,80]]),co=new Map([[p.easy,{speed:.8,length:8}],[p.normal,{speed:.9,length:12}],[p.hard,{speed:1,length:16}]]),lo=(t,e)=>{const{speed:n,length:s}=co.get(t),a=Nr/s;return[...Array(s)].map((r,i)=>tt(g,g,e+i*a,n,6,"white","blue"))},po=Ot((t,e)=>e===1?B(B({},Nn((Y()<.5?-1:1)*Xr.get(t),rs)),{wait:120}):e===3?B(B({},Gt(Vr.get(t),rs)),{wait:120}):e===5?B(B({},Yt(eo.get(t),t===p.hard?30:60)),{wait:60}):e===9?Ur():L(),new Map([[p.easy,0],[p.normal,0],[p.hard,0]])),uo=(t,e)=>t===6?e.map(n=>n.id===S.swimOrb?B(B({},n),{color:"lime"}):n):t===5?e.filter(({id:n})=>n!==S.landolt):t===8?e.map(n=>n.id===S.lazer?B(B({},n),{time:Fr(n.time,155)}):n):t===9?N(e):e,Te=(t=30,e=0,n=0,s=0,a=0,r=0,i=0,o=0,c=!1,l=0,d=0)=>(u,f,v,{enemies:w,px:b,py:$,pa:E,pr:O,playerInvincible:k,evt:T})=>{const C=(f-1)%10,_=e>=Hr.get(u),mt=C>=2&&C<=7&&n>=Zr.get(u),_s=C===4&&s>=Jr.get(u),Qt=C>=6&&a>=no.get(u),Be=C>=7&&o>=ao.get(u),ze=C>=8&&l>=io.get(u),wc=C===9?[]:[_?[Yr(u,E)]:[],mt?Kr(-E):[],_s?[to(u,E)]:[],Qt?[so(r,b,$,i)]:[],Be?oo(u,E,O,c):[],ze?lo(u,d):[]].flat(),Ls=(k>0?w.flatMap(W(k,b,$)):w).concat(wc),{nextEvt:mc,nextEvtTime:yc}=C%2?po(u,C,t,T):{nextEvt:L(),nextEvtTime:30};return{enemies:v?uo(C,Ls):Ls,nextStage:Te(yc,_?0:e+1,mt?0:n+1,_s?0:s+1,Qt?0:a+1,Qt?r+.5:r,Qt?(i+1)%os.length:i,Be?0:o+1,Be?!c:c,ze?0:l+1,ze?d:d-.3),evt:mc}},{pi:is,pi2:ho,trunc:cs}=y.globals,fo=new Map([[p.easy,t=>200-t*10],[p.normal,t=>160-t*10],[p.hard,t=>120-t*8]]),ls=new Map([[p.easy,t=>({length:6+cs(t/2),width:6,speed:1})],[p.normal,t=>({length:7+t,width:6,speed:1})],[p.hard,t=>({length:10+cs(t/2),width:7,speed:1.5})]]),ps=(t,e,n,s)=>{const{length:a,width:r,speed:i}=ls.get(t)(e),o=s?"blue":"magenta";return[...Array(a)].map((c,l)=>{const d=n+ho*(l/a)+(s?0:is/a);return s?tt(g,g,d,i,r,"white",o):or(d,i,r,"white",o)})},_e=(t=0,e=0)=>(n,s,a,{enemies:r,px:i,py:o,pa:c,pr:l,playerInvincible:d})=>{const u=(s-1)%10,f=fo.get(n)(u),v=[d>0?r.flatMap(W(d,i,o)):r,t===f/2?ps(n,u,e,!0):[],t>=f&&(n!==p.hard||u>=5)?ps(n,u,e,!1):[],n===p.hard&&t>=f?[U(-c-.63,l,.01,6)]:[]].flat();return a&&s%10==1?{enemies:N(v),nextStage:Te(),evt:L()}:{enemies:v,nextStage:_e(t>=f?0:t+1,t>=f?e+is/ls.get(n)(u).length*1.2:e),evt:L()}},{pi:go,random:vo}=y.globals,bo=new Map([[p.easy,t=>200-t*20],[p.normal,t=>175-t*20],[p.hard,t=>160-t*18]]),$o=new Map([[p.easy,t=>({length:5,width:8,speed:.01+t*.0015})],[p.normal,t=>({length:5,width:9,speed:.013+t*.002})],[p.hard,t=>({length:7,width:8.3,speed:.016+t*.0026})]]),wo=(t,e,n,s)=>{const a=-n+(s?1:-1)*go*(.3+.4*vo()),{length:r,width:i,speed:o}=$o.get(t)(e),c=(s?-1:1)*o;return[...Array(r+1-s)].map((l,d)=>U(a,m*((d+s*.5)/r),c,i))},mo=new Map([[p.easy,t=>Ce(200+t*10)],[p.normal,t=>Ce(250+t*25)],[p.hard,t=>Ce(300+t*25)]]),yo=new Map([[p.easy,200],[p.normal,100],[p.hard,0]]),xo=Ot((t,e)=>mo.get(t)(e),yo),Le=(t=130,e=0,n=0)=>(s,a,r,{enemies:i,evt:o,px:c,py:l,pa:d,playerInvincible:u})=>{const f=(a-1)%10,v=t>=bo.get(s)(f%5),w=[u>0?i.flatMap(W(u,c,l)):i,v?wo(s,f%5,d,e):[]].flat(),{nextEvt:b,nextEvtTime:$}=f<5?{nextEvt:o,nextEvtTime:n}:xo(s,f,n,o);return r&&a%10==1?{enemies:N(w),nextStage:_e(),evt:L()}:{enemies:w,nextStage:Le(v?0:t+1,v?1-e:e,$),evt:b}},{pi:Eo,cos:So,sin:Oo,atan2:Mo}=y.globals,ko=new Map([[p.easy,t=>30-t],[p.normal,t=>20-t],[p.hard,t=>15-t]]),Co=new Map([[p.easy,6],[p.normal,5],[p.hard,6]]),ds=["red","yellow","lime","cyan","blue","magenta"],Ao=(t,e,n,s,a,r)=>{const i=g+m*So(s),o=g+m*Oo(s),c=Mo(n-o,e-i);return t<5?[tt(i,o,c,1,a,"white",r)]:[tt(i,o,c,1,a,"white",r),tt(g*2-i,g*2-o,c+Eo,1,a,"white",r)]},Ie=(t=0,e=0,n=0)=>(s,a,r,{enemies:i,px:o,py:c,playerInvincible:l,evt:d})=>{const u=(a-1)%10,f=t>=ko.get(s)(u%5),v=[l>0?i.flatMap(W(l,o,c)):i,f?Ao(u,o,c,e,Co.get(s),ds[n]):[]].flat();return r&&a%10==1?{enemies:N(v),nextStage:Le(),evt:L()}:{enemies:v,nextStage:Ie(f?0:t+1,e+.02,f?(n+1)%ds.length:n),evt:d}},{pi:us,random:st}=y.globals,Po=new Map([[p.easy,t=>30-t*2],[p.normal,t=>25-t*2],[p.hard,t=>15-t]]),To=new Map([[p.easy,()=>-.008+.016*st()],[p.normal,()=>-.01+.02*st()],[p.hard,()=>-.016+.032*st()]]),_o=new Map([[p.easy,()=>6+st()*3],[p.normal,()=>7+st()*4],[p.hard,()=>8+st()*5]]),Lo=new Map([[p.easy,t=>Yt(1,150+t*10)],[p.normal,t=>Yt(1.5,200+t*20)],[p.hard,t=>Yt(2,250+t*30)]]),Io=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),Do=Ot((t,e)=>Lo.get(t)(e),Io),De=(t=0,e=0)=>(n,s,a,{enemies:r,evt:i,px:o,py:c,pa:l,playerInvincible:d})=>{const u=(s-1)%10,f=t>=Po.get(n)(u),v=[d>0?r.flatMap(W(d,o,c)):r,f?[U(-l+us*.2+st()*us*1.6,m*st(),To.get(n)(),_o.get(n)())]:[]].flat(),{nextEvt:w,nextEvtTime:b}=Do(n,u,e,i);return a&&s%10==1?{enemies:N(v),nextStage:Ie(),evt:L()}:{enemies:v,nextStage:De(f?0:t+1,b),evt:w}},{pi:Mt,pi2:Wo,cos:Ro,sin:jo,random:z}=y.globals,Uo=new Map([[p.easy,t=>60-t*3],[p.normal,t=>54-t*4],[p.hard,t=>26-t*2]]),No=new Map([[p.easy,()=>-.008*z()],[p.normal,()=>-.01*z()],[p.hard,()=>-.01*z()]]),Fo=new Map([[p.easy,()=>6+z()*2],[p.normal,()=>6+z()*3],[p.hard,()=>6+z()*4]]),Bo=new Map([[p.easy,t=>500-t*20],[p.normal,t=>300-t*30],[p.hard,t=>250-t*30]]),zo=new Map([[p.easy,{speed:.4,hole:Mt/1.3,width:5}],[p.normal,{speed:.5,hole:Mt/1.5,width:6}],[p.hard,{speed:.6,hole:Mt/2.3,width:7}]]),Ho=(t,e,n)=>{const{speed:s,hole:a,width:r}=zo.get(t),i=g+(e<=45?0:m/2*Ro(n)),o=g+(e<=45?0:m/2*jo(n));return Kn(i,o,z()*Wo,1,z()<.5?.03:-.03,s,a,r)},We=(t=0,e=100)=>(n,s,a,{enemies:r,pa:i,px:o,py:c,playerInvincible:l})=>{const d=t>=Uo.get(n)(s-40),u=e>=Bo.get(n)((s-1)%5),f=[l>0?r.flatMap(W(l,o,c)):r,d?[U(-i+.4+z()*Mt*1.6,m*z(),No.get(n)(),Fo.get(n)())]:[],u?[Ho(n,s,Mt-i)]:[]].flat();return a&&s%10==1?{enemies:N(f),nextStage:De(),evt:L()}:{enemies:f,nextStage:We(d?0:t+1,u?0:e+1),evt:L()}},{pi:qo,pi2:hs,min:Go,random:X}=y.globals,Yo=new Map([[p.easy,t=>28-t*2],[p.normal,t=>25-t*2],[p.hard,t=>15-t]]),Xo=new Map([[p.easy,()=>-.008*X()],[p.normal,()=>-.01*X()],[p.hard,()=>-.018*X()]]),Zo=new Map([[p.easy,()=>6+X()*2],[p.normal,()=>6+X()*3],[p.hard,()=>6+X()*4]]),Ko=new Map([[p.easy,t=>Gt(.5+t*.05,200)],[p.normal,t=>Gt(.5+t*.08,200)],[p.hard,t=>Gt(.5+t*.12,200)]]),Vo=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),Jo=Ot((t,e)=>Ko.get(t)(e),Vo),Re=(t=0,e=0,n=0)=>(s,a,r,{enemies:i,evt:o,px:c,py:l,pa:d,playerInvincible:u})=>{const f=(a-1)%10,v=t>=Yo.get(s)(f),w=s!==p.easy&&f>5&&e>=250-f*10,b=[u>0?i.flatMap(W(u,c,l)):i,v?[U(-d+.4+X()*qo*1.6,m*Go(.7+X()*.4,1),Xo.get(s)(),Zo.get(s)())]:[],w?new Array(10).fill(X()*hs).map((O,k)=>tt(g,g,k/10*hs+O,2,7,"white","blue")):[]].flat(),{nextEvt:$,nextEvtTime:E}=Jo(s,f,n,o);return r&&a%10==1?{enemies:N(b),nextStage:We(),evt:L()}:{enemies:b,nextStage:Re(v?0:t+1,w?0:e+1,E),evt:$}},{pi:gt,cos:Qo,sin:ti,random:R}=y.globals,ei=new Map([[p.easy,t=>30-t*2],[p.normal,t=>27-t*2],[p.hard,t=>14-t]]),ni=new Map([[p.easy,()=>-.008*R()],[p.normal,()=>-.01*R()],[p.hard,()=>-.01*R()]]),si=new Map([[p.easy,()=>6+R()*2],[p.normal,()=>6+R()*3],[p.hard,()=>6+R()*4]]),ai=new Map([[p.easy,{wait:t=>300-t*10,radius:.7,angle:t=>t+gt*(.9+R()*.2)}],[p.normal,{wait:t=>200-t*10,radius:.8,angle:t=>t+gt*(.9+R()*.2)}],[p.hard,{wait:t=>150-t*10,radius:.95,angle:t=>t+gt*(.8+R()*.4)}]]),je=(t=0,e=0,n=gt/3)=>(s,a,r,{enemies:i,px:o,py:c,pa:l,playerInvincible:d})=>{const u=t>=ei.get(s)(a-20),{wait:f,radius:v,angle:w}=ai.get(s),b=e>=f(a-20),$=[d>0?i.flatMap(W(d,o,c)):i,u?[U(-l+.4+R()*gt*1.6,R()*m,ni.get(s)(),si.get(s)())]:[],b?[Me(g+v*m*Qo(n),g+v*m*ti(n),w(n))]:[]].flat();return r&&a%10==1?{enemies:N($),evt:L(),nextStage:Re()}:{enemies:$,evt:L(),nextStage:je(u?0:t+1,b?0:e+1,b?n+gt/3:n)}},{pi:ri,pi2:oi,random:Z}=y.globals,ii=new Map([[p.easy,t=>28-t*2],[p.normal,t=>25-t*2],[p.hard,t=>12-t]]),ci=new Map([[p.easy,()=>-.008*Z()],[p.normal,()=>-.01*Z()],[p.hard,()=>-.02*Z()]]),li=new Map([[p.easy,()=>6+Z()*2],[p.normal,()=>6+Z()*3],[p.hard,()=>6+Z()*4]]),pi=new Map([[p.easy,t=>({speed:.02,rotateCount:t>5?2:1})],[p.normal,t=>({speed:.02,rotateCount:t>5?3:2})],[p.hard,t=>({speed:.05,rotateCount:t>5?4:2})]]),di=new Map([[p.easy,600],[p.normal,300],[p.hard,0]]),ui=Ot((t,e)=>{const{speed:n,rotateCount:s}=pi.get(t)(e);return Nn((Z()<.5?-1:1)*n,oi/n*s)},di),Ue=(t=0,e=0)=>(n,s,a,{enemies:r,evt:i,px:o,py:c,pa:l,playerInvincible:d})=>{const u=(s-1)%10,f=t>=ii.get(n)(u),v=[d>0?r.flatMap(W(d,o,c)):r,f?[U(-l+.4+Z()*ri*1.6,Z()*m,ci.get(n)(),li.get(n)())]:[]].flat(),{nextEvt:w,nextEvtTime:b}=ui(n,u,e,i);return a&&s%10==1?{enemies:N(v),nextStage:je(),evt:L()}:{enemies:v,nextStage:Ue(f?0:t+1,b),evt:w}},{pi:hi,pi2:fi,random:I}=y.globals,fs=new Map([[p.easy,()=>6+I()*2],[p.normal,()=>6+I()*3],[p.hard,()=>6+I()*4]]),gi=new Map([[p.easy,t=>30-t*2],[p.normal,t=>27-t*2],[p.hard,t=>13-t]]),vi=new Map([[p.easy,()=>-.008*I()],[p.normal,()=>-.01*I()],[p.hard,()=>-.016*I()]]),bi=new Map([[p.easy,()=>!1],[p.normal,(t,e)=>t>5&&e>=30-t*2],[p.hard,(t,e)=>t>5&&e>=27-t*2]]),$i=new Map([[p.easy,()=>.5+I()*.5],[p.normal,()=>.7+I()*.6],[p.hard,()=>1+I()]]),kt=(t=0,e=0)=>(n,s,a,r)=>{const{enemies:i,evt:o,px:c,py:l,pa:d,playerInvincible:u}=r,f=t>=gi.get(n)(s),v=bi.get(n)(s,e),w=[u>0?i.flatMap(W(u,c,l)):i,f?[U(-d+.4+I()*hi*1.6,I()*m,vi.get(n)(),fs.get(n)())]:[],v?[tt(g+(2*I()-1)*20,g+(2*I()-1)*20,I()*fi,$i.get(n)(),fs.get(n)(),"white","blue")]:[]].flat();return a&&s%10==1?{enemies:N(w),nextStage:Ue(),evt:o}:{enemies:w,nextStage:kt(f?0:t+1,v?0:e+1),evt:o}};var Zt=()=>({level:1,mode:p.normal,practice:!1,stage:kt(),evt:L(),playerAngle:0,playerRadius:m/2,playerInvincible:0,deaths:0,frames:0,enemies:[]}),gs=Object.assign;const{min:vs,max:wi,round:bs,random:$s}=y.globals,mi=t=>{h.save(),h.beginPath(),h.fillStyle=`rgba(255, 255, 255, ${t})`,h.shadowColor="rgba(255, 255, 255, 0.5)",h.shadowBlur=10,h.font=`${M/4}px serif`,h.textAlign="center",h.fillText("\u8F2A\u5EFB",g,g-M/10),h.closePath(),h.restore()},yi=t=>{h.save(),h.beginPath(),h.fillStyle=`rgba(255, 255, 255, ${t})`,h.shadowColor="rgba(255, 255, 255, 0.5)",h.shadowBlur=10,h.font=`${M/10}px serif`,h.textAlign="center",h.fillText("\u2212\u56DE\u5411\u2212",g,g+M/30),h.closePath(),h.restore()};var ws=(t=0)=>({mode:e,level:n,practice:s})=>{t===0&&(at.update(()=>({appearance:0,playerAngle:0})),Q.update(()=>({appearance:0})),pt.update(()=>({appearance:0,deaths:0})),dt.update(()=>({appearance:0,name:"-"}))),jt(),mi(vs(t/60,(165-t)/60,1));const a=wi(vs((t-75)/30,(165-t)/60,1),0);if(yi(a),we.update(()=>({startOpacity:(t>105&&!s?bs($s()):1)*a,practiceOpacity:(t>105&&s?bs($s()):1)*a})),lt.update(()=>({opacity:t>105&&s?1:a})),t===105){const[r,i]=On().reduce(([o,c],{id:l,param:d})=>l===G.mode?[d,c]:[G.start,G.practice].includes(l)?[o,l]:[o,c],[e,null]);return $e(),lt.update(()=>({mode:r})),{nextId:x.title,nextArgs:[i===null?105:106],stateUpdate:{mode:r,practice:i===G.practice}}}return $e(),t===165?{nextId:s?x.practice:x.start,nextArgs:[],stateUpdate:{level:s?1:n,stage:kt()}}:{nextId:x.title,nextArgs:[t+1],stateUpdate:t===0?gs(gs({},Zt()),{mode:e}):{}}};const{pi2:xi,min:vt,max:Ne,trunc:Ei}=y.globals,Si=t=>{h.save(),h.beginPath();const e=1-vt(Ne((t%60-15)/30,0),1);h.fillStyle=`rgba(255, 255, 255, ${e})`,h.shadowColor="rgba(255, 255, 255, 0.5)",h.shadowBlur=10,h.font=`${m/3}px serif`,h.textAlign="center",h.fillText(3-Ei(t/60),g,m/2),h.restore()};var Oi=(t=0)=>({level:e,mode:n})=>{t===0&&(at.update(()=>({level:e})),Q.update(()=>({mode:n})));const s=vt(t/30,1);return at.update(()=>({appearance:s})),Q.update(()=>({appearance:s})),pt.update(()=>({appearance:s})),dt.update(()=>({appearance:s,name:"-"})),jt(),he(),fe(vt(t/30,1)),St(0,vt(Ne((t-60)/30,0),1)),h.globalAlpha=vt(Ne((t-30)/30,0),1),Ut(g+m/2,g),h.globalAlpha=vt(t/30,1),Nt(),h.globalAlpha=1,t<180&&Si(t),ge(-(t/160)*xi),t<180?{nextId:x.start,nextArgs:[t+1],stateUpdate:{}}:{nextId:x.main,nextArgs:[],stateUpdate:{frames:0}}};const{min:Mi}=y.globals,ki={opacity:0,top:0,fontSize:0,selected:null},H=t=>()=>be(G.stage,t),Ci=(t,e)=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"20%",transform:"translate(-50%, 0)",textAlign:"center",fontSize:`${e*1.7}px`,fontFamily:"serif",color:"white",opacity:t}),Ai=t=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:t}),q=(t,e)=>({outline:"none",border:`2px solid ${t?"white":"transparent"}`,margin:`${e/4}px 0 ${e/2}px`,width:`${e*7}px`,fontSize:`${e}px`,color:"white",backgroundColor:"transparent"}),Kt=V(ki,t=>({opacity:e,fontSize:n,selected:s})=>t`  <div style=${Ci(e,n)}>Select Level</div>  <div style=${Ai(e)}>    <button style=${q(s===1,n)} onClick=${H(1)}>Lv.1~10</button>    <button style=${q(s===2,n)} onClick=${H(2)}>Lv.11~20</button><br>    <button style=${q(s===3,n)} onClick=${H(3)}>Lv.21~30</button>    <button style=${q(s===4,n)} onClick=${H(4)}>Lv.31~40</button><br>    <button style=${q(s===5,n)} onClick=${H(5)}>Lv.41~50</button>    <button style=${q(s===6,n)} onClick=${H(6)}>Lv.51~60</button><br>    <button style=${q(s===7,n)} onClick=${H(7)}>Lv.61~70</button>    <button style=${q(s===8,n)} onClick=${H(8)}>Lv.71~80</button><br>    <button style=${q(s===9,n)} onClick=${H(9)}>Lv.81~90</button>    <button style=${q(s===10,n)} onClick=${H(10)}>Lv.91~100</button>  </div>`);j.subscribe(({width:t,height:e})=>{const s=Mi(t,e)*.03;Kt.update(()=>({fontSize:s}))});const{window:bt}=y.globals,D={};bt.addEventListener("keydown",({key:t})=>{D[t]=!0}),bt.addEventListener("keyup",({key:t})=>{D[t]=!1});let ms=[];const Vt=t=>{ms=[...t.touches]};bt.addEventListener("touchstart",Vt),bt.addEventListener("touchmove",Vt),bt.addEventListener("touchend",Vt),bt.addEventListener("touchcancel",Vt);const Pi=(t,e,n)=>{const s=n/e;return t.reduce((a,{clientX:r,clientY:i})=>{const o=r*s<i,c=i<n-r*s;return{left:a.left||o&&c,right:a.right||!o&&!c,up:a.up||!o&&c,down:a.down||o&&!c}},{})};let ys=0,xs=0;j.subscribe(({width:t,height:e})=>{ys=t,xs=e});var Fe=()=>{const t=Pi(ms,ys,xs);return{inner:D.a||D.ArrowLeft||t.left||!1,outer:D.d||D.ArrowRight||t.right||!1,quick:D.w||D.ArrowUp||t.up||!1,brake:D.s||D.ArrowDown||t.down||!1,pause:D.p||!1,escape:D.Escape||!1}};const{min:Es}=y.globals,Ti=[kt,Ue,je,Re,We,De,Ie,Le,_e,Te];var _i=(t=0,e=null)=>({mode:n})=>{if(Kt.update(()=>({selected:e,opacity:Es(t/30,(60-t)/30)})),lt.update(()=>({mode:n,opacity:Es((60-t)/30,1)})),t===30){if(Fe().escape)return Kt.update(()=>({opacity:0})),lt.update(()=>({opacity:0})),{nextId:x.title,nextArgs:[],stateUpdate:{}};const[s,a]=On().reduce(([r,i],{id:o,param:c})=>o===G.mode?[c,i]:[r,c],[n,null]);return{nextId:x.practice,nextArgs:[a===null?30:31,a],stateUpdate:{mode:s,level:a&&(a-1)*10+1,stage:(Ti[a-1]||kt)()}}}return $e(),t<60?{nextId:x.practice,nextArgs:[t+1,e],stateUpdate:{}}:{nextId:x.start,nextArgs:[],stateUpdate:{}}};const Li=new Map([[S.swimOrb,rr],[S.linearOrb,Rn],[S.orbToCenter,ir],[S.lazer,$r],[S.landolt,Ar]]),Ss=new Map([[S.swimOrb,ar],[S.linearOrb,Wn],[S.orbToCenter,Wn],[S.lazer,xr],[S.landolt,Mr]]);var Ii=Object.prototype.hasOwnProperty,Os=Object.getOwnPropertySymbols,Di=Object.prototype.propertyIsEnumerable,$t=Object.assign,Wi=(t,e)=>{var n={};for(var s in t)Ii.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&Os)for(var s of Os(t))e.indexOf(s)<0&&Di.call(t,s)&&(n[s]=t[s]);return n};const{pi2:Ms,cos:Ri,sin:ji,min:Ui,max:ks,random:Ni}=y.globals,Fi=()=>({state:Fe()}),Bi=({escape:t,mode:e})=>({returns:t?{nextId:x.title,nextArgs:[],stateUpdate:$t($t({},Zt()),{mode:e})}:!1}),zi=({pause:t,pauseTime:e})=>({returns:t&&e>10?{nextId:x.pause,nextArgs:[0],stateUpdate:{}}:!1}),Hi=t=>{var{evt:e}=t,n=Wi(t,["evt"]);return e.waitTime>=e.wait?{state:e.inputEffect(n,e)}:{}},qi=({inner:t,outer:e,quick:n,brake:s,pa:a,pr:r})=>({state:{pa:a+.007+(n-s)*.005,pr:Ui(ks(r+(e-t)*2,10),m-10)}}),Gi=()=>(he(),fe(),ge(),{}),Cs=({pa:t,pr:e})=>({state:{px:g+e*Ri(-t),py:g+e*ji(-t)}}),Yi=({practice:t,pa:e,pr:n,level:s,deaths:a,frames:r})=>{const i=e>=Ms,o=s+(i?1:0);if(t&&i&&o%10==1)return{returns:{nextId:x.title,nextArgs:[],stateUpdate:{}}};if(s===101){if(a>=100)return{returns:{nextId:x.title,nextArgs:[],stateUpdate:{}}};St(e);const{state:{px:c,py:l}}=Cs({pa:e,pr:n});return Ut(c,l),Nt(),{returns:{nextId:x.over,nextArgs:[],stateUpdate:{frames:r+1}}}}return{state:{pa:i?e%Ms:e,level:o,levelUp:i}}},Xi=({playerInvincible:t,pa:e,px:n,py:s})=>(St(e),(t===0||Ni()<.5)&&Ut(n,s),{}),Zi=({mode:t,level:e,levelUp:n,stage:s,pa:a,pr:r,px:i,py:o,playerInvincible:c,enemies:l,evt:d})=>{const u=s(t,e,n,{px:i,py:o,pa:a,pr:r,playerInvincible:c,enemies:l,evt:d});return{state:{stage:u.nextStage,evt:u.evt,enemies:u.enemies}}},Ki=({enemies:t,px:e,py:n})=>{const s=t.reduce((a,r)=>{const{id:i}=r,{nextEnemies:o,hit:c}=Li.get(i)(r,e,n);return Ss.get(i)(h,r),{nextEnemies:a.nextEnemies.concat(o),hit:a.hit||c}},{nextEnemies:[],hit:!1});return{state:{enemies:s.nextEnemies,hit:s.hit}}},Vi=({evt:t})=>{const{eventTime:e,duration:n,waitTime:s,wait:a,afterEffect:r,props:i}=t,o=s>=a;return Sn(o?1-e/n:s/a),{state:{evt:$t($t({},t),{waitTime:s+1,eventTime:o?e+1:0,props:o?r(i,e,h):i})}}},Ji=({mode:t,level:e,pa:n,evt:s})=>(at.update(()=>({level:e,playerAngle:n})),Q.update(()=>({mode:t})),dt.update(()=>({name:s.name})),Nt(),{}),Qi=({pa:t,pr:e})=>({state:{playerAngle:t,playerRadius:e}}),tc=t=>{const{level:e,mode:n,practice:s,stage:a,evt:r,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l,frames:d,enemies:u,hit:f}=t;return f&&c===0?(pt.update(()=>({deaths:l+1})),{returns:{nextId:x.death,nextArgs:[],stateUpdate:{level:e,mode:n,practice:s,stage:a,evt:r,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l+1,frames:d+1,enemies:u}}}):{}},ec=({pauseTime:t,level:e,mode:n,practice:s,stage:a,evt:r,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l,frames:d,enemies:u})=>({returns:{nextId:x.main,nextArgs:[t+1],stateUpdate:{level:e,mode:n,practice:s,stage:a,evt:r,playerAngle:i,playerRadius:o,playerInvincible:ks(c-1,0),deaths:l,frames:d+1,enemies:u}}});var nc=(t=0)=>e=>[Fi,Bi,zi,Gi,Hi,qi,Yi,Cs,Xi,Zi,Ki,Vi,Ji,Qi,tc,ec].reduce((n,s,a,r)=>{const{state:i,returns:o}=s(n);return o?(r.splice(a),o):Object.assign(n,i)},$t($t({},e),{pauseTime:t,pa:e.playerAngle,pr:e.playerRadius})),As=Object.assign,sc=t=>({mode:e})=>{const{escape:n,pause:s}=Fe();return n?{nextId:x.title,nextArgs:[],stateUpdate:As(As({},Zt()),{mode:e})}:t>10&&s?{nextId:x.main,nextArgs:[0],stateUpdate:{}}:{nextId:x.pause,nextArgs:[t+1],stateUpdate:{}}};const{pi2:Ps,cos:ac,sin:rc}=y.globals,oc=(t,e,n)=>{h.save(),h.beginPath(),h.fillStyle=`rgba(255, 0, 0, ${1-n/90})`,h.arc(t,e,20+n/4.5,0,Ps),h.fill(),h.closePath(),h.restore()},ic=(t,e,n)=>{h.save(),h.beginPath();const s=h.createRadialGradient(t,e,0,t,e,m*2);s.addColorStop(0,"rgba(255, 0, 0, 0)"),s.addColorStop(.05,"rgba(255, 0, 0, 0)"),s.addColorStop(.3+.7*(n/90),"rgba(255, 0, 0, 0.5)"),h.fillStyle=s,h.arc(t,e,m*2,0,Ps),h.fill(),h.closePath(),h.restore()};var cc=(t=0)=>({playerAngle:e,playerRadius:n,enemies:s,evt:{wait:a,waitTime:r,eventTime:i,duration:o,afterEffect:c,props:l}})=>{jt(),he(),fe(),St(e);const d=g+n*ac(-e),u=g+n*rc(-e);return oc(d,u,t),s.forEach(f=>Ss.get(f.id)(h,f)),Nt(),ge(),Sn(r>=a?1-i/o:r/a),ic(d,u,t),c(l,i,h),t<90?{nextId:x.death,nextArgs:[t+1],stateUpdate:{}}:{nextId:x.main,nextArgs:[],stateUpdate:{playerInvincible:60,playerAngle:0,playerRadius:m/2}}};const{pi2:lc,min:Jt,trunc:wt}=y.globals,pc=t=>{h.save(),h.fillStyle=`rgba(255, 255, 255, ${t})`,h.arc(g,g,m,0,lc),h.restore()},dc=t=>{h.save(),h.beginPath(),h.fillStyle=`rgba(0, 0, 0, ${t})`,h.shadowColor="rgba(0, 0, 0, 0.5)",h.shadowBlur=10,h.font=`${M/4}px serif`,h.textAlign="center",h.fillText("\u89E3\u8131",g,g-M/8),h.closePath(),h.restore()},uc=t=>{h.save(),h.beginPath(),h.fillStyle=`rgba(0, 0, 0, ${t})`,h.shadowColor="rgba(0, 0, 0, 0.5)",h.shadowBlur=10,h.font=`${M/10}px serif`,h.textAlign="center",h.fillText("GAME OVER",g,g),h.closePath(),h.restore()},hc=t=>{const e=t/60,n=wt(e/60).toString().padStart(2,"0"),s=(wt(e)%60).toString().padStart(2,"0"),a=wt((e-wt(e))*1e3).toString().padStart(3,"0");return`${n}:${s}.${a}`},fc=(t,e,n,s)=>{h.save(),h.beginPath(),h.fillStyle=`rgba(0, 0, 0, ${s})`,h.shadowColor="rgba(0, 0, 0, 0.5)",h.shadowBlur=10,h.font=`${M/20}px serif`,h.textAlign="center",h.fillText(`Mode: ${Pn.get(t)}`,g,g+M*.1),h.fillText(`Death${e>=2?"s":""}: ${e}`,g,g+M*.2),h.fillText(`Time: ${n}`,g,g+M*.3)};var gc=(t=0,e=null)=>({mode:n,deaths:s,frames:a})=>{if(t>690)return{nextId:x.over,nextArgs:[t,e],stateUpdate:{}};if(t<=120){const r=1-t/120;at.update(()=>({appearance:r,level:100})),Q.update(()=>({appearance:r})),pt.update(()=>({appearance:r})),dt.update(()=>({appearance:r})),Rt.update(()=>({opacity:r}))}if(t>=120&&t<=420){const r=wt((t-120)*(255/300)),i=wt((r+102)/2),o=`rgb(${r}, ${r}, ${r})`,c=`rgb(${i}, ${i}, ${i})`;document.body.style.backgroundImage=`radial-gradient(circle closest-side, ${o} 60%, ${c} 100%, #666 200%)`}return t===420&&Rt.update(()=>({opacity:1})),t>=420&&(jt(),pc(Jt((t-420)/120,1))),t>=420&&dc(Jt((t-420)/120,1)),t>=570&&uc(Jt((t-570)/60,1)),t>=630&&fc(n,s,e,Jt((t-630)/60,1)),{nextId:x.over,nextArgs:[t+1,e||hc(a)],stateUpdate:{}}};const{now:vc}=y.globals,bc=new Map([[x.title,ws],[x.start,Oi],[x.practice,_i],[x.main,nc],[x.pause,sc],[x.death,cc],[x.over,gc]]),Ts=(t,e)=>()=>{Ra(vc());const{nextId:n,nextArgs:s,stateUpdate:a}=t(e);return Ts(bc.get(n)(...s),Object.assign(e,a))},{bind:$c}=y.hyperhtml;$c(document.body)`  ${Rt.render()}  ${at.render()}  ${Q.render()}  ${pt.render()}  ${dt.render()}  ${we.render()}  ${Kt.render()}  ${lt.render()}`,Wa(Ts(ws(),Zt()))})();
