(function(){"use strict";/*! (c) Andrea Giammarchi - ISC */var te={};try{te.WeakMap=WeakMap}catch{te.WeakMap=(function(e,n){var a=n.defineProperty,r=n.hasOwnProperty,s=i.prototype;return s.delete=function(c){return this.has(c)&&delete c[this._]},s.get=function(c){return this.has(c)?c[this._]:void 0},s.has=function(c){return r.call(c,this._)},s.set=function(c,l){return a(c,this._,{configurable:!0,value:l}),this},i;function i(c){a(this,"_",{value:"_@ungap/weakmap"+e++}),c&&c.forEach(o,this)}function o(c){this.set(c[0],c[1])}})(Math.random(),Object)}var nt=te.WeakMap;/*! (c) Andrea Giammarchi - ISC */var ee={};try{ee.WeakSet=WeakSet}catch{(function(e,n){var a=r.prototype;a.add=function(s){return this.has(s)||n(s,this._,{value:!0,configurable:!0}),this},a.has=function(s){return this.hasOwnProperty.call(s,this._)},a.delete=function(s){return this.has(s)&&delete s[this._]},ee.WeakSet=r;function r(){n(this,"_",{value:"_@ungap/weakmap"+e++})}})(Math.random(),Object.defineProperty)}var Fe=ee.WeakSet;const{indexOf:Ca}=[],ct=(t,e,n,a,r,s)=>{const i="selectedIndex"in e;let o=i;for(;a<r;){const c=t(n[a],1);if(e.insertBefore(c,s),i&&o&&c.selected){o=!o;let{selectedIndex:l}=e;e.selectedIndex=l<0?a:Ca.call(e.querySelectorAll("option"),c)}a++}},Oa=(t,e)=>t==e,Pa=t=>t,Be=(t,e,n,a,r,s,i)=>{const o=s-r;if(o<1)return-1;for(;n-e>=o;){let c=e,l=r;for(;c<n&&l<s&&i(t[c],a[l]);)c++,l++;if(l===s)return e;e=c+1}return-1},Ta=(t,e,n,a,r,s)=>{for(;a<r&&s(n[a],t[e-1]);)a++,e--;return e===0},ne=(t,e,n,a,r)=>n<a?t(e[n],0):0<n?t(e[n-1],-0).nextSibling:r,$t=(t,e,n,a)=>{for(;n<a;)Ua(t(e[n++],-1))},mt=-1,Pt=1,Tt=0,La=50,Ia=(t,e,n,a,r,s,i,o)=>{let c=0,l=a<o?a:o;const p=Array(l++),h=Array(l);h[0]=-1;for(let b=1;b<l;b++)h[b]=i;const f=r.slice(s,i);for(let b=e;b<n;b++){const w=f.indexOf(t[b]);if(-1<w){const S=w+s;c=Ra(h,l,S),-1<c&&(h[c]=S,p[c]={newi:b,oldi:S,prev:p[c-1]})}}for(c=--l,--i;h[c]>i;)--c;l=o+a-c;const v=Array(l);let $=p[c];for(--n;$;){const{newi:b,oldi:w}=$;for(;n>b;)v[--l]=Pt,--n;for(;i>w;)v[--l]=mt,--i;v[--l]=Tt,--n,--i,$=$.prev}for(;n>=e;)v[--l]=Pt,--n;for(;i>=s;)v[--l]=mt,--i;return v},Da=(t,e,n,a,r,s,i)=>{const o=n+s,c=[];let l,p,h,f,v,$,b;t:for(l=0;l<=o;l++){if(l>La)return null;for(b=l-1,v=l?c[l-1]:[0,0],$=c[l]=[],p=-l;p<=l;p+=2){for(p===-l||p!==l&&v[b+p-1]<v[b+p+1]?f=v[b+p+1]:f=v[b+p-1]+1,h=f-p;f<s&&h<n&&i(a[r+f],t[e+h]);)f++,h++;if(f===s&&h===n)break t;$[l+p]=f}}const w=Array(l/2+o/2);let S=w.length-1;for(l=c.length-1;l>=0;l--){for(;f>0&&h>0&&i(a[r+f-1],t[e+h-1]);)w[S--]=Tt,f--,h--;if(!l)break;b=l-1,v=l?c[l-1]:[0,0],p=f-h,p===-l||p!==l&&v[b+p-1]<v[b+p+1]?(h--,w[S--]=Pt):(f--,w[S--]=mt)}return w},Wa=(t,e,n,a,r,s,i,o,c)=>{const l=[],p=t.length;let h=i,f=0;for(;f<p;)switch(t[f++]){case Tt:r++,h++;break;case Pt:l.push(a[r]),ct(e,n,a,r++,r,h<o?e(s[h],0):c);break;case mt:h++;break}for(f=0;f<p;)switch(t[f++]){case Tt:i++;break;case mt:-1<l.indexOf(s[i])?i++:$t(e,s,i++,i);break}},Ra=(t,e,n)=>{let a=1,r=e;for(;a<r;){const s=(a+r)/2>>>0;n<t[s]?r=s:a=s+1}return a},_a=(t,e,n,a,r,s,i,o,c,l,p,h,f)=>{Wa(Da(n,a,s,i,o,l,h)||Ia(n,a,r,s,i,o,c,l),t,e,n,a,i,o,p,f)},Ua=t=>(t.remove||za).call(t);function za(){const{parentNode:t}=this;t&&t.removeChild(this)}/*! (c) 2018 Andrea Giammarchi (ISC) */const at=(t,e,n,a)=>{a||(a={});const r=a.compare||Oa,s=a.node||Pa,i=a.before==null?null:s(a.before,0),o=e.length;let c=o,l=0,p=n.length,h=0;for(;l<c&&h<p&&r(e[l],n[h]);)l++,h++;for(;l<c&&h<p&&r(e[c-1],n[p-1]);)c--,p--;const f=l===c,v=h===p;if(f&&v)return n;if(f&&h<p)return ct(s,t,n,h,p,ne(s,e,l,o,i)),n;if(v&&l<c)return $t(s,e,l,c),n;const $=c-l,b=p-h;let w=-1;if($<b){if(w=Be(n,h,p,e,l,c,r),-1<w)return ct(s,t,n,h,w,s(e[l],0)),ct(s,t,n,w+$,p,ne(s,e,c,o,i)),n}else if(b<$&&(w=Be(e,l,c,n,h,p,r),-1<w))return $t(s,e,l,w),$t(s,e,w+b,c),n;return $<2||b<2?(ct(s,t,n,h,p,s(e[l],0)),$t(s,e,l,c),n):$===b&&Ta(n,p,e,l,c,r)?(ct(s,t,n,h,p,ne(s,e,c,o,i)),n):(_a(s,t,n,h,p,b,e,l,c,$,o,r,i),n)};/*! (c) Andrea Giammarchi - ISC */var qe={};qe.CustomEvent=typeof CustomEvent=="function"?CustomEvent:(function(t){return e[t]=new e("").constructor[t],e;function e(n,a){a||(a={});var r=document.createEvent("CustomEvent");return r.initCustomEvent(n,!!a.bubbles,!!a.cancelable,a.detail),r}})("prototype");var Ge=qe.CustomEvent;/*! (c) Andrea Giammarchi - ISC */var ae={};try{ae.Map=Map}catch{ae.Map=function(){var n=0,a=[],r=[];return{delete:function(i){var o=s(i);return o&&(a.splice(n,1),r.splice(n,1)),o},forEach:function(o,c){a.forEach(function(l,p){o.call(c,r[p],l,this)},this)},get:function(o){return s(o)?r[n]:void 0},has:function(o){return s(o)},set:function(o,c){return r[s(o)?n:a.push(o)-1]=c,this}};function s(i){return n=a.indexOf(i),-1<n}}}var Na=ae.Map;function yt(){return this}function ja(t){const e=new nt,n=Object.create,a=(o,c,l)=>(o.set(c,l),l),r=(o,c,l,p)=>{const h=c.get(o)||s(o,c);switch(typeof p){case"object":case"function":const f=h.w||(h.w=new nt);return f.get(p)||a(f,p,new o(l));default:const v=h.p||(h.p=n(null));return v[p]||(v[p]=new o(l))}},s=(o,c)=>{const l={w:null,p:null};return c.set(o,l),l},i=o=>{const c=new Na;return e.set(o,c),c};Object.defineProperties(yt,{for:{configurable:!0,value(o,c){return r(this,e.get(o)||i(o),o,c??"default")}}}),Object.defineProperties(yt.prototype,{handleEvent:{value(o){const c=o.currentTarget;this["getAttribute"in c&&c.getAttribute("data-call")||"on"+o.type](o)}},html:re("html",t),svg:re("svg",t),state:re("state",function(){return this.defaultState}),defaultState:{get(){return{}}},dispatch:{value(o,c){const{_wire$:l}=this;if(l){const p=new Ge(o,{bubbles:!0,cancelable:!0,detail:c});return p.component=this,(l.dispatchEvent?l:l.firstChild).dispatchEvent(p)}return!1}},setState:{value(o,c){const l=this.state,p=typeof o=="function"?o.call(this,l):o;for(const h in p)l[h]=p[h];return c!==!1&&this.render(),this}}})}const re=(t,e)=>{const n="_"+t+"$";return{get(){return this[n]||Ye(this,n,e.call(this,t))},set(a){Ye(this,n,a)}}},Ye=(t,e,n)=>Object.defineProperty(t,e,{configurable:!0,value:typeof n=="function"?function(){return t._wire$=n.apply(this,arguments)}:n})[e];Object.defineProperties(yt.prototype,{ELEMENT_NODE:{value:1},nodeType:{value:-1}});const Xe={},Lt={},He=[],Fa=Lt.hasOwnProperty;let Ze=0;var lt={attributes:Xe,define:(t,e)=>{t.indexOf("-")<0?(t in Lt||(Ze=He.push(t)),Lt[t]=e):Xe[t]=e},invoke:(t,e)=>{for(let n=0;n<Ze;n++){let a=He[n];if(Fa.call(t,a))return Lt[a](t[a],e)}}},Ke=Array.isArray||(function(t){var e=t.call([]);return function(a){return t.call(a)===e}})({}.toString);/*! (c) Andrea Giammarchi - ISC */var Je=(function(t){var e="fragment",n="template",a="content"in i(n),r=a?function(c){var l=i(n);return l.innerHTML=c,l.content}:function(c){var l=i(e),p=i(n),h=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(c)){var f=RegExp.$1;p.innerHTML="<table>"+c+"</table>",h=p.querySelectorAll(f)}else p.innerHTML=c,h=p.childNodes;return s(l,h),l};return function(l,p){return(p==="svg"?o:r)(l)};function s(c,l){for(var p=l.length;p--;)c.appendChild(l[0])}function i(c){return c===e?t.createDocumentFragment():t.createElementNS("http://www.w3.org/1999/xhtml",c)}function o(c){var l=i(e),p=i("div");return p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+c+"</svg>",s(l,p.firstChild.childNodes),l}})(document);/*! (c) Andrea Giammarchi */function Ba(t){var e=t.Event,n=t.WeakSet,a=!0,r=null;return function(o){return a&&(a=!a,r=new n,s(o.ownerDocument)),r.add(o),o};function s(i){var o=new n,c=new n;try{new MutationObserver(f).observe(i,{subtree:!0,childList:!0})}catch{var l=0,p=[],h=function(w){p.push(w),clearTimeout(l),l=setTimeout(function(){f(p.splice(l=0,p.length))},0)};i.addEventListener("DOMNodeRemoved",function(w){h({addedNodes:[],removedNodes:[w.target]})},!0),i.addEventListener("DOMNodeInserted",function(w){h({addedNodes:[w.target],removedNodes:[]})},!0)}function f(b){for(var w,S=b.length,k=0;k<S;k++)w=b[k],v(w.removedNodes,"disconnected",c,o),v(w.addedNodes,"connected",o,c)}function v(b,w,S,k){for(var A,T=new e(w),C=b.length,L=0;L<C;(A=b[L++]).nodeType===1&&$(A,T,w,S,k));}function $(b,w,S,k,A){r.has(b)&&!k.has(b)&&(A.delete(b),k.add(b),b.dispatchEvent(w));for(var T=b.children||[],C=T.length,L=0;L<C;$(T[L++],w,S,k,A));}}}/*! (c) Andrea Giammarchi - ISC */var qa=(function(t,e,n,a,r){var s=r in t,i=t.createDocumentFragment();i[e](t[a]("g")),i[e](t[a](""));var o=s?t[r](i,!0):i[n](!0);return o.childNodes.length<2?function c(l,p){for(var h=l[n](),f=l.childNodes||[],v=f.length,$=0;p&&$<v;$++)h[e](c(f[$],p));return h}:s?t[r]:function(c,l){return c[n](!!l)}})(document,"appendChild","cloneNode","createTextNode","importNode"),Qe="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")};/*! (c) Andrea Giammarchi - ISC */var H="-"+Math.random().toFixed(6)+"%",se=!1;try{(function(t,e,n){return e in t&&(t.innerHTML="<p "+n+'="'+H+'"></p>',t[e].childNodes[0].getAttribute(n)==H)})(document.createElement("template"),"content","tabindex")||(H="_dt: "+H.slice(1,-1)+";",se=!0)}catch{}var It="<!--"+H+"-->",Ga=8,Ya=1,Xa=3,Ve=/^(?:plaintext|script|style|textarea|title|xmp)$/i,Ha=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function Za(t){return t.join(It).replace(Ja,er).replace(Ka,Va)}var Dt=" \\f\\n\\r\\t",tn="[^"+Dt+`\\/>"'=]+`,oe="["+Dt+"]+"+tn,en="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",nn=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+tn.replace("\\/","")+"))?)",Ka=new RegExp(en+oe+nn+"+)(["+Dt+"]*/?>)","g"),Ja=new RegExp(en+oe+nn+"*)(["+Dt+"]*/>)","g"),Qa=new RegExp("("+oe+`\\s*=\\s*)(['"]?)`+It+"\\2","gi");function Va(t,e,n,a){return"<"+e+n.replace(Qa,tr)+a}function tr(t,e,n){return e+(n||'"')+H+(n||'"')}function er(t,e,n){return Ha.test(e)?t:"<"+e+n+"></"+e+">"}var nr=t=>({get:e=>t.get(e),set:(e,n)=>(t.set(e,n),n)}),ar=se?function(t,e){var n=e.join(" ");return e.slice.call(t,0).sort(function(a,r){return n.indexOf(a.name)<=n.indexOf(r.name)?-1:1})}:function(t,e){return e.slice.call(t,0)};function rr(t,e){for(var n=e.length,a=0;a<n;)t=t.childNodes[e[a++]];return t}function an(t,e,n,a){for(var r=t.childNodes,s=r.length,i=0;i<s;){var o=r[i];switch(o.nodeType){case Ya:var c=a.concat(i);sr(o,e,n,c),an(o,e,n,c);break;case Ga:var l=o.textContent;if(l===H)n.shift(),e.push(Ve.test(t.nodeName)?sn(t,a):or(o,a.concat(i)));else switch(l.slice(0,2)){case"/*":if(l.slice(-2)!=="*/")break;case"\u{1F47B}":t.removeChild(o),i--,s--}break;case Xa:Ve.test(t.nodeName)&&Qe.call(o.textContent)===It&&(n.shift(),e.push(sn(t,a)));break}i++}}function sr(t,e,n,a){for(var r=t.attributes,s=[],i=[],o=ar(r,n),c=o.length,l=0;l<c;){var p=o[l++],h=p.value===H,f;if(h||1<(f=p.value.split(It)).length){var v=p.name;if(s.indexOf(v)<0){s.push(v);var $=n.shift().replace(h?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+v+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),b=r[$]||r[$.toLowerCase()];if(h)e.push(rn(b,a,$,null));else{for(var w=f.length-2;w--;)n.shift();e.push(rn(b,a,$,f))}}i.push(p)}}c=i.length,l=0;for(var S=0<c&&se&&!("ownerSVGElement"in t);l<c;){var k=i[l++];S&&(k.value=""),t.removeAttribute(k.name)}var A=t.nodeName;if(/^script$/i.test(A)){var T=document.createElement(A);for(c=r.length,l=0;l<c;)T.setAttributeNode(r[l++].cloneNode(!0));T.textContent=t.textContent,t.parentNode.replaceChild(T,t)}}function or(t,e){return{type:"any",node:t,path:e}}function rn(t,e,n,a){return{type:"attr",node:t,path:e,name:n,sparse:a}}function sn(t,e){return{type:"text",node:t,path:e}}var on=nr(new nt);function ir(t,e){var n=(t.convert||Za)(e),a=t.transform;a&&(n=a(n));var r=Je(n,t.type);cn(r);var s=[];return an(r,s,e.slice(0),[]),{content:r,updates:function(i){for(var o=[],c=s.length,l=0,p=0;l<c;){var h=s[l++],f=rr(i,h.path);switch(h.type){case"any":o.push({fn:t.any(f,[]),sparse:!1});break;case"attr":var v=h.sparse,$=t.attribute(f,h.name,h.node);v===null?o.push({fn:$,sparse:!1}):(p+=v.length-2,o.push({fn:$,sparse:!0,values:v}));break;case"text":o.push({fn:t.text(f),sparse:!1}),f.textContent="";break}}return c+=p,function(){var b=arguments.length;if(c!==b-1)throw new Error(b-1+" values instead of "+c+`
`+e.join("${value}"));for(var w=1,S=1;w<b;){var k=o[w-S];if(k.sparse){var A=k.values,T=A[0],C=1,L=A.length;for(S+=L-2;C<L;)T+=arguments[w++]+A[C++];k.fn(T)}else k.fn(arguments[w++])}return i}}}}function cr(t,e){var n=on.get(e)||on.set(e,ir(t,e));return n.updates(qa.call(document,n.content,!0))}var lr=[];function dr(t){var e=lr,n=cn;return function(a){return e!==a&&(n=cr(t,e=a)),n.apply(null,arguments)}}function cn(t){for(var e=t.childNodes,n=e.length;n--;){var a=e[n];a.nodeType!==1&&Qe.call(a.textContent).length===0&&t.removeChild(a)}}/*! (c) Andrea Giammarchi - ISC */var pr=(function(){var t=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,e=/([^A-Z])([A-Z]+)/g;return function(o,c){return"ownerSVGElement"in o?a(o,c):s(o.style,!1)};function n(i,o,c){return o+"-"+c.toLowerCase()}function a(i,o){var c;return o?c=o.cloneNode(!0):(i.setAttribute("style","--hyper:style;"),c=i.getAttributeNode("style")),c.value="",i.setAttributeNode(c),s(c,!0)}function r(i){var o,c=[];for(o in i)c.push(o.replace(e,n),":",i[o],";");return c.join("")}function s(i,o){var c,l;return function(p){var h,f,v,$;switch(typeof p){case"object":if(p){if(c==="object"){if(!o&&l!==p)for(f in l)f in p||(i[f]="")}else o?i.value="":i.cssText="";h=o?{}:i;for(f in p)$=p[f],v=typeof $=="number"&&!t.test(f)?$+"px":$,!o&&/^--/.test(f)?h.setProperty(f,v):h[f]=v;c="object",o?i.value=r(l=h):l=p;break}default:l!=p&&(c="string",l=p,o?i.value=p||"":i.cssText=p||"");break}}}})();/*! (c) Andrea Giammarchi - ISC */var ln=(function(t,e){return e=n.prototype,e.ELEMENT_NODE=1,e.nodeType=111,e.remove=function(a){var r=this.childNodes,s=this.firstChild,i=this.lastChild;if(this._=null,a&&r.length===2)i.parentNode.removeChild(i);else{var o=this.ownerDocument.createRange();o.setStartBefore(a?r[1]:s),o.setEndAfter(i),o.deleteContents()}return s},e.valueOf=function(a){var r=this._,s=r==null;if(s&&(r=this._=this.ownerDocument.createDocumentFragment()),s||a)for(var i=this.childNodes,o=0,c=i.length;o<c;o++)r.appendChild(i[o]);return r},n;function n(a){var r=this.childNodes=t.call(a,0);this.firstChild=r[0],this.lastChild=r[r.length-1],this.ownerDocument=r[0].ownerDocument,this._=null}})([].slice);const hr=11,ie="ownerSVGElement",dn="connected",ur="dis"+dn,fr=yt.prototype.nodeType,gr=ln.prototype.nodeType,pn=Ba({Event:Ge,WeakSet:Fe}),vr=t=>({html:t}),hn=(t,e)=>{switch(t.nodeType){case gr:return 1/e<0?e?t.remove(!0):t.lastChild:e?t.valueOf(!0):t.firstChild;case fr:return hn(t.render(),e);default:return t}},br=t=>"ELEMENT_NODE"in t,wr=(t,e,n)=>a=>{n!==!!a&&((n=!!a)?t.setAttribute(e,""):t.removeAttribute(e))},$r=(t,e,n)=>n?a=>{try{t[e]=a}catch{t.setAttribute(e,a)}}:a=>{t[e]=a},un=(t,e)=>{e(t.placeholder),"text"in t?Promise.resolve(t.text).then(String).then(e):"any"in t?Promise.resolve(t.any).then(e):"html"in t?Promise.resolve(t.html).then(vr).then(e):Promise.resolve(lt.invoke(t,e)).then(e)},ce=t=>t!=null&&"then"in t,mr=/^(?:form|list)$/i,Wt=[].slice,yr=(t,e)=>t.ownerDocument.createTextNode(e);function Rt(t){return this.type=t,dr(this)}Rt.prototype={attribute(t,e,n){const a=ie in t;let r;if(e==="style")return pr(t,n,a);if(e.slice(0,1)===".")return $r(t,e.slice(1),a);if(e.slice(0,1)==="?")return wr(t,e.slice(1));if(/^on/.test(e)){let s=e.slice(2);return s===dn||s===ur?pn(t):e.toLowerCase()in t&&(s=s.toLowerCase()),i=>{r!==i&&(r&&t.removeEventListener(s,r,!1),r=i,i&&t.addEventListener(s,i,!1))}}else{if(e==="data"||!a&&e in t&&!mr.test(e))return s=>{r!==s&&(r=s,t[e]!==s&&s==null?(t[e]="",t.removeAttribute(e)):t[e]=s)};if(e in lt.attributes)return s=>{const i=lt.attributes[e](t,s);r!==i&&(r=i,i==null?t.removeAttribute(e):t.setAttribute(e,i))};{let s=!1;const i=n.cloneNode(!0);return o=>{r!==o&&(r=o,i.value!==o&&(o==null?(s&&(s=!1,t.removeAttributeNode(i)),i.value=o):(i.value=o,s||(s=!0,t.setAttributeNode(i)))))}}}},any(t,e){const n={node:hn,before:t},a=ie in t?"svg":"html";let r=!1,s;const i=o=>{switch(typeof o){case"string":case"number":case"boolean":r?s!==o&&(s=o,e[0].textContent=o):(r=!0,s=o,e=at(t.parentNode,e,[yr(t,o)],n));break;case"function":i(o(t));break;case"object":case"undefined":if(o==null){r=!1,e=at(t.parentNode,e,[],n);break}default:if(r=!1,s=o,Ke(o))if(o.length===0)e.length&&(e=at(t.parentNode,e,[],n));else switch(typeof o[0]){case"string":case"number":case"boolean":i({html:o});break;case"object":if(Ke(o[0])&&(o=o.concat.apply([],o)),ce(o[0])){Promise.all(o).then(i);break}default:e=at(t.parentNode,e,o,n);break}else br(o)?e=at(t.parentNode,e,o.nodeType===hr?Wt.call(o.childNodes):[o],n):ce(o)?o.then(i):"placeholder"in o?un(o,i):"text"in o?i(String(o.text)):"any"in o?i(o.any):"html"in o?e=at(t.parentNode,e,Wt.call(Je([].concat(o.html).join(""),a).childNodes),n):"length"in o?i(Wt.call(o)):i(lt.invoke(o,i));break}};return i},text(t){let e;const n=a=>{if(e!==a){e=a;const r=typeof a;r==="object"&&a?ce(a)?a.then(n):"placeholder"in a?un(a,n):"text"in a?n(String(a.text)):"any"in a?n(a.any):"html"in a?n([].concat(a.html).join("")):"length"in a?n(Wt.call(a).join("")):n(lt.invoke(a,n)):r==="function"?n(a(t)):t.textContent=a??""}};return n}};var fn=typeof document!="object",le=function(t){var e="raw",n=function(l){return/(Firefox|Safari)\/(\d+)/.test(l)&&!/(Chrom[eium]+|Android)\/(\d+)/.test(l)},a=n((document.defaultView.navigator||{}).userAgent),r=!(e in t)||t.propertyIsEnumerable(e)||!Object.isFrozen(t[e]);if(a||r){var s={},i=function(l){for(var p=".",h=0;h<l.length;h++)p+=l[h].length+"."+l[h];return s[p]||(s[p]=l)};if(r)le=i;else{var o=new nt,c=function(l,p){return o.set(l,p),p};le=function(l){return o.get(l)||c(l,i(l))}}}else fn=!0;return gn(t)};function gn(t){return fn?t:le(t)}function vn(t){for(var e=arguments.length,n=[gn(t)],a=1;a<e;)n.push(arguments[a++]);return n}const bn=new nt,wn=(t,e)=>t==null?dt(e||"html"):$n(t,e||"html"),dt=t=>{let e,n,a;return function(){const r=vn.apply(null,arguments);return a!==r[0]?(a=r[0],n=new Rt(t),e=xr(n.apply(n,r))):n.apply(n,r),e}},$n=(t,e)=>{const n=e.indexOf(":");let a=bn.get(t),r=e;return-1<n&&(r=e.slice(n+1),e=e.slice(0,n)||"html"),a||bn.set(t,a={}),a[r]||(a[r]=dt(e))},xr=t=>{const e=t.childNodes,{length:n}=e;return n===1?e[0]:n?new ln(e):t},mn=new nt;function Sr(){const t=mn.get(this),e=vn.apply(null,arguments);return t&&t.template===e[0]?t.tagger.apply(null,e):Er.apply(this,e),this}function Er(t){const e=ie in this?"svg":"html",n=new Rt(e);mn.set(this,{tagger:n,template:t}),this.textContent="",this.appendChild(n.apply(null,arguments))}/*! (c) Andrea Giammarchi (ISC) */const yn=t=>Sr.bind(t),kr=lt.define,Mr=Rt.prototype;W.Component=yt,W.bind=yn,W.define=kr,W.diff=at,W.hyper=W,W.observe=pn,W.tagger=Mr,W.wire=wn,W._={WeakMap:nt,WeakSet:Fe},ja(dt);function W(t){return arguments.length<2?t==null?dt("html"):typeof t=="string"?W.wire(null,t):"raw"in t?dt("html")(t):"nodeType"in t?W.bind(t):$n(t,"html"):("raw"in t?dt("html"):W.wire).apply(null,arguments)}var y={hyperhtml:{wire:wn,bind:yn},globals:{infinity:Number.POSITIVE_INFINITY,pi:Math.PI,pi2:Math.PI*2,min:Math.min,max:Math.max,abs:Math.abs,trunc:Math.trunc,round:Math.round,sqrt:Math.sqrt,cos:Math.cos,sin:Math.sin,atan2:Math.atan2,random:Math.random,now:Date.now,window,requestAnimationFrame,document}};const{requestAnimationFrame:Ar}=y.globals,xn=t=>()=>Ar(xn(t()));var Cr=t=>xn(t)(),x={title:{},practice:{},start:{},main:{},pause:{},death:{},over:{}},E={swimOrb:{},linearOrb:{},lazer:{},landolt:{}};const{wire:Or}=y.hyperhtml;var Z=(t,e)=>{const n=e(Or());let a=t;return{render:()=>n(a),update:r=>{a={...a,...r(a)},n(a)}}};const{pi2:pt,cos:Pr,sin:Tr,document:Lr}=y.globals,m=200,M=m*2+10,g=M/2,K=Lr.createElement("canvas");K.width=M,K.height=M,Object.assign(K.style,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"min(70vw, 70vh)",height:"min(70vw, 70vh)"});const u=K.getContext("2d"),_t=K.cloneNode(),O=_t.getContext("2d"),de=Z({width:0,opacity:1},t=>({opacity:e})=>(K.style.opacity=e,_t.style.opacity=e,t`${K}${_t}`)),Ut=()=>{K.width=M,_t.width=M,u.clip(u.arc(g,g,m,0,pt))},pe=()=>{u.save(),u.beginPath(),u.fillStyle="black",u.arc(g,g,m,0,pt),u.fill(),u.closePath(),u.restore()},he=(t=1)=>{u.save(),u.beginPath(),u.strokeStyle="white",u.lineWidth=1,u.moveTo(g,g),u.lineTo(g+t*m,g),u.stroke(),u.closePath(),u.restore()},xt=(t,e=1,n="red")=>{u.save(),u.beginPath(),u.strokeStyle=n,u.lineWidth=1,u.moveTo(g,g);const a=e*m;u.lineTo(g+a*Pr(-t),g+a*Tr(-t)),u.stroke(),u.closePath(),u.restore()},zt=(t,e)=>{u.save(),u.beginPath();const n=u.createRadialGradient(t,e,0,t,e,20);n.addColorStop(0,"red"),n.addColorStop(1,"rgba(255, 0, 0, 0)"),u.fillStyle=n,u.arc(t,e,20,0,pt),u.fill(),u.closePath(),u.restore()},Nt=()=>{u.save(),u.beginPath(),u.fillStyle="white",u.arc(g,g,3,0,pt),u.fill(),u.closePath(),u.restore()},ue=(t=-pt)=>{O.clearRect(0,0,M,M),O.save(),O.beginPath(),O.setLineDash([10,10]),O.strokeStyle="white",O.lineWidth=3,O.arc(g,g,m,0,t,!0),O.stroke(),O.closePath(),O.restore()},Sn=t=>{O.save(),O.beginPath(),O.setLineDash([10,10]),O.strokeStyle="magenta",O.lineWidth=3,O.arc(g,g,m,0,-t*pt,!0),O.stroke(),O.closePath(),O.restore()},{pi:En,max:kn,sqrt:Ir,cos:Mn,sin:An}=y.globals,Cn=(t,e,n,a,r,s,i,o)=>({id:E.landolt,x:t,y:e,angle:n,radius:a,angleSpeed:r,radiusSpeed:s,holeWidth:i,lineWidth:o}),Dr=(t,{x:e,y:n,angle:a,radius:r,holeWidth:s,lineWidth:i})=>{t.save(),t.beginPath();const o=kn(r-i,0),c=kn(r+i,0),l=t.createRadialGradient(e,n,o,e,n,c);l.addColorStop(0,"rgba(200, 200, 200, 0.5)"),l.addColorStop(.25,"rgba(200, 200, 200, 1)"),l.addColorStop(.75,"rgba(200, 200, 200, 1)"),l.addColorStop(1,"rgba(200, 200, 200, 0.5)"),t.strokeStyle=l,t.lineWidth=i*2,t.lineCap="round",t.arc(e,n,r,a-s/2,a+s/2,!0),t.stroke(),t.restore()},Wr=(t,e,n,a)=>{const r=t-g,s=e-g;return n>Ir(r*r+s*s)+m+a*2},Rr=(t,e,n,a,r,s,i,o)=>{const c=i-t,l=o-e,p=c*c+l*l,h=a-s/2-3,f=a+s/2+3;if(p<h*h||p>f*f)return!1;const v=n-r/2+En/2,$=n+r/2-En/2;return Mn(v)*c+An(v)*l<0||Mn($)*c+An($)*l<0},_r=(t,e,n)=>{const{x:a,y:r,angle:s,radius:i,angleSpeed:o,radiusSpeed:c,holeWidth:l,lineWidth:p}=t;return{nextEnemies:Wr(a,r,i,p)?[]:[{...t,angle:s+o,radius:i+c}],hit:Rr(a,r,s,i,l,p,e,n)}},{document:Ur,min:On,max:Pn,abs:zr,cos:fe,sin:ge}=y.globals,ve=(t,e,n,a=0)=>({id:E.lazer,time:a,x:t,y:e,angle:n}),Tn=t=>Pn(M*2*((t-60)/15),0),Ln=t=>Pn(On(t-75,155-t,15),1),Nr=(t,e,n,a,r,s)=>{const i=t-n,o=e-a,c=i*fe(r)+o*ge(r),l=zr(-i*ge(r)+o*fe(r))-3;return c>=0&&c<=Tn(s)&&l<=Ln(s)/2},jr=({time:t,x:e,y:n,angle:a},r,s)=>({nextEnemies:t>=185?[]:[ve(e,n,a,t+1)],hit:t>45&&t<155&&Nr(r,s,e,n,a,t)}),Fr=(t,e,n,a)=>{const r=1-e/30;t.save(),t.fillStyle=`rgba(255, 255, 0, ${r/2})`,t.beginPath();const s=20+r*40,i=s/2;t.fillRect(n-i,a-i,s,s),t.restore()},jt=Ur.createElement("canvas");jt.width=20,jt.height=20;const P=jt.getContext("2d");P.strokeStyle="black",P.lineWidth=1,P.beginPath(),P.fillStyle="#ff0",P.moveTo(0,0),P.lineTo(8,2),P.lineTo(8,18),P.lineTo(0,20),P.closePath(),P.fill(),P.stroke(),P.fillStyle="#66f",P.fillRect(5,5,15,10),P.strokeRect(5,5,15,10),P.beginPath(),P.moveTo(10,10),P.lineTo(20,10),P.closePath(),P.stroke();const Br=(t,e,n,a)=>{t.save(),t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=1,t.beginPath(),t.moveTo(e,n),t.lineTo(e+M*2*fe(a),n+M*2*ge(a)),t.closePath(),t.stroke(),t.restore()},qr=(t,e,n,a)=>{t.save();const r=Ln(a),s=t.createLinearGradient(e,n-r,e,n+r);s.addColorStop(0,"rgba(255, 255, 0, 0)"),s.addColorStop(.25,"rgba(255, 255, 0, 1)"),s.addColorStop(.75,"rgba(255, 255, 0, 1)"),s.addColorStop(1,"rgba(255, 255, 0, 0)"),t.fillStyle=s,t.fillRect(e,n-r,Tn(a),r*2),t.restore()},Gr=(t,{time:e,x:n,y:a,angle:r})=>{e>=15&&e<=60&&Br(t,n,a,r),t.save(),t.translate(n,a),t.rotate(r),t.translate(-n,-a),e<30&&Fr(t,e,n,a),e>15&&(t.globalAlpha=On((e-15)/30,(185-e)/30,1),t.drawImage(jt,n-10,a-10)),e>60&&e<155&&(t.globalAlpha=1,qr(t,n,a,e)),t.restore()},{pi:Yr,pi2:In,min:be,cos:Ft,sin:Bt}=y.globals,qt=(t,e,n,a,r)=>{const s=t-n,i=e-a,o=r/2+3;return s*s+i*i<=o*o},Dn=(t,e,n,a,r,s)=>{t.save(),t.beginPath(),t.globalAlpha=.5,t.fillStyle=s,t.arc(n,a,r*(2-e/30),0,In),t.fill(),t.closePath(),t.restore()},Wn=(t,e,n,a,r,s,i)=>{t.save(),t.beginPath(),t.globalAlpha=i,t.fillStyle=r,t.strokeStyle=s,t.arc(e,n,a,0,In),t.fill(),t.stroke(),t.closePath(),t.restore()},z=(t,e,n,a,r=0,s="lime")=>({id:E.swimOrb,time:r,angle:t,radius:e,speed:n,width:a,color:s}),Xr=(t,{time:e,angle:n,radius:a,width:r,color:s})=>{const i=g+a*Ft(n),o=g+a*Bt(n);if(e<=30&&Dn(t,e,i,o,r,s),e>=15){const c=be(be((e-15)/30,1),(300-e)/30);Wn(t,i,o,r,"white",s,c)}},Hr=(t,e,n)=>{const{time:a,angle:r,radius:s,speed:i,width:o}=t,c=g+s*Ft(r),l=g+s*Bt(r);return{nextEnemies:a>=300?[]:[{...t,angle:r+(a<45?0:i),time:a+1}],hit:a<45||a>270?!1:qt(e,n,c,l,o)}},J=(t,e,n,a,r,s,i,o=0)=>({id:E.linearOrb,time:o,x:t,y:e,angle:n,speed:a,width:r,fillColor:s,strokeColor:i}),Rn=(t,{time:e,x:n,y:a,width:r,fillColor:s,strokeColor:i})=>{if(e<=30&&Dn(t,e,n,a,r,i),e>=15){const o=be((e-15)/30,1);Wn(t,n,a,r,s,i,o)}},_n=(t,e,n)=>{const{time:a,x:r,y:s,angle:i,speed:o,width:c}=t;if(a<45)return{nextEnemies:[{...t,time:a+1}],hit:!1};const l=r+o*Ft(i),p=s+o*Bt(i),h=l-g,f=p-g,v=m+c/2;return h*h+f*f>v*v?{nextEnemies:[],hit:!1}:{nextEnemies:[{...t,x:l,y:p,time:a+1}],hit:qt(e,n,r,s,c)}},Zr=(t,e,n,a,r,s=0)=>({id:E.orbToCenter,time:s,x:g+m*Ft(t),y:g+m*Bt(t),angle:t+Yr,speed:e,width:n,fillColor:a,strokeColor:r}),Kr=(t,e,n)=>{const{x:a,y:r,speed:s}=t;return qt(g,g,a,r,s-3)?{nextEnemies:[],hit:!1}:_n(t,e,n)},Jr=new Map([[E.swimOrb,Hr],[E.linearOrb,_n],[E.orbToCenter,Kr],[E.lazer,jr],[E.landolt,_r]]),Un=new Map([[E.swimOrb,Xr],[E.linearOrb,Rn],[E.orbToCenter,Rn],[E.lazer,Gr],[E.landolt,Dr]]),{pi2:zn,cos:Qr,sin:Vr}=y.globals,ts=(t,e,n)=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 0, 0, ${1-n/90})`,u.arc(t,e,20+n/4.5,0,zn),u.fill(),u.closePath(),u.restore()},es=(t,e,n)=>{u.save(),u.beginPath();const a=u.createRadialGradient(t,e,0,t,e,m*2);a.addColorStop(0,"rgba(255, 0, 0, 0)"),a.addColorStop(.05,"rgba(255, 0, 0, 0)"),a.addColorStop(.3+.7*(n/90),"rgba(255, 0, 0, 0.5)"),u.fillStyle=a,u.arc(t,e,m*2,0,zn),u.fill(),u.closePath(),u.restore()};var ns=(t=0)=>({playerAngle:e,playerRadius:n,enemies:a,evt:{wait:r,waitTime:s,eventTime:i,duration:o,afterEffect:c,props:l}})=>{Ut(),pe(),he(),xt(e);const p=g+n*Qr(-e),h=g+n*Vr(-e);return ts(p,h,t),a.forEach(f=>Un.get(f.id)(u,f)),Nt(),ue(),Sn(s>=r?1-i/o:s/r),es(p,h,t),c(l,i,u),t<90?{nextId:x.death,nextArgs:[t+1],stateUpdate:{}}:{nextId:x.main,nextArgs:[],stateUpdate:{playerInvincible:60,playerAngle:0,playerRadius:m/2}}},Q={none:{},rotate:{},gravity:{},swap:{},mirror:{},memorial:{}};const Nn=t=>t;var ht=({id:t,name:e,wait:n,duration:a,inputEffect:r=Nn,afterEffect:s=Nn,props:i})=>({id:t,name:e,wait:n,waitTime:0,duration:a,eventTime:0,inputEffect:r,afterEffect:s,props:i});const{infinity:as}=y.globals;var I=()=>ht({id:Q.none,name:"-",wait:as,duration:0,props:{}}),d={easy:{},normal:{},hard:{}};const{max:rs,cos:ss,sin:os}=y.globals,{swimOrb:we,linearOrb:is,orbToCenter:cs}=E,N=t=>t.flatMap(e=>e.id===we?[{...e,time:rs(e.time,270)}]:[]),_=(t,e,n)=>a=>{const{id:r,angle:s,radius:i}=a;if([we,is,cs].includes(r)){const{x:o,y:c}=r===we?{x:g+i*ss(s),y:g+i*os(s)}:a,l=o-e,p=c-n,h=60-t;return l*l+p*p<=h*h?[]:[a]}return[a]},St=(t,e)=>(n,a,r,s)=>{const{id:i,eventTime:o,duration:c}=s;return i===Q.none?r===30?{nextEvt:t(n,a),nextEvtTime:r+1}:{nextEvt:s,nextEvtTime:r+1}:i!==Q.none&&o<c?{nextEvt:s,nextEvtTime:r+1}:{nextEvt:I(),nextEvtTime:-e.get(n)}},{max:$e}=y.globals,ls=(t,e)=>{const{radius:n,time:a}=t;return a<30?t:n===0?{...t,time:$e(a,270)}:{...t,radius:$e(n-e,0)}},ds=(t,{props:{gravity:e}})=>{const{pr:n,enemies:a}=t;return{...t,pr:$e(n-e,10),enemies:a.map(r=>r.id!==E.swimOrb?r:ls(r,e))}};var Gt=(t,e)=>ht({id:Q.gravity,name:"\u91CD\u529B",wait:300,duration:e,inputEffect:ds,props:{gravity:t,lines:[]}});const{pi2:ps,infinity:hs}=y.globals,us=({deaths:t,pa:e},n)=>{const{props:{done:a,speed:r}}=n;return{pa:a?e+r:e+r-t*ps,evt:{...n,props:{done:!0,speed:r+1e-4}}}};var fs=()=>ht({id:Q.memorial,name:"\u56DE\u5411",wait:300,duration:hs,inputEffect:us,props:{done:!1,speed:0}});const gs=(t,e,n)=>(n.save(),n.resetTransform(),n.translate(g,g),n.rotate(e*t.speed),n.translate(-g,-g),n.drawImage(n.canvas,0,0),n.restore(),t);var jn=(t,e)=>ht({id:Q.rotate,name:"\u6D41\u8EE2",wait:300,duration:e,afterEffect:gs,props:{speed:t}});const{pi:vs,sqrt:bs,cos:Fn,sin:Bn,atan2:qn}=y.globals,Gn={inner:!1,outer:!1,quick:!1,brake:!1},ws=(t,{eventTime:e,duration:n,props:{speed:a}})=>{if(e>=n)return{enemies:t.enemies.map(w=>w.id===E.swimOrb?{...w,color:"lime"}:w)};const{inner:r,outer:s,quick:i,brake:o,enemies:c}=t,l=s-r,p=o-i;if(l===0&&p===0)return{...Gn,enemies:c.map(w=>w.id===E.swimOrb?{...w,color:"red"}:w)};const h=qn(p,l),f=Fn(h),v=Bn(h),$=a*f,b=a*v;return{...Gn,enemies:c.map(w=>{if(w.id!==E.swimOrb)return w;const{angle:S,radius:k}=w,A=k*Fn(S)+$,T=k*Bn(S)+b,C=qn(T,A),L=bs(A*A+T*T),wt=m+w.width;return{...w,angle:L>wt?C+vs:C,radius:L>wt?wt*2-L:L,color:"red"}})}};var Yt=(t,e)=>ht({id:Q.swap,name:"\u904D\u6191",wait:300,duration:e,inputEffect:ws,props:{speed:t}});const{pi:V,pi2:$s,infinity:Yn,max:ms,trunc:ys,cos:me,sin:ye,atan2:xs,random:q}=y.globals,Ss=new Map([[d.easy,40],[d.normal,20],[d.hard,10]]),Es=new Map([[d.easy,()=>6+q()*2],[d.normal,()=>6+q()*3],[d.hard,()=>6+q()*4]]),ks=new Map([[d.easy,()=>-.008*q()],[d.normal,()=>-.01*q()],[d.hard,()=>-.016*q()]]),Ms=(t,e)=>z(-e+.4+q()*V*1.6,q()*m,ks.get(t)(),Es.get(t)()),As=new Map([[d.easy,.02],[d.normal,.035],[d.hard,.05]]),Cs=new Map([[d.easy,500],[d.normal,350],[d.hard,250]]),Os=t=>[...Array(4)].map((e,n)=>{const a=t+n*(V/2);return ve(g+m*me(a),g+m*ye(a),a+1.125*V)}),Ps=new Map([[d.easy,1],[d.normal,1.3],[d.hard,1.7]]),Ts=new Map([[d.easy,500],[d.normal,450],[d.hard,350]]),Ls=new Map([[d.easy,{speed:.3,hole:V/1.2,width:5}],[d.normal,{speed:.35,hole:V/1.3,width:6}],[d.hard,{speed:.4,hole:V/2,width:7}]]),Is=(t,e)=>{const{speed:n,hole:a,width:r}=Ls.get(t),s=-e-V*.7,i=g+m*.5*me(s),o=g+m*.5*ye(s);return Cn(i,o,-e,1,.03,n,a,r)},Ds=new Map([[d.easy,1],[d.normal,1.5],[d.hard,2]]),Ws=new Map([[d.easy,35],[d.normal,20],[d.hard,15]]),Xn=["red","yellow","lime","cyan","blue","magenta"],Rs=(t,e,n,a)=>{const r=g+m*me(t),s=g+m*ye(t),i=xs(n-s,e-r);return J(r,s,i,1,6,"white",Xn[a])},_s=new Map([[d.easy,400],[d.normal,350],[d.hard,200]]),Us=new Map([[d.easy,{width:6,speed:.08}],[d.normal,{width:7,speed:.013}],[d.hard,{width:8,speed:.017}]]),zs=(t,e,n,a)=>{const{width:r,speed:s}=Us.get(t),i=r*3.5,o=-e-V*.6,c=(n+(a?r:0))%i;return[...Array(ys(m/i)+1)].map((l,p)=>z(o,c+p*i,s,r,0,"gray"))},Ns=new Map([[d.easy,150],[d.normal,100],[d.hard,80]]),js=new Map([[d.easy,{speed:.8,length:8}],[d.normal,{speed:.9,length:12}],[d.hard,{speed:1,length:16}]]),Fs=(t,e)=>{const{speed:n,length:a}=js.get(t),r=$s/a;return[...Array(a)].map((s,i)=>J(g,g,e+i*r,n,6,"white","blue"))},Bs=St((t,e)=>e===1?{...jn((q()<.5?-1:1)*As.get(t),Yn),wait:120}:e===3?{...Gt(Ps.get(t),Yn),wait:120}:e===5?{...Yt(Ds.get(t),t===d.hard?30:60),wait:60}:e===9?fs():I(),new Map([[d.easy,0],[d.normal,0],[d.hard,0]])),qs=(t,e)=>t===6?e.map(n=>n.id===E.swimOrb?{...n,color:"lime"}:n):t===5?e.filter(({id:n})=>n!==E.landolt):t===8?e.map(n=>n.id===E.lazer?{...n,time:ms(n.time,155)}:n):t===9?N(e):e,xe=(t=30,e=0,n=0,a=0,r=0,s=0,i=0,o=0,c=!1,l=0,p=0)=>(h,f,v,{enemies:$,px:b,py:w,pa:S,pr:k,playerInvincible:A,evt:T})=>{const C=(f-1)%10,L=e>=Ss.get(h),wt=C>=2&&C<=7&&n>=Cs.get(h),Ma=C===4&&a>=Ts.get(h),Vt=C>=6&&r>=Ws.get(h),Ne=C>=7&&o>=_s.get(h),je=C>=8&&l>=Ns.get(h),rc=C===9?[]:[L?[Ms(h,S)]:[],wt?Os(-S):[],Ma?[Is(h,S)]:[],Vt?[Rs(s,b,w,i)]:[],Ne?zs(h,S,k,c):[],je?Fs(h,p):[]].flat(),Aa=(A>0?$.flatMap(_(A,b,w)):$).concat(rc),{nextEvt:sc,nextEvtTime:oc}=C%2?Bs(h,C,t,T):{nextEvt:I(),nextEvtTime:30};return{enemies:v?qs(C,Aa):Aa,nextStage:xe(oc,L?0:e+1,wt?0:n+1,Ma?0:a+1,Vt?0:r+1,Vt?s+.5:s,Vt?(i+1)%Xn.length:i,Ne?0:o+1,Ne?!c:c,je?0:l+1,je?p:p-.3),evt:sc}},{pi:Hn,pi2:Gs,trunc:Zn}=y.globals,Ys=new Map([[d.easy,t=>200-t*10],[d.normal,t=>160-t*10],[d.hard,t=>120-t*8]]),Kn=new Map([[d.easy,t=>({length:6+Zn(t/2),width:6,speed:1})],[d.normal,t=>({length:7+t,width:6,speed:1})],[d.hard,t=>({length:10+Zn(t/2),width:7,speed:1.5})]]),Jn=(t,e,n,a)=>{const{length:r,width:s,speed:i}=Kn.get(t)(e),o=a?"blue":"magenta";return[...Array(r)].map((c,l)=>{const p=n+Gs*(l/r)+(a?0:Hn/r);return a?J(g,g,p,i,s,"white",o):Zr(p,i,s,"white",o)})},Se=(t=0,e=0)=>(n,a,r,{enemies:s,px:i,py:o,pa:c,pr:l,playerInvincible:p})=>{const h=(a-1)%10,f=Ys.get(n)(h),v=[p>0?s.flatMap(_(p,i,o)):s,t===f/2?Jn(n,h,e,!0):[],t>=f&&(n!==d.hard||h>=5)?Jn(n,h,e,!1):[],n===d.hard&&t>=f?[z(-c-.63,l,.01,6)]:[]].flat();return r&&a%10===1?{enemies:N(v),nextStage:xe(),evt:I()}:{enemies:v,nextStage:Se(t>=f?0:t+1,t>=f?e+Hn/Kn.get(n)(h).length*1.2:e),evt:I()}},{pi:Xt,min:Xs,cos:Qn,sin:Vn,random:Hs}=y.globals,Zs=({playerInvincible:t,pa:e,pr:n,enemies:a},r)=>{const{time:s}=r.props,i=Xs(s/60,1);xt(e-Xt,i,"cyan");const o=g+n*Qn(-e+Xt),c=g+n*Vn(-e+Xt);return(i===1&&t===0||Hs()<.5)&&zt(o,c),{pa:i===1&&t===0&&a.some(({id:p,angle:h,radius:f,width:v})=>{if(p===E.swimOrb){const $=g+f*Qn(h),b=g+f*Vn(h);return qt($,b,o,c,v)}return!1})?e-Xt:e,evt:{...r,props:{time:s+1}},enemies:t>0?a.flatMap(_(t,o,c)):a}};var Ee=t=>ht({id:Q.mirror,name:"\u88CF\u73FE",wait:300,duration:t,inputEffect:Zs,props:{time:0}});const{pi:Ks,random:Js}=y.globals,Qs=new Map([[d.easy,t=>200-t*20],[d.normal,t=>175-t*20],[d.hard,t=>160-t*18]]),Vs=new Map([[d.easy,t=>({length:5,width:8,speed:.01+t*.0015})],[d.normal,t=>({length:5,width:9,speed:.013+t*.002})],[d.hard,t=>({length:7,width:8.3,speed:.016+t*.0026})]]),to=(t,e,n,a)=>{const r=-n+(a?1:-1)*Ks*(.3+.4*Js()),{length:s,width:i,speed:o}=Vs.get(t)(e),c=(a?-1:1)*o;return[...Array(s+1-a)].map((l,p)=>z(r,m*((p+a*.5)/s),c,i))},eo=new Map([[d.easy,t=>Ee(200+t*10)],[d.normal,t=>Ee(250+t*25)],[d.hard,t=>Ee(300+t*25)]]),no=new Map([[d.easy,200],[d.normal,100],[d.hard,0]]),ao=St((t,e)=>eo.get(t)(e),no),ke=(t=130,e=0,n=0)=>(a,r,s,{enemies:i,evt:o,px:c,py:l,pa:p,playerInvincible:h})=>{const f=(r-1)%10,v=t>=Qs.get(a)(f%5),$=[h>0?i.flatMap(_(h,c,l)):i,v?to(a,f%5,p,e):[]].flat(),{nextEvt:b,nextEvtTime:w}=f<5?{nextEvt:o,nextEvtTime:n}:ao(a,f,n,o);return s&&r%10===1?{enemies:N($),nextStage:Se(),evt:I()}:{enemies:$,nextStage:ke(v?0:t+1,v?1-e:e,w),evt:b}},{pi:ro,cos:so,sin:oo,atan2:io}=y.globals,co=new Map([[d.easy,t=>30-t],[d.normal,t=>20-t],[d.hard,t=>15-t]]),lo=new Map([[d.easy,6],[d.normal,5],[d.hard,6]]),ta=["red","yellow","lime","cyan","blue","magenta"],po=(t,e,n,a,r,s)=>{const i=g+m*so(a),o=g+m*oo(a),c=io(n-o,e-i);return t<5?[J(i,o,c,1,r,"white",s)]:[J(i,o,c,1,r,"white",s),J(g*2-i,g*2-o,c+ro,1,r,"white",s)]},Me=(t=0,e=0,n=0)=>(a,r,s,{enemies:i,px:o,py:c,playerInvincible:l,evt:p})=>{const h=(r-1)%10,f=t>=co.get(a)(h%5),v=[l>0?i.flatMap(_(l,o,c)):i,f?po(h,o,c,e,lo.get(a),ta[n]):[]].flat();return s&&r%10===1?{enemies:N(v),nextStage:ke(),evt:I()}:{enemies:v,nextStage:Me(f?0:t+1,e+.02,f?(n+1)%ta.length:n),evt:p}},{pi:ea,random:tt}=y.globals,ho=new Map([[d.easy,t=>30-t*2],[d.normal,t=>25-t*2],[d.hard,t=>15-t]]),uo=new Map([[d.easy,()=>-.008+.016*tt()],[d.normal,()=>-.01+.02*tt()],[d.hard,()=>-.016+.032*tt()]]),fo=new Map([[d.easy,()=>6+tt()*3],[d.normal,()=>7+tt()*4],[d.hard,()=>8+tt()*5]]),go=new Map([[d.easy,t=>Yt(1,150+t*10)],[d.normal,t=>Yt(1.5,200+t*20)],[d.hard,t=>Yt(2,250+t*30)]]),vo=new Map([[d.easy,300],[d.normal,300],[d.hard,0]]),bo=St((t,e)=>go.get(t)(e),vo),Ae=(t=0,e=0)=>(n,a,r,{enemies:s,evt:i,px:o,py:c,pa:l,playerInvincible:p})=>{const h=(a-1)%10,f=t>=ho.get(n)(h),v=[p>0?s.flatMap(_(p,o,c)):s,f?[z(-l+ea*.2+tt()*ea*1.6,m*tt(),uo.get(n)(),fo.get(n)())]:[]].flat(),{nextEvt:$,nextEvtTime:b}=bo(n,h,e,i);return r&&a%10===1?{enemies:N(v),nextStage:Me(),evt:I()}:{enemies:v,nextStage:Ae(f?0:t+1,b),evt:$}},{pi:Et,pi2:wo,cos:$o,sin:mo,random:j}=y.globals,yo=new Map([[d.easy,t=>60-t*3],[d.normal,t=>54-t*4],[d.hard,t=>26-t*2]]),xo=new Map([[d.easy,()=>-.008*j()],[d.normal,()=>-.01*j()],[d.hard,()=>-.01*j()]]),So=new Map([[d.easy,()=>6+j()*2],[d.normal,()=>6+j()*3],[d.hard,()=>6+j()*4]]),Eo=new Map([[d.easy,t=>500-t*20],[d.normal,t=>300-t*30],[d.hard,t=>250-t*30]]),ko=new Map([[d.easy,{speed:.4,hole:Et/1.3,width:5}],[d.normal,{speed:.5,hole:Et/1.5,width:6}],[d.hard,{speed:.6,hole:Et/2.3,width:7}]]),Mo=(t,e,n)=>{const{speed:a,hole:r,width:s}=ko.get(t),i=g+(e<=45?0:m/2*$o(n)),o=g+(e<=45?0:m/2*mo(n));return Cn(i,o,j()*wo,1,j()<.5?.03:-.03,a,r,s)},Ce=(t=0,e=100)=>(n,a,r,{enemies:s,pa:i,px:o,py:c,playerInvincible:l})=>{const p=t>=yo.get(n)(a-40),h=e>=Eo.get(n)((a-1)%5),f=[l>0?s.flatMap(_(l,o,c)):s,p?[z(-i+.4+j()*Et*1.6,m*j(),xo.get(n)(),So.get(n)())]:[],h?[Mo(n,a,Et-i)]:[]].flat();return r&&a%10===1?{enemies:N(f),nextStage:Ae(),evt:I()}:{enemies:f,nextStage:Ce(p?0:t+1,h?0:e+1),evt:I()}},{pi:Ao,pi2:na,min:Co,random:G}=y.globals,Oo=new Map([[d.easy,t=>28-t*2],[d.normal,t=>25-t*2],[d.hard,t=>15-t]]),Po=new Map([[d.easy,()=>-.008*G()],[d.normal,()=>-.01*G()],[d.hard,()=>-.018*G()]]),To=new Map([[d.easy,()=>6+G()*2],[d.normal,()=>6+G()*3],[d.hard,()=>6+G()*4]]),Lo=new Map([[d.easy,t=>Gt(.5+t*.05,200)],[d.normal,t=>Gt(.5+t*.08,200)],[d.hard,t=>Gt(.5+t*.12,200)]]),Io=new Map([[d.easy,300],[d.normal,300],[d.hard,0]]),Do=St((t,e)=>Lo.get(t)(e),Io),Oe=(t=0,e=0,n=0)=>(a,r,s,{enemies:i,evt:o,px:c,py:l,pa:p,playerInvincible:h})=>{const f=(r-1)%10,v=t>=Oo.get(a)(f),$=a!==d.easy&&f>5&&e>=250-f*10,b=[h>0?i.flatMap(_(h,c,l)):i,v?[z(-p+.4+G()*Ao*1.6,m*Co(.7+G()*.4,1),Po.get(a)(),To.get(a)())]:[],$?new Array(10).fill(G()*na).map((k,A)=>J(g,g,A/10*na+k,2,7,"white","blue")):[]].flat(),{nextEvt:w,nextEvtTime:S}=Do(a,f,n,o);return s&&r%10===1?{enemies:N(b),nextStage:Ce(),evt:I()}:{enemies:b,nextStage:Oe(v?0:t+1,$?0:e+1,S),evt:w}},{pi:ut,cos:Wo,sin:Ro,random:U}=y.globals,_o=new Map([[d.easy,t=>30-t*2],[d.normal,t=>27-t*2],[d.hard,t=>14-t]]),Uo=new Map([[d.easy,()=>-.008*U()],[d.normal,()=>-.01*U()],[d.hard,()=>-.01*U()]]),zo=new Map([[d.easy,()=>6+U()*2],[d.normal,()=>6+U()*3],[d.hard,()=>6+U()*4]]),No=new Map([[d.easy,{wait:t=>300-t*10,radius:.7,angle:t=>t+ut*(.9+U()*.2)}],[d.normal,{wait:t=>200-t*10,radius:.8,angle:t=>t+ut*(.9+U()*.2)}],[d.hard,{wait:t=>150-t*10,radius:.95,angle:t=>t+ut*(.8+U()*.4)}]]),Pe=(t=0,e=0,n=ut/3)=>(a,r,s,{enemies:i,px:o,py:c,pa:l,playerInvincible:p})=>{const h=t>=_o.get(a)(r-20),{wait:f,radius:v,angle:$}=No.get(a),b=e>=f(r-20),w=[p>0?i.flatMap(_(p,o,c)):i,h?[z(-l+.4+U()*ut*1.6,U()*m,Uo.get(a)(),zo.get(a)())]:[],b?[ve(g+v*m*Wo(n),g+v*m*Ro(n),$(n))]:[]].flat();return s&&r%10===1?{enemies:N(w),evt:I(),nextStage:Oe()}:{enemies:w,evt:I(),nextStage:Pe(h?0:t+1,b?0:e+1,b?n+ut/3:n)}},{pi:jo,pi2:Fo,random:Y}=y.globals,Bo=new Map([[d.easy,t=>28-t*2],[d.normal,t=>25-t*2],[d.hard,t=>12-t]]),qo=new Map([[d.easy,()=>-.008*Y()],[d.normal,()=>-.01*Y()],[d.hard,()=>-.02*Y()]]),Go=new Map([[d.easy,()=>6+Y()*2],[d.normal,()=>6+Y()*3],[d.hard,()=>6+Y()*4]]),Yo=new Map([[d.easy,t=>({speed:.02,rotateCount:t>5?2:1})],[d.normal,t=>({speed:.02,rotateCount:t>5?3:2})],[d.hard,t=>({speed:.05,rotateCount:t>5?4:2})]]),Xo=new Map([[d.easy,600],[d.normal,300],[d.hard,0]]),Ho=St((t,e)=>{const{speed:n,rotateCount:a}=Yo.get(t)(e);return jn((Y()<.5?-1:1)*n,Fo/n*a)},Xo),Te=(t=0,e=0)=>(n,a,r,{enemies:s,evt:i,px:o,py:c,pa:l,playerInvincible:p})=>{const h=(a-1)%10,f=t>=Bo.get(n)(h),v=[p>0?s.flatMap(_(p,o,c)):s,f?[z(-l+.4+Y()*jo*1.6,Y()*m,qo.get(n)(),Go.get(n)())]:[]].flat(),{nextEvt:$,nextEvtTime:b}=Ho(n,h,e,i);return r&&a%10===1?{enemies:N(v),nextStage:Pe(),evt:I()}:{enemies:v,nextStage:Te(f?0:t+1,b),evt:$}},{pi:Zo,pi2:Ko,random:D}=y.globals,aa=new Map([[d.easy,()=>6+D()*2],[d.normal,()=>6+D()*3],[d.hard,()=>6+D()*4]]),Jo=new Map([[d.easy,t=>30-t*2],[d.normal,t=>27-t*2],[d.hard,t=>13-t]]),Qo=new Map([[d.easy,()=>-.008*D()],[d.normal,()=>-.01*D()],[d.hard,()=>-.016*D()]]),Vo=new Map([[d.easy,()=>!1],[d.normal,(t,e)=>t>5&&e>=30-t*2],[d.hard,(t,e)=>t>5&&e>=27-t*2]]),ti=new Map([[d.easy,()=>.5+D()*.5],[d.normal,()=>.7+D()*.6],[d.hard,()=>1+D()]]),kt=(t=0,e=0)=>(n,a,r,s)=>{const{enemies:i,evt:o,px:c,py:l,pa:p,playerInvincible:h}=s,f=t>=Jo.get(n)(a),v=Vo.get(n)(a,e),$=[h>0?i.flatMap(_(h,c,l)):i,f?[z(-p+.4+D()*Zo*1.6,D()*m,Qo.get(n)(),aa.get(n)())]:[],v?[J(g+(2*D()-1)*20,g+(2*D()-1)*20,D()*Ko,ti.get(n)(),aa.get(n)(),"white","blue")]:[]].flat();return r&&a%10===1?{enemies:N($),nextStage:Te(),evt:o}:{enemies:$,nextStage:kt(f?0:t+1,v?0:e+1),evt:o}};var Ht=()=>({level:1,mode:d.normal,practice:!1,stage:kt(),evt:I(),playerAngle:0,playerRadius:m/2,playerInvincible:0,deaths:0,frames:0,enemies:[]});const{window:et}=y.globals,R={};et.addEventListener("keydown",({key:t})=>{R[t]=!0}),et.addEventListener("keyup",({key:t})=>{R[t]=!1});let ra=[];const Zt=t=>{ra=[...t.touches]};et.addEventListener("touchstart",Zt),et.addEventListener("touchmove",Zt),et.addEventListener("touchend",Zt),et.addEventListener("touchcancel",Zt);const ei=(t,e,n)=>{const a=n/e;return t.reduce((r,{clientX:s,clientY:i})=>{const o=s*a<i,c=i<n-s*a;return{left:r.left||o&&c,right:r.right||!o&&!c,up:r.up||!o&&c,down:r.down||o&&!c}},{})};var Le=()=>{const t=ei(ra,et.innerWidth,et.innerHeight);return{inner:R.a||R.ArrowLeft||t.left||!1,outer:R.d||R.ArrowRight||t.right||!1,quick:R.w||R.ArrowUp||t.up||!1,brake:R.s||R.ArrowDown||t.down||!1,pause:R.p||!1,escape:R.Escape||!1}};const ni={deaths:0,appearance:0},rt="min(70vw, 70vh)",sa={position:"absolute",left:`calc(50vw + ${rt} * 0.325)`,top:`calc(50vh + ${rt} * 0.325)`,width:`calc(${rt} * 0.2)`,height:`calc(${rt} * 0.2)`},Mt=Z(ni,t=>({deaths:e,appearance:n})=>{const a=n*100,r=a/2,s={...sa,backgroundColor:"#669",clipPath:`polygon(50% 100%, ${50+r}% ${100-r}%, ${a}% ${100-a}%, 0 100%)`},i={position:"absolute",bottom:`calc(${rt} * 0.02)`,right:`calc(${rt} * 0.02)`,textAlign:"right",fontSize:`calc(${rt} * 0.04)`,color:"white",opacity:n};return t`<div style="${s}"></div><div style="${sa}"><div style="position:relative;width:100%;height:100%"><div style="${i}">${e}<br>death${e>1?"s":""}</div></div></div>`}),ai={name:"-",appearance:0},st="min(70vw, 70vh)",oa={position:"absolute",left:`calc(50vw + ${st} * 0.325)`,top:`calc(50vh - ${st} * 0.525)`,width:`calc(${st} * 0.2)`,height:`calc(${st} * 0.2)`},At=Z(ai,t=>({name:e,appearance:n})=>{const a=n*100,r=a/2,s={...oa,backgroundColor:"#969",clipPath:`polygon(100% 50%, ${100-r}% ${50-r}%, ${100-a}% ${100-a}%, 100% 100%)`},i={position:"absolute",top:`calc(${st} * 0.02)`,right:`calc(${st} * 0.02)`,textAlign:"right",fontSize:`calc(${st} * 0.04)`,color:"white",opacity:n};return t`<div style="${s}"></div><div style="${oa}"><div style="position:relative;width:100%;height:100%"><div style="${i}">Event<br>${e||"-"}</div></div></div>`}),{pi2:ri,trunc:si}=y.globals,oi={level:1,playerAngle:0,appearance:0},ft="min(70vw, 70vh)",ia={position:"absolute",left:`calc(50vw - ${ft} * 0.525)`,top:`calc(50vh - ${ft} * 0.525)`,width:`calc(${ft} * 0.2)`,height:`calc(${ft} * 0.2)`},gt=Z(oi,t=>({level:e,playerAngle:n,appearance:a})=>{const r=a*100,s=r/2,i={...ia,backgroundColor:"#966",clipPath:`polygon(100% 0, 50% 0, ${50-s}% ${s}%, ${100-r}% ${r}%)`},o={...ia,color:"white",fontSize:`calc(${ft} * 0.04)`,margin:`calc(${ft} * 0.02)`,opacity:a},c=si(n/ri*100);return t`<div style="${i}"></div><div style="${o}">Lv.${e}<br>${c}%</div>`});var ii=t=>{let e=t;const n=new Map;return{next:a=>{e=a(e),n.forEach(r=>r(e))},subscribe:a=>{a(e);const r={};return n.set(r,a),r},unsubscribe:a=>n.delete(a)}};let Kt=[];const ca=ii(0),ci=t=>{Kt.push(t),Kt.length===6&&(ca.next(()=>5e3/(t-Kt[0])),Kt=[])},{trunc:la}=y.globals,li={mode:d.normal,fpsText:"60.00",appearance:0},da=new Map([[d.easy,"EASY"],[d.normal,"NORMAL"],[d.hard,"HARD"]]),ot="min(70vw, 70vh)",pa={position:"absolute",left:`calc(50vw - ${ot} * 0.525)`,top:`calc(50vh + ${ot} * 0.325)`,width:`calc(${ot} * 0.2)`,height:`calc(${ot} * 0.2)`},it=Z(li,t=>({mode:e,fpsText:n,appearance:a})=>{const r=a*100,s=r/2,i={...pa,backgroundColor:"#696",clipPath:`polygon(0 0, 0 50%, ${s}% ${50+s}%, ${r}% ${r}%)`},o={position:"absolute",bottom:`calc(${ot} * 0.02)`,left:`calc(${ot} * 0.02)`,color:"white",fontSize:`calc(${ot} * 0.04)`,opacity:a};return t`<div style="${i}"></div><div style="${pa}"><div style="position:relative;width:100%;height:100%"><div style="${o}">${da.get(e)}<br>${n}FPS</div></div></div>`});ca.subscribe(t=>it.update(()=>{const e=la(t*100);return{fpsText:`${la(e/100)}.${(e%100).toString().padStart(2,"0")}`}}));const{pi2:ha,cos:di,sin:pi,min:hi,max:ua,random:ui}=y.globals,fi=()=>({state:Le()}),gi=({escape:t,mode:e})=>({returns:t?{nextId:x.title,nextArgs:[],stateUpdate:{...Ht(),mode:e}}:!1}),vi=({pause:t,pauseTime:e})=>({returns:t&&e>10?{nextId:x.pause,nextArgs:[0],stateUpdate:{}}:!1}),bi=({evt:t,...e})=>t.waitTime>=t.wait?{state:t.inputEffect(e,t)}:{},wi=({inner:t,outer:e,quick:n,brake:a,pa:r,pr:s})=>({state:{pa:r+.007+(n-a)*.005,pr:hi(ua(s+(e-t)*2,10),m-10)}}),$i=()=>(pe(),he(),ue(),{}),fa=({pa:t,pr:e})=>({state:{px:g+e*di(-t),py:g+e*pi(-t)}}),mi=({practice:t,pa:e,pr:n,level:a,deaths:r,frames:s})=>{const i=e>=ha,o=a+(i?1:0);if(t&&i&&o%10===1)return{returns:{nextId:x.title,nextArgs:[],stateUpdate:{}}};if(a===101){if(r>=100)return{returns:{nextId:x.title,nextArgs:[],stateUpdate:{}}};xt(e);const{state:{px:c,py:l}}=fa({pa:e,pr:n});return zt(c,l),Nt(),{returns:{nextId:x.over,nextArgs:[],stateUpdate:{frames:s+1}}}}return{state:{pa:i?e%ha:e,level:o,levelUp:i}}},yi=({playerInvincible:t,pa:e,px:n,py:a})=>(xt(e),(t===0||ui()<.5)&&zt(n,a),{}),xi=({mode:t,level:e,levelUp:n,stage:a,pa:r,pr:s,px:i,py:o,playerInvincible:c,enemies:l,evt:p})=>{const h=a(t,e,n,{px:i,py:o,pa:r,pr:s,playerInvincible:c,enemies:l,evt:p});return{state:{stage:h.nextStage,evt:h.evt,enemies:h.enemies}}},Si=({enemies:t,px:e,py:n})=>{const a=t.reduce((r,s)=>{const{id:i}=s,{nextEnemies:o,hit:c}=Jr.get(i)(s,e,n);return Un.get(i)(u,s),{nextEnemies:r.nextEnemies.concat(o),hit:r.hit||c}},{nextEnemies:[],hit:!1});return{state:{enemies:a.nextEnemies,hit:a.hit}}},Ei=({evt:t})=>{const{eventTime:e,duration:n,waitTime:a,wait:r,afterEffect:s,props:i}=t,o=a>=r;return Sn(o?1-e/n:a/r),{state:{evt:{...t,waitTime:a+1,eventTime:o?e+1:0,props:o?s(i,e,u):i}}}},ki=({mode:t,level:e,pa:n,evt:a})=>(gt.update(()=>({level:e,playerAngle:n})),it.update(()=>({mode:t})),At.update(()=>({name:a.name})),Nt(),{}),Mi=({pa:t,pr:e})=>({state:{playerAngle:t,playerRadius:e}}),Ai=t=>{const{level:e,mode:n,practice:a,stage:r,evt:s,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l,frames:p,enemies:h,hit:f}=t;return f&&c===0?(Mt.update(()=>({deaths:l+1})),{returns:{nextId:x.death,nextArgs:[],stateUpdate:{level:e,mode:n,practice:a,stage:r,evt:s,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l+1,frames:p+1,enemies:h}}}):{}},Ci=({pauseTime:t,level:e,mode:n,practice:a,stage:r,evt:s,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l,frames:p,enemies:h})=>({returns:{nextId:x.main,nextArgs:[t+1],stateUpdate:{level:e,mode:n,practice:a,stage:r,evt:s,playerAngle:i,playerRadius:o,playerInvincible:ua(c-1,0),deaths:l,frames:p+1,enemies:h}}});var Oi=(t=0)=>e=>[fi,gi,vi,$i,bi,wi,mi,fa,yi,xi,Si,Ei,ki,Mi,Ai,Ci].reduce((n,a,r,s)=>{const{state:i,returns:o}=a(n);return o?(s.splice(r),o):Object.assign(n,i)},{...e,pauseTime:t,pa:e.playerAngle,pr:e.playerRadius});const{pi2:Pi,min:Jt,trunc:vt}=y.globals,Ti=t=>{u.save(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.arc(g,g,m,0,Pi),u.restore()},Li=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${t})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${M/4}px serif`,u.textAlign="center",u.fillText("\u89E3\u8131",g,g-M/8),u.closePath(),u.restore()},Ii=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${t})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${M/10}px serif`,u.textAlign="center",u.fillText("GAME OVER",g,g),u.closePath(),u.restore()},Di=t=>{const e=t/60,n=vt(e/60).toString().padStart(2,"0"),a=(vt(e)%60).toString().padStart(2,"0"),r=vt((e-vt(e))*1e3).toString().padStart(3,"0");return`${n}:${a}.${r}`},Wi=(t,e,n,a)=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${a})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${M/20}px serif`,u.textAlign="center",u.fillText(`Mode: ${da.get(t)}`,g,g+M*.1),u.fillText(`Death${e>=2?"s":""}: ${e}`,g,g+M*.2),u.fillText(`Time: ${n}`,g,g+M*.3)};var Ri=(t=0,e=null)=>({mode:n,deaths:a,frames:r})=>{if(t>690)return{nextId:x.over,nextArgs:[t,e],stateUpdate:{}};if(t<=120){const s=1-t/120;gt.update(()=>({appearance:s,level:100})),it.update(()=>({appearance:s})),Mt.update(()=>({appearance:s})),At.update(()=>({appearance:s})),de.update(()=>({opacity:s}))}if(t>=120&&t<=420){const s=vt((t-120)*.85),i=vt((s+102)/2),o=`rgb(${s}, ${s}, ${s})`,c=`rgb(${i}, ${i}, ${i})`;document.body.style.backgroundImage=`radial-gradient(circle closest-side,${[`${o} 60%`,`${c} 100%`,"#666 200%"].join(", ")})`}return t===420&&de.update(()=>({opacity:1})),t>=420&&(Ut(),Ti(Jt((t-420)/120,1))),t>=420&&Li(Jt((t-420)/120,1)),t>=570&&Ii(Jt((t-570)/60,1)),t>=630&&Wi(n,a,e,Jt((t-630)/60,1)),{nextId:x.over,nextArgs:[t+1,e||Di(r)],stateUpdate:{}}},_i=t=>({mode:e})=>{const{escape:n,pause:a}=Le();return n?{nextId:x.title,nextArgs:[],stateUpdate:{...Ht(),mode:e}}:t>10&&a?{nextId:x.main,nextArgs:[0],stateUpdate:{}}:{nextId:x.pause,nextArgs:[t+1],stateUpdate:{}}};let Ie=[];const X={mode:{},start:{},practice:{},stage:{}},De=(t,e)=>Ie.push({id:t,param:e}),ga=()=>Ie.map(({id:t,param:e})=>({id:t,param:e})),We=()=>{Ie=[]},Ui={opacity:0,mode:d.normal},Re=t=>()=>De(X.mode,t),zi=t=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"calc(50vh + min(25vw, 25vh))",transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:t}),va="min(2.6vw, 2.6vh)",_e=t=>({margin:`0 calc(${va} / 4)`,outline:"none",border:`2px solid ${t?"white":"transparent"}`,fontSize:va,color:"white",backgroundColor:"transparent"}),Ct=Z(Ui,t=>({opacity:e,mode:n,top:a})=>t`<div style=${zi(e)}><button style=${_e(n===d.easy)} onClick=${Re(d.easy)}>EASY</button><button style=${_e(n===d.normal)} onClick=${Re(d.normal)}>NORMAL</button><button style=${_e(n===d.hard)} onClick=${Re(d.hard)}>HARD</button></div>`),Ni={opacity:0,top:0,fontSize:0,selected:null},F=t=>()=>De(X.stage,t),Ot="min(3vw, 3vh)",ji=t=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"20%",transform:"translate(-50%, 0)",textAlign:"center",fontSize:`calc(${Ot} * 1.7)`,fontFamily:"serif",color:"white",opacity:t}),Fi=t=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:t}),B=t=>({outline:"none",border:`2px solid ${t?"white":"transparent"}`,margin:`calc(${Ot} / 4) 0 calc(${Ot} / 2)`,width:`calc(${Ot} * 7)`,fontSize:Ot,color:"white",backgroundColor:"transparent"}),Ue=Z(Ni,t=>({opacity:e,selected:n})=>t`<div style=${ji(e)}>Select Level</div><div style=${Fi(e)}><button style=${B(n===1)} onClick=${F(1)}>Lv.1~10</button><button style=${B(n===2)} onClick=${F(2)}>Lv.11~20</button><br><button style=${B(n===3)} onClick=${F(3)}>Lv.21~30</button><button style=${B(n===4)} onClick=${F(4)}>Lv.31~40</button><br><button style=${B(n===5)} onClick=${F(5)}>Lv.41~50</button><button style=${B(n===6)} onClick=${F(6)}>Lv.51~60</button><br><button style=${B(n===7)} onClick=${F(7)}>Lv.61~70</button><button style=${B(n===8)} onClick=${F(8)}>Lv.71~80</button><br><button style=${B(n===9)} onClick=${F(9)}>Lv.81~90</button><button style=${B(n===10)} onClick=${F(10)}>Lv.91~100</button></div>`),{min:ba}=y.globals,Bi=[kt,Te,Pe,Oe,Ce,Ae,Me,ke,Se,xe];var qi=(t=0,e=null)=>({mode:n})=>{if(Ue.update(()=>({selected:e,opacity:ba(t/30,(60-t)/30)})),Ct.update(()=>({mode:n,opacity:ba((60-t)/30,1)})),t===30){if(Le().escape)return Ue.update(()=>({opacity:0})),Ct.update(()=>({opacity:0})),{nextId:x.title,nextArgs:[],stateUpdate:{}};const[a,r]=ga().reduce(([s,i],{id:o,param:c})=>o===X.mode?[c,i]:[s,c],[n,null]);return{nextId:x.practice,nextArgs:[r===null?30:31,r],stateUpdate:{mode:a,level:r&&(r-1)*10+1,stage:(Bi[r-1]||kt)()}}}return We(),t<60?{nextId:x.practice,nextArgs:[t+1,e],stateUpdate:{}}:{nextId:x.start,nextArgs:[],stateUpdate:{}}};const{pi2:Gi,min:bt,max:ze,trunc:Yi}=y.globals,Xi=t=>{u.save(),u.beginPath();const e=1-bt(ze((t%60-15)/30,0),1);u.fillStyle=`rgba(255, 255, 255, ${e})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${m/3}px serif`,u.textAlign="center",u.fillText(3-Yi(t/60),g,m/2),u.restore()};var Hi=(t=0)=>({level:e,mode:n})=>{t===0&&(gt.update(()=>({level:e})),it.update(()=>({mode:n})));const a=bt(t/30,1);return gt.update(()=>({appearance:a})),it.update(()=>({appearance:a})),Mt.update(()=>({appearance:a})),At.update(()=>({appearance:a,name:"-"})),Ut(),pe(),he(bt(t/30,1)),xt(0,bt(ze((t-60)/30,0),1)),u.globalAlpha=bt(ze((t-30)/30,0),1),zt(g+m/2,g),u.globalAlpha=bt(t/30,1),Nt(),u.globalAlpha=1,t<180&&Xi(t),ue(-(t/160)*Gi),t<180?{nextId:x.start,nextArgs:[t+1],stateUpdate:{}}:{nextId:x.main,nextArgs:[],stateUpdate:{frames:0}}};const{max:Zi}=y.globals,Ki={startOpacity:0,practiceOpacity:0,mode:d.normal,fontSize:0},wa=t=>()=>De(t),Qt="min(3vw, 3vh)",Ji=t=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"calc(50vh + min(10vw, 10vh))",transform:"translate(-50%, 0)",textAlign:"center",lineHeight:`calc(${Qt} * 1.5)`,fontFamily:"serif"}),$a=t=>({outline:"none",border:"none",margin:`calc(${Qt} / 4) 0 calc(${Qt} / 2)`,fontSize:Qt,color:"white",backgroundColor:"transparent",opacity:t}),ma=Z(Ki,t=>({startOpacity:e,practiceOpacity:n})=>t`<div style=${Ji(Zi(e,n))}><button style=${$a(e)} onClick=${wa(X.start)}>Start Game</button><br><button style=${$a(n)} onClick=${wa(X.practice)}>Practice</button><br></div>`),{min:ya,max:Qi,round:xa,random:Sa}=y.globals,Vi=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${M/4}px serif`,u.textAlign="center",u.fillText("\u8F2A\u5EFB",g,g-M/10),u.closePath(),u.restore()},tc=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${M/10}px serif`,u.textAlign="center",u.fillText("\u2212\u56DE\u5411\u2212",g,g+M/30),u.closePath(),u.restore()};var Ea=(t=0)=>({mode:e,level:n,practice:a})=>{t===0&&(gt.update(()=>({appearance:0,playerAngle:0})),it.update(()=>({appearance:0})),Mt.update(()=>({appearance:0,deaths:0})),At.update(()=>({appearance:0,name:"-"}))),Ut(),Vi(ya(t/60,(165-t)/60,1));const r=Qi(ya((t-75)/30,(165-t)/60,1),0);if(tc(r),ma.update(()=>({startOpacity:(t>105&&!a?xa(Sa()):1)*r,practiceOpacity:(t>105&&a?xa(Sa()):1)*r})),Ct.update(()=>({opacity:t>105&&a?1:r})),t===105){const[s,i]=ga().reduce(([o,c],{id:l,param:p})=>l===X.mode?[p,c]:[X.start,X.practice].includes(l)?[o,l]:[o,c],[e,null]);return We(),Ct.update(()=>({mode:s})),{nextId:x.title,nextArgs:[i===null?105:106],stateUpdate:{mode:s,practice:i===X.practice}}}return We(),t===165?{nextId:a?x.practice:x.start,nextArgs:[],stateUpdate:{level:a?1:n,stage:kt()}}:{nextId:x.title,nextArgs:[t+1],stateUpdate:t===0?{...Ht(),mode:e}:{}}};const{now:ec}=y.globals,nc=new Map([[x.title,Ea],[x.start,Hi],[x.practice,qi],[x.main,Oi],[x.pause,_i],[x.death,ns],[x.over,Ri]]),ka=(t,e)=>()=>{ci(ec());const{nextId:n,nextArgs:a,stateUpdate:r}=t(e);return ka(nc.get(n)(...a),Object.assign(e,r))},{bind:ac}=y.hyperhtml;ac(document.body)` ${de.render()} ${gt.render()} ${it.render()} ${Mt.render()} ${At.render()} ${ma.render()} ${Ue.render()} ${Ct.render()}`,Cr(ka(Ea(),Ht()))})();
