(function(){"use strict";/*! (c) Andrea Giammarchi - ISC */var ee={};try{ee.WeakMap=WeakMap}catch(t){ee.WeakMap=function(e,n){var r=n.defineProperty,a=n.hasOwnProperty,s=i.prototype;return s.delete=function(l){return this.has(l)&&delete l[this._]},s.get=function(l){return this.has(l)?l[this._]:void 0},s.has=function(l){return a.call(l,this._)},s.set=function(l,c){return r(l,this._,{configurable:!0,value:c}),this},i;function i(l){r(this,"_",{value:"_@ungap/weakmap"+e++}),l&&l.forEach(o,this)}function o(l){this.set(l[0],l[1])}}(Math.random(),Object)}var st=ee.WeakMap;/*! (c) Andrea Giammarchi - ISC */var ne={};try{ne.WeakSet=WeakSet}catch(t){(function(e,n){var r=a.prototype;r.add=function(s){return this.has(s)||n(s,this._,{value:!0,configurable:!0}),this},r.has=function(s){return this.hasOwnProperty.call(s,this._)},r.delete=function(s){return this.has(s)&&delete s[this._]},ne.WeakSet=a;function a(){n(this,"_",{value:"_@ungap/weakmap"+e++})}})(Math.random(),Object.defineProperty)}var ua=ne.WeakSet;const{indexOf:ha,slice:Gc}=[],ot=(t,e,n,r,a,s)=>{const i="selectedIndex"in e;let o=i;for(;r<a;){const l=t(n[r],1);if(e.insertBefore(l,s),i&&o&&l.selected){o=!o;let{selectedIndex:c}=e;e.selectedIndex=c<0?r:ha.call(e.querySelectorAll("option"),l)}r++}},ga=(t,e)=>t==e,va=t=>t,qe=(t,e,n,r,a,s,i)=>{const o=s-a;if(o<1)return-1;for(;n-e>=o;){let l=e,c=a;for(;l<n&&c<s&&i(t[l],r[c]);)l++,c++;if(c===s)return e;e=l+1}return-1},ba=(t,e,n,r,a,s)=>{for(;r<a&&s(n[r],t[e-1]);)r++,e--;return e===0},re=(t,e,n,r,a)=>n<r?t(e[n],0):0<n?t(e[n-1],-0).nextSibling:a,yt=(t,e,n,r)=>{for(;n<r;)Oa(t(e[n++],-1))},xt=-1,Mt=1,At=0,$a=50,wa=(t,e,n,r,a,s,i,o)=>{let l=0,c=r<o?r:o;const d=Array(c++),f=Array(c);f[0]=-1;for(let b=1;b<c;b++)f[b]=i;const h=a.slice(s,i);for(let b=e;b<n;b++){const $=h.indexOf(t[b]);if(-1<$){const _=$+s;l=xa(f,c,_),-1<l&&(f[l]=_,d[l]={newi:b,oldi:_,prev:d[l-1]})}}for(l=--c,--i;f[l]>i;)--l;c=o+r-l;const v=Array(c);let w=d[l];for(--n;w;){const{newi:b,oldi:$}=w;for(;n>b;)v[--c]=Mt,--n;for(;i>$;)v[--c]=xt,--i;v[--c]=At,--n,--i,w=w.prev}for(;n>=e;)v[--c]=Mt,--n;for(;i>=s;)v[--c]=xt,--i;return v},ma=(t,e,n,r,a,s,i)=>{const o=n+s,l=[];let c,d,f,h,v,w,b;t:for(c=0;c<=o;c++){if(c>$a)return null;for(b=c-1,v=c?l[c-1]:[0,0],w=l[c]=[],d=-c;d<=c;d+=2){for(d===-c||d!==c&&v[b+d-1]<v[b+d+1]?h=v[b+d+1]:h=v[b+d-1]+1,f=h-d;h<s&&f<n&&i(r[a+h],t[e+f]);)h++,f++;if(h===s&&f===n)break t;w[c+d]=h}}const $=Array(c/2+o/2);let _=$.length-1;for(c=l.length-1;c>=0;c--){for(;h>0&&f>0&&i(r[a+h-1],t[e+f-1]);)$[_--]=At,h--,f--;if(!c)break;b=c-1,v=c?l[c-1]:[0,0],d=h-f,d===-c||d!==c&&v[b+d-1]<v[b+d+1]?(f--,$[_--]=Mt):(h--,$[_--]=xt)}return $},ya=(t,e,n,r,a,s,i,o,l)=>{const c=[],d=t.length;let f=i,h=0;for(;h<d;)switch(t[h++]){case At:a++,f++;break;case Mt:c.push(r[a]),ot(e,n,r,a++,a,f<o?e(s[f],0):l);break;case xt:f++;break}for(h=0;h<d;)switch(t[h++]){case At:i++;break;case xt:-1<c.indexOf(s[i])?i++:yt(e,s,i++,i);break}},xa=(t,e,n)=>{let r=1,a=e;for(;r<a;){const s=(r+a)/2>>>0;n<t[s]?a=s:r=s+1}return r},_a=(t,e,n,r,a,s,i,o,l,c,d,f,h)=>{ya(ma(n,r,s,i,o,c,f)||wa(n,r,a,s,i,o,l,c),t,e,n,r,i,o,d,h)},Oa=t=>(t.remove||Sa).call(t);function Sa(){const{parentNode:t}=this;t&&t.removeChild(this)}/*! (c) 2018 Andrea Giammarchi (ISC) */const it=(t,e,n,r)=>{r||(r={});const a=r.compare||ga,s=r.node||va,i=r.before==null?null:s(r.before,0),o=e.length;let l=o,c=0,d=n.length,f=0;for(;c<l&&f<d&&a(e[c],n[f]);)c++,f++;for(;c<l&&f<d&&a(e[l-1],n[d-1]);)l--,d--;const h=c===l,v=f===d;if(h&&v)return n;if(h&&f<d)return ot(s,t,n,f,d,re(s,e,c,o,i)),n;if(v&&c<l)return yt(s,e,c,l),n;const w=l-c,b=d-f;let $=-1;if(w<b){if($=qe(n,f,d,e,c,l,a),-1<$)return ot(s,t,n,f,$,s(e[c],0)),ot(s,t,n,$+w,d,re(s,e,l,o,i)),n}else if(b<w&&($=qe(e,c,l,n,f,d,a),-1<$))return yt(s,e,c,$),yt(s,e,$+b,l),n;return w<2||b<2?(ot(s,t,n,f,d,s(e[c],0)),yt(s,e,c,l),n):w===b&&ba(n,d,e,c,l,a)?(ot(s,t,n,f,d,re(s,e,l,o,i)),n):(_a(s,t,n,f,d,b,e,c,l,w,o,a,i),n)};/*! (c) Andrea Giammarchi - ISC */var Ge={};Ge.CustomEvent=typeof CustomEvent=="function"?CustomEvent:function(t){return e[t]=new e("").constructor[t],e;function e(n,r){r||(r={});var a=document.createEvent("CustomEvent");return a.initCustomEvent(n,!!r.bubbles,!!r.cancelable,r.detail),a}}("prototype");var Ye=Ge.CustomEvent;/*! (c) Andrea Giammarchi - ISC */var ae={};try{ae.Map=Map}catch(t){ae.Map=function(){var n=0,r=[],a=[];return{delete:function(i){var o=s(i);return o&&(r.splice(n,1),a.splice(n,1)),o},forEach:function(o,l){r.forEach(function(c,d){o.call(l,a[d],c,this)},this)},get:function(o){return s(o)?a[n]:void 0},has:function(o){return s(o)},set:function(o,l){return a[s(o)?n:r.push(o)-1]=l,this}};function s(i){return n=r.indexOf(i),-1<n}}}var Pa=ae.Map;function Ct(){return this}function Ea(t){const e=new st,n=Object.create,r=(o,l,c)=>(o.set(l,c),c),a=(o,l,c,d)=>{const f=l.get(o)||s(o,l);switch(typeof d){case"object":case"function":const h=f.w||(f.w=new st);return h.get(d)||r(h,d,new o(c));default:const v=f.p||(f.p=n(null));return v[d]||(v[d]=new o(c))}},s=(o,l)=>{const c={w:null,p:null};return l.set(o,c),c},i=o=>{const l=new Pa;return e.set(o,l),l};Object.defineProperties(Ct,{for:{configurable:!0,value(o,l){return a(this,e.get(o)||i(o),o,l==null?"default":l)}}}),Object.defineProperties(Ct.prototype,{handleEvent:{value(o){const l=o.currentTarget;this["getAttribute"in l&&l.getAttribute("data-call")||"on"+o.type](o)}},html:se("html",t),svg:se("svg",t),state:se("state",function(){return this.defaultState}),defaultState:{get(){return{}}},dispatch:{value(o,l){const{_wire$:c}=this;if(c){const d=new Ye(o,{bubbles:!0,cancelable:!0,detail:l});return d.component=this,(c.dispatchEvent?c:c.firstChild).dispatchEvent(d)}return!1}},setState:{value(o,l){const c=this.state,d=typeof o=="function"?o.call(this,c):o;for(const f in d)c[f]=d[f];return l!==!1&&this.render(),this}}})}const se=(t,e)=>{const n="_"+t+"$";return{get(){return this[n]||Xe(this,n,e.call(this,t))},set(r){Xe(this,n,r)}}},Xe=(t,e,n)=>Object.defineProperty(t,e,{configurable:!0,value:typeof n=="function"?function(){return t._wire$=n.apply(this,arguments)}:n})[e];Object.defineProperties(Ct.prototype,{ELEMENT_NODE:{value:1},nodeType:{value:-1}});const Ze={},kt={},Ke=[],Ma=kt.hasOwnProperty;let Je=0;var _t={attributes:Ze,define:(t,e)=>{t.indexOf("-")<0?(t in kt||(Je=Ke.push(t)),kt[t]=e):Ze[t]=e},invoke:(t,e)=>{for(let n=0;n<Je;n++){let r=Ke[n];if(Ma.call(t,r))return kt[r](t[r],e)}}},Qe=Array.isArray||function(t){var e=t.call([]);return function(r){return t.call(r)===e}}({}.toString);/*! (c) Andrea Giammarchi - ISC */var Ve=function(t){var e="fragment",n="template",r="content"in i(n),a=r?function(l){var c=i(n);return c.innerHTML=l,c.content}:function(l){var c=i(e),d=i(n),f=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(l)){var h=RegExp.$1;d.innerHTML="<table>"+l+"</table>",f=d.querySelectorAll(h)}else d.innerHTML=l,f=d.childNodes;return s(c,f),c};return function(c,d){return(d==="svg"?o:a)(c)};function s(l,c){for(var d=c.length;d--;)l.appendChild(c[0])}function i(l){return l===e?t.createDocumentFragment():t.createElementNS("http://www.w3.org/1999/xhtml",l)}function o(l){var c=i(e),d=i("div");return d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+l+"</svg>",s(c,d.firstChild.childNodes),c}}(document);/*! (c) Andrea Giammarchi */function Aa(t){var e=t.Event,n=t.WeakSet,r=!0,a=null;return function(o){return r&&(r=!r,a=new n,s(o.ownerDocument)),a.add(o),o};function s(i){var o=new n,l=new n;try{new MutationObserver(h).observe(i,{subtree:!0,childList:!0})}catch(b){var c=0,d=[],f=function($){d.push($),clearTimeout(c),c=setTimeout(function(){h(d.splice(c=0,d.length))},0)};i.addEventListener("DOMNodeRemoved",function($){f({addedNodes:[],removedNodes:[$.target]})},!0),i.addEventListener("DOMNodeInserted",function($){f({addedNodes:[$.target],removedNodes:[]})},!0)}function h(b){for(var $,_=b.length,S=0;S<_;S++)$=b[S],v($.removedNodes,"disconnected",l,o),v($.addedNodes,"connected",o,l)}function v(b,$,_,S){for(var E,k=new e($),M=b.length,I=0;I<M;(E=b[I++]).nodeType===1&&w(E,k,$,_,S));}function w(b,$,_,S,E){a.has(b)&&!S.has(b)&&(E.delete(b),S.add(b),b.dispatchEvent($));for(var k=b.children||[],M=k.length,I=0;I<M;w(k[I++],$,_,S,E));}}}/*! (c) Andrea Giammarchi - ISC */var Ca=function(t,e,n,r,a){var s=a in t,i=t.createDocumentFragment();i[e](t[r]("g")),i[e](t[r](""));var o=s?t[a](i,!0):i[n](!0);return o.childNodes.length<2?function l(c,d){for(var f=c[n](),h=c.childNodes||[],v=h.length,w=0;d&&w<v;w++)f[e](l(h[w],d));return f}:s?t[a]:function(l,c){return l[n](!!c)}}(document,"appendChild","cloneNode","createTextNode","importNode"),tn="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")};/*! (c) Andrea Giammarchi - ISC */var K="-"+Math.random().toFixed(6)+"%",oe=!1;try{(function(t,e,n){return e in t&&(t.innerHTML="<p "+n+'="'+K+'"></p>',t[e].childNodes[0].getAttribute(n)==K)})(document.createElement("template"),"content","tabindex")||(K="_dt: "+K.slice(1,-1)+";",oe=!0)}catch(t){}var It="<!--"+K+"-->",ka=8,Ia=1,Ta=3,en=/^(?:plaintext|script|style|textarea|title|xmp)$/i,La=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function ja(t){return t.join(It).replace(Wa,Fa).replace(Da,Ra)}var Tt=" \\f\\n\\r\\t",nn="[^"+Tt+`\\/>"'=]+`,ie="["+Tt+"]+"+nn,rn="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",an=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+nn.replace("\\/","")+"))?)",Da=new RegExp(rn+ie+an+"+)(["+Tt+"]*/?>)","g"),Wa=new RegExp(rn+ie+an+"*)(["+Tt+"]*/>)","g"),Na=new RegExp("("+ie+`\\s*=\\s*)(['"]?)`+It+"\\2","gi");function Ra(t,e,n,r){return"<"+e+n.replace(Na,Ua)+r}function Ua(t,e,n){return e+(n||'"')+K+(n||'"')}function Fa(t,e,n){return La.test(e)?t:"<"+e+n+"></"+e+">"}var Ba=t=>({get:e=>t.get(e),set:(e,n)=>(t.set(e,n),n)}),za=oe?function(t,e){var n=e.join(" ");return e.slice.call(t,0).sort(function(r,a){return n.indexOf(r.name)<=n.indexOf(a.name)?-1:1})}:function(t,e){return e.slice.call(t,0)};function Ha(t,e){for(var n=e.length,r=0;r<n;)t=t.childNodes[e[r++]];return t}function sn(t,e,n,r){for(var a=t.childNodes,s=a.length,i=0;i<s;){var o=a[i];switch(o.nodeType){case Ia:var l=r.concat(i);qa(o,e,n,l),sn(o,e,n,l);break;case ka:var c=o.textContent;if(c===K)n.shift(),e.push(en.test(t.nodeName)?ln(t,r):Ga(o,r.concat(i)));else switch(c.slice(0,2)){case"/*":if(c.slice(-2)!=="*/")break;case"\u{1F47B}":t.removeChild(o),i--,s--}break;case Ta:en.test(t.nodeName)&&tn.call(o.textContent)===It&&(n.shift(),e.push(ln(t,r)));break}i++}}function qa(t,e,n,r){for(var a=t.attributes,s=[],i=[],o=za(a,n),l=o.length,c=0;c<l;){var d=o[c++],f=d.value===K,h;if(f||1<(h=d.value.split(It)).length){var v=d.name;if(s.indexOf(v)<0){s.push(v);var w=n.shift().replace(f?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+v+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),b=a[w]||a[w.toLowerCase()];if(f)e.push(on(b,r,w,null));else{for(var $=h.length-2;$--;)n.shift();e.push(on(b,r,w,h))}}i.push(d)}}l=i.length,c=0;for(var _=0<l&&oe&&!("ownerSVGElement"in t);c<l;){var S=i[c++];_&&(S.value=""),t.removeAttribute(S.name)}var E=t.nodeName;if(/^script$/i.test(E)){var k=document.createElement(E);for(l=a.length,c=0;c<l;)k.setAttributeNode(a[c++].cloneNode(!0));k.textContent=t.textContent,t.parentNode.replaceChild(k,t)}}function Ga(t,e){return{type:"any",node:t,path:e}}function on(t,e,n,r){return{type:"attr",node:t,path:e,name:n,sparse:r}}function ln(t,e){return{type:"text",node:t,path:e}}var cn=Ba(new st);function Ya(t,e){var n=(t.convert||ja)(e),r=t.transform;r&&(n=r(n));var a=Ve(n,t.type);pn(a);var s=[];return sn(a,s,e.slice(0),[]),{content:a,updates:function(i){for(var o=[],l=s.length,c=0,d=0;c<l;){var f=s[c++],h=Ha(i,f.path);switch(f.type){case"any":o.push({fn:t.any(h,[]),sparse:!1});break;case"attr":var v=f.sparse,w=t.attribute(h,f.name,f.node);v===null?o.push({fn:w,sparse:!1}):(d+=v.length-2,o.push({fn:w,sparse:!0,values:v}));break;case"text":o.push({fn:t.text(h),sparse:!1}),h.textContent="";break}}return l+=d,function(){var b=arguments.length;if(l!==b-1)throw new Error(b-1+" values instead of "+l+`
`+e.join("${value}"));for(var $=1,_=1;$<b;){var S=o[$-_];if(S.sparse){var E=S.values,k=E[0],M=1,I=E.length;for(_+=I-2;M<I;)k+=arguments[$++]+E[M++];S.fn(k)}else S.fn(arguments[$++])}return i}}}}function Xa(t,e){var n=cn.get(e)||cn.set(e,Ya(t,e));return n.updates(Ca.call(document,n.content,!0))}var Za=[];function Ka(t){var e=Za,n=pn;return function(r){return e!==r&&(n=Xa(t,e=r)),n.apply(null,arguments)}}function pn(t){for(var e=t.childNodes,n=e.length;n--;){var r=e[n];r.nodeType!==1&&tn.call(r.textContent).length===0&&t.removeChild(r)}}/*! (c) Andrea Giammarchi - ISC */var Ja=function(){var t=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,e=/([^A-Z])([A-Z]+)/g;return function(o,l){return"ownerSVGElement"in o?r(o,l):s(o.style,!1)};function n(i,o,l){return o+"-"+l.toLowerCase()}function r(i,o){var l;return o?l=o.cloneNode(!0):(i.setAttribute("style","--hyper:style;"),l=i.getAttributeNode("style")),l.value="",i.setAttributeNode(l),s(l,!0)}function a(i){var o,l=[];for(o in i)l.push(o.replace(e,n),":",i[o],";");return l.join("")}function s(i,o){var l,c;return function(d){var f,h,v,w;switch(typeof d){case"object":if(d){if(l==="object"){if(!o&&c!==d)for(h in c)h in d||(i[h]="")}else o?i.value="":i.cssText="";f=o?{}:i;for(h in d)w=d[h],v=typeof w=="number"&&!t.test(h)?w+"px":w,!o&&/^--/.test(h)?f.setProperty(h,v):f[h]=v;l="object",o?i.value=a(c=f):c=d;break}default:c!=d&&(l="string",c=d,o?i.value=d||"":i.cssText=d||"");break}}}}();/*! (c) Andrea Giammarchi - ISC */var dn=function(t,e){return e=n.prototype,e.ELEMENT_NODE=1,e.nodeType=111,e.remove=function(r){var a=this.childNodes,s=this.firstChild,i=this.lastChild;if(this._=null,r&&a.length===2)i.parentNode.removeChild(i);else{var o=this.ownerDocument.createRange();o.setStartBefore(r?a[1]:s),o.setEndAfter(i),o.deleteContents()}return s},e.valueOf=function(r){var a=this._,s=a==null;if(s&&(a=this._=this.ownerDocument.createDocumentFragment()),s||r)for(var i=this.childNodes,o=0,l=i.length;o<l;o++)a.appendChild(i[o]);return a},n;function n(r){var a=this.childNodes=t.call(r,0);this.firstChild=a[0],this.lastChild=a[a.length-1],this.ownerDocument=a[0].ownerDocument,this._=null}}([].slice);const Qa=11,le="ownerSVGElement",fn="connected",Va="dis"+fn,ts=Ct.prototype.nodeType,es=dn.prototype.nodeType,ns=Aa({Event:Ye,WeakSet:ua}),rs=t=>({html:t}),un=(t,e)=>{switch(t.nodeType){case es:return 1/e<0?e?t.remove(!0):t.lastChild:e?t.valueOf(!0):t.firstChild;case ts:return un(t.render(),e);default:return t}},as=t=>"ELEMENT_NODE"in t,ss=(t,e,n)=>r=>{n!==!!r&&((n=!!r)?t.setAttribute(e,""):t.removeAttribute(e))},os=(t,e,n)=>n?r=>{try{t[e]=r}catch(a){t.setAttribute(e,r)}}:r=>{t[e]=r},hn=(t,e)=>{e(t.placeholder),"text"in t?Promise.resolve(t.text).then(String).then(e):"any"in t?Promise.resolve(t.any).then(e):"html"in t?Promise.resolve(t.html).then(rs).then(e):Promise.resolve(_t.invoke(t,e)).then(e)},ce=t=>t!=null&&"then"in t,is=/^(?:form|list)$/i,Lt=[].slice,ls=(t,e)=>t.ownerDocument.createTextNode(e);function pe(t){return this.type=t,Ka(this)}pe.prototype={attribute(t,e,n){const r=le in t;let a;if(e==="style")return Ja(t,n,r);if(e.slice(0,1)===".")return os(t,e.slice(1),r);if(e.slice(0,1)==="?")return ss(t,e.slice(1));if(/^on/.test(e)){let s=e.slice(2);return s===fn||s===Va?ns(t):e.toLowerCase()in t&&(s=s.toLowerCase()),i=>{a!==i&&(a&&t.removeEventListener(s,a,!1),a=i,i&&t.addEventListener(s,i,!1))}}else{if(e==="data"||!r&&e in t&&!is.test(e))return s=>{a!==s&&(a=s,t[e]!==s&&s==null?(t[e]="",t.removeAttribute(e)):t[e]=s)};if(e in _t.attributes)return s=>{const i=_t.attributes[e](t,s);a!==i&&(a=i,i==null?t.removeAttribute(e):t.setAttribute(e,i))};{let s=!1;const i=n.cloneNode(!0);return o=>{a!==o&&(a=o,i.value!==o&&(o==null?(s&&(s=!1,t.removeAttributeNode(i)),i.value=o):(i.value=o,s||(s=!0,t.setAttributeNode(i)))))}}}},any(t,e){const n={node:un,before:t},r=le in t?"svg":"html";let a=!1,s;const i=o=>{switch(typeof o){case"string":case"number":case"boolean":a?s!==o&&(s=o,e[0].textContent=o):(a=!0,s=o,e=it(t.parentNode,e,[ls(t,o)],n));break;case"function":i(o(t));break;case"object":case"undefined":if(o==null){a=!1,e=it(t.parentNode,e,[],n);break}default:if(a=!1,s=o,Qe(o))if(o.length===0)e.length&&(e=it(t.parentNode,e,[],n));else switch(typeof o[0]){case"string":case"number":case"boolean":i({html:o});break;case"object":if(Qe(o[0])&&(o=o.concat.apply([],o)),ce(o[0])){Promise.all(o).then(i);break}default:e=it(t.parentNode,e,o,n);break}else as(o)?e=it(t.parentNode,e,o.nodeType===Qa?Lt.call(o.childNodes):[o],n):ce(o)?o.then(i):"placeholder"in o?hn(o,i):"text"in o?i(String(o.text)):"any"in o?i(o.any):"html"in o?e=it(t.parentNode,e,Lt.call(Ve([].concat(o.html).join(""),r).childNodes),n):"length"in o?i(Lt.call(o)):i(_t.invoke(o,i));break}};return i},text(t){let e;const n=r=>{if(e!==r){e=r;const a=typeof r;a==="object"&&r?ce(r)?r.then(n):"placeholder"in r?hn(r,n):"text"in r?n(String(r.text)):"any"in r?n(r.any):"html"in r?n([].concat(r.html).join("")):"length"in r?n(Lt.call(r).join("")):n(_t.invoke(r,n)):a==="function"?n(r(t)):t.textContent=r==null?"":r}};return n}};var gn=typeof document!="object",de=function(t){var e="raw",n=function(c){return/(Firefox|Safari)\/(\d+)/.test(c)&&!/(Chrom[eium]+|Android)\/(\d+)/.test(c)},r=n((document.defaultView.navigator||{}).userAgent),a=!(e in t)||t.propertyIsEnumerable(e)||!Object.isFrozen(t[e]);if(r||a){var s={},i=function(c){for(var d=".",f=0;f<c.length;f++)d+=c[f].length+"."+c[f];return s[d]||(s[d]=c)};if(a)de=i;else{var o=new st,l=function(c,d){return o.set(c,d),d};de=function(c){return o.get(c)||l(c,i(c))}}}else gn=!0;return vn(t)};function vn(t){return gn?t:de(t)}function bn(t){for(var e=arguments.length,n=[vn(t)],r=1;r<e;)n.push(arguments[r++]);return n}const $n=new st,cs=(t,e)=>t==null?fe(e||"html"):ps(t,e||"html"),fe=t=>{let e,n,r;return function(){const a=bn.apply(null,arguments);return r!==a[0]?(r=a[0],n=new pe(t),e=ds(n.apply(n,a))):n.apply(n,a),e}},ps=(t,e)=>{const n=e.indexOf(":");let r=$n.get(t),a=e;return-1<n&&(a=e.slice(n+1),e=e.slice(0,n)||"html"),r||$n.set(t,r={}),r[a]||(r[a]=fe(e))},ds=t=>{const e=t.childNodes,{length:n}=e;return n===1?e[0]:n?new dn(e):t},wn=new st;function fs(){const t=wn.get(this),e=bn.apply(null,arguments);return t&&t.template===e[0]?t.tagger.apply(null,e):us.apply(this,e),this}function us(t){const e=le in this?"svg":"html",n=new pe(e);wn.set(this,{tagger:n,template:t}),this.textContent="",this.appendChild(n.apply(null,arguments))}/*! (c) Andrea Giammarchi (ISC) */const hs=t=>fs.bind(t);Ea(fe);var y={hyperhtml:{wire:cs,bind:hs},globals:{infinity:Number.POSITIVE_INFINITY,pi:Math.PI,pi2:Math.PI*2,min:Math.min,max:Math.max,abs:Math.abs,trunc:Math.trunc,round:Math.round,sqrt:Math.sqrt,cos:Math.cos,sin:Math.sin,atan2:Math.atan2,random:Math.random,now:Date.now,window,requestAnimationFrame,document}};const{requestAnimationFrame:gs}=y.globals,mn=t=>()=>gs(mn(t()));var vs=t=>mn(t)(),yn=t=>{let e=t;const n=new Map;return{next:r=>{e=r(e),n.forEach(a=>a(e))},subscribe:r=>{r(e);const a={};return n.set(a,r),a},unsubscribe:r=>n.delete(r)}};let jt=[];const xn=yn(0),bs=t=>{jt.push(t),jt.length===6&&(xn.next(()=>5e3/(t-jt[0])),jt=[])};var x={title:{},practice:{},start:{},main:{},pause:{},death:{},over:{}},$s=Object.defineProperty,ws=Object.prototype.hasOwnProperty,_n=Object.getOwnPropertySymbols,ms=Object.prototype.propertyIsEnumerable,On=(t,e,n)=>e in t?$s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sn=(t,e)=>{for(var n in e||(e={}))ws.call(e,n)&&On(t,n,e[n]);if(_n)for(var n of _n(e))ms.call(e,n)&&On(t,n,e[n]);return t};const{wire:ys}=y.hyperhtml;var J=(t,e)=>{const n=e(ys());let r=t;return{render:()=>n(r),update:a=>{r=Sn(Sn({},r),a(r)),n(r)}}};const{window:ue}=y.globals,Pn=()=>({width:ue.innerWidth,height:ue.innerHeight}),N=yn(Pn());ue.addEventListener("resize",()=>N.next(Pn));const{pi2:lt,min:xs,cos:_s,sin:Os,document:Ss}=y.globals,m=200,P=m*2+10,g=P/2,Q=Ss.createElement("canvas");Q.width=P,Q.height=P,Object.assign(Q.style,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"});const u=Q.getContext("2d"),Dt=Q.cloneNode(),A=Dt.getContext("2d"),Wt=J({width:0,opacity:1},t=>({width:e,opacity:n})=>{const r={width:`${e}px`,height:`${e}px`,opacity:n};return Object.assign(Q.style,r),Object.assign(Dt.style,r),t`${Q}${Dt}`});N.subscribe(({width:t,height:e})=>{const n=xs(t,e)*.7;Wt.update(()=>({width:n}))});const Nt=()=>{Q.width=P,Dt.width=P,u.clip(u.arc(g,g,m,0,lt))},he=()=>{u.save(),u.beginPath(),u.fillStyle="black",u.arc(g,g,m,0,lt),u.fill(),u.closePath(),u.restore()},ge=(t=1)=>{u.save(),u.beginPath(),u.strokeStyle="white",u.lineWidth=1,u.moveTo(g,g),u.lineTo(g+t*m,g),u.stroke(),u.closePath(),u.restore()},Ot=(t,e=1,n="red")=>{u.save(),u.beginPath(),u.strokeStyle=n,u.lineWidth=1,u.moveTo(g,g);const r=e*m;u.lineTo(g+r*_s(-t),g+r*Os(-t)),u.stroke(),u.closePath(),u.restore()},Rt=(t,e)=>{u.save(),u.beginPath();const n=u.createRadialGradient(t,e,0,t,e,20);n.addColorStop(0,"red"),n.addColorStop(1,"rgba(255, 0, 0, 0)"),u.fillStyle=n,u.arc(t,e,20,0,lt),u.fill(),u.closePath(),u.restore()},Ut=()=>{u.save(),u.beginPath(),u.fillStyle="white",u.arc(g,g,3,0,lt),u.fill(),u.closePath(),u.restore()},ve=(t=-lt)=>{A.clearRect(0,0,P,P),A.save(),A.beginPath(),A.setLineDash([10,10]),A.strokeStyle="white",A.lineWidth=3,A.arc(g,g,m,0,t,!0),A.stroke(),A.closePath(),A.restore()},En=t=>{A.save(),A.beginPath(),A.setLineDash([10,10]),A.strokeStyle="magenta",A.lineWidth=3,A.arc(g,g,m,0,-t*lt,!0),A.stroke(),A.closePath(),A.restore()};var p={easy:{},normal:{},hard:{}};let be=[];const G={mode:{},start:{},practice:{},stage:{}},$e=(t,e)=>be.push({id:t,param:e}),Mn=()=>be.map(({id:t,param:e})=>({id:t,param:e})),we=()=>{be=[]},{min:Ps,max:Es}=y.globals,Ms={startOpacity:0,practiceOpacity:0,mode:p.normal,fontSize:0},An=t=>()=>$e(t),As=(t,e,n)=>({display:n>0?"block":"none",position:"absolute",left:"50%",top:`${t}px`,transform:"translate(-50%, 0)",textAlign:"center",lineHeight:`${e*1.5}px`,fontFamily:"serif"}),Cn=(t,e)=>({outline:"none",border:"none",margin:`${t/4}px 0 ${t/2}px`,fontSize:`${t}px`,color:"white",backgroundColor:"transparent",opacity:e}),me=J(Ms,t=>({startOpacity:e,practiceOpacity:n,top:r,fontSize:a})=>t`  <div style=${As(r,a,Es(e,n))}>    <button      style=${Cn(a,e)}      onClick=${An(G.start)}>Start Game</button><br>    <button      style=${Cn(a,n)}      onClick=${An(G.practice)}>Practice</button><br>  </div>`);N.subscribe(({width:t,height:e})=>{const n=Ps(t,e),r=e/2+n*.1,a=n*.03;me.update(()=>({top:r,fontSize:a}))});const{min:Cs}=y.globals,ks={opacity:0,mode:p.normal,top:0,fontSize:0},ye=t=>()=>$e(G.mode,t),Is=(t,e)=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:`${e}px`,transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:t}),xe=(t,e)=>({margin:`0 ${e/4}px`,outline:"none",border:`2px solid ${t?"white":"transparent"}`,fontSize:`${e}px`,color:"white",backgroundColor:"transparent"}),ct=J(ks,t=>({opacity:e,mode:n,top:r,fontSize:a})=>t`  <div style=${Is(e,r)}>    <button      style=${xe(n===p.easy,a)}      onClick=${ye(p.easy)}>EASY</button>    <button      style=${xe(n===p.normal,a)}      onClick=${ye(p.normal)}>NORMAL</button>    <button      style=${xe(n===p.hard,a)}      onClick=${ye(p.hard)}>HARD</button>  </div>`);N.subscribe(({width:t,height:e})=>{const n=Cs(t,e),r=e/2+n*.25,a=n*.026;ct.update(()=>({top:r,fontSize:a}))});var Ts=Object.defineProperty,Ls=Object.prototype.hasOwnProperty,kn=Object.getOwnPropertySymbols,js=Object.prototype.propertyIsEnumerable,In=(t,e,n)=>e in t?Ts(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ft=(t,e)=>{for(var n in e||(e={}))Ls.call(e,n)&&In(t,n,e[n]);if(kn)for(var n of kn(e))js.call(e,n)&&In(t,n,e[n]);return t};const{pi2:Ds,min:Ws,trunc:Ns}=y.globals,at=J({level:1,playerAngle:0,appearance:0,x:0,y:0,w:0},t=>({level:e,playerAngle:n,appearance:r,x:a,y:s,w:i})=>{const o={position:"absolute",left:`${a}px`,top:`${s}px`,width:`${i}px`,height:`${i}px`},l=r*100,c=l/2,d=Ft(Ft({},o),{backgroundColor:"#966",clipPath:`polygon(100% 0, 50% 0, ${50-c}% ${c}%, ${100-l}% ${l}%)`}),f=Ft(Ft({},o),{color:"white",fontSize:`${i/5}px`,margin:`${i/10}px`,opacity:r}),h=Ns(n/Ds*100);return t`    <div style="${d}"></div>    <div style="${f}">Lv.${e}<br>${h}%</div>  `});N.subscribe(({width:t,height:e})=>{const n=Ws(t,e)*.7;at.update(()=>({x:(t-n*1.05)/2,y:(e-n*1.05)/2,w:n*.2}))});var Rs=Object.defineProperty,Us=Object.prototype.hasOwnProperty,Tn=Object.getOwnPropertySymbols,Fs=Object.prototype.propertyIsEnumerable,Ln=(t,e,n)=>e in t?Rs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jn=(t,e)=>{for(var n in e||(e={}))Us.call(e,n)&&Ln(t,n,e[n]);if(Tn)for(var n of Tn(e))Fs.call(e,n)&&Ln(t,n,e[n]);return t};const{min:Bs,trunc:Dn}=y.globals,zs={mode:p.normal,fpsText:"60.00",appearance:0,x:0,y:0,w:0},Wn=new Map([[p.easy,"EASY"],[p.normal,"NORMAL"],[p.hard,"HARD"]]),V=J(zs,t=>({mode:e,fpsText:n,appearance:r,x:a,y:s,w:i})=>{const o={position:"absolute",left:`${a}px`,top:`${s}px`,width:`${i}px`,height:`${i}px`},l=r*100,c=l/2,d=jn(jn({},o),{backgroundColor:"#696",clipPath:`polygon(0 0, 0 50%, ${c}% ${50+c}%, ${l}% ${l}%)`}),f={position:"absolute",bottom:`${i/10}px`,left:`${i/10}px`,color:"white",fontSize:`${i/5}px`,opacity:r};return t`    <div style="${d}"></div>    <div style="${o}">      <div style="position:relative;width:100%;height:100%">        <div style="${f}">${Wn.get(e)}<br>${n}FPS</div>      </div>    </div>  `});N.subscribe(({width:t,height:e})=>{const n=Bs(t,e)*.7;V.update(()=>({x:(t-n*1.05)/2,y:(e+n*.65)/2,w:n*.2}))}),xn.subscribe(t=>V.update(()=>{const e=Dn(t*100);return{fpsText:`${Dn(e/100)}.${(e%100).toString().padStart(2,"0")}`}}));var Hs=Object.defineProperty,qs=Object.prototype.hasOwnProperty,Nn=Object.getOwnPropertySymbols,Gs=Object.prototype.propertyIsEnumerable,Rn=(t,e,n)=>e in t?Hs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Un=(t,e)=>{for(var n in e||(e={}))qs.call(e,n)&&Rn(t,n,e[n]);if(Nn)for(var n of Nn(e))Gs.call(e,n)&&Rn(t,n,e[n]);return t};const{min:Ys}=y.globals,pt=J({deaths:0,appearance:0,x:0,y:0,w:0},t=>({deaths:e,appearance:n,x:r,y:a,w:s})=>{const i={position:"absolute",left:`${r}px`,top:`${a}px`,width:`${s}px`,height:`${s}px`},o=n*100,l=o/2,c=Un(Un({},i),{backgroundColor:"#669",clipPath:`polygon(50% 100%, ${50+l}% ${100-l}%, ${o}% ${100-o}%, 0 100%)`}),d={position:"absolute",bottom:`${s/10}px`,right:`${s/10}px`,textAlign:"right",fontSize:`${s/5}px`,color:"white",opacity:n};return t`    <div style="${c}"></div>    <div style="${i}">      <div style="position:relative;width:100%;height:100%">        <div style="${d}">${e}<br>death${e>1?"s":""}</div>      </div>    </div>  `});N.subscribe(({width:t,height:e})=>{const n=Ys(t,e)*.7;pt.update(()=>({x:(t+n*.65)/2,y:(e+n*.65)/2,w:n*.2}))});var Xs=Object.defineProperty,Zs=Object.prototype.hasOwnProperty,Fn=Object.getOwnPropertySymbols,Ks=Object.prototype.propertyIsEnumerable,Bn=(t,e,n)=>e in t?Xs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zn=(t,e)=>{for(var n in e||(e={}))Zs.call(e,n)&&Bn(t,n,e[n]);if(Fn)for(var n of Fn(e))Ks.call(e,n)&&Bn(t,n,e[n]);return t};const{min:Js}=y.globals,dt=J({name:"-",appearance:0,x:0,y:0,w:0},t=>({name:e,appearance:n,x:r,y:a,w:s})=>{const i={position:"absolute",left:`${r}px`,top:`${a}px`,width:`${s}px`,height:`${s}px`},o=n*100,l=o/2,c=zn(zn({},i),{backgroundColor:"#969",clipPath:`polygon(100% 50%, ${100-l}% ${50-l}%, ${100-o}% ${100-o}%, 100% 100%)`}),d={position:"absolute",top:`${s/10}px`,right:`${s/10}px`,textAlign:"right",fontSize:`${s/5}px`,color:"white",opacity:n};return t`    <div style="${c}"></div>    <div style="${i}">      <div style="position:relative;width:100%;height:100%">        <div style="${d}">Event<br>${e||"-"}</div>      </div>    </div>  `});N.subscribe(({width:t,height:e})=>{const n=Js(t,e)*.7;dt.update(()=>({x:(t+n*.65)/2,y:(e-n*1.05)/2,w:n*.2}))});var O={swimOrb:{},linearOrb:{},lazer:{},landolt:{}},Qs=Object.defineProperty,Vs=Object.prototype.hasOwnProperty,Hn=Object.getOwnPropertySymbols,to=Object.prototype.propertyIsEnumerable,qn=(t,e,n)=>e in t?Qs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ft=(t,e)=>{for(var n in e||(e={}))Vs.call(e,n)&&qn(t,n,e[n]);if(Hn)for(var n of Hn(e))to.call(e,n)&&qn(t,n,e[n]);return t};const{pi:eo,pi2:Gn,min:_e,cos:Bt,sin:zt}=y.globals,Ht=(t,e,n,r,a)=>{const s=t-n,i=e-r,o=a/2+3;return s*s+i*i<=o*o},Yn=(t,e,n,r,a,s)=>{t.save(),t.beginPath(),t.globalAlpha=.5,t.fillStyle=s,t.arc(n,r,a*(2-e/30),0,Gn),t.fill(),t.closePath(),t.restore()},Xn=(t,e,n,r,a,s,i)=>{t.save(),t.beginPath(),t.globalAlpha=i,t.fillStyle=a,t.strokeStyle=s,t.arc(e,n,r,0,Gn),t.fill(),t.stroke(),t.closePath(),t.restore()},R=(t,e,n,r,a=0,s="lime")=>({id:O.swimOrb,time:a,angle:t,radius:e,speed:n,width:r,color:s}),no=(t,{time:e,angle:n,radius:r,width:a,color:s})=>{const i=g+r*Bt(n),o=g+r*zt(n);if(e<=30&&Yn(t,e,i,o,a,s),e>=15){const l=_e(_e((e-15)/30,1),(300-e)/30);Xn(t,i,o,a,"white",s,l)}},ro=(t,e,n)=>{const{time:r,angle:a,radius:s,speed:i,width:o}=t,l=g+s*Bt(a),c=g+s*zt(a);return{nextEnemies:r>=300?[]:[ft(ft({},t),{angle:a+(r<45?0:i),time:r+1})],hit:r<45||r>270?!1:Ht(e,n,l,c,o)}},tt=(t,e,n,r,a,s,i,o=0)=>({id:O.linearOrb,time:o,x:t,y:e,angle:n,speed:r,width:a,fillColor:s,strokeColor:i}),Zn=(t,{time:e,x:n,y:r,width:a,fillColor:s,strokeColor:i})=>{if(e<=30&&Yn(t,e,n,r,a,i),e>=15){const o=_e((e-15)/30,1);Xn(t,n,r,a,s,i,o)}},Kn=(t,e,n)=>{const{time:r,x:a,y:s,angle:i,speed:o,width:l}=t;if(r<45)return{nextEnemies:[ft(ft({},t),{time:r+1})],hit:!1};const c=a+o*Bt(i),d=s+o*zt(i),f=c-g,h=d-g,v=m+l/2;return f*f+h*h>v*v?{nextEnemies:[],hit:!1}:{nextEnemies:[ft(ft({},t),{x:c,y:d,time:r+1})],hit:Ht(e,n,a,s,l)}},ao=(t,e,n,r,a,s=0)=>({id:O.orbToCenter,time:s,x:g+m*Bt(t),y:g+m*zt(t),angle:t+eo,speed:e,width:n,fillColor:r,strokeColor:a}),so=(t,e,n)=>{const{x:r,y:a,speed:s}=t;return Ht(g,g,r,a,s-3)?{nextEnemies:[],hit:!1}:Kn(t,e,n)};var et={none:{},rotate:{},gravity:{},swap:{},mirror:{},memorial:{}};const Jn=t=>t;var ut=({id:t,name:e,wait:n,duration:r,inputEffect:a=Jn,afterEffect:s=Jn,props:i})=>({id:t,name:e,wait:n,waitTime:0,duration:r,eventTime:0,inputEffect:a,afterEffect:s,props:i});const{infinity:oo}=y.globals;var T=()=>ut({id:et.none,name:"-",wait:oo,duration:0,props:{}}),io=Object.defineProperty,lo=Object.prototype.hasOwnProperty,Qn=Object.getOwnPropertySymbols,co=Object.prototype.propertyIsEnumerable,Vn=(t,e,n)=>e in t?io(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tr=(t,e)=>{for(var n in e||(e={}))lo.call(e,n)&&Vn(t,n,e[n]);if(Qn)for(var n of Qn(e))co.call(e,n)&&Vn(t,n,e[n]);return t};const{max:po,cos:fo,sin:uo}=y.globals,{swimOrb:Oe,linearOrb:ho,orbToCenter:go}=O,U=t=>t.flatMap(e=>e.id===Oe?[tr(tr({},e),{time:po(e.time,270)})]:[]),D=(t,e,n)=>r=>{const{id:a,angle:s,radius:i}=r;if([Oe,ho,go].includes(a)){const{x:o,y:l}=a===Oe?{x:g+i*fo(s),y:g+i*uo(s)}:r,c=o-e,d=l-n,f=60-t;return c*c+d*d<=f*f?[]:[r]}return[r]},St=(t,e)=>(n,r,a,s)=>{const{id:i,eventTime:o,duration:l}=s;return i===et.none?a===30?{nextEvt:t(n,r),nextEvtTime:a+1}:{nextEvt:s,nextEvtTime:a+1}:i!==et.none&&o<l?{nextEvt:s,nextEvtTime:a+1}:{nextEvt:T(),nextEvtTime:-e.get(n)}},vo=(t,e,n)=>(n.save(),n.resetTransform(),n.translate(g,g),n.rotate(e*t.speed),n.translate(-g,-g),n.drawImage(n.canvas,0,0),n.restore(),t);var er=(t,e)=>ut({id:et.rotate,name:"\u6D41\u8EE2",wait:300,duration:e,afterEffect:vo,props:{speed:t}});const{document:bo,min:nr,max:rr,abs:$o,cos:Se,sin:Pe}=y.globals,Ee=(t,e,n,r=0)=>({id:O.lazer,time:r,x:t,y:e,angle:n}),ar=t=>rr(P*2*((t-60)/15),0),sr=t=>rr(nr(t-75,155-t,15),1),wo=(t,e,n,r,a,s)=>{const i=t-n,o=e-r,l=i*Se(a)+o*Pe(a),c=$o(-i*Pe(a)+o*Se(a))-3;return l>=0&&l<=ar(s)&&c<=sr(s)/2},mo=({time:t,x:e,y:n,angle:r},a,s)=>({nextEnemies:t>=185?[]:[Ee(e,n,r,t+1)],hit:t>45&&t<155&&wo(a,s,e,n,r,t)}),yo=(t,e,n,r)=>{const a=1-e/30;t.save(),t.fillStyle=`rgba(255, 255, 0, ${a/2})`,t.beginPath();const s=20+a*40,i=s/2;t.fillRect(n-i,r-i,s,s),t.restore()},qt=bo.createElement("canvas");qt.width=20,qt.height=20;const C=qt.getContext("2d");C.strokeStyle="black",C.lineWidth=1,C.beginPath(),C.fillStyle="#ff0",C.moveTo(0,0),C.lineTo(8,2),C.lineTo(8,18),C.lineTo(0,20),C.closePath(),C.fill(),C.stroke(),C.fillStyle="#66f",C.fillRect(5,5,15,10),C.strokeRect(5,5,15,10),C.beginPath(),C.moveTo(10,10),C.lineTo(20,10),C.closePath(),C.stroke();const xo=(t,e,n,r)=>{t.save(),t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=1,t.beginPath(),t.moveTo(e,n),t.lineTo(e+P*2*Se(r),n+P*2*Pe(r)),t.closePath(),t.stroke(),t.restore()},_o=(t,e,n,r)=>{t.save();const a=sr(r),s=t.createLinearGradient(e,n-a,e,n+a);s.addColorStop(0,"rgba(255, 255, 0, 0)"),s.addColorStop(.25,"rgba(255, 255, 0, 1)"),s.addColorStop(.75,"rgba(255, 255, 0, 1)"),s.addColorStop(1,"rgba(255, 255, 0, 0)"),t.fillStyle=s,t.fillRect(e,n-a,ar(r),a*2),t.restore()},Oo=(t,{time:e,x:n,y:r,angle:a})=>{e>=15&&e<=60&&xo(t,n,r,a),t.save(),t.translate(n,r),t.rotate(a),t.translate(-n,-r),e<30&&yo(t,e,n,r),e>15&&(t.globalAlpha=nr((e-15)/30,(185-e)/30,1),t.drawImage(qt,n-10,r-10)),e>60&&e<155&&(t.globalAlpha=1,_o(t,n,r,e)),t.restore()};var So=Object.defineProperty,Po=Object.prototype.hasOwnProperty,or=Object.getOwnPropertySymbols,Eo=Object.prototype.propertyIsEnumerable,ir=(t,e,n)=>e in t?So(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ht=(t,e)=>{for(var n in e||(e={}))Po.call(e,n)&&ir(t,n,e[n]);if(or)for(var n of or(e))Eo.call(e,n)&&ir(t,n,e[n]);return t};const{max:Me}=y.globals,Mo=(t,e)=>{const{radius:n,time:r}=t;return r<30?t:n===0?ht(ht({},t),{time:Me(r,270)}):ht(ht({},t),{radius:Me(n-e,0)})},Ao=(t,{props:{gravity:e}})=>{const{pr:n,enemies:r}=t;return ht(ht({},t),{pr:Me(n-e,10),enemies:r.map(a=>a.id!==O.swimOrb?a:Mo(a,e))})};var Gt=(t,e)=>ut({id:et.gravity,name:"\u91CD\u529B",wait:300,duration:e,inputEffect:Ao,props:{gravity:t,lines:[]}}),Co=Object.defineProperty,ko=Object.prototype.hasOwnProperty,lr=Object.getOwnPropertySymbols,Io=Object.prototype.propertyIsEnumerable,cr=(t,e,n)=>e in t?Co(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pr=(t,e)=>{for(var n in e||(e={}))ko.call(e,n)&&cr(t,n,e[n]);if(lr)for(var n of lr(e))Io.call(e,n)&&cr(t,n,e[n]);return t};const{pi:dr,max:fr,sqrt:To,cos:ur,sin:hr}=y.globals,gr=(t,e,n,r,a,s,i,o)=>({id:O.landolt,x:t,y:e,angle:n,radius:r,angleSpeed:a,radiusSpeed:s,holeWidth:i,lineWidth:o}),Lo=(t,{x:e,y:n,angle:r,radius:a,holeWidth:s,lineWidth:i})=>{t.save(),t.beginPath();const o=fr(a-i,0),l=fr(a+i,0),c=t.createRadialGradient(e,n,o,e,n,l);c.addColorStop(0,"rgba(200, 200, 200, 0.5)"),c.addColorStop(.25,"rgba(200, 200, 200, 1)"),c.addColorStop(.75,"rgba(200, 200, 200, 1)"),c.addColorStop(1,"rgba(200, 200, 200, 0.5)"),t.strokeStyle=c,t.lineWidth=i*2,t.lineCap="round",t.arc(e,n,a,r-s/2,r+s/2,!0),t.stroke(),t.restore()},jo=(t,e,n,r)=>{const a=t-g,s=e-g;return n>To(a*a+s*s)+m+r*2},Do=(t,e,n,r,a,s,i,o)=>{const l=i-t,c=o-e,d=l*l+c*c,f=r-s/2-3,h=r+s/2+3;if(d<f*f||d>h*h)return!1;const v=n-a/2+dr/2,w=n+a/2-dr/2;return ur(v)*l+hr(v)*c<0||ur(w)*l+hr(w)*c<0},Wo=(t,e,n)=>{const{x:r,y:a,angle:s,radius:i,angleSpeed:o,radiusSpeed:l,holeWidth:c,lineWidth:d}=t;return{nextEnemies:jo(r,a,i,d)?[]:[pr(pr({},t),{angle:s+o,radius:i+l})],hit:Do(r,a,s,i,c,d,e,n)}};var No=Object.defineProperty,Ro=Object.prototype.hasOwnProperty,vr=Object.getOwnPropertySymbols,Uo=Object.prototype.propertyIsEnumerable,br=(t,e,n)=>e in t?No(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||(e={}))Ro.call(e,n)&&br(t,n,e[n]);if(vr)for(var n of vr(e))Uo.call(e,n)&&br(t,n,e[n]);return t};const{pi:Fo,sqrt:Bo,cos:$r,sin:wr,atan2:mr}=y.globals,yr={inner:!1,outer:!1,quick:!1,brake:!1},zo=(t,{eventTime:e,duration:n,props:{speed:r}})=>{if(e>=n)return{enemies:t.enemies.map($=>$.id===O.swimOrb?F(F({},$),{color:"lime"}):$)};const{inner:a,outer:s,quick:i,brake:o,enemies:l}=t,c=s-a,d=o-i;if(c===0&&d===0)return F(F({},yr),{enemies:l.map($=>$.id===O.swimOrb?F(F({},$),{color:"red"}):$)});const f=mr(d,c),h=$r(f),v=wr(f),w=r*h,b=r*v;return F(F({},yr),{enemies:l.map($=>{if($.id!==O.swimOrb)return $;const{angle:_,radius:S}=$,E=S*$r(_)+w,k=S*wr(_)+b,M=mr(k,E),I=Bo(E*E+k*k),mt=m+$.width;return F(F({},$),{angle:I>mt?M+Fo:M,radius:I>mt?mt*2-I:I,color:"red"})})})};var Yt=(t,e)=>ut({id:et.swap,name:"\u904D\u6191",wait:300,duration:e,inputEffect:zo,props:{speed:t}}),Ho=Object.defineProperty,qo=Object.prototype.hasOwnProperty,xr=Object.getOwnPropertySymbols,Go=Object.prototype.propertyIsEnumerable,_r=(t,e,n)=>e in t?Ho(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Or=(t,e)=>{for(var n in e||(e={}))qo.call(e,n)&&_r(t,n,e[n]);if(xr)for(var n of xr(e))Go.call(e,n)&&_r(t,n,e[n]);return t};const{pi:Xt,min:Yo,cos:Sr,sin:Pr,random:Xo}=y.globals,Zo=({playerInvincible:t,pa:e,pr:n,enemies:r},a)=>{const{time:s}=a.props,i=Yo(s/60,1);Ot(e-Xt,i,"cyan");const o=g+n*Sr(-e+Xt),l=g+n*Pr(-e+Xt);return(i===1&&t===0||Xo()<.5)&&Rt(o,l),{pa:i===1&&t===0&&r.some(({id:d,angle:f,radius:h,width:v})=>{if(d===O.swimOrb){const w=g+h*Sr(f),b=g+h*Pr(f);return Ht(w,b,o,l,v)}return!1})?e-Xt:e,evt:Or(Or({},a),{props:{time:s+1}}),enemies:t>0?r.flatMap(D(t,o,l)):r}};var Ae=t=>ut({id:et.mirror,name:"\u88CF\u73FE",wait:300,duration:t,inputEffect:Zo,props:{time:0}}),Ko=Object.defineProperty,Jo=Object.prototype.hasOwnProperty,Er=Object.getOwnPropertySymbols,Qo=Object.prototype.propertyIsEnumerable,Mr=(t,e,n)=>e in t?Ko(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ar=(t,e)=>{for(var n in e||(e={}))Jo.call(e,n)&&Mr(t,n,e[n]);if(Er)for(var n of Er(e))Qo.call(e,n)&&Mr(t,n,e[n]);return t};const{pi2:Vo,infinity:ti}=y.globals,ei=({deaths:t,pa:e},n)=>{const{props:{done:r,speed:a}}=n;return{pa:r?e+a:e+a-t*Vo,evt:Ar(Ar({},n),{props:{done:!0,speed:a+1e-4}})}};var ni=()=>ut({id:et.memorial,name:"\u56DE\u5411",wait:300,duration:ti,inputEffect:ei,props:{done:!1,speed:0}}),ri=Object.defineProperty,ai=Object.prototype.hasOwnProperty,Cr=Object.getOwnPropertySymbols,si=Object.prototype.propertyIsEnumerable,kr=(t,e,n)=>e in t?ri(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B=(t,e)=>{for(var n in e||(e={}))ai.call(e,n)&&kr(t,n,e[n]);if(Cr)for(var n of Cr(e))si.call(e,n)&&kr(t,n,e[n]);return t};const{pi:nt,pi2:oi,infinity:Ir,max:ii,trunc:li,cos:Ce,sin:ke,atan2:ci,random:Y}=y.globals,pi=new Map([[p.easy,40],[p.normal,20],[p.hard,10]]),di=new Map([[p.easy,()=>6+Y()*2],[p.normal,()=>6+Y()*3],[p.hard,()=>6+Y()*4]]),fi=new Map([[p.easy,()=>-.008*Y()],[p.normal,()=>-.01*Y()],[p.hard,()=>-.016*Y()]]),ui=(t,e)=>R(-e+.4+Y()*nt*1.6,Y()*m,fi.get(t)(),di.get(t)()),hi=new Map([[p.easy,.02],[p.normal,.035],[p.hard,.05]]),gi=new Map([[p.easy,500],[p.normal,350],[p.hard,250]]),vi=t=>[...Array(4)].map((e,n)=>{const r=t+n*(nt/2);return Ee(g+m*Ce(r),g+m*ke(r),r+1.125*nt)}),bi=new Map([[p.easy,1],[p.normal,1.3],[p.hard,1.7]]),$i=new Map([[p.easy,500],[p.normal,450],[p.hard,350]]),wi=new Map([[p.easy,{speed:.3,hole:nt/1.2,width:5}],[p.normal,{speed:.35,hole:nt/1.3,width:6}],[p.hard,{speed:.4,hole:nt/2,width:7}]]),mi=(t,e)=>{const{speed:n,hole:r,width:a}=wi.get(t),s=-e-nt*.7,i=g+m*.5*Ce(s),o=g+m*.5*ke(s);return gr(i,o,-e,1,.03,n,r,a)},yi=new Map([[p.easy,1],[p.normal,1.5],[p.hard,2]]),xi=new Map([[p.easy,35],[p.normal,20],[p.hard,15]]),Tr=["red","yellow","lime","cyan","blue","magenta"],_i=(t,e,n,r)=>{const a=g+m*Ce(t),s=g+m*ke(t),i=ci(n-s,e-a);return tt(a,s,i,1,6,"white",Tr[r])},Oi=new Map([[p.easy,400],[p.normal,350],[p.hard,200]]),Si=new Map([[p.easy,{width:6,speed:.08}],[p.normal,{width:7,speed:.013}],[p.hard,{width:8,speed:.017}]]),Pi=(t,e,n,r)=>{const{width:a,speed:s}=Si.get(t),i=a*3.5,o=-e-nt*.6,l=(n+(r?a:0))%i;return[...Array(li(m/i)+1)].map((c,d)=>R(o,l+d*i,s,a,0,"gray"))},Ei=new Map([[p.easy,150],[p.normal,100],[p.hard,80]]),Mi=new Map([[p.easy,{speed:.8,length:8}],[p.normal,{speed:.9,length:12}],[p.hard,{speed:1,length:16}]]),Ai=(t,e)=>{const{speed:n,length:r}=Mi.get(t),a=oi/r;return[...Array(r)].map((s,i)=>tt(g,g,e+i*a,n,6,"white","blue"))},Ci=St((t,e)=>e===1?B(B({},er((Y()<.5?-1:1)*hi.get(t),Ir)),{wait:120}):e===3?B(B({},Gt(bi.get(t),Ir)),{wait:120}):e===5?B(B({},Yt(yi.get(t),t===p.hard?30:60)),{wait:60}):e===9?ni():T(),new Map([[p.easy,0],[p.normal,0],[p.hard,0]])),ki=(t,e)=>t===6?e.map(n=>n.id===O.swimOrb?B(B({},n),{color:"lime"}):n):t===5?e.filter(({id:n})=>n!==O.landolt):t===8?e.map(n=>n.id===O.lazer?B(B({},n),{time:ii(n.time,155)}):n):t===9?U(e):e,Ie=(t=30,e=0,n=0,r=0,a=0,s=0,i=0,o=0,l=!1,c=0,d=0)=>(f,h,v,{enemies:w,px:b,py:$,pa:_,pr:S,playerInvincible:E,evt:k})=>{const M=(h-1)%10,I=e>=pi.get(f),mt=M>=2&&M<=7&&n>=gi.get(f),da=M===4&&r>=$i.get(f),te=M>=6&&a>=xi.get(f),ze=M>=7&&o>=Oi.get(f),He=M>=8&&c>=Ei.get(f),zc=M===9?[]:[I?[ui(f,_)]:[],mt?vi(-_):[],da?[mi(f,_)]:[],te?[_i(s,b,$,i)]:[],ze?Pi(f,_,S,l):[],He?Ai(f,d):[]].flat(),fa=(E>0?w.flatMap(D(E,b,$)):w).concat(zc),{nextEvt:Hc,nextEvtTime:qc}=M%2?Ci(f,M,t,k):{nextEvt:T(),nextEvtTime:30};return{enemies:v?ki(M,fa):fa,nextStage:Ie(qc,I?0:e+1,mt?0:n+1,da?0:r+1,te?0:a+1,te?s+.5:s,te?(i+1)%Tr.length:i,ze?0:o+1,ze?!l:l,He?0:c+1,He?d:d-.3),evt:Hc}},{pi:Lr,pi2:Ii,trunc:jr}=y.globals,Ti=new Map([[p.easy,t=>200-t*10],[p.normal,t=>160-t*10],[p.hard,t=>120-t*8]]),Dr=new Map([[p.easy,t=>({length:6+jr(t/2),width:6,speed:1})],[p.normal,t=>({length:7+t,width:6,speed:1})],[p.hard,t=>({length:10+jr(t/2),width:7,speed:1.5})]]),Wr=(t,e,n,r)=>{const{length:a,width:s,speed:i}=Dr.get(t)(e),o=r?"blue":"magenta";return[...Array(a)].map((l,c)=>{const d=n+Ii*(c/a)+(r?0:Lr/a);return r?tt(g,g,d,i,s,"white",o):ao(d,i,s,"white",o)})},Te=(t=0,e=0)=>(n,r,a,{enemies:s,px:i,py:o,pa:l,pr:c,playerInvincible:d})=>{const f=(r-1)%10,h=Ti.get(n)(f),v=[d>0?s.flatMap(D(d,i,o)):s,t===h/2?Wr(n,f,e,!0):[],t>=h&&(n!==p.hard||f>=5)?Wr(n,f,e,!1):[],n===p.hard&&t>=h?[R(-l-.63,c,.01,6)]:[]].flat();return a&&r%10==1?{enemies:U(v),nextStage:Ie(),evt:T()}:{enemies:v,nextStage:Te(t>=h?0:t+1,t>=h?e+Lr/Dr.get(n)(f).length*1.2:e),evt:T()}},{pi:Li,random:ji}=y.globals,Di=new Map([[p.easy,t=>200-t*20],[p.normal,t=>175-t*20],[p.hard,t=>160-t*18]]),Wi=new Map([[p.easy,t=>({length:5,width:8,speed:.01+t*.0015})],[p.normal,t=>({length:5,width:9,speed:.013+t*.002})],[p.hard,t=>({length:7,width:8.3,speed:.016+t*.0026})]]),Ni=(t,e,n,r)=>{const a=-n+(r?1:-1)*Li*(.3+.4*ji()),{length:s,width:i,speed:o}=Wi.get(t)(e),l=(r?-1:1)*o;return[...Array(s+1-r)].map((c,d)=>R(a,m*((d+r*.5)/s),l,i))},Ri=new Map([[p.easy,t=>Ae(200+t*10)],[p.normal,t=>Ae(250+t*25)],[p.hard,t=>Ae(300+t*25)]]),Ui=new Map([[p.easy,200],[p.normal,100],[p.hard,0]]),Fi=St((t,e)=>Ri.get(t)(e),Ui),Le=(t=130,e=0,n=0)=>(r,a,s,{enemies:i,evt:o,px:l,py:c,pa:d,playerInvincible:f})=>{const h=(a-1)%10,v=t>=Di.get(r)(h%5),w=[f>0?i.flatMap(D(f,l,c)):i,v?Ni(r,h%5,d,e):[]].flat(),{nextEvt:b,nextEvtTime:$}=h<5?{nextEvt:o,nextEvtTime:n}:Fi(r,h,n,o);return s&&a%10==1?{enemies:U(w),nextStage:Te(),evt:T()}:{enemies:w,nextStage:Le(v?0:t+1,v?1-e:e,$),evt:b}},{pi:Bi,cos:zi,sin:Hi,atan2:qi}=y.globals,Gi=new Map([[p.easy,t=>30-t],[p.normal,t=>20-t],[p.hard,t=>15-t]]),Yi=new Map([[p.easy,6],[p.normal,5],[p.hard,6]]),Nr=["red","yellow","lime","cyan","blue","magenta"],Xi=(t,e,n,r,a,s)=>{const i=g+m*zi(r),o=g+m*Hi(r),l=qi(n-o,e-i);return t<5?[tt(i,o,l,1,a,"white",s)]:[tt(i,o,l,1,a,"white",s),tt(g*2-i,g*2-o,l+Bi,1,a,"white",s)]},je=(t=0,e=0,n=0)=>(r,a,s,{enemies:i,px:o,py:l,playerInvincible:c,evt:d})=>{const f=(a-1)%10,h=t>=Gi.get(r)(f%5),v=[c>0?i.flatMap(D(c,o,l)):i,h?Xi(f,o,l,e,Yi.get(r),Nr[n]):[]].flat();return s&&a%10==1?{enemies:U(v),nextStage:Le(),evt:T()}:{enemies:v,nextStage:je(h?0:t+1,e+.02,h?(n+1)%Nr.length:n),evt:d}},{pi:Rr,random:rt}=y.globals,Zi=new Map([[p.easy,t=>30-t*2],[p.normal,t=>25-t*2],[p.hard,t=>15-t]]),Ki=new Map([[p.easy,()=>-.008+.016*rt()],[p.normal,()=>-.01+.02*rt()],[p.hard,()=>-.016+.032*rt()]]),Ji=new Map([[p.easy,()=>6+rt()*3],[p.normal,()=>7+rt()*4],[p.hard,()=>8+rt()*5]]),Qi=new Map([[p.easy,t=>Yt(1,150+t*10)],[p.normal,t=>Yt(1.5,200+t*20)],[p.hard,t=>Yt(2,250+t*30)]]),Vi=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),tl=St((t,e)=>Qi.get(t)(e),Vi),De=(t=0,e=0)=>(n,r,a,{enemies:s,evt:i,px:o,py:l,pa:c,playerInvincible:d})=>{const f=(r-1)%10,h=t>=Zi.get(n)(f),v=[d>0?s.flatMap(D(d,o,l)):s,h?[R(-c+Rr*.2+rt()*Rr*1.6,m*rt(),Ki.get(n)(),Ji.get(n)())]:[]].flat(),{nextEvt:w,nextEvtTime:b}=tl(n,f,e,i);return a&&r%10==1?{enemies:U(v),nextStage:je(),evt:T()}:{enemies:v,nextStage:De(h?0:t+1,b),evt:w}},{pi:Pt,pi2:el,cos:nl,sin:rl,random:z}=y.globals,al=new Map([[p.easy,t=>60-t*3],[p.normal,t=>54-t*4],[p.hard,t=>26-t*2]]),sl=new Map([[p.easy,()=>-.008*z()],[p.normal,()=>-.01*z()],[p.hard,()=>-.01*z()]]),ol=new Map([[p.easy,()=>6+z()*2],[p.normal,()=>6+z()*3],[p.hard,()=>6+z()*4]]),il=new Map([[p.easy,t=>500-t*20],[p.normal,t=>300-t*30],[p.hard,t=>250-t*30]]),ll=new Map([[p.easy,{speed:.4,hole:Pt/1.3,width:5}],[p.normal,{speed:.5,hole:Pt/1.5,width:6}],[p.hard,{speed:.6,hole:Pt/2.3,width:7}]]),cl=(t,e,n)=>{const{speed:r,hole:a,width:s}=ll.get(t),i=g+(e<=45?0:m/2*nl(n)),o=g+(e<=45?0:m/2*rl(n));return gr(i,o,z()*el,1,z()<.5?.03:-.03,r,a,s)},We=(t=0,e=100)=>(n,r,a,{enemies:s,pa:i,px:o,py:l,playerInvincible:c})=>{const d=t>=al.get(n)(r-40),f=e>=il.get(n)((r-1)%5),h=[c>0?s.flatMap(D(c,o,l)):s,d?[R(-i+.4+z()*Pt*1.6,m*z(),sl.get(n)(),ol.get(n)())]:[],f?[cl(n,r,Pt-i)]:[]].flat();return a&&r%10==1?{enemies:U(h),nextStage:De(),evt:T()}:{enemies:h,nextStage:We(d?0:t+1,f?0:e+1),evt:T()}},{pi:pl,pi2:Ur,min:dl,random:X}=y.globals,fl=new Map([[p.easy,t=>28-t*2],[p.normal,t=>25-t*2],[p.hard,t=>15-t]]),ul=new Map([[p.easy,()=>-.008*X()],[p.normal,()=>-.01*X()],[p.hard,()=>-.018*X()]]),hl=new Map([[p.easy,()=>6+X()*2],[p.normal,()=>6+X()*3],[p.hard,()=>6+X()*4]]),gl=new Map([[p.easy,t=>Gt(.5+t*.05,200)],[p.normal,t=>Gt(.5+t*.08,200)],[p.hard,t=>Gt(.5+t*.12,200)]]),vl=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),bl=St((t,e)=>gl.get(t)(e),vl),Ne=(t=0,e=0,n=0)=>(r,a,s,{enemies:i,evt:o,px:l,py:c,pa:d,playerInvincible:f})=>{const h=(a-1)%10,v=t>=fl.get(r)(h),w=r!==p.easy&&h>5&&e>=250-h*10,b=[f>0?i.flatMap(D(f,l,c)):i,v?[R(-d+.4+X()*pl*1.6,m*dl(.7+X()*.4,1),ul.get(r)(),hl.get(r)())]:[],w?new Array(10).fill(X()*Ur).map((S,E)=>tt(g,g,E/10*Ur+S,2,7,"white","blue")):[]].flat(),{nextEvt:$,nextEvtTime:_}=bl(r,h,n,o);return s&&a%10==1?{enemies:U(b),nextStage:We(),evt:T()}:{enemies:b,nextStage:Ne(v?0:t+1,w?0:e+1,_),evt:$}},{pi:gt,cos:$l,sin:wl,random:W}=y.globals,ml=new Map([[p.easy,t=>30-t*2],[p.normal,t=>27-t*2],[p.hard,t=>14-t]]),yl=new Map([[p.easy,()=>-.008*W()],[p.normal,()=>-.01*W()],[p.hard,()=>-.01*W()]]),xl=new Map([[p.easy,()=>6+W()*2],[p.normal,()=>6+W()*3],[p.hard,()=>6+W()*4]]),_l=new Map([[p.easy,{wait:t=>300-t*10,radius:.7,angle:t=>t+gt*(.9+W()*.2)}],[p.normal,{wait:t=>200-t*10,radius:.8,angle:t=>t+gt*(.9+W()*.2)}],[p.hard,{wait:t=>150-t*10,radius:.95,angle:t=>t+gt*(.8+W()*.4)}]]),Re=(t=0,e=0,n=gt/3)=>(r,a,s,{enemies:i,px:o,py:l,pa:c,playerInvincible:d})=>{const f=t>=ml.get(r)(a-20),{wait:h,radius:v,angle:w}=_l.get(r),b=e>=h(a-20),$=[d>0?i.flatMap(D(d,o,l)):i,f?[R(-c+.4+W()*gt*1.6,W()*m,yl.get(r)(),xl.get(r)())]:[],b?[Ee(g+v*m*$l(n),g+v*m*wl(n),w(n))]:[]].flat();return s&&a%10==1?{enemies:U($),evt:T(),nextStage:Ne()}:{enemies:$,evt:T(),nextStage:Re(f?0:t+1,b?0:e+1,b?n+gt/3:n)}},{pi:Ol,pi2:Sl,random:Z}=y.globals,Pl=new Map([[p.easy,t=>28-t*2],[p.normal,t=>25-t*2],[p.hard,t=>12-t]]),El=new Map([[p.easy,()=>-.008*Z()],[p.normal,()=>-.01*Z()],[p.hard,()=>-.02*Z()]]),Ml=new Map([[p.easy,()=>6+Z()*2],[p.normal,()=>6+Z()*3],[p.hard,()=>6+Z()*4]]),Al=new Map([[p.easy,t=>({speed:.02,rotateCount:t>5?2:1})],[p.normal,t=>({speed:.02,rotateCount:t>5?3:2})],[p.hard,t=>({speed:.05,rotateCount:t>5?4:2})]]),Cl=new Map([[p.easy,600],[p.normal,300],[p.hard,0]]),kl=St((t,e)=>{const{speed:n,rotateCount:r}=Al.get(t)(e);return er((Z()<.5?-1:1)*n,Sl/n*r)},Cl),Ue=(t=0,e=0)=>(n,r,a,{enemies:s,evt:i,px:o,py:l,pa:c,playerInvincible:d})=>{const f=(r-1)%10,h=t>=Pl.get(n)(f),v=[d>0?s.flatMap(D(d,o,l)):s,h?[R(-c+.4+Z()*Ol*1.6,Z()*m,El.get(n)(),Ml.get(n)())]:[]].flat(),{nextEvt:w,nextEvtTime:b}=kl(n,f,e,i);return a&&r%10==1?{enemies:U(v),nextStage:Re(),evt:T()}:{enemies:v,nextStage:Ue(h?0:t+1,b),evt:w}},{pi:Il,pi2:Tl,random:L}=y.globals,Fr=new Map([[p.easy,()=>6+L()*2],[p.normal,()=>6+L()*3],[p.hard,()=>6+L()*4]]),Ll=new Map([[p.easy,t=>30-t*2],[p.normal,t=>27-t*2],[p.hard,t=>13-t]]),jl=new Map([[p.easy,()=>-.008*L()],[p.normal,()=>-.01*L()],[p.hard,()=>-.016*L()]]),Dl=new Map([[p.easy,()=>!1],[p.normal,(t,e)=>t>5&&e>=30-t*2],[p.hard,(t,e)=>t>5&&e>=27-t*2]]),Wl=new Map([[p.easy,()=>.5+L()*.5],[p.normal,()=>.7+L()*.6],[p.hard,()=>1+L()]]),Et=(t=0,e=0)=>(n,r,a,s)=>{const{enemies:i,evt:o,px:l,py:c,pa:d,playerInvincible:f}=s,h=t>=Ll.get(n)(r),v=Dl.get(n)(r,e),w=[f>0?i.flatMap(D(f,l,c)):i,h?[R(-d+.4+L()*Il*1.6,L()*m,jl.get(n)(),Fr.get(n)())]:[],v?[tt(g+(2*L()-1)*20,g+(2*L()-1)*20,L()*Tl,Wl.get(n)(),Fr.get(n)(),"white","blue")]:[]].flat();return a&&r%10==1?{enemies:U(w),nextStage:Ue(),evt:o}:{enemies:w,nextStage:Et(h?0:t+1,v?0:e+1),evt:o}};var Zt=()=>({level:1,mode:p.normal,practice:!1,stage:Et(),evt:T(),playerAngle:0,playerRadius:m/2,playerInvincible:0,deaths:0,frames:0,enemies:[]}),Nl=Object.defineProperty,Rl=Object.prototype.hasOwnProperty,Br=Object.getOwnPropertySymbols,Ul=Object.prototype.propertyIsEnumerable,zr=(t,e,n)=>e in t?Nl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hr=(t,e)=>{for(var n in e||(e={}))Rl.call(e,n)&&zr(t,n,e[n]);if(Br)for(var n of Br(e))Ul.call(e,n)&&zr(t,n,e[n]);return t};const{min:qr,max:Fl,round:Gr,random:Yr}=y.globals,Bl=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${P/4}px serif`,u.textAlign="center",u.fillText("\u8F2A\u5EFB",g,g-P/10),u.closePath(),u.restore()},zl=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${P/10}px serif`,u.textAlign="center",u.fillText("\u2212\u56DE\u5411\u2212",g,g+P/30),u.closePath(),u.restore()};var Xr=(t=0)=>({mode:e,level:n,practice:r})=>{t===0&&(at.update(()=>({appearance:0,playerAngle:0})),V.update(()=>({appearance:0})),pt.update(()=>({appearance:0,deaths:0})),dt.update(()=>({appearance:0,name:"-"}))),Nt(),Bl(qr(t/60,(165-t)/60,1));const a=Fl(qr((t-75)/30,(165-t)/60,1),0);if(zl(a),me.update(()=>({startOpacity:(t>105&&!r?Gr(Yr()):1)*a,practiceOpacity:(t>105&&r?Gr(Yr()):1)*a})),ct.update(()=>({opacity:t>105&&r?1:a})),t===105){const[s,i]=Mn().reduce(([o,l],{id:c,param:d})=>c===G.mode?[d,l]:[G.start,G.practice].includes(c)?[o,c]:[o,l],[e,null]);return we(),ct.update(()=>({mode:s})),{nextId:x.title,nextArgs:[i===null?105:106],stateUpdate:{mode:s,practice:i===G.practice}}}return we(),t===165?{nextId:r?x.practice:x.start,nextArgs:[],stateUpdate:{level:r?1:n,stage:Et()}}:{nextId:x.title,nextArgs:[t+1],stateUpdate:t===0?Hr(Hr({},Zt()),{mode:e}):{}}};const{pi2:Hl,min:vt,max:Fe,trunc:ql}=y.globals,Gl=t=>{u.save(),u.beginPath();const e=1-vt(Fe((t%60-15)/30,0),1);u.fillStyle=`rgba(255, 255, 255, ${e})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${m/3}px serif`,u.textAlign="center",u.fillText(3-ql(t/60),g,m/2),u.restore()};var Yl=(t=0)=>({level:e,mode:n})=>{t===0&&(at.update(()=>({level:e})),V.update(()=>({mode:n})));const r=vt(t/30,1);return at.update(()=>({appearance:r})),V.update(()=>({appearance:r})),pt.update(()=>({appearance:r})),dt.update(()=>({appearance:r,name:"-"})),Nt(),he(),ge(vt(t/30,1)),Ot(0,vt(Fe((t-60)/30,0),1)),u.globalAlpha=vt(Fe((t-30)/30,0),1),Rt(g+m/2,g),u.globalAlpha=vt(t/30,1),Ut(),u.globalAlpha=1,t<180&&Gl(t),ve(-(t/160)*Hl),t<180?{nextId:x.start,nextArgs:[t+1],stateUpdate:{}}:{nextId:x.main,nextArgs:[],stateUpdate:{frames:0}}};const{min:Xl}=y.globals,Zl={opacity:0,top:0,fontSize:0,selected:null},H=t=>()=>$e(G.stage,t),Kl=(t,e)=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"20%",transform:"translate(-50%, 0)",textAlign:"center",fontSize:`${e*1.7}px`,fontFamily:"serif",color:"white",opacity:t}),Jl=t=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:t}),q=(t,e)=>({outline:"none",border:`2px solid ${t?"white":"transparent"}`,margin:`${e/4}px 0 ${e/2}px`,width:`${e*7}px`,fontSize:`${e}px`,color:"white",backgroundColor:"transparent"}),Kt=J(Zl,t=>({opacity:e,fontSize:n,selected:r})=>t`  <div style=${Kl(e,n)}>Select Level</div>  <div style=${Jl(e)}>    <button style=${q(r===1,n)} onClick=${H(1)}>Lv.1~10</button>    <button style=${q(r===2,n)} onClick=${H(2)}>Lv.11~20</button><br>    <button style=${q(r===3,n)} onClick=${H(3)}>Lv.21~30</button>    <button style=${q(r===4,n)} onClick=${H(4)}>Lv.31~40</button><br>    <button style=${q(r===5,n)} onClick=${H(5)}>Lv.41~50</button>    <button style=${q(r===6,n)} onClick=${H(6)}>Lv.51~60</button><br>    <button style=${q(r===7,n)} onClick=${H(7)}>Lv.61~70</button>    <button style=${q(r===8,n)} onClick=${H(8)}>Lv.71~80</button><br>    <button style=${q(r===9,n)} onClick=${H(9)}>Lv.81~90</button>    <button style=${q(r===10,n)} onClick=${H(10)}>Lv.91~100</button>  </div>`);N.subscribe(({width:t,height:e})=>{const r=Xl(t,e)*.03;Kt.update(()=>({fontSize:r}))});const{window:bt}=y.globals,j={};bt.addEventListener("keydown",({key:t})=>{j[t]=!0}),bt.addEventListener("keyup",({key:t})=>{j[t]=!1});let Zr=[];const Jt=t=>{Zr=[...t.touches]};bt.addEventListener("touchstart",Jt),bt.addEventListener("touchmove",Jt),bt.addEventListener("touchend",Jt),bt.addEventListener("touchcancel",Jt);const Ql=(t,e,n)=>{const r=n/e;return t.reduce((a,{clientX:s,clientY:i})=>{const o=s*r<i,l=i<n-s*r;return{left:a.left||o&&l,right:a.right||!o&&!l,up:a.up||!o&&l,down:a.down||o&&!l}},{})};let Kr=0,Jr=0;N.subscribe(({width:t,height:e})=>{Kr=t,Jr=e});var Be=()=>{const t=Ql(Zr,Kr,Jr);return{inner:j.a||j.ArrowLeft||t.left||!1,outer:j.d||j.ArrowRight||t.right||!1,quick:j.w||j.ArrowUp||t.up||!1,brake:j.s||j.ArrowDown||t.down||!1,pause:j.p||!1,escape:j.Escape||!1}};const{min:Qr}=y.globals,Vl=[Et,Ue,Re,Ne,We,De,je,Le,Te,Ie];var tc=(t=0,e=null)=>({mode:n})=>{if(Kt.update(()=>({selected:e,opacity:Qr(t/30,(60-t)/30)})),ct.update(()=>({mode:n,opacity:Qr((60-t)/30,1)})),t===30){if(Be().escape)return Kt.update(()=>({opacity:0})),ct.update(()=>({opacity:0})),{nextId:x.title,nextArgs:[],stateUpdate:{}};const[r,a]=Mn().reduce(([s,i],{id:o,param:l})=>o===G.mode?[l,i]:[s,l],[n,null]);return{nextId:x.practice,nextArgs:[a===null?30:31,a],stateUpdate:{mode:r,level:a&&(a-1)*10+1,stage:(Vl[a-1]||Et)()}}}return we(),t<60?{nextId:x.practice,nextArgs:[t+1,e],stateUpdate:{}}:{nextId:x.start,nextArgs:[],stateUpdate:{}}};const ec=new Map([[O.swimOrb,ro],[O.linearOrb,Kn],[O.orbToCenter,so],[O.lazer,mo],[O.landolt,Wo]]),Vr=new Map([[O.swimOrb,no],[O.linearOrb,Zn],[O.orbToCenter,Zn],[O.lazer,Oo],[O.landolt,Lo]]);var nc=Object.defineProperty,ta=Object.prototype.hasOwnProperty,Qt=Object.getOwnPropertySymbols,ea=Object.prototype.propertyIsEnumerable,na=(t,e,n)=>e in t?nc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$t=(t,e)=>{for(var n in e||(e={}))ta.call(e,n)&&na(t,n,e[n]);if(Qt)for(var n of Qt(e))ea.call(e,n)&&na(t,n,e[n]);return t},rc=(t,e)=>{var n={};for(var r in t)ta.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Qt)for(var r of Qt(t))e.indexOf(r)<0&&ea.call(t,r)&&(n[r]=t[r]);return n};const{pi2:ra,cos:ac,sin:sc,min:oc,max:aa,random:ic}=y.globals,lc=()=>({state:Be()}),cc=({escape:t,mode:e})=>({returns:t?{nextId:x.title,nextArgs:[],stateUpdate:$t($t({},Zt()),{mode:e})}:!1}),pc=({pause:t,pauseTime:e})=>({returns:t&&e>10?{nextId:x.pause,nextArgs:[0],stateUpdate:{}}:!1}),dc=t=>{var e=t,{evt:n}=e,r=rc(e,["evt"]);return n.waitTime>=n.wait?{state:n.inputEffect(r,n)}:{}},fc=({inner:t,outer:e,quick:n,brake:r,pa:a,pr:s})=>({state:{pa:a+.007+(n-r)*.005,pr:oc(aa(s+(e-t)*2,10),m-10)}}),uc=()=>(he(),ge(),ve(),{}),sa=({pa:t,pr:e})=>({state:{px:g+e*ac(-t),py:g+e*sc(-t)}}),hc=({practice:t,pa:e,pr:n,level:r,deaths:a,frames:s})=>{const i=e>=ra,o=r+(i?1:0);if(t&&i&&o%10==1)return{returns:{nextId:x.title,nextArgs:[],stateUpdate:{}}};if(r===101){if(a>=100)return{returns:{nextId:x.title,nextArgs:[],stateUpdate:{}}};Ot(e);const{state:{px:l,py:c}}=sa({pa:e,pr:n});return Rt(l,c),Ut(),{returns:{nextId:x.over,nextArgs:[],stateUpdate:{frames:s+1}}}}return{state:{pa:i?e%ra:e,level:o,levelUp:i}}},gc=({playerInvincible:t,pa:e,px:n,py:r})=>(Ot(e),(t===0||ic()<.5)&&Rt(n,r),{}),vc=({mode:t,level:e,levelUp:n,stage:r,pa:a,pr:s,px:i,py:o,playerInvincible:l,enemies:c,evt:d})=>{const f=r(t,e,n,{px:i,py:o,pa:a,pr:s,playerInvincible:l,enemies:c,evt:d});return{state:{stage:f.nextStage,evt:f.evt,enemies:f.enemies}}},bc=({enemies:t,px:e,py:n})=>{const r=t.reduce((a,s)=>{const{id:i}=s,{nextEnemies:o,hit:l}=ec.get(i)(s,e,n);return Vr.get(i)(u,s),{nextEnemies:a.nextEnemies.concat(o),hit:a.hit||l}},{nextEnemies:[],hit:!1});return{state:{enemies:r.nextEnemies,hit:r.hit}}},$c=({evt:t})=>{const{eventTime:e,duration:n,waitTime:r,wait:a,afterEffect:s,props:i}=t,o=r>=a;return En(o?1-e/n:r/a),{state:{evt:$t($t({},t),{waitTime:r+1,eventTime:o?e+1:0,props:o?s(i,e,u):i})}}},wc=({mode:t,level:e,pa:n,evt:r})=>(at.update(()=>({level:e,playerAngle:n})),V.update(()=>({mode:t})),dt.update(()=>({name:r.name})),Ut(),{}),mc=({pa:t,pr:e})=>({state:{playerAngle:t,playerRadius:e}}),yc=t=>{const{level:e,mode:n,practice:r,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:l,deaths:c,frames:d,enemies:f,hit:h}=t;return h&&l===0?(pt.update(()=>({deaths:c+1})),{returns:{nextId:x.death,nextArgs:[],stateUpdate:{level:e,mode:n,practice:r,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:l,deaths:c+1,frames:d+1,enemies:f}}}):{}},xc=({pauseTime:t,level:e,mode:n,practice:r,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:l,deaths:c,frames:d,enemies:f})=>({returns:{nextId:x.main,nextArgs:[t+1],stateUpdate:{level:e,mode:n,practice:r,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:aa(l-1,0),deaths:c,frames:d+1,enemies:f}}});var _c=(t=0)=>e=>[lc,cc,pc,uc,dc,fc,hc,sa,gc,vc,bc,$c,wc,mc,yc,xc].reduce((n,r,a,s)=>{const{state:i,returns:o}=r(n);return o?(s.splice(a),o):Object.assign(n,i)},$t($t({},e),{pauseTime:t,pa:e.playerAngle,pr:e.playerRadius})),Oc=Object.defineProperty,Sc=Object.prototype.hasOwnProperty,oa=Object.getOwnPropertySymbols,Pc=Object.prototype.propertyIsEnumerable,ia=(t,e,n)=>e in t?Oc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,la=(t,e)=>{for(var n in e||(e={}))Sc.call(e,n)&&ia(t,n,e[n]);if(oa)for(var n of oa(e))Pc.call(e,n)&&ia(t,n,e[n]);return t},Ec=t=>({mode:e})=>{const{escape:n,pause:r}=Be();return n?{nextId:x.title,nextArgs:[],stateUpdate:la(la({},Zt()),{mode:e})}:t>10&&r?{nextId:x.main,nextArgs:[0],stateUpdate:{}}:{nextId:x.pause,nextArgs:[t+1],stateUpdate:{}}};const{pi2:ca,cos:Mc,sin:Ac}=y.globals,Cc=(t,e,n)=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 0, 0, ${1-n/90})`,u.arc(t,e,20+n/4.5,0,ca),u.fill(),u.closePath(),u.restore()},kc=(t,e,n)=>{u.save(),u.beginPath();const r=u.createRadialGradient(t,e,0,t,e,m*2);r.addColorStop(0,"rgba(255, 0, 0, 0)"),r.addColorStop(.05,"rgba(255, 0, 0, 0)"),r.addColorStop(.3+.7*(n/90),"rgba(255, 0, 0, 0.5)"),u.fillStyle=r,u.arc(t,e,m*2,0,ca),u.fill(),u.closePath(),u.restore()};var Ic=(t=0)=>({playerAngle:e,playerRadius:n,enemies:r,evt:{wait:a,waitTime:s,eventTime:i,duration:o,afterEffect:l,props:c}})=>{Nt(),he(),ge(),Ot(e);const d=g+n*Mc(-e),f=g+n*Ac(-e);return Cc(d,f,t),r.forEach(h=>Vr.get(h.id)(u,h)),Ut(),ve(),En(s>=a?1-i/o:s/a),kc(d,f,t),l(c,i,u),t<90?{nextId:x.death,nextArgs:[t+1],stateUpdate:{}}:{nextId:x.main,nextArgs:[],stateUpdate:{playerInvincible:60,playerAngle:0,playerRadius:m/2}}};const{pi2:Tc,min:Vt,trunc:wt}=y.globals,Lc=t=>{u.save(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.arc(g,g,m,0,Tc),u.restore()},jc=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${t})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${P/4}px serif`,u.textAlign="center",u.fillText("\u89E3\u8131",g,g-P/8),u.closePath(),u.restore()},Dc=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${t})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${P/10}px serif`,u.textAlign="center",u.fillText("GAME OVER",g,g),u.closePath(),u.restore()},Wc=t=>{const e=t/60,n=wt(e/60).toString().padStart(2,"0"),r=(wt(e)%60).toString().padStart(2,"0"),a=wt((e-wt(e))*1e3).toString().padStart(3,"0");return`${n}:${r}.${a}`},Nc=(t,e,n,r)=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${r})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${P/20}px serif`,u.textAlign="center",u.fillText(`Mode: ${Wn.get(t)}`,g,g+P*.1),u.fillText(`Death${e>=2?"s":""}: ${e}`,g,g+P*.2),u.fillText(`Time: ${n}`,g,g+P*.3)};var Rc=(t=0,e=null)=>({mode:n,deaths:r,frames:a})=>{if(t>690)return{nextId:x.over,nextArgs:[t,e],stateUpdate:{}};if(t<=120){const s=1-t/120;at.update(()=>({appearance:s,level:100})),V.update(()=>({appearance:s})),pt.update(()=>({appearance:s})),dt.update(()=>({appearance:s})),Wt.update(()=>({opacity:s}))}if(t>=120&&t<=420){const s=wt((t-120)*(255/300)),i=wt((s+102)/2),o=`rgb(${s}, ${s}, ${s})`,l=`rgb(${i}, ${i}, ${i})`;document.body.style.backgroundImage=`radial-gradient(circle closest-side, ${o} 60%, ${l} 100%, #666 200%)`}return t===420&&Wt.update(()=>({opacity:1})),t>=420&&(Nt(),Lc(Vt((t-420)/120,1))),t>=420&&jc(Vt((t-420)/120,1)),t>=570&&Dc(Vt((t-570)/60,1)),t>=630&&Nc(n,r,e,Vt((t-630)/60,1)),{nextId:x.over,nextArgs:[t+1,e||Wc(a)],stateUpdate:{}}};const{now:Uc}=y.globals,Fc=new Map([[x.title,Xr],[x.start,Yl],[x.practice,tc],[x.main,_c],[x.pause,Ec],[x.death,Ic],[x.over,Rc]]),pa=(t,e)=>()=>{bs(Uc());const{nextId:n,nextArgs:r,stateUpdate:a}=t(e);return pa(Fc.get(n)(...r),Object.assign(e,a))},{bind:Bc}=y.hyperhtml;Bc(document.body)`  ${Wt.render()}  ${at.render()}  ${V.render()}  ${pt.render()}  ${dt.render()}  ${me.render()}  ${Kt.render()}  ${ct.render()}`,vs(pa(Xr(),Zt()))})();
