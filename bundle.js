!function(){"use strict";
/*! (c) Andrea Giammarchi - ISC */var e={};try{e.WeakMap=WeakMap}catch(t){e.WeakMap=function(e,t){var n=t.defineProperty,r=t.hasOwnProperty,i=a.prototype;return i.delete=function(e){return this.has(e)&&delete e[this._]},i.get=function(e){return this.has(e)?e[this._]:void 0},i.has=function(e){return r.call(e,this._)},i.set=function(e,t){return n(e,this._,{configurable:!0,value:t}),this},a;function a(t){n(this,"_",{value:"_@ungap/weakmap"+e++}),t&&t.forEach(o,this)}function o(e){this.set(e[0],e[1])}}(Math.random(),Object)}var t,n=e.WeakMap,r="-"+Math.random().toFixed(6)+"%",i=!1;
/*! (c) Andrea Giammarchi - ISC */try{"content"in(t=document.createElement("template"))&&(t.innerHTML='<p tabindex="'+r+'"></p>',t.content.childNodes[0].getAttribute("tabindex")==r)||(r="_dt: "+r.slice(1,-1)+";",i=!0)}catch(e){}var a="\x3c!--"+r+"--\x3e",o=/^(?:style|textarea)$/i,s=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;
/*! (c) Andrea Giammarchi - ISC */
function l(e){return e.join(a).replace(g,y).replace(f,m)}var c=" \\f\\n\\r\\t",u="[^"+c+"\\/>\"'=]+",d="["+c+"]+"+u,h="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",p="(?:\\s*=\\s*(?:'[^']*?'|\"[^\"]*?\"|<[^>]*?>|"+u.replace("\\/","")+"))?)",f=new RegExp(h+d+p+"+)(["+c+"]*/?>)","g"),g=new RegExp(h+d+p+"*)(["+c+"]*/>)","g"),v=new RegExp("("+d+"\\s*=\\s*)(['\"]?)"+a+"\\2","gi");function m(e,t,n,r){return"<"+t+n.replace(v,b)+r}function b(e,t,n){return t+(n||'"')+r+(n||'"')}function y(e,t,n){return s.test(t)?e:"<"+t+n+"></"+t+">"}const{isArray:w}=Array,{indexOf:x,slice:k}=[];var N=e=>({get:t=>e.get(t),set:(t,n)=>(e.set(t,n),n)});const A=(e,t)=>111===e.nodeType?1/t<0?t?(({firstChild:e,lastChild:t})=>{const n=document.createRange();return n.setStartAfter(e),n.setEndAfter(t),n.deleteContents(),e})(e):e.lastChild:t?e.valueOf():e.firstChild:e,C=e=>{const{childNodes:t}=e,{length:n}=t;if(n<2)return t[0];const r=k.call(t,0);return{ELEMENT_NODE:1,nodeType:111,firstChild:r[0],lastChild:r[n-1],valueOf(){if(t.length!==n){let t=0;for(;t<n;)e.appendChild(r[t++])}return e}}};
/*! (c) Andrea Giammarchi - ISC */
var E=function(e){var t="content"in r("template")?function(e){var t=r("template");return t.innerHTML=e,t.content}:function(e){var t=r("fragment"),i=r("template"),a=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(e)){var o=RegExp.$1;i.innerHTML="<table>"+e+"</table>",a=i.querySelectorAll(o)}else i.innerHTML=e,a=i.childNodes;return n(t,a),t};return function(e,n){return("svg"===n?i:t)(e)};function n(e,t){for(var n=t.length;n--;)e.appendChild(t[0])}function r(t){return"fragment"===t?e.createDocumentFragment():e.createElementNS("http://www.w3.org/1999/xhtml",t)}function i(e){var t=r("fragment"),i=r("div");return i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e+"</svg>",n(t,i.firstChild.childNodes),t}}(document),S=(e,t,n,r,i)=>{const a=n.length;let o=t.length,s=a,l=0,c=0,u=null;for(;l<o||c<s;)if(o===l){const t=s<a?c?r(n[c-1],-0).nextSibling:r(n[s-c],0):i;for(;c<s;)e.insertBefore(r(n[c++],1),t)}else if(s===c)for(;l<o;)u&&u.has(t[l])||e.removeChild(r(t[l],-1)),l++;else if(t[l]===n[c])l++,c++;else if(t[o-1]===n[s-1])o--,s--;else if(t[l]===n[s-1]&&n[c]===t[o-1]){const i=r(t[--o],-1).nextSibling;e.insertBefore(r(n[c++],1),r(t[l++],-1).nextSibling),e.insertBefore(r(n[--s],1),i),t[o]=n[s]}else{if(!u){u=new Map;let e=c;for(;e<s;)u.set(n[e],e++)}if(u.has(t[l])){const i=u.get(t[l]);if(c<i&&i<s){let a=l,d=1;for(;++a<o&&a<s&&u.get(t[a])===i+d;)d++;if(d>i-c){const a=r(t[l],0);for(;c<i;)e.insertBefore(r(n[c++],1),a)}else e.replaceChild(r(n[c++],1),r(t[l++],-1))}else l++}else e.removeChild(r(t[l++],-1))}return n},M={};try{M.WeakMap=WeakMap}catch(e){M.WeakMap=function(e,t){var n=t.defineProperty,r=t.hasOwnProperty,i=a.prototype;return i.delete=function(e){return this.has(e)&&delete e[this._]},i.get=function(e){return this.has(e)?e[this._]:void 0},i.has=function(e){return r.call(e,this._)},i.set=function(e,t){return n(e,this._,{configurable:!0,value:t}),this},a;function a(t){n(this,"_",{value:"_@ungap/weakmap"+e++}),t&&t.forEach(o,this)}function o(e){this.set(e[0],e[1])}}(Math.random(),Object)}var $=M.WeakMap,L=function(e){var t="content"in r("template")?function(e){var t=r("template");return t.innerHTML=e,t.content}:function(e){var t=r("fragment"),i=r("template"),a=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(e)){var o=RegExp.$1;i.innerHTML="<table>"+e+"</table>",a=i.querySelectorAll(o)}else i.innerHTML=e,a=i.childNodes;return n(t,a),t};return function(e,n){return("svg"===n?i:t)(e)};function n(e,t){for(var n=t.length;n--;)e.appendChild(t[0])}function r(t){return"fragment"===t?e.createDocumentFragment():e.createElementNS("http://www.w3.org/1999/xhtml",t)}function i(e){var t=r("fragment"),i=r("div");return i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e+"</svg>",n(t,i.firstChild.childNodes),t}}(document),P=function(e,t,n,r,i){var a="importNode"in e,o=e.createDocumentFragment();return o.appendChild(e.createTextNode("g")),o.appendChild(e.createTextNode("")),(a?e.importNode(o,!0):o.cloneNode(!0)).childNodes.length<2?function e(t,n){for(var r=t.cloneNode(),i=t.childNodes||[],a=i.length,o=0;n&&o<a;o++)r.appendChild(e(i[o],n));return r}:a?e.importNode:function(e,t){return e.cloneNode(!!t)}}(document),T="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")},O=i?function(e,t){var n=t.join(" ");return t.slice.call(e,0).sort((function(e,t){return n.indexOf(e.name)<=n.indexOf(t.name)?-1:1}))}:function(e,t){return t.slice.call(e,0)};
/*! (c) Andrea Giammarchi - ISC */function j(e,t){for(var n=t.length,r=0;r<n;)e=e.childNodes[t[r++]];return e}function R(e,t,n,o){for(var s=e.attributes,l=[],c=[],u=O(s,n),d=u.length,h=0;h<d;){var p,f=u[h++],g=f.value===r;if(g||1<(p=f.value.split(a)).length){var v=f.name;if(l.indexOf(v)<0){l.push(v);var m=n.shift().replace(g?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+v+")\\s*=\\s*('|\")[\\S\\s]*","i"),"$1"),b=s[m]||s[m.toLowerCase()];if(g)t.push(D(b,o,m,null));else{for(var y=p.length-2;y--;)n.shift();t.push(D(b,o,m,p))}}c.push(f)}}h=0;for(var w=(0<(d=c.length)&&i&&!("ownerSVGElement"in e));h<d;){var x=c[h++];w&&(x.value=""),e.removeAttribute(x.name)}var k=e.nodeName;if(/^script$/i.test(k)){var N=document.createElement(k);for(d=s.length,h=0;h<d;)N.setAttributeNode(s[h++].cloneNode(!0));N.textContent=e.textContent,e.parentNode.replaceChild(N,e)}}function _(e,t){return{type:"any",node:e,path:t}}function D(e,t,n,r){return{type:"attr",node:e,path:t,name:n,sparse:r}}function W(e,t){return{type:"text",node:e,path:t}}var H=N(new $);function I(e,t){var n=(e.convert||l)(t),i=e.transform;i&&(n=i(n));var s=L(n,e.type);F(s);var c=[];return function e(t,n,i,s){for(var l=t.childNodes,c=l.length,u=0;u<c;){var d=l[u];switch(d.nodeType){case 1:var h=s.concat(u);R(d,n,i,h),e(d,n,i,h);break;case 8:var p=d.textContent;if(p===r)i.shift(),n.push(o.test(t.nodeName)?W(t,s):_(d,s.concat(u)));else switch(p.slice(0,2)){case"/*":if("*/"!==p.slice(-2))break;case"ðŸ‘»":t.removeChild(d),u--,c--}break;case 3:o.test(t.nodeName)&&T.call(d.textContent)===a&&(i.shift(),n.push(W(t,s)))}u++}}(s,c,t.slice(0),[]),{content:s,updates:function(n){for(var r=[],i=c.length,a=0,o=0;a<i;){var s=c[a++],l=j(n,s.path);switch(s.type){case"any":r.push({fn:e.any(l,[]),sparse:!1});break;case"attr":var u=s.sparse,d=e.attribute(l,s.name,s.node);null===u?r.push({fn:d,sparse:!1}):(o+=u.length-2,r.push({fn:d,sparse:!0,values:u}));break;case"text":r.push({fn:e.text(l),sparse:!1}),l.textContent=""}}return i+=o,function(){var e=arguments.length;if(i!==e-1)throw new Error(e-1+" values instead of "+i+"\n"+t.join("${value}"));for(var a=1,o=1;a<e;){var s=r[a-o];if(s.sparse){var l=s.values,c=l[0],u=1,d=l.length;for(o+=d-2;u<d;)c+=arguments[a++]+l[u++];s.fn(c)}else s.fn(arguments[a++])}return n}}}}function z(e,t){var n=H.get(t)||H.set(t,I(e,t));return n.updates(P.call(document,n.content,!0))}var U=[];function F(e){for(var t=e.childNodes,n=t.length;n--;){var r=t[n];1!==r.nodeType&&0===T.call(r.textContent).length&&e.removeChild(r)}}
/*! (c) Andrea Giammarchi - ISC */var Z=function(){var e=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,t=/([^A-Z])([A-Z]+)/g;return function(e,t){return"ownerSVGElement"in e?function(e,t){var n;t?n=t.cloneNode(!0):(e.setAttribute("style","--hyper:style;"),n=e.getAttributeNode("style"));return n.value="",e.setAttributeNode(n),r(n,!0)}(e,t):r(e.style,!1)};function n(e,t,n){return t+"-"+n.toLowerCase()}function r(r,i){var a,o;return function(s){var l,c,u,d;switch(typeof s){case"object":if(s){if("object"===a){if(!i&&o!==s)for(c in o)c in s||(r[c]="")}else i?r.value="":r.cssText="";for(c in l=i?{}:r,s)u="number"!=typeof(d=s[c])||e.test(c)?d:d+"px",!i&&/^--/.test(c)?l.setProperty(c,u):l[c]=u;a="object",i?r.value=function(e){var r,i=[];for(r in e)i.push(r.replace(t,n),":",e[r],";");return i.join("")}(o=l):o=s;break}default:o!=s&&(a="string",o=s,i?r.value=s||"":r.cssText=s||"")}}}}();const q=(e,t)=>{let n,r=!0;const i=document.createAttributeNS(null,t);return t=>{n!==t&&(n=t,null==n?r||(e.removeAttributeNode(i),r=!0):(i.value=t,r&&(e.setAttributeNodeNS(i),r=!1)))}},B=(e,t)=>n=>{e[t]=n},G=/^(?:form|list)$/i,V=(e,t)=>e.ownerDocument.createTextNode(t);function Y(e){return this.type=e,t=this,n=U,r=F,function(e){return n!==e&&(r=z(t,n=e)),r.apply(null,arguments)};var t,n,r}function X(e){return e(this)}Y.prototype={attribute(e,t,n){const r="svg"===this.type;switch(t){case"class":if(r)return q(e,t);t="className";case"props":return B(e,t);case"aria":return(e=>t=>{for(const n in t)e.setAttribute("role"===n?n:"aria-"+n,t[n])})(e);case"style":return Z(e,n,r);case"ref":return(e=>t=>{"function"==typeof t?t(e):t.current=e})(e);case".dataset":return(({dataset:e})=>t=>{for(const n in t)e[n]=t[n]})(e);default:return"."===t.slice(0,1)?B(e,t.slice(1)):"on"===t.slice(0,2)?((e,t)=>{let n,r=t.slice(2);return!(t in e)&&t.toLowerCase()in e&&(r=r.toLowerCase()),t=>{const i=w(t)?t:[t,!1];n!==i[0]&&(n&&e.removeEventListener(r,n,i[1]),(n=i[0])&&e.addEventListener(r,n,i[1]))}})(e,t):!(t in e)||r||G.test(t)?q(e,t):((e,t)=>{let n;return r=>{n!==r&&(n=r,e[t]!==r&&(null==r?(e[t]="",e.removeAttribute(t)):e[t]=r))}})(e,t)}},any(e,t){const{type:n}=this;let r,i=!1;const a=o=>{switch(typeof o){case"string":case"number":case"boolean":i?r!==o&&(r=o,t[0].textContent=o):(i=!0,r=o,t=S(e.parentNode,t,[V(e,o)],A,e));break;case"function":a(o(e));break;case"object":case"undefined":if(null==o){i=!1,t=S(e.parentNode,t,[],A,e);break}default:if(i=!1,r=o,w(o))if(0===o.length)t.length&&(t=S(e.parentNode,t,[],A,e));else switch(typeof o[0]){case"string":case"number":case"boolean":a(String(o));break;case"function":a(o.map(X,e));break;case"object":w(o[0])&&(o=o.concat.apply([],o));default:t=S(e.parentNode,t,o,A,e)}else"ELEMENT_NODE"in o?t=S(e.parentNode,t,11===o.nodeType?k.call(o.childNodes):[o],A,e):"text"in o?a(String(o.text)):"any"in o?a(o.any):"html"in o?t=S(e.parentNode,t,k.call(E([].concat(o.html).join(""),n).childNodes),A,e):"length"in o&&a(k.call(o))}};return a},text(e){let t;const n=r=>{if(t!==r){t=r;const i=typeof r;"object"===i&&r?"text"in r?n(String(r.text)):"any"in r?n(r.any):"html"in r?n([].concat(r.html).join("")):"length"in r&&n(k.call(r).join("")):"function"===i?n(r(e)):e.textContent=null==r?"":r}};return n}};const{create:J,freeze:K,keys:Q}=Object,ee=N(new n),te=()=>({stack:[],entry:null,wire:null}),ne=(e,t)=>{const r=N(new n);return i.for=(e,n)=>{const a=r.get(e)||r.set(e,J(null));return a[n]||(a[n]=(o=te(),function(){return re(t,o,i.apply(null,arguments))}));var o},i.node=function(){return re(t,te(),i.apply(null,arguments)).valueOf()},i;function i(){return new ae(e,ue.apply(null,arguments))}},re=(e,t,{type:n,template:r,values:i})=>{const{length:a}=i;ie(e,t,i,a);let{entry:o}=t;if(o&&o.template===r&&o.type===n)o.tag(r,...i);else{const a=new e(n);t.entry=o={type:n,template:r,tag:a,wire:C(a(r,...i))}}return o.wire},ie=(e,{stack:t},n,r)=>{for(let i=0;i<r;i++){const r=n[i];r instanceof oe?n[i]=re(e,t[i]||(t[i]=te()),r):w(r)?ie(e,t[i]||(t[i]=te()),r,r.length):t[i]=null}r<t.length&&t.splice(r)};function ae(e,t){this.type=e,this.template=t.shift(),this.values=t}K(ae);const oe=ae,{render:se,html:le,svg:ce}=(e=>({html:ne("html",e),svg:ne("svg",e),render(t,n){const r="function"==typeof n?n():n,i=ee.get(t)||ee.set(t,te()),a=r instanceof ae?re(e,i,r):r;return a!==i.wire&&(i.wire=a,t.textContent="",t.appendChild(a.valueOf())),t}}))(Y);function ue(){let e=[],t=0,{length:n}=arguments;for(;t<n;)e.push(arguments[t++]);return e}var de={lighterhtml:{render:se,html:le},globals:{pi:Math.PI,min:Math.min,max:Math.max,trunc:Math.trunc,cos:Math.cos,sin:Math.sin,random:Math.random,now:Date.now,window:window,setTimeout:setTimeout,document:document,DocumentFragment:DocumentFragment}};const{now:he,setTimeout:pe,max:fe}=de.globals,ge=(e,t)=>{const n=he(),r=e();pe(()=>{const e=he()<n+1e3/60?t+1:fe(t-1,1);ge(r,e)},t)},{render:ve,html:me}=de.lighterhtml,{DocumentFragment:be}=de.globals,ye=(e,t)=>{const n=new be,r=e=>ve(n,t(me)(e));let i=e;return{render:()=>r(i),update:e=>{i={...i,...e(i)},r(i)}}},we=e=>Object.entries(e).reduce((e,[t,n])=>{return`${e}${r=t,r.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}:${n};`;var r},"");var xe=e=>{let t=e;const n=new Map;return{next:e=>{t=e(t),n.forEach(e=>e(t))},subscribe:e=>{e(t);const r={};return n.set(r,e),r},unsubscribe:e=>n.delete(e)}};const{window:ke}=de.globals,Ne=()=>({width:ke.innerWidth,height:ke.innerHeight}),Ae=xe(Ne());ke.addEventListener("resize",()=>Ae.next(Ne));const{pi:Ce,cos:Ee,sin:Se,document:Me}=de.globals,$e=Me.createElement("canvas");$e.width=410,$e.height=410,Object.assign($e.style,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",clipPath:"circle(49%)"});const Le=$e.getContext("2d"),Pe=ye({width:0},()=>({width:e})=>(Object.assign($e.style,{width:e+"px",height:e+"px"}),$e));Ae.subscribe(({width:e,height:t})=>{const n=Math.min(.7*e,.7*t);Pe.update(()=>({width:n}))});const Te=2*Ce;var Oe={easy:{},normal:{},hard:{}};let je=[];const Re=xe(0);var _e={title:{},main:{},pause:{}};const{pi:De,min:We,trunc:He}=de.globals,Ie=2*De,ze=ye({level:1,playerAngle:0,x:0,y:0,w:0},e=>({level:t,playerAngle:n,x:r,y:i,w:a})=>{const o={position:"absolute",left:r+"px",top:i+"px",width:a+"px",height:a+"px"},s=we({...o,backgroundColor:"#966",clipPath:"polygon(50% 0, 0 50%, 0 100%, 100% 0)"}),l=we({...o,color:"white",fontSize:a/5+"px",margin:a/10+"px"}),c=He(n/Ie*100);return e`    <div style="${s}"></div>    <div style="${l}">Lv.${t}<br>${c}%</div>  `});Ae.subscribe(({width:e,height:t})=>{const n=.7*We(e,t);ze.update(()=>({x:(e-1.05*n)/2,y:(t-1.05*n)/2,w:.2*n}))});const{min:Ue,trunc:Fe}=de.globals,Ze={mode:Oe.normal,fps:60},qe=new Map([[Oe.easy,"EASY"],[Oe.normal,"NORMAL"],[Oe.hard,"HARD"]]),Be=ye(Ze,e=>({mode:t,fpsText:n,x:r,y:i,w:a})=>{const o={position:"absolute",left:r+"px",top:i+"px",width:a+"px",height:a+"px"},s=we({...o,backgroundColor:"#696",clipPath:"polygon(0 50%, 50% 100%, 100% 100%, 0 0)"}),l=we({position:"absolute",bottom:a/10+"px",left:a/10+"px",color:"white",fontSize:a/5+"px"});return e`    <div style="${s}"></div>    <div style="${we(o)}">      <div style="position:relative;width:100%;height:100%">        <div style="${l}">${qe.get(t)}<br>${n}FPS</div>      </div>    </div>  `});Ae.subscribe(({width:e,height:t})=>{const n=.7*Ue(e,t);Be.update(()=>({x:(e-1.05*n)/2,y:(t+.65*n)/2,w:.2*n}))}),Re.subscribe(e=>Be.update(()=>{const t=Fe(100*e);return{fpsText:`${Fe(t/100)}.${(t%100).toString().padStart(2,"0")}`}}));const{min:Ge}=de.globals,Ve=ye({deaths:0,x:0,y:0,w:0},e=>({deaths:t,x:n,y:r,w:i})=>{const a={position:"absolute",left:n+"px",top:r+"px",width:i+"px",height:i+"px"},o=we({...a,backgroundColor:"#669",clipPath:"polygon(50% 100%, 100% 50%, 100% 0, 0 100%)"}),s=we({position:"absolute",bottom:i/10+"px",right:i/10+"px",textAlign:"right",fontSize:i/5+"px",color:"white"});return e`    <div style="${o}"></div>    <div style="${we(a)}">      <div style="position:relative;width:100%;height:100%">        <div style="${s}">${t}<br>death${t>1?"s":""}</div>      </div>    </div>  `});Ae.subscribe(({width:e,height:t})=>{const n=.7*Ge(e,t);Ve.update(()=>({x:(e+.65*n)/2,y:(t+.65*n)/2,w:.2*n}))});const{window:Ye}=de.globals,Xe={};Ye.addEventListener("keydown",({key:e})=>{Xe[e]=!0}),Ye.addEventListener("keyup",({key:e})=>{Xe[e]=!1});let Je=[];const Ke=e=>{Je=[...e.touches]};Ye.addEventListener("touchstart",Ke),Ye.addEventListener("touchmove",Ke),Ye.addEventListener("touchend",Ke),Ye.addEventListener("touchcancel",Ke);let Qe=0,et=0;Ae.subscribe(({width:e,height:t})=>{Qe=e,et=t});var tt=()=>{const e=((e,t,n)=>{const r=n/t;return e.reduce((e,{clientX:t,clientY:i})=>{const a=t*r<i,o=i<n-t*r;return{left:e.left||a&&o,right:e.right||!a&&!o,up:e.up||!a&&o,down:e.down||a&&!o}},{})})(Je,Qe,et);return{inner:Xe.a||Xe.ArrowLeft||e.left||!1,outer:Xe.d||Xe.ArrowRight||e.right||!1,quick:Xe.w||Xe.ArrowUp||e.up||!1,brake:Xe.s||Xe.ArrowDown||e.down||!1,pause:Xe.p||!1}},nt={swimOrb:{},linearOrb:{}};const{pi:rt,min:it,cos:at,sin:ot}=de.globals,st=2*rt,lt=(e,t,n,r,i)=>{const a=e-n,o=t-r,s=i/2+3;return a*a+o*o<=s*s},ct=(e,t,n,r,i,a)=>{e.save(),e.beginPath(),e.globalAlpha=.5,e.fillStyle=a,e.arc(n,r,i*(2-t/30),0,st),e.fill(),e.closePath(),e.restore()},ut=(e,t,n,r,i,a,o)=>{e.save(),e.beginPath(),e.globalAlpha=o,e.fillStyle=i,e.strokeStyle=a,e.arc(t,n,r,0,st),e.fill(),e.stroke(),e.closePath(),e.restore()},dt=(e,t,n,r,i=0)=>({id:nt.swimOrb,time:i,angle:e,radius:t,speed:n,width:r}),ht=(e,t,n,r,i,a,o,s=0)=>({id:nt.linearOrb,time:s,x:e,y:t,angle:n,speed:r,width:i,fillColor:a,strokeColor:o}),{pi:pt,random:ft}=de.globals,gt=2*pt,vt=new Map([[Oe.easy,()=>-.008*ft()],[Oe.normal,()=>-.01*ft()],[Oe.hard,()=>-.02*ft()]]),mt=new Map([[Oe.easy,()=>6+2*ft()],[Oe.normal,()=>6+3*ft()],[Oe.hard,()=>6+4*ft()]]),bt=new Map([[Oe.easy,()=>.5+.5*ft()],[Oe.normal,()=>.7+.6*ft()],[Oe.hard,()=>1+ft()]]);const{min:yt,trunc:wt}=de.globals,xt=[(e,t,n)=>{const r=[n.enemies,ft()>=.03+.02*t?[]:[dt(ft()*gt,200*ft(),vt.get(e)(),mt.get(e)())],ft()>=.02*t-.1?[]:[ht(205+200*(2*ft()-1),205+200*(2*ft()-1),ft()*gt,bt.get(e)(),mt.get(e)(),"white","blue")]].flat();return{...n,enemies:r}}],kt=xt.length-1;var Nt=new Map([[nt.swimOrb,({time:e,angle:t,radius:n,speed:r,width:i},a,o,s)=>{const l=205+n*at(t),c=205+n*ot(t);if(e<=30&&ct(a,e,l,c,i,"lime"),e>=15){const t=it(it((e-15)/30,1),(300-e)/30);ut(a,l,c,i,"white","lime",t)}return{nextEnemies:e>=300?[]:[dt(t+(e<45?0:r),n,r,i,e+1)],hit:!(e<45||e>270)&&lt(o,s,l,c,i)}}],[nt.linearOrb,({time:e,x:t,y:n,angle:r,speed:i,width:a,fillColor:o,strokeColor:s},l,c,u)=>{if(e<=30&&ct(l,e,t,n,a,s),e>=15){const r=it((e-15)/30,1);ut(l,t,n,a,o,s,r)}if(e<45)return{nextEnemies:[ht(t,n,r,i,a,o,s,e+1)],hit:!1};const d=t+i*at(r),h=n+i*ot(r),p=d-205,f=h-205,g=200+a/2;return p*p+f*f>g*g?{nextEnemies:[],hit:!1}:{nextEnemies:[ht(d,h,r,i,a,o,s,e+1)],hit:lt(c,u,t,n,a)}}]]);const{pi:At,cos:Ct,sin:Et,min:St,max:Mt}=de.globals,$t=2*At;var Lt=(e=0)=>({mode:t,level:n,playerAngle:r,playerRadius:i,enemies:a,deaths:o})=>{const{inner:s,outer:l,quick:c,brake:u,pause:d}=tt();if(d&&e>10)return{nextId:_e.pause,nextArgs:[0],stateUpdate:{}};const h=r>=$t,p=n+(h?1:0),f=r+.007+.005*(c-u)+(h?-$t:0),g=St(Mt(i+2*(l-s),10),190);var v;ze.update(()=>({level:p,playerAngle:f})),Be.update(()=>({mode:t})),Le.clearRect(0,0,410,410),Le.save(),Le.beginPath(),Le.fillStyle="black",Le.arc(205,205,200,0,Te),Le.fill(),Le.closePath(),Le.restore(),Le.save(),Le.beginPath(),Le.strokeStyle="white",Le.lineWidth=1,Le.moveTo(205,205),Le.lineTo(405,205),Le.stroke(),Le.closePath(),Le.restore(),v=f,Le.save(),Le.beginPath(),Le.strokeStyle="red",Le.lineWidth=1,Le.moveTo(205,205),Le.lineTo(205+200*Ee(-v),205+200*Se(-v)),Le.stroke(),Le.closePath(),Le.restore();const m=205+g*Ct(-f),b=205+g*Et(-f);((e,t)=>{Le.save(),Le.beginPath();const n=Le.createRadialGradient(e,t,0,e,t,20);n.addColorStop(0,"red"),n.addColorStop(1,"rgba(255, 0, 0, 0)"),Le.fillStyle=n,Le.arc(e,t,20,0,Te),Le.fill(),Le.closePath(),Le.restore()})(m,b);const{enemies:y}=(e=>xt[yt(wt((e-1)/10),kt)])(p)(t,p,{px:m,py:b,enemies:a}),{nextEnemies:w,hit:x}=((e,t,n)=>e.reduce((e,r)=>{const{nextEnemies:i,hit:a}=Nt.get(r.id)(r,Le,t,n);return{nextEnemies:[...e.nextEnemies,...i],hit:e.hit||a}},{nextEnemies:[],hit:!1}))(y,m,b);var k;return Le.save(),Le.beginPath(),Le.fillStyle="white",Le.arc(205,205,3,0,Te),Le.fill(),Le.closePath(),Le.restore(),Le.save(),Le.beginPath(),Le.setLineDash([10,10]),Le.strokeStyle="white",Le.lineWidth=3,Le.arc(205,205,200,0,-Te,!0),Le.stroke(),Le.closePath(),Le.restore(),k=0,Le.save(),Le.beginPath(),Le.setLineDash([10,10]),Le.strokeStyle="magenta",Le.lineWidth=3,Le.arc(205,205,200,0,-k*Te,!0),Le.stroke(),Le.closePath(),Le.restore(),x&&Ve.update(()=>({deaths:o+1})),x?{nextId:_e.title,nextArgs:[],stateUpdate:{level:p,deaths:o+1}}:{nextId:_e.main,nextArgs:[e+1],stateUpdate:{level:p,playerAngle:f,playerRadius:g,enemies:w}}};const{now:Pt}=de.globals,Tt=new Map([[_e.title,(e=0)=>()=>e<120?{nextId:_e.title,nextArgs:[e+1],stateUpdate:{}}:{nextId:_e.main,nextArgs:[0],stateUpdate:{playerAngle:0,playerRadius:100,enemies:[]}}],[_e.main,Lt],[_e.pause,e=>()=>{const{pause:t}=tt();return e>10&&t?{nextId:_e.main,nextArgs:[0],stateUpdate:{}}:{nextId:_e.pause,nextArgs:[e+1],stateUpdate:{}}}]]),Ot=(e,t)=>()=>{var n;n=Pt(),je.push(n),6===je.length&&(Re.next(()=>5e3/(n-je[0])),je=[]);const{nextId:r,nextArgs:i,stateUpdate:a}=e(t);return Ot(Tt.get(r)(...i),{...t,...a})},{min:jt}=de.globals,Rt=ye({name:void 0,x:0,y:0,w:0},e=>({name:t,x:n,y:r,w:i})=>{const a={position:"absolute",left:n+"px",top:r+"px",width:i+"px",height:i+"px"},o=we({...a,backgroundColor:"#969",clipPath:"polygon(50% 0, 100% 50%, 100% 100%, 0 0)"}),s=we({position:"absolute",top:i/10+"px",right:i/10+"px",textAlign:"right",fontSize:i/5+"px",color:"white"});return e`    <div style="${o}"></div>    <div style="${we(a)}">      <div style="position:relative;width:100%;height:100%">        <div style="${s}">Event<br>${t||"-"}</div>      </div>    </div>  `});Ae.subscribe(({width:e,height:t})=>{const n=.7*jt(e,t);Rt.update(()=>({x:(e+.65*n)/2,y:(t-1.05*n)/2,w:.2*n}))});const{render:_t,html:Dt}=de.lighterhtml;_t(document.body,Dt`  ${Pe.render()}  ${ze.render()}  ${Be.render()}  ${Ve.render()}  ${Rt.render()}`),ge(Ot(Lt(),{level:1,mode:Oe.hard,playerAngle:0,playerRadius:100,playerInvisible:0,deaths:0,enemies:[]}),1e3/60)}();
