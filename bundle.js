(function(){"use strict";/*! (c) Andrea Giammarchi - ISC */var it={};try{it.WeakMap=WeakMap}catch{it.WeakMap=function(t,r){var n=r.defineProperty,a=r.hasOwnProperty,i=s.prototype;return i.delete=function(l){return this.has(l)&&delete l[this._]},i.get=function(l){return this.has(l)?l[this._]:void 0},i.has=function(l){return a.call(l,this._)},i.set=function(l,c){return n(l,this._,{configurable:!0,value:c}),this},s;function s(l){n(this,"_",{value:"_@ungap/weakmap"+t++}),l&&l.forEach(o,this)}function o(l){this.set(l[0],l[1])}}(Math.random(),Object)}var re=it.WeakMap;/*! (c) Andrea Giammarchi - ISC */var ot={};try{ot.WeakSet=WeakSet}catch{(function(t,r){var n=a.prototype;n.add=function(i){return this.has(i)||r(i,this._,{value:!0,configurable:!0}),this},n.has=function(i){return this.hasOwnProperty.call(i,this._)},n.delete=function(i){return this.has(i)&&delete i[this._]},ot.WeakSet=a;function a(){r(this,"_",{value:"_@ungap/weakmap"+t++})}})(Math.random(),Object.defineProperty)}var Vt=ot.WeakSet;const{indexOf:wa,slice:Up}=[],le=(e,t,r,n,a,i)=>{const s="selectedIndex"in t;let o=s;for(;n<a;){const l=e(r[n],1);if(t.insertBefore(l,i),s&&o&&l.selected){o=!o;let{selectedIndex:c}=t;t.selectedIndex=c<0?n:wa.call(t.querySelectorAll("option"),l)}n++}},xa=(e,t)=>e==t,Oa=e=>e,er=(e,t,r,n,a,i,s)=>{const o=i-a;if(o<1)return-1;for(;r-t>=o;){let l=t,c=a;for(;l<r&&c<i&&s(e[l],n[c]);)l++,c++;if(c===i)return t;t=l+1}return-1},Ea=(e,t,r,n,a,i)=>{for(;n<a&&i(r[n],e[t-1]);)n++,t--;return t===0},st=(e,t,r,n,a)=>r<n?e(t[r],0):0<r?e(t[r-1],-0).nextSibling:a,$e=(e,t,r,n)=>{for(;r<n;)Ma(e(t[r++],-1))},ye=-1,De=1,Le=0,Pa=50,Sa=(e,t,r,n,a,i,s,o)=>{let l=0,c=n<o?n:o;const d=Array(c++),f=Array(c);f[0]=-1;for(let b=1;b<c;b++)f[b]=s;const u=a.slice(i,s);for(let b=t;b<r;b++){const m=u.indexOf(e[b]);if(-1<m){const O=m+i;l=Ca(f,c,O),-1<l&&(f[l]=O,d[l]={newi:b,oldi:O,prev:d[l-1]})}}for(l=--c,--s;f[l]>s;)--l;c=o+n-l;const g=Array(c);let $=d[l];for(--r;$;){const{newi:b,oldi:m}=$;for(;r>b;)g[--c]=De,--r;for(;s>m;)g[--c]=ye,--s;g[--c]=Le,--r,--s,$=$.prev}for(;r>=t;)g[--c]=De,--r;for(;s>=i;)g[--c]=ye,--s;return g},Aa=(e,t,r,n,a,i,s)=>{const o=r+i,l=[];let c,d,f,u,g,$,b;e:for(c=0;c<=o;c++){if(c>Pa)return null;for(b=c-1,g=c?l[c-1]:[0,0],$=l[c]=[],d=-c;d<=c;d+=2){for(d===-c||d!==c&&g[b+d-1]<g[b+d+1]?u=g[b+d+1]:u=g[b+d-1]+1,f=u-d;u<i&&f<r&&s(n[a+u],e[t+f]);)u++,f++;if(u===i&&f===r)break e;$[c+d]=u}}const m=Array(c/2+o/2);let O=m.length-1;for(c=l.length-1;c>=0;c--){for(;u>0&&f>0&&s(n[a+u-1],e[t+f-1]);)m[O--]=Le,u--,f--;if(!c)break;b=c-1,g=c?l[c-1]:[0,0],d=u-f,d===-c||d!==c&&g[b+d-1]<g[b+d+1]?(f--,m[O--]=De):(u--,m[O--]=ye)}return m},ka=(e,t,r,n,a,i,s,o,l)=>{const c=[],d=e.length;let f=s,u=0;for(;u<d;)switch(e[u++]){case Le:a++,f++;break;case De:c.push(n[a]),le(t,r,n,a++,a,f<o?t(i[f],0):l);break;case ye:f++;break}for(u=0;u<d;)switch(e[u++]){case Le:s++;break;case ye:-1<c.indexOf(i[s])?s++:$e(t,i,s++,s);break}},Ca=(e,t,r)=>{let n=1,a=t;for(;n<a;){const i=(n+a)/2>>>0;r<e[i]?a=i:n=i+1}return n},ja=(e,t,r,n,a,i,s,o,l,c,d,f,u)=>{ka(Aa(r,n,i,s,o,c,f)||Sa(r,n,a,i,s,o,l,c),e,t,r,n,s,o,d,u)},Ma=e=>(e.remove||Ta).call(e);function Ta(){const{parentNode:e}=this;e&&e.removeChild(this)}/*! (c) 2018 Andrea Giammarchi (ISC) */const ne=(e,t,r,n)=>{n||(n={});const a=n.compare||xa,i=n.node||Oa,s=n.before==null?null:i(n.before,0),o=t.length;let l=o,c=0,d=r.length,f=0;for(;c<l&&f<d&&a(t[c],r[f]);)c++,f++;for(;c<l&&f<d&&a(t[l-1],r[d-1]);)l--,d--;const u=c===l,g=f===d;if(u&&g)return r;if(u&&f<d)return le(i,e,r,f,d,st(i,t,c,o,s)),r;if(g&&c<l)return $e(i,t,c,l),r;const $=l-c,b=d-f;let m=-1;if($<b){if(m=er(r,f,d,t,c,l,a),-1<m)return le(i,e,r,f,m,i(t[c],0)),le(i,e,r,m+$,d,st(i,t,l,o,s)),r}else if(b<$&&(m=er(t,c,l,r,f,d,a),-1<m))return $e(i,t,c,m),$e(i,t,m+b,l),r;return $<2||b<2?(le(i,e,r,f,d,i(t[c],0)),$e(i,t,c,l),r):$===b&&Ea(r,d,t,c,l,a)?(le(i,e,r,f,d,st(i,t,l,o,s)),r):(ja(i,e,r,f,d,b,t,c,l,$,o,a,s),r)};/*! (c) Andrea Giammarchi - ISC */var tr={};tr.CustomEvent=typeof CustomEvent=="function"?CustomEvent:function(e){return t[e]=new t("").constructor[e],t;function t(r,n){n||(n={});var a=document.createEvent("CustomEvent");return a.initCustomEvent(r,!!n.bubbles,!!n.cancelable,n.detail),a}}("prototype");var rr=tr.CustomEvent;/*! (c) Andrea Giammarchi - ISC */var lt={};try{lt.Map=Map}catch{lt.Map=function(){var r=0,n=[],a=[];return{delete:function(s){var o=i(s);return o&&(n.splice(r,1),a.splice(r,1)),o},forEach:function(o,l){n.forEach(function(c,d){o.call(l,a[d],c,this)},this)},get:function(o){return i(o)?a[r]:void 0},has:function(o){return i(o)},set:function(o,l){return a[i(o)?r:n.push(o)-1]=l,this}};function i(s){return r=n.indexOf(s),-1<r}}}var Ia=lt.Map;function we(){return this}function Da(e){const t=new re,r=Object.create,n=(o,l,c)=>(o.set(l,c),c),a=(o,l,c,d)=>{const f=l.get(o)||i(o,l);switch(typeof d){case"object":case"function":const u=f.w||(f.w=new re);return u.get(d)||n(u,d,new o(c));default:const g=f.p||(f.p=r(null));return g[d]||(g[d]=new o(c))}},i=(o,l)=>{const c={w:null,p:null};return l.set(o,c),c},s=o=>{const l=new Ia;return t.set(o,l),l};Object.defineProperties(we,{for:{configurable:!0,value(o,l){return a(this,t.get(o)||s(o),o,l??"default")}}}),Object.defineProperties(we.prototype,{handleEvent:{value(o){const l=o.currentTarget;this["getAttribute"in l&&l.getAttribute("data-call")||"on"+o.type](o)}},html:ct("html",e),svg:ct("svg",e),state:ct("state",function(){return this.defaultState}),defaultState:{get(){return{}}},dispatch:{value(o,l){const{_wire$:c}=this;if(c){const d=new rr(o,{bubbles:!0,cancelable:!0,detail:l});return d.component=this,(c.dispatchEvent?c:c.firstChild).dispatchEvent(d)}return!1}},setState:{value(o,l){const c=this.state,d=typeof o=="function"?o.call(this,c):o;for(const f in d)c[f]=d[f];return l!==!1&&this.render(),this}}})}const ct=(e,t)=>{const r="_"+e+"$";return{get(){return this[r]||nr(this,r,t.call(this,e))},set(n){nr(this,r,n)}}},nr=(e,t,r)=>Object.defineProperty(e,t,{configurable:!0,value:typeof r=="function"?function(){return e._wire$=r.apply(this,arguments)}:r})[t];Object.defineProperties(we.prototype,{ELEMENT_NODE:{value:1},nodeType:{value:-1}});const ar={},Re={},ir=[],La=Re.hasOwnProperty;let or=0;var ce={attributes:ar,define:(e,t)=>{e.indexOf("-")<0?(e in Re||(or=ir.push(e)),Re[e]=t):ar[e]=t},invoke:(e,t)=>{for(let r=0;r<or;r++){let n=ir[r];if(La.call(e,n))return Re[n](e[n],t)}}},sr=Array.isArray||function(e){var t=e.call([]);return function(n){return e.call(n)===t}}({}.toString);/*! (c) Andrea Giammarchi - ISC */var lr=function(e){var t="fragment",r="template",n="content"in s(r),a=n?function(l){var c=s(r);return c.innerHTML=l,c.content}:function(l){var c=s(t),d=s(r),f=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(l)){var u=RegExp.$1;d.innerHTML="<table>"+l+"</table>",f=d.querySelectorAll(u)}else d.innerHTML=l,f=d.childNodes;return i(c,f),c};return function(c,d){return(d==="svg"?o:a)(c)};function i(l,c){for(var d=c.length;d--;)l.appendChild(c[0])}function s(l){return l===t?e.createDocumentFragment():e.createElementNS("http://www.w3.org/1999/xhtml",l)}function o(l){var c=s(t),d=s("div");return d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+l+"</svg>",i(c,d.firstChild.childNodes),c}}(document);/*! (c) Andrea Giammarchi */function Ra(e){var t=e.Event,r=e.WeakSet,n=!0,a=null;return function(o){return n&&(n=!n,a=new r,i(o.ownerDocument)),a.add(o),o};function i(s){var o=new r,l=new r;try{new MutationObserver(u).observe(s,{subtree:!0,childList:!0})}catch{var c=0,d=[],f=function(m){d.push(m),clearTimeout(c),c=setTimeout(function(){u(d.splice(c=0,d.length))},0)};s.addEventListener("DOMNodeRemoved",function(m){f({addedNodes:[],removedNodes:[m.target]})},!0),s.addEventListener("DOMNodeInserted",function(m){f({addedNodes:[m.target],removedNodes:[]})},!0)}function u(b){for(var m,O=b.length,P=0;P<O;P++)m=b[P],g(m.removedNodes,"disconnected",l,o),g(m.addedNodes,"connected",o,l)}function g(b,m,O,P){for(var A,M=new t(m),k=b.length,T=0;T<k;(A=b[T++]).nodeType===1&&$(A,M,m,O,P));}function $(b,m,O,P,A){a.has(b)&&!P.has(b)&&(A.delete(b),P.add(b),b.dispatchEvent(m));for(var M=b.children||[],k=M.length,T=0;T<k;$(M[T++],m,O,P,A));}}}/*! (c) Andrea Giammarchi - ISC */var Wa=function(e,t,r,n,a){var i=a in e,s=e.createDocumentFragment();s[t](e[n]("g")),s[t](e[n](""));var o=i?e[a](s,!0):s[r](!0);return o.childNodes.length<2?function l(c,d){for(var f=c[r](),u=c.childNodes||[],g=u.length,$=0;d&&$<g;$++)f[t](l(u[$],d));return f}:i?e[a]:function(l,c){return l[r](!!c)}}(document,"appendChild","cloneNode","createTextNode","importNode"),cr="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")};/*! (c) Andrea Giammarchi - ISC */var X="-"+Math.random().toFixed(6)+"%",pt=!1;try{(function(e,t,r){return t in e&&(e.innerHTML="<p "+r+'="'+X+'"></p>',e[t].childNodes[0].getAttribute(r)==X)})(document.createElement("template"),"content","tabindex")||(X="_dt: "+X.slice(1,-1)+";",pt=!0)}catch{}var We="<!--"+X+"-->",_a=8,Na=1,za=3,pr=/^(?:plaintext|script|style|textarea|title|xmp)$/i,Ua=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function Ba(e){return e.join(We).replace(qa,Xa).replace(Fa,Ha)}var _e=" \\f\\n\\r\\t",dr="[^"+_e+`\\/>"'=]+`,dt="["+_e+"]+"+dr,fr="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",hr=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+dr.replace("\\/","")+"))?)",Fa=new RegExp(fr+dt+hr+"+)(["+_e+"]*/?>)","g"),qa=new RegExp(fr+dt+hr+"*)(["+_e+"]*/>)","g"),Ga=new RegExp("("+dt+`\\s*=\\s*)(['"]?)`+We+"\\2","gi");function Ha(e,t,r,n){return"<"+t+r.replace(Ga,Ya)+n}function Ya(e,t,r){return t+(r||'"')+X+(r||'"')}function Xa(e,t,r){return Ua.test(t)?e:"<"+t+r+"></"+t+">"}var Za=e=>({get:t=>e.get(t),set:(t,r)=>(e.set(t,r),r)}),Ka=pt?function(e,t){var r=t.join(" ");return t.slice.call(e,0).sort(function(n,a){return r.indexOf(n.name)<=r.indexOf(a.name)?-1:1})}:function(e,t){return t.slice.call(e,0)};function Qa(e,t){for(var r=t.length,n=0;n<r;)e=e.childNodes[t[n++]];return e}function ur(e,t,r,n){for(var a=e.childNodes,i=a.length,s=0;s<i;){var o=a[s];switch(o.nodeType){case Na:var l=n.concat(s);Ja(o,t,r,l),ur(o,t,r,l);break;case _a:var c=o.textContent;if(c===X)r.shift(),t.push(pr.test(e.nodeName)?gr(e,n):Va(o,n.concat(s)));else switch(c.slice(0,2)){case"/*":if(c.slice(-2)!=="*/")break;case"\u{1F47B}":e.removeChild(o),s--,i--}break;case za:pr.test(e.nodeName)&&cr.call(o.textContent)===We&&(r.shift(),t.push(gr(e,n)));break}s++}}function Ja(e,t,r,n){for(var a=e.attributes,i=[],s=[],o=Ka(a,r),l=o.length,c=0;c<l;){var d=o[c++],f=d.value===X,u;if(f||1<(u=d.value.split(We)).length){var g=d.name;if(i.indexOf(g)<0){i.push(g);var $=r.shift().replace(f?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+g+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),b=a[$]||a[$.toLowerCase()];if(f)t.push(vr(b,n,$,null));else{for(var m=u.length-2;m--;)r.shift();t.push(vr(b,n,$,u))}}s.push(d)}}l=s.length,c=0;for(var O=0<l&&pt&&!("ownerSVGElement"in e);c<l;){var P=s[c++];O&&(P.value=""),e.removeAttribute(P.name)}var A=e.nodeName;if(/^script$/i.test(A)){var M=document.createElement(A);for(l=a.length,c=0;c<l;)M.setAttributeNode(a[c++].cloneNode(!0));M.textContent=e.textContent,e.parentNode.replaceChild(M,e)}}function Va(e,t){return{type:"any",node:e,path:t}}function vr(e,t,r,n){return{type:"attr",node:e,path:t,name:r,sparse:n}}function gr(e,t){return{type:"text",node:e,path:t}}var mr=Za(new re);function ei(e,t){var r=(e.convert||Ba)(t),n=e.transform;n&&(r=n(r));var a=lr(r,e.type);br(a);var i=[];return ur(a,i,t.slice(0),[]),{content:a,updates:function(s){for(var o=[],l=i.length,c=0,d=0;c<l;){var f=i[c++],u=Qa(s,f.path);switch(f.type){case"any":o.push({fn:e.any(u,[]),sparse:!1});break;case"attr":var g=f.sparse,$=e.attribute(u,f.name,f.node);g===null?o.push({fn:$,sparse:!1}):(d+=g.length-2,o.push({fn:$,sparse:!0,values:g}));break;case"text":o.push({fn:e.text(u),sparse:!1}),u.textContent="";break}}return l+=d,function(){var b=arguments.length;if(l!==b-1)throw new Error(b-1+" values instead of "+l+`
`+t.join("${value}"));for(var m=1,O=1;m<b;){var P=o[m-O];if(P.sparse){var A=P.values,M=A[0],k=1,T=A.length;for(O+=T-2;k<T;)M+=arguments[m++]+A[k++];P.fn(M)}else P.fn(arguments[m++])}return s}}}}function ti(e,t){var r=mr.get(t)||mr.set(t,ei(e,t));return r.updates(Wa.call(document,r.content,!0))}var ri=[];function ni(e){var t=ri,r=br;return function(n){return t!==n&&(r=ti(e,t=n)),r.apply(null,arguments)}}function br(e){for(var t=e.childNodes,r=t.length;r--;){var n=t[r];n.nodeType!==1&&cr.call(n.textContent).length===0&&e.removeChild(n)}}/*! (c) Andrea Giammarchi - ISC */var ai=function(){var e=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,t=/([^A-Z])([A-Z]+)/g;return function(o,l){return"ownerSVGElement"in o?n(o,l):i(o.style,!1)};function r(s,o,l){return o+"-"+l.toLowerCase()}function n(s,o){var l;return o?l=o.cloneNode(!0):(s.setAttribute("style","--hyper:style;"),l=s.getAttributeNode("style")),l.value="",s.setAttributeNode(l),i(l,!0)}function a(s){var o,l=[];for(o in s)l.push(o.replace(t,r),":",s[o],";");return l.join("")}function i(s,o){var l,c;return function(d){var f,u,g,$;switch(typeof d){case"object":if(d){if(l==="object"){if(!o&&c!==d)for(u in c)u in d||(s[u]="")}else o?s.value="":s.cssText="";f=o?{}:s;for(u in d)$=d[u],g=typeof $=="number"&&!e.test(u)?$+"px":$,!o&&/^--/.test(u)?f.setProperty(u,g):f[u]=g;l="object",o?s.value=a(c=f):c=d;break}default:c!=d&&(l="string",c=d,o?s.value=d||"":s.cssText=d||"");break}}}}();/*! (c) Andrea Giammarchi - ISC */var $r=function(e,t){return t=r.prototype,t.ELEMENT_NODE=1,t.nodeType=111,t.remove=function(n){var a=this.childNodes,i=this.firstChild,s=this.lastChild;if(this._=null,n&&a.length===2)s.parentNode.removeChild(s);else{var o=this.ownerDocument.createRange();o.setStartBefore(n?a[1]:i),o.setEndAfter(s),o.deleteContents()}return i},t.valueOf=function(n){var a=this._,i=a==null;if(i&&(a=this._=this.ownerDocument.createDocumentFragment()),i||n)for(var s=this.childNodes,o=0,l=s.length;o<l;o++)a.appendChild(s[o]);return a},r;function r(n){var a=this.childNodes=e.call(n,0);this.firstChild=a[0],this.lastChild=a[a.length-1],this.ownerDocument=a[0].ownerDocument,this._=null}}([].slice);const ii=11,ft="ownerSVGElement",yr="connected",oi="dis"+yr,si=we.prototype.nodeType,li=$r.prototype.nodeType,wr=Ra({Event:rr,WeakSet:Vt}),ci=e=>({html:e}),xr=(e,t)=>{switch(e.nodeType){case li:return 1/t<0?t?e.remove(!0):e.lastChild:t?e.valueOf(!0):e.firstChild;case si:return xr(e.render(),t);default:return e}},pi=e=>"ELEMENT_NODE"in e,di=(e,t,r)=>n=>{r!==!!n&&((r=!!n)?e.setAttribute(t,""):e.removeAttribute(t))},fi=(e,t,r)=>r?n=>{try{e[t]=n}catch{e.setAttribute(t,n)}}:n=>{e[t]=n},Or=(e,t)=>{t(e.placeholder),"text"in e?Promise.resolve(e.text).then(String).then(t):"any"in e?Promise.resolve(e.any).then(t):"html"in e?Promise.resolve(e.html).then(ci).then(t):Promise.resolve(ce.invoke(e,t)).then(t)},ht=e=>e!=null&&"then"in e,hi=/^(?:form|list)$/i,Ne=[].slice,ui=(e,t)=>e.ownerDocument.createTextNode(t);function ze(e){return this.type=e,ni(this)}ze.prototype={attribute(e,t,r){const n=ft in e;let a;if(t==="style")return ai(e,r,n);if(t.slice(0,1)===".")return fi(e,t.slice(1),n);if(t.slice(0,1)==="?")return di(e,t.slice(1));if(/^on/.test(t)){let i=t.slice(2);return i===yr||i===oi?wr(e):t.toLowerCase()in e&&(i=i.toLowerCase()),s=>{a!==s&&(a&&e.removeEventListener(i,a,!1),a=s,s&&e.addEventListener(i,s,!1))}}else{if(t==="data"||!n&&t in e&&!hi.test(t))return i=>{a!==i&&(a=i,e[t]!==i&&i==null?(e[t]="",e.removeAttribute(t)):e[t]=i)};if(t in ce.attributes)return i=>{const s=ce.attributes[t](e,i);a!==s&&(a=s,s==null?e.removeAttribute(t):e.setAttribute(t,s))};{let i=!1;const s=r.cloneNode(!0);return o=>{a!==o&&(a=o,s.value!==o&&(o==null?(i&&(i=!1,e.removeAttributeNode(s)),s.value=o):(s.value=o,i||(i=!0,e.setAttributeNode(s)))))}}}},any(e,t){const r={node:xr,before:e},n=ft in e?"svg":"html";let a=!1,i;const s=o=>{switch(typeof o){case"string":case"number":case"boolean":a?i!==o&&(i=o,t[0].textContent=o):(a=!0,i=o,t=ne(e.parentNode,t,[ui(e,o)],r));break;case"function":s(o(e));break;case"object":case"undefined":if(o==null){a=!1,t=ne(e.parentNode,t,[],r);break}default:if(a=!1,i=o,sr(o))if(o.length===0)t.length&&(t=ne(e.parentNode,t,[],r));else switch(typeof o[0]){case"string":case"number":case"boolean":s({html:o});break;case"object":if(sr(o[0])&&(o=o.concat.apply([],o)),ht(o[0])){Promise.all(o).then(s);break}default:t=ne(e.parentNode,t,o,r);break}else pi(o)?t=ne(e.parentNode,t,o.nodeType===ii?Ne.call(o.childNodes):[o],r):ht(o)?o.then(s):"placeholder"in o?Or(o,s):"text"in o?s(String(o.text)):"any"in o?s(o.any):"html"in o?t=ne(e.parentNode,t,Ne.call(lr([].concat(o.html).join(""),n).childNodes),r):"length"in o?s(Ne.call(o)):s(ce.invoke(o,s));break}};return s},text(e){let t;const r=n=>{if(t!==n){t=n;const a=typeof n;a==="object"&&n?ht(n)?n.then(r):"placeholder"in n?Or(n,r):"text"in n?r(String(n.text)):"any"in n?r(n.any):"html"in n?r([].concat(n.html).join("")):"length"in n?r(Ne.call(n).join("")):r(ce.invoke(n,r)):a==="function"?r(n(e)):e.textContent=n??""}};return r}};var Er=typeof document!="object",ut=function(e){var t="raw",r=function(c){return/(Firefox|Safari)\/(\d+)/.test(c)&&!/(Chrom[eium]+|Android)\/(\d+)/.test(c)},n=r((document.defaultView.navigator||{}).userAgent),a=!(t in e)||e.propertyIsEnumerable(t)||!Object.isFrozen(e[t]);if(n||a){var i={},s=function(c){for(var d=".",f=0;f<c.length;f++)d+=c[f].length+"."+c[f];return i[d]||(i[d]=c)};if(a)ut=s;else{var o=new re,l=function(c,d){return o.set(c,d),d};ut=function(c){return o.get(c)||l(c,s(c))}}}else Er=!0;return Pr(e)};function Pr(e){return Er?e:ut(e)}function Sr(e){for(var t=arguments.length,r=[Pr(e)],n=1;n<t;)r.push(arguments[n++]);return r}const Ar=new re,kr=(e,t)=>e==null?pe(t||"html"):Cr(e,t||"html"),pe=e=>{let t,r,n;return function(){const a=Sr.apply(null,arguments);return n!==a[0]?(n=a[0],r=new ze(e),t=vi(r.apply(r,a))):r.apply(r,a),t}},Cr=(e,t)=>{const r=t.indexOf(":");let n=Ar.get(e),a=t;return-1<r&&(a=t.slice(r+1),t=t.slice(0,r)||"html"),n||Ar.set(e,n={}),n[a]||(n[a]=pe(t))},vi=e=>{const t=e.childNodes,{length:r}=t;return r===1?t[0]:r?new $r(t):e},jr=new re;function gi(){const e=jr.get(this),t=Sr.apply(null,arguments);return e&&e.template===t[0]?e.tagger.apply(null,t):mi.apply(this,t),this}function mi(e){const t=ft in this?"svg":"html",r=new ze(t);jr.set(this,{tagger:r,template:e}),this.textContent="",this.appendChild(r.apply(null,arguments))}/*! (c) Andrea Giammarchi (ISC) */const Mr=e=>gi.bind(e),bi=ce.define,$i=ze.prototype;L.Component=we,L.bind=Mr,L.define=bi,L.diff=ne,L.hyper=L,L.observe=wr,L.tagger=$i,L.wire=kr,L._={WeakMap:re,WeakSet:Vt},Da(pe);function L(e){return arguments.length<2?e==null?pe("html"):typeof e=="string"?L.wire(null,e):"raw"in e?pe("html")(e):"nodeType"in e?L.bind(e):Cr(e,"html"):("raw"in e?pe("html"):L.wire).apply(null,arguments)}var w={hyperhtml:{wire:kr,bind:Mr},globals:{infinity:Number.POSITIVE_INFINITY,pi:Math.PI,pi2:Math.PI*2,min:Math.min,max:Math.max,abs:Math.abs,trunc:Math.trunc,round:Math.round,sqrt:Math.sqrt,cos:Math.cos,sin:Math.sin,atan2:Math.atan2,random:Math.random,now:Date.now,window,requestAnimationFrame,document}};const{requestAnimationFrame:yi}=w.globals,Tr=e=>()=>yi(Tr(e()));var wi=e=>Tr(e)(),xi=e=>{let t=e;const r=new Map;return{next:n=>{t=n(t),r.forEach(a=>a(t))},subscribe:n=>{n(t);const a={};return r.set(a,n),a},unsubscribe:n=>r.delete(n)}};let Ue=[];const Ir=xi(0),Oi=e=>{Ue.push(e),Ue.length===6&&(Ir.next(()=>5e3/(e-Ue[0])),Ue=[])};var x={title:{},practice:{},start:{},main:{},pause:{},death:{},over:{}},Ei=Object.defineProperty,Dr=Object.getOwnPropertySymbols,Pi=Object.prototype.hasOwnProperty,Si=Object.prototype.propertyIsEnumerable,Lr=(e,t,r)=>t in e?Ei(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rr=(e,t)=>{for(var r in t||(t={}))Pi.call(t,r)&&Lr(e,r,t[r]);if(Dr)for(var r of Dr(t))Si.call(t,r)&&Lr(e,r,t[r]);return e};const{wire:Ai}=w.hyperhtml;var Z=(e,t)=>{const r=t(Ai());let n=e;return{render:()=>r(n),update:a=>{n=Rr(Rr({},n),a(n)),r(n)}}};const{pi2:de,cos:ki,sin:Ci,document:ji}=w.globals,y=200,S=y*2+10,v=S/2,K=ji.createElement("canvas");K.width=S,K.height=S,Object.assign(K.style,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"min(70vw, 70vh)",height:"min(70vw, 70vh)"});const h=K.getContext("2d"),Be=K.cloneNode(),C=Be.getContext("2d"),vt=Z({width:0,opacity:1},e=>({opacity:t})=>(K.style.opacity=t,Be.style.opacity=t,e`${K}${Be}`)),Fe=()=>{K.width=S,Be.width=S,h.clip(h.arc(v,v,y,0,de))},gt=()=>{h.save(),h.beginPath(),h.fillStyle="black",h.arc(v,v,y,0,de),h.fill(),h.closePath(),h.restore()},mt=(e=1)=>{h.save(),h.beginPath(),h.strokeStyle="white",h.lineWidth=1,h.moveTo(v,v),h.lineTo(v+e*y,v),h.stroke(),h.closePath(),h.restore()},xe=(e,t=1,r="red")=>{h.save(),h.beginPath(),h.strokeStyle=r,h.lineWidth=1,h.moveTo(v,v);const n=t*y;h.lineTo(v+n*ki(-e),v+n*Ci(-e)),h.stroke(),h.closePath(),h.restore()},qe=(e,t)=>{h.save(),h.beginPath();const r=h.createRadialGradient(e,t,0,e,t,20);r.addColorStop(0,"red"),r.addColorStop(1,"rgba(255, 0, 0, 0)"),h.fillStyle=r,h.arc(e,t,20,0,de),h.fill(),h.closePath(),h.restore()},Ge=()=>{h.save(),h.beginPath(),h.fillStyle="white",h.arc(v,v,3,0,de),h.fill(),h.closePath(),h.restore()},bt=(e=-de)=>{C.clearRect(0,0,S,S),C.save(),C.beginPath(),C.setLineDash([10,10]),C.strokeStyle="white",C.lineWidth=3,C.arc(v,v,y,0,e,!0),C.stroke(),C.closePath(),C.restore()},Wr=e=>{C.save(),C.beginPath(),C.setLineDash([10,10]),C.strokeStyle="magenta",C.lineWidth=3,C.arc(v,v,y,0,-e*de,!0),C.stroke(),C.closePath(),C.restore()};var p={easy:{},normal:{},hard:{}};let $t=[];const q={mode:{},start:{},practice:{},stage:{}},yt=(e,t)=>$t.push({id:e,param:t}),_r=()=>$t.map(({id:e,param:t})=>({id:e,param:t})),wt=()=>{$t=[]},{max:Mi}=w.globals,Ti={startOpacity:0,practiceOpacity:0,mode:p.normal,fontSize:0},Nr=e=>()=>yt(e),He="min(3vw, 3vh)",Ii=e=>({display:e>0?"block":"none",position:"absolute",left:"50%",top:"calc(50vh + min(10vw, 10vh))",transform:"translate(-50%, 0)",textAlign:"center",lineHeight:`calc(${He} * 1.5)`,fontFamily:"serif"}),zr=e=>({outline:"none",border:"none",margin:`calc(${He} / 4) 0 calc(${He} / 2)`,fontSize:He,color:"white",backgroundColor:"transparent",opacity:e}),Ur=Z(Ti,e=>({startOpacity:t,practiceOpacity:r})=>e`<div style=${Ii(Mi(t,r))}><button style=${zr(t)} onClick=${Nr(q.start)}>Start Game</button><br><button style=${zr(r)} onClick=${Nr(q.practice)}>Practice</button><br></div>`),Di={opacity:0,mode:p.normal},xt=e=>()=>yt(q.mode,e),Li=e=>({display:e>0?"block":"none",position:"absolute",left:"50%",top:"calc(50vh + min(25vw, 25vh))",transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:e}),Br="min(2.6vw, 2.6vh)",Ot=e=>({margin:`0 calc(${Br} / 4)`,outline:"none",border:`2px solid ${e?"white":"transparent"}`,fontSize:Br,color:"white",backgroundColor:"transparent"}),Oe=Z(Di,e=>({opacity:t,mode:r,top:n})=>e`<div style=${Li(t)}><button style=${Ot(r===p.easy)} onClick=${xt(p.easy)}>EASY</button><button style=${Ot(r===p.normal)} onClick=${xt(p.normal)}>NORMAL</button><button style=${Ot(r===p.hard)} onClick=${xt(p.hard)}>HARD</button></div>`);var Ri=Object.defineProperty,Wi=Object.defineProperties,_i=Object.getOwnPropertyDescriptors,Fr=Object.getOwnPropertySymbols,Ni=Object.prototype.hasOwnProperty,zi=Object.prototype.propertyIsEnumerable,qr=(e,t,r)=>t in e?Ri(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Gr=(e,t)=>{for(var r in t||(t={}))Ni.call(t,r)&&qr(e,r,t[r]);if(Fr)for(var r of Fr(t))zi.call(t,r)&&qr(e,r,t[r]);return e},Hr=(e,t)=>Wi(e,_i(t));const{pi2:Ui,trunc:Bi}=w.globals,Fi={level:1,playerAngle:0,appearance:0},fe="min(70vw, 70vh)",Yr={position:"absolute",left:`calc(50vw - ${fe} * 0.525)`,top:`calc(50vh - ${fe} * 0.525)`,width:`calc(${fe} * 0.2)`,height:`calc(${fe} * 0.2)`},he=Z(Fi,e=>({level:t,playerAngle:r,appearance:n})=>{const a=n*100,i=a/2,s=Hr(Gr({},Yr),{backgroundColor:"#966",clipPath:`polygon(100% 0, 50% 0, ${50-i}% ${i}%, ${100-a}% ${a}%)`}),o=Hr(Gr({},Yr),{color:"white",fontSize:`calc(${fe} * 0.04)`,margin:`calc(${fe} * 0.02)`,opacity:n}),l=Bi(r/Ui*100);return e`<div style="${s}"></div><div style="${o}">Lv.${t}<br>${l}%</div>`});var qi=Object.defineProperty,Gi=Object.defineProperties,Hi=Object.getOwnPropertyDescriptors,Xr=Object.getOwnPropertySymbols,Yi=Object.prototype.hasOwnProperty,Xi=Object.prototype.propertyIsEnumerable,Zr=(e,t,r)=>t in e?qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zi=(e,t)=>{for(var r in t||(t={}))Yi.call(t,r)&&Zr(e,r,t[r]);if(Xr)for(var r of Xr(t))Xi.call(t,r)&&Zr(e,r,t[r]);return e},Ki=(e,t)=>Gi(e,Hi(t));const{trunc:Kr}=w.globals,Qi={mode:p.normal,fpsText:"60.00",appearance:0},Qr=new Map([[p.easy,"EASY"],[p.normal,"NORMAL"],[p.hard,"HARD"]]),ae="min(70vw, 70vh)",Jr={position:"absolute",left:`calc(50vw - ${ae} * 0.525)`,top:`calc(50vh + ${ae} * 0.325)`,width:`calc(${ae} * 0.2)`,height:`calc(${ae} * 0.2)`},ie=Z(Qi,e=>({mode:t,fpsText:r,appearance:n})=>{const a=n*100,i=a/2,s=Ki(Zi({},Jr),{backgroundColor:"#696",clipPath:`polygon(0 0, 0 50%, ${i}% ${50+i}%, ${a}% ${a}%)`}),o={position:"absolute",bottom:`calc(${ae} * 0.02)`,left:`calc(${ae} * 0.02)`,color:"white",fontSize:`calc(${ae} * 0.04)`,opacity:n};return e`<div style="${s}"></div><div style="${Jr}"><div style="position:relative;width:100%;height:100%"><div style="${o}">${Qr.get(t)}<br>${r}FPS</div></div></div>`});Ir.subscribe(e=>ie.update(()=>{const t=Kr(e*100);return{fpsText:`${Kr(t/100)}.${(t%100).toString().padStart(2,"0")}`}}));var Ji=Object.defineProperty,Vi=Object.defineProperties,eo=Object.getOwnPropertyDescriptors,Vr=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,ro=Object.prototype.propertyIsEnumerable,en=(e,t,r)=>t in e?Ji(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,no=(e,t)=>{for(var r in t||(t={}))to.call(t,r)&&en(e,r,t[r]);if(Vr)for(var r of Vr(t))ro.call(t,r)&&en(e,r,t[r]);return e},ao=(e,t)=>Vi(e,eo(t));const io={deaths:0,appearance:0},oe="min(70vw, 70vh)",tn={position:"absolute",left:`calc(50vw + ${oe} * 0.325)`,top:`calc(50vh + ${oe} * 0.325)`,width:`calc(${oe} * 0.2)`,height:`calc(${oe} * 0.2)`},Ee=Z(io,e=>({deaths:t,appearance:r})=>{const n=r*100,a=n/2,i=ao(no({},tn),{backgroundColor:"#669",clipPath:`polygon(50% 100%, ${50+a}% ${100-a}%, ${n}% ${100-n}%, 0 100%)`}),s={position:"absolute",bottom:`calc(${oe} * 0.02)`,right:`calc(${oe} * 0.02)`,textAlign:"right",fontSize:`calc(${oe} * 0.04)`,color:"white",opacity:r};return e`<div style="${i}"></div><div style="${tn}"><div style="position:relative;width:100%;height:100%"><div style="${s}">${t}<br>death${t>1?"s":""}</div></div></div>`});var oo=Object.defineProperty,so=Object.defineProperties,lo=Object.getOwnPropertyDescriptors,rn=Object.getOwnPropertySymbols,co=Object.prototype.hasOwnProperty,po=Object.prototype.propertyIsEnumerable,nn=(e,t,r)=>t in e?oo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fo=(e,t)=>{for(var r in t||(t={}))co.call(t,r)&&nn(e,r,t[r]);if(rn)for(var r of rn(t))po.call(t,r)&&nn(e,r,t[r]);return e},ho=(e,t)=>so(e,lo(t));const uo={name:"-",appearance:0},se="min(70vw, 70vh)",an={position:"absolute",left:`calc(50vw + ${se} * 0.325)`,top:`calc(50vh - ${se} * 0.525)`,width:`calc(${se} * 0.2)`,height:`calc(${se} * 0.2)`},Pe=Z(uo,e=>({name:t,appearance:r})=>{const n=r*100,a=n/2,i=ho(fo({},an),{backgroundColor:"#969",clipPath:`polygon(100% 50%, ${100-a}% ${50-a}%, ${100-n}% ${100-n}%, 100% 100%)`}),s={position:"absolute",top:`calc(${se} * 0.02)`,right:`calc(${se} * 0.02)`,textAlign:"right",fontSize:`calc(${se} * 0.04)`,color:"white",opacity:r};return e`<div style="${i}"></div><div style="${an}"><div style="position:relative;width:100%;height:100%"><div style="${s}">Event<br>${t||"-"}</div></div></div>`});var E={swimOrb:{},linearOrb:{},lazer:{},landolt:{}},vo=Object.defineProperty,go=Object.defineProperties,mo=Object.getOwnPropertyDescriptors,on=Object.getOwnPropertySymbols,bo=Object.prototype.hasOwnProperty,$o=Object.prototype.propertyIsEnumerable,sn=(e,t,r)=>t in e?vo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Et=(e,t)=>{for(var r in t||(t={}))bo.call(t,r)&&sn(e,r,t[r]);if(on)for(var r of on(t))$o.call(t,r)&&sn(e,r,t[r]);return e},Pt=(e,t)=>go(e,mo(t));const{pi:yo,pi2:ln,min:St,cos:Ye,sin:Xe}=w.globals,Ze=(e,t,r,n,a)=>{const i=e-r,s=t-n,o=a/2+3;return i*i+s*s<=o*o},cn=(e,t,r,n,a,i)=>{e.save(),e.beginPath(),e.globalAlpha=.5,e.fillStyle=i,e.arc(r,n,a*(2-t/30),0,ln),e.fill(),e.closePath(),e.restore()},pn=(e,t,r,n,a,i,s)=>{e.save(),e.beginPath(),e.globalAlpha=s,e.fillStyle=a,e.strokeStyle=i,e.arc(t,r,n,0,ln),e.fill(),e.stroke(),e.closePath(),e.restore()},N=(e,t,r,n,a=0,i="lime")=>({id:E.swimOrb,time:a,angle:e,radius:t,speed:r,width:n,color:i}),wo=(e,{time:t,angle:r,radius:n,width:a,color:i})=>{const s=v+n*Ye(r),o=v+n*Xe(r);if(t<=30&&cn(e,t,s,o,a,i),t>=15){const l=St(St((t-15)/30,1),(300-t)/30);pn(e,s,o,a,"white",i,l)}},xo=(e,t,r)=>{const{time:n,angle:a,radius:i,speed:s,width:o}=e,l=v+i*Ye(a),c=v+i*Xe(a);return{nextEnemies:n>=300?[]:[Pt(Et({},e),{angle:a+(n<45?0:s),time:n+1})],hit:n<45||n>270?!1:Ze(t,r,l,c,o)}},Q=(e,t,r,n,a,i,s,o=0)=>({id:E.linearOrb,time:o,x:e,y:t,angle:r,speed:n,width:a,fillColor:i,strokeColor:s}),dn=(e,{time:t,x:r,y:n,width:a,fillColor:i,strokeColor:s})=>{if(t<=30&&cn(e,t,r,n,a,s),t>=15){const o=St((t-15)/30,1);pn(e,r,n,a,i,s,o)}},fn=(e,t,r)=>{const{time:n,x:a,y:i,angle:s,speed:o,width:l}=e;if(n<45)return{nextEnemies:[Pt(Et({},e),{time:n+1})],hit:!1};const c=a+o*Ye(s),d=i+o*Xe(s),f=c-v,u=d-v,g=y+l/2;return f*f+u*u>g*g?{nextEnemies:[],hit:!1}:{nextEnemies:[Pt(Et({},e),{x:c,y:d,time:n+1})],hit:Ze(t,r,a,i,l)}},Oo=(e,t,r,n,a,i=0)=>({id:E.orbToCenter,time:i,x:v+y*Ye(e),y:v+y*Xe(e),angle:e+yo,speed:t,width:r,fillColor:n,strokeColor:a}),Eo=(e,t,r)=>{const{x:n,y:a,speed:i}=e;return Ze(v,v,n,a,i-3)?{nextEnemies:[],hit:!1}:fn(e,t,r)};var J={none:{},rotate:{},gravity:{},swap:{},mirror:{},memorial:{}};const hn=e=>e;var ue=({id:e,name:t,wait:r,duration:n,inputEffect:a=hn,afterEffect:i=hn,props:s})=>({id:e,name:t,wait:r,waitTime:0,duration:n,eventTime:0,inputEffect:a,afterEffect:i,props:s});const{infinity:Po}=w.globals;var I=()=>ue({id:J.none,name:"-",wait:Po,duration:0,props:{}}),So=Object.defineProperty,Ao=Object.defineProperties,ko=Object.getOwnPropertyDescriptors,un=Object.getOwnPropertySymbols,Co=Object.prototype.hasOwnProperty,jo=Object.prototype.propertyIsEnumerable,vn=(e,t,r)=>t in e?So(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mo=(e,t)=>{for(var r in t||(t={}))Co.call(t,r)&&vn(e,r,t[r]);if(un)for(var r of un(t))jo.call(t,r)&&vn(e,r,t[r]);return e},To=(e,t)=>Ao(e,ko(t));const{max:Io,cos:Do,sin:Lo}=w.globals,{swimOrb:At,linearOrb:Ro,orbToCenter:Wo}=E,z=e=>e.flatMap(t=>t.id===At?[To(Mo({},t),{time:Io(t.time,270)})]:[]),W=(e,t,r)=>n=>{const{id:a,angle:i,radius:s}=n;if([At,Ro,Wo].includes(a)){const{x:o,y:l}=a===At?{x:v+s*Do(i),y:v+s*Lo(i)}:n,c=o-t,d=l-r,f=60-e;return c*c+d*d<=f*f?[]:[n]}return[n]},Se=(e,t)=>(r,n,a,i)=>{const{id:s,eventTime:o,duration:l}=i;return s===J.none?a===30?{nextEvt:e(r,n),nextEvtTime:a+1}:{nextEvt:i,nextEvtTime:a+1}:s!==J.none&&o<l?{nextEvt:i,nextEvtTime:a+1}:{nextEvt:I(),nextEvtTime:-t.get(r)}},_o=(e,t,r)=>(r.save(),r.resetTransform(),r.translate(v,v),r.rotate(t*e.speed),r.translate(-v,-v),r.drawImage(r.canvas,0,0),r.restore(),e);var gn=(e,t)=>ue({id:J.rotate,name:"\u6D41\u8EE2",wait:300,duration:t,afterEffect:_o,props:{speed:e}});const{document:No,min:mn,max:bn,abs:zo,cos:kt,sin:Ct}=w.globals,jt=(e,t,r,n=0)=>({id:E.lazer,time:n,x:e,y:t,angle:r}),$n=e=>bn(S*2*((e-60)/15),0),yn=e=>bn(mn(e-75,155-e,15),1),Uo=(e,t,r,n,a,i)=>{const s=e-r,o=t-n,l=s*kt(a)+o*Ct(a),c=zo(-s*Ct(a)+o*kt(a))-3;return l>=0&&l<=$n(i)&&c<=yn(i)/2},Bo=({time:e,x:t,y:r,angle:n},a,i)=>({nextEnemies:e>=185?[]:[jt(t,r,n,e+1)],hit:e>45&&e<155&&Uo(a,i,t,r,n,e)}),Fo=(e,t,r,n)=>{const a=1-t/30;e.save(),e.fillStyle=`rgba(255, 255, 0, ${a/2})`,e.beginPath();const i=20+a*40,s=i/2;e.fillRect(r-s,n-s,i,i),e.restore()},Ke=No.createElement("canvas");Ke.width=20,Ke.height=20;const j=Ke.getContext("2d");j.strokeStyle="black",j.lineWidth=1,j.beginPath(),j.fillStyle="#ff0",j.moveTo(0,0),j.lineTo(8,2),j.lineTo(8,18),j.lineTo(0,20),j.closePath(),j.fill(),j.stroke(),j.fillStyle="#66f",j.fillRect(5,5,15,10),j.strokeRect(5,5,15,10),j.beginPath(),j.moveTo(10,10),j.lineTo(20,10),j.closePath(),j.stroke();const qo=(e,t,r,n)=>{e.save(),e.strokeStyle="rgba(255, 255, 255, 0.3)",e.lineWidth=1,e.beginPath(),e.moveTo(t,r),e.lineTo(t+S*2*kt(n),r+S*2*Ct(n)),e.closePath(),e.stroke(),e.restore()},Go=(e,t,r,n)=>{e.save();const a=yn(n),i=e.createLinearGradient(t,r-a,t,r+a);i.addColorStop(0,"rgba(255, 255, 0, 0)"),i.addColorStop(.25,"rgba(255, 255, 0, 1)"),i.addColorStop(.75,"rgba(255, 255, 0, 1)"),i.addColorStop(1,"rgba(255, 255, 0, 0)"),e.fillStyle=i,e.fillRect(t,r-a,$n(n),a*2),e.restore()},Ho=(e,{time:t,x:r,y:n,angle:a})=>{t>=15&&t<=60&&qo(e,r,n,a),e.save(),e.translate(r,n),e.rotate(a),e.translate(-r,-n),t<30&&Fo(e,t,r,n),t>15&&(e.globalAlpha=mn((t-15)/30,(185-t)/30,1),e.drawImage(Ke,r-10,n-10)),t>60&&t<155&&(e.globalAlpha=1,Go(e,r,n,t)),e.restore()};var Yo=Object.defineProperty,Xo=Object.defineProperties,Zo=Object.getOwnPropertyDescriptors,wn=Object.getOwnPropertySymbols,Ko=Object.prototype.hasOwnProperty,Qo=Object.prototype.propertyIsEnumerable,xn=(e,t,r)=>t in e?Yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mt=(e,t)=>{for(var r in t||(t={}))Ko.call(t,r)&&xn(e,r,t[r]);if(wn)for(var r of wn(t))Qo.call(t,r)&&xn(e,r,t[r]);return e},Tt=(e,t)=>Xo(e,Zo(t));const{max:It}=w.globals,Jo=(e,t)=>{const{radius:r,time:n}=e;return n<30?e:r===0?Tt(Mt({},e),{time:It(n,270)}):Tt(Mt({},e),{radius:It(r-t,0)})},Vo=(e,{props:{gravity:t}})=>{const{pr:r,enemies:n}=e;return Tt(Mt({},e),{pr:It(r-t,10),enemies:n.map(a=>a.id!==E.swimOrb?a:Jo(a,t))})};var Qe=(e,t)=>ue({id:J.gravity,name:"\u91CD\u529B",wait:300,duration:t,inputEffect:Vo,props:{gravity:e,lines:[]}}),es=Object.defineProperty,ts=Object.defineProperties,rs=Object.getOwnPropertyDescriptors,On=Object.getOwnPropertySymbols,ns=Object.prototype.hasOwnProperty,as=Object.prototype.propertyIsEnumerable,En=(e,t,r)=>t in e?es(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,is=(e,t)=>{for(var r in t||(t={}))ns.call(t,r)&&En(e,r,t[r]);if(On)for(var r of On(t))as.call(t,r)&&En(e,r,t[r]);return e},os=(e,t)=>ts(e,rs(t));const{pi:Pn,max:Sn,sqrt:ss,cos:An,sin:kn}=w.globals,Cn=(e,t,r,n,a,i,s,o)=>({id:E.landolt,x:e,y:t,angle:r,radius:n,angleSpeed:a,radiusSpeed:i,holeWidth:s,lineWidth:o}),ls=(e,{x:t,y:r,angle:n,radius:a,holeWidth:i,lineWidth:s})=>{e.save(),e.beginPath();const o=Sn(a-s,0),l=Sn(a+s,0),c=e.createRadialGradient(t,r,o,t,r,l);c.addColorStop(0,"rgba(200, 200, 200, 0.5)"),c.addColorStop(.25,"rgba(200, 200, 200, 1)"),c.addColorStop(.75,"rgba(200, 200, 200, 1)"),c.addColorStop(1,"rgba(200, 200, 200, 0.5)"),e.strokeStyle=c,e.lineWidth=s*2,e.lineCap="round",e.arc(t,r,a,n-i/2,n+i/2,!0),e.stroke(),e.restore()},cs=(e,t,r,n)=>{const a=e-v,i=t-v;return r>ss(a*a+i*i)+y+n*2},ps=(e,t,r,n,a,i,s,o)=>{const l=s-e,c=o-t,d=l*l+c*c,f=n-i/2-3,u=n+i/2+3;if(d<f*f||d>u*u)return!1;const g=r-a/2+Pn/2,$=r+a/2-Pn/2;return An(g)*l+kn(g)*c<0||An($)*l+kn($)*c<0},ds=(e,t,r)=>{const{x:n,y:a,angle:i,radius:s,angleSpeed:o,radiusSpeed:l,holeWidth:c,lineWidth:d}=e;return{nextEnemies:cs(n,a,s,d)?[]:[os(is({},e),{angle:i+o,radius:s+l})],hit:ps(n,a,i,s,c,d,t,r)}};var fs=Object.defineProperty,hs=Object.defineProperties,us=Object.getOwnPropertyDescriptors,jn=Object.getOwnPropertySymbols,vs=Object.prototype.hasOwnProperty,gs=Object.prototype.propertyIsEnumerable,Mn=(e,t,r)=>t in e?fs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ae=(e,t)=>{for(var r in t||(t={}))vs.call(t,r)&&Mn(e,r,t[r]);if(jn)for(var r of jn(t))gs.call(t,r)&&Mn(e,r,t[r]);return e},ke=(e,t)=>hs(e,us(t));const{pi:ms,sqrt:bs,cos:Tn,sin:In,atan2:Dn}=w.globals,Ln={inner:!1,outer:!1,quick:!1,brake:!1},$s=(e,{eventTime:t,duration:r,props:{speed:n}})=>{if(t>=r)return{enemies:e.enemies.map(m=>m.id===E.swimOrb?ke(Ae({},m),{color:"lime"}):m)};const{inner:a,outer:i,quick:s,brake:o,enemies:l}=e,c=i-a,d=o-s;if(c===0&&d===0)return ke(Ae({},Ln),{enemies:l.map(m=>m.id===E.swimOrb?ke(Ae({},m),{color:"red"}):m)});const f=Dn(d,c),u=Tn(f),g=In(f),$=n*u,b=n*g;return ke(Ae({},Ln),{enemies:l.map(m=>{if(m.id!==E.swimOrb)return m;const{angle:O,radius:P}=m,A=P*Tn(O)+$,M=P*In(O)+b,k=Dn(M,A),T=bs(A*A+M*M),be=y+m.width;return ke(Ae({},m),{angle:T>be?k+ms:k,radius:T>be?be*2-T:T,color:"red"})})})};var Je=(e,t)=>ue({id:J.swap,name:"\u904D\u6191",wait:300,duration:t,inputEffect:$s,props:{speed:e}}),ys=Object.defineProperty,ws=Object.defineProperties,xs=Object.getOwnPropertyDescriptors,Rn=Object.getOwnPropertySymbols,Os=Object.prototype.hasOwnProperty,Es=Object.prototype.propertyIsEnumerable,Wn=(e,t,r)=>t in e?ys(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ps=(e,t)=>{for(var r in t||(t={}))Os.call(t,r)&&Wn(e,r,t[r]);if(Rn)for(var r of Rn(t))Es.call(t,r)&&Wn(e,r,t[r]);return e},Ss=(e,t)=>ws(e,xs(t));const{pi:Ve,min:As,cos:_n,sin:Nn,random:ks}=w.globals,Cs=({playerInvincible:e,pa:t,pr:r,enemies:n},a)=>{const{time:i}=a.props,s=As(i/60,1);xe(t-Ve,s,"cyan");const o=v+r*_n(-t+Ve),l=v+r*Nn(-t+Ve);return(s===1&&e===0||ks()<.5)&&qe(o,l),{pa:s===1&&e===0&&n.some(({id:c,angle:d,radius:f,width:u})=>{if(c===E.swimOrb){const g=v+f*_n(d),$=v+f*Nn(d);return Ze(g,$,o,l,u)}return!1})?t-Ve:t,evt:Ss(Ps({},a),{props:{time:i+1}}),enemies:e>0?n.flatMap(W(e,o,l)):n}};var Dt=e=>ue({id:J.mirror,name:"\u88CF\u73FE",wait:300,duration:e,inputEffect:Cs,props:{time:0}}),js=Object.defineProperty,Ms=Object.defineProperties,Ts=Object.getOwnPropertyDescriptors,zn=Object.getOwnPropertySymbols,Is=Object.prototype.hasOwnProperty,Ds=Object.prototype.propertyIsEnumerable,Un=(e,t,r)=>t in e?js(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ls=(e,t)=>{for(var r in t||(t={}))Is.call(t,r)&&Un(e,r,t[r]);if(zn)for(var r of zn(t))Ds.call(t,r)&&Un(e,r,t[r]);return e},Rs=(e,t)=>Ms(e,Ts(t));const{pi2:Ws,infinity:_s}=w.globals,Ns=({deaths:e,pa:t},r)=>{const{props:{done:n,speed:a}}=r;return{pa:n?t+a:t+a-e*Ws,evt:Rs(Ls({},r),{props:{done:!0,speed:a+1e-4}})}};var zs=()=>ue({id:J.memorial,name:"\u56DE\u5411",wait:300,duration:_s,inputEffect:Ns,props:{done:!1,speed:0}}),Us=Object.defineProperty,Bs=Object.defineProperties,Fs=Object.getOwnPropertyDescriptors,Bn=Object.getOwnPropertySymbols,qs=Object.prototype.hasOwnProperty,Gs=Object.prototype.propertyIsEnumerable,Fn=(e,t,r)=>t in e?Us(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ce=(e,t)=>{for(var r in t||(t={}))qs.call(t,r)&&Fn(e,r,t[r]);if(Bn)for(var r of Bn(t))Gs.call(t,r)&&Fn(e,r,t[r]);return e},je=(e,t)=>Bs(e,Fs(t));const{pi:V,pi2:Hs,infinity:qn,max:Ys,trunc:Xs,cos:Lt,sin:Rt,atan2:Zs,random:G}=w.globals,Ks=new Map([[p.easy,40],[p.normal,20],[p.hard,10]]),Qs=new Map([[p.easy,()=>6+G()*2],[p.normal,()=>6+G()*3],[p.hard,()=>6+G()*4]]),Js=new Map([[p.easy,()=>-.008*G()],[p.normal,()=>-.01*G()],[p.hard,()=>-.016*G()]]),Vs=(e,t)=>N(-t+.4+G()*V*1.6,G()*y,Js.get(e)(),Qs.get(e)()),el=new Map([[p.easy,.02],[p.normal,.035],[p.hard,.05]]),tl=new Map([[p.easy,500],[p.normal,350],[p.hard,250]]),rl=e=>[...Array(4)].map((t,r)=>{const n=e+r*(V/2);return jt(v+y*Lt(n),v+y*Rt(n),n+1.125*V)}),nl=new Map([[p.easy,1],[p.normal,1.3],[p.hard,1.7]]),al=new Map([[p.easy,500],[p.normal,450],[p.hard,350]]),il=new Map([[p.easy,{speed:.3,hole:V/1.2,width:5}],[p.normal,{speed:.35,hole:V/1.3,width:6}],[p.hard,{speed:.4,hole:V/2,width:7}]]),ol=(e,t)=>{const{speed:r,hole:n,width:a}=il.get(e),i=-t-V*.7,s=v+y*.5*Lt(i),o=v+y*.5*Rt(i);return Cn(s,o,-t,1,.03,r,n,a)},sl=new Map([[p.easy,1],[p.normal,1.5],[p.hard,2]]),ll=new Map([[p.easy,35],[p.normal,20],[p.hard,15]]),Gn=["red","yellow","lime","cyan","blue","magenta"],cl=(e,t,r,n)=>{const a=v+y*Lt(e),i=v+y*Rt(e),s=Zs(r-i,t-a);return Q(a,i,s,1,6,"white",Gn[n])},pl=new Map([[p.easy,400],[p.normal,350],[p.hard,200]]),dl=new Map([[p.easy,{width:6,speed:.08}],[p.normal,{width:7,speed:.013}],[p.hard,{width:8,speed:.017}]]),fl=(e,t,r,n)=>{const{width:a,speed:i}=dl.get(e),s=a*3.5,o=-t-V*.6,l=(r+(n?a:0))%s;return[...Array(Xs(y/s)+1)].map((c,d)=>N(o,l+d*s,i,a,0,"gray"))},hl=new Map([[p.easy,150],[p.normal,100],[p.hard,80]]),ul=new Map([[p.easy,{speed:.8,length:8}],[p.normal,{speed:.9,length:12}],[p.hard,{speed:1,length:16}]]),vl=(e,t)=>{const{speed:r,length:n}=ul.get(e),a=Hs/n;return[...Array(n)].map((i,s)=>Q(v,v,t+s*a,r,6,"white","blue"))},gl=Se((e,t)=>t===1?je(Ce({},gn((G()<.5?-1:1)*el.get(e),qn)),{wait:120}):t===3?je(Ce({},Qe(nl.get(e),qn)),{wait:120}):t===5?je(Ce({},Je(sl.get(e),e===p.hard?30:60)),{wait:60}):t===9?zs():I(),new Map([[p.easy,0],[p.normal,0],[p.hard,0]])),ml=(e,t)=>e===6?t.map(r=>r.id===E.swimOrb?je(Ce({},r),{color:"lime"}):r):e===5?t.filter(({id:r})=>r!==E.landolt):e===8?t.map(r=>r.id===E.lazer?je(Ce({},r),{time:Ys(r.time,155)}):r):e===9?z(t):t,Wt=(e=30,t=0,r=0,n=0,a=0,i=0,s=0,o=0,l=!1,c=0,d=0)=>(f,u,g,{enemies:$,px:b,py:m,pa:O,pr:P,playerInvincible:A,evt:M})=>{const k=(u-1)%10,T=t>=Ks.get(f),be=k>=2&&k<=7&&r>=tl.get(f),$a=k===4&&n>=al.get(f),at=k>=6&&a>=ll.get(f),Qt=k>=7&&o>=pl.get(f),Jt=k>=8&&c>=hl.get(f),_p=k===9?[]:[T?[Vs(f,O)]:[],be?rl(-O):[],$a?[ol(f,O)]:[],at?[cl(i,b,m,s)]:[],Qt?fl(f,O,P,l):[],Jt?vl(f,d):[]].flat(),ya=(A>0?$.flatMap(W(A,b,m)):$).concat(_p),{nextEvt:Np,nextEvtTime:zp}=k%2?gl(f,k,e,M):{nextEvt:I(),nextEvtTime:30};return{enemies:g?ml(k,ya):ya,nextStage:Wt(zp,T?0:t+1,be?0:r+1,$a?0:n+1,at?0:a+1,at?i+.5:i,at?(s+1)%Gn.length:s,Qt?0:o+1,Qt?!l:l,Jt?0:c+1,Jt?d:d-.3),evt:Np}},{pi:Hn,pi2:bl,trunc:Yn}=w.globals,$l=new Map([[p.easy,e=>200-e*10],[p.normal,e=>160-e*10],[p.hard,e=>120-e*8]]),Xn=new Map([[p.easy,e=>({length:6+Yn(e/2),width:6,speed:1})],[p.normal,e=>({length:7+e,width:6,speed:1})],[p.hard,e=>({length:10+Yn(e/2),width:7,speed:1.5})]]),Zn=(e,t,r,n)=>{const{length:a,width:i,speed:s}=Xn.get(e)(t),o=n?"blue":"magenta";return[...Array(a)].map((l,c)=>{const d=r+bl*(c/a)+(n?0:Hn/a);return n?Q(v,v,d,s,i,"white",o):Oo(d,s,i,"white",o)})},_t=(e=0,t=0)=>(r,n,a,{enemies:i,px:s,py:o,pa:l,pr:c,playerInvincible:d})=>{const f=(n-1)%10,u=$l.get(r)(f),g=[d>0?i.flatMap(W(d,s,o)):i,e===u/2?Zn(r,f,t,!0):[],e>=u&&(r!==p.hard||f>=5)?Zn(r,f,t,!1):[],r===p.hard&&e>=u?[N(-l-.63,c,.01,6)]:[]].flat();return a&&n%10===1?{enemies:z(g),nextStage:Wt(),evt:I()}:{enemies:g,nextStage:_t(e>=u?0:e+1,e>=u?t+Hn/Xn.get(r)(f).length*1.2:t),evt:I()}},{pi:yl,random:wl}=w.globals,xl=new Map([[p.easy,e=>200-e*20],[p.normal,e=>175-e*20],[p.hard,e=>160-e*18]]),Ol=new Map([[p.easy,e=>({length:5,width:8,speed:.01+e*.0015})],[p.normal,e=>({length:5,width:9,speed:.013+e*.002})],[p.hard,e=>({length:7,width:8.3,speed:.016+e*.0026})]]),El=(e,t,r,n)=>{const a=-r+(n?1:-1)*yl*(.3+.4*wl()),{length:i,width:s,speed:o}=Ol.get(e)(t),l=(n?-1:1)*o;return[...Array(i+1-n)].map((c,d)=>N(a,y*((d+n*.5)/i),l,s))},Pl=new Map([[p.easy,e=>Dt(200+e*10)],[p.normal,e=>Dt(250+e*25)],[p.hard,e=>Dt(300+e*25)]]),Sl=new Map([[p.easy,200],[p.normal,100],[p.hard,0]]),Al=Se((e,t)=>Pl.get(e)(t),Sl),Nt=(e=130,t=0,r=0)=>(n,a,i,{enemies:s,evt:o,px:l,py:c,pa:d,playerInvincible:f})=>{const u=(a-1)%10,g=e>=xl.get(n)(u%5),$=[f>0?s.flatMap(W(f,l,c)):s,g?El(n,u%5,d,t):[]].flat(),{nextEvt:b,nextEvtTime:m}=u<5?{nextEvt:o,nextEvtTime:r}:Al(n,u,r,o);return i&&a%10===1?{enemies:z($),nextStage:_t(),evt:I()}:{enemies:$,nextStage:Nt(g?0:e+1,g?1-t:t,m),evt:b}},{pi:kl,cos:Cl,sin:jl,atan2:Ml}=w.globals,Tl=new Map([[p.easy,e=>30-e],[p.normal,e=>20-e],[p.hard,e=>15-e]]),Il=new Map([[p.easy,6],[p.normal,5],[p.hard,6]]),Kn=["red","yellow","lime","cyan","blue","magenta"],Dl=(e,t,r,n,a,i)=>{const s=v+y*Cl(n),o=v+y*jl(n),l=Ml(r-o,t-s);return e<5?[Q(s,o,l,1,a,"white",i)]:[Q(s,o,l,1,a,"white",i),Q(v*2-s,v*2-o,l+kl,1,a,"white",i)]},zt=(e=0,t=0,r=0)=>(n,a,i,{enemies:s,px:o,py:l,playerInvincible:c,evt:d})=>{const f=(a-1)%10,u=e>=Tl.get(n)(f%5),g=[c>0?s.flatMap(W(c,o,l)):s,u?Dl(f,o,l,t,Il.get(n),Kn[r]):[]].flat();return i&&a%10===1?{enemies:z(g),nextStage:Nt(),evt:I()}:{enemies:g,nextStage:zt(u?0:e+1,t+.02,u?(r+1)%Kn.length:r),evt:d}},{pi:Qn,random:ee}=w.globals,Ll=new Map([[p.easy,e=>30-e*2],[p.normal,e=>25-e*2],[p.hard,e=>15-e]]),Rl=new Map([[p.easy,()=>-.008+.016*ee()],[p.normal,()=>-.01+.02*ee()],[p.hard,()=>-.016+.032*ee()]]),Wl=new Map([[p.easy,()=>6+ee()*3],[p.normal,()=>7+ee()*4],[p.hard,()=>8+ee()*5]]),_l=new Map([[p.easy,e=>Je(1,150+e*10)],[p.normal,e=>Je(1.5,200+e*20)],[p.hard,e=>Je(2,250+e*30)]]),Nl=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),zl=Se((e,t)=>_l.get(e)(t),Nl),Ut=(e=0,t=0)=>(r,n,a,{enemies:i,evt:s,px:o,py:l,pa:c,playerInvincible:d})=>{const f=(n-1)%10,u=e>=Ll.get(r)(f),g=[d>0?i.flatMap(W(d,o,l)):i,u?[N(-c+Qn*.2+ee()*Qn*1.6,y*ee(),Rl.get(r)(),Wl.get(r)())]:[]].flat(),{nextEvt:$,nextEvtTime:b}=zl(r,f,t,s);return a&&n%10===1?{enemies:z(g),nextStage:zt(),evt:I()}:{enemies:g,nextStage:Ut(u?0:e+1,b),evt:$}},{pi:Me,pi2:Ul,cos:Bl,sin:Fl,random:U}=w.globals,ql=new Map([[p.easy,e=>60-e*3],[p.normal,e=>54-e*4],[p.hard,e=>26-e*2]]),Gl=new Map([[p.easy,()=>-.008*U()],[p.normal,()=>-.01*U()],[p.hard,()=>-.01*U()]]),Hl=new Map([[p.easy,()=>6+U()*2],[p.normal,()=>6+U()*3],[p.hard,()=>6+U()*4]]),Yl=new Map([[p.easy,e=>500-e*20],[p.normal,e=>300-e*30],[p.hard,e=>250-e*30]]),Xl=new Map([[p.easy,{speed:.4,hole:Me/1.3,width:5}],[p.normal,{speed:.5,hole:Me/1.5,width:6}],[p.hard,{speed:.6,hole:Me/2.3,width:7}]]),Zl=(e,t,r)=>{const{speed:n,hole:a,width:i}=Xl.get(e),s=v+(t<=45?0:y/2*Bl(r)),o=v+(t<=45?0:y/2*Fl(r));return Cn(s,o,U()*Ul,1,U()<.5?.03:-.03,n,a,i)},Bt=(e=0,t=100)=>(r,n,a,{enemies:i,pa:s,px:o,py:l,playerInvincible:c})=>{const d=e>=ql.get(r)(n-40),f=t>=Yl.get(r)((n-1)%5),u=[c>0?i.flatMap(W(c,o,l)):i,d?[N(-s+.4+U()*Me*1.6,y*U(),Gl.get(r)(),Hl.get(r)())]:[],f?[Zl(r,n,Me-s)]:[]].flat();return a&&n%10===1?{enemies:z(u),nextStage:Ut(),evt:I()}:{enemies:u,nextStage:Bt(d?0:e+1,f?0:t+1),evt:I()}},{pi:Kl,pi2:Jn,min:Ql,random:H}=w.globals,Jl=new Map([[p.easy,e=>28-e*2],[p.normal,e=>25-e*2],[p.hard,e=>15-e]]),Vl=new Map([[p.easy,()=>-.008*H()],[p.normal,()=>-.01*H()],[p.hard,()=>-.018*H()]]),ec=new Map([[p.easy,()=>6+H()*2],[p.normal,()=>6+H()*3],[p.hard,()=>6+H()*4]]),tc=new Map([[p.easy,e=>Qe(.5+e*.05,200)],[p.normal,e=>Qe(.5+e*.08,200)],[p.hard,e=>Qe(.5+e*.12,200)]]),rc=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),nc=Se((e,t)=>tc.get(e)(t),rc),Ft=(e=0,t=0,r=0)=>(n,a,i,{enemies:s,evt:o,px:l,py:c,pa:d,playerInvincible:f})=>{const u=(a-1)%10,g=e>=Jl.get(n)(u),$=n!==p.easy&&u>5&&t>=250-u*10,b=[f>0?s.flatMap(W(f,l,c)):s,g?[N(-d+.4+H()*Kl*1.6,y*Ql(.7+H()*.4,1),Vl.get(n)(),ec.get(n)())]:[],$?new Array(10).fill(H()*Jn).map((P,A)=>Q(v,v,A/10*Jn+P,2,7,"white","blue")):[]].flat(),{nextEvt:m,nextEvtTime:O}=nc(n,u,r,o);return i&&a%10===1?{enemies:z(b),nextStage:Bt(),evt:I()}:{enemies:b,nextStage:Ft(g?0:e+1,$?0:t+1,O),evt:m}},{pi:ve,cos:ac,sin:ic,random:_}=w.globals,oc=new Map([[p.easy,e=>30-e*2],[p.normal,e=>27-e*2],[p.hard,e=>14-e]]),sc=new Map([[p.easy,()=>-.008*_()],[p.normal,()=>-.01*_()],[p.hard,()=>-.01*_()]]),lc=new Map([[p.easy,()=>6+_()*2],[p.normal,()=>6+_()*3],[p.hard,()=>6+_()*4]]),cc=new Map([[p.easy,{wait:e=>300-e*10,radius:.7,angle:e=>e+ve*(.9+_()*.2)}],[p.normal,{wait:e=>200-e*10,radius:.8,angle:e=>e+ve*(.9+_()*.2)}],[p.hard,{wait:e=>150-e*10,radius:.95,angle:e=>e+ve*(.8+_()*.4)}]]),qt=(e=0,t=0,r=ve/3)=>(n,a,i,{enemies:s,px:o,py:l,pa:c,playerInvincible:d})=>{const f=e>=oc.get(n)(a-20),{wait:u,radius:g,angle:$}=cc.get(n),b=t>=u(a-20),m=[d>0?s.flatMap(W(d,o,l)):s,f?[N(-c+.4+_()*ve*1.6,_()*y,sc.get(n)(),lc.get(n)())]:[],b?[jt(v+g*y*ac(r),v+g*y*ic(r),$(r))]:[]].flat();return i&&a%10===1?{enemies:z(m),evt:I(),nextStage:Ft()}:{enemies:m,evt:I(),nextStage:qt(f?0:e+1,b?0:t+1,b?r+ve/3:r)}},{pi:pc,pi2:dc,random:Y}=w.globals,fc=new Map([[p.easy,e=>28-e*2],[p.normal,e=>25-e*2],[p.hard,e=>12-e]]),hc=new Map([[p.easy,()=>-.008*Y()],[p.normal,()=>-.01*Y()],[p.hard,()=>-.02*Y()]]),uc=new Map([[p.easy,()=>6+Y()*2],[p.normal,()=>6+Y()*3],[p.hard,()=>6+Y()*4]]),vc=new Map([[p.easy,e=>({speed:.02,rotateCount:e>5?2:1})],[p.normal,e=>({speed:.02,rotateCount:e>5?3:2})],[p.hard,e=>({speed:.05,rotateCount:e>5?4:2})]]),gc=new Map([[p.easy,600],[p.normal,300],[p.hard,0]]),mc=Se((e,t)=>{const{speed:r,rotateCount:n}=vc.get(e)(t);return gn((Y()<.5?-1:1)*r,dc/r*n)},gc),Gt=(e=0,t=0)=>(r,n,a,{enemies:i,evt:s,px:o,py:l,pa:c,playerInvincible:d})=>{const f=(n-1)%10,u=e>=fc.get(r)(f),g=[d>0?i.flatMap(W(d,o,l)):i,u?[N(-c+.4+Y()*pc*1.6,Y()*y,hc.get(r)(),uc.get(r)())]:[]].flat(),{nextEvt:$,nextEvtTime:b}=mc(r,f,t,s);return a&&n%10===1?{enemies:z(g),nextStage:qt(),evt:I()}:{enemies:g,nextStage:Gt(u?0:e+1,b),evt:$}},{pi:bc,pi2:$c,random:D}=w.globals,Vn=new Map([[p.easy,()=>6+D()*2],[p.normal,()=>6+D()*3],[p.hard,()=>6+D()*4]]),yc=new Map([[p.easy,e=>30-e*2],[p.normal,e=>27-e*2],[p.hard,e=>13-e]]),wc=new Map([[p.easy,()=>-.008*D()],[p.normal,()=>-.01*D()],[p.hard,()=>-.016*D()]]),xc=new Map([[p.easy,()=>!1],[p.normal,(e,t)=>e>5&&t>=30-e*2],[p.hard,(e,t)=>e>5&&t>=27-e*2]]),Oc=new Map([[p.easy,()=>.5+D()*.5],[p.normal,()=>.7+D()*.6],[p.hard,()=>1+D()]]),Te=(e=0,t=0)=>(r,n,a,i)=>{const{enemies:s,evt:o,px:l,py:c,pa:d,playerInvincible:f}=i,u=e>=yc.get(r)(n),g=xc.get(r)(n,t),$=[f>0?s.flatMap(W(f,l,c)):s,u?[N(-d+.4+D()*bc*1.6,D()*y,wc.get(r)(),Vn.get(r)())]:[],g?[Q(v+(2*D()-1)*20,v+(2*D()-1)*20,D()*$c,Oc.get(r)(),Vn.get(r)(),"white","blue")]:[]].flat();return a&&n%10===1?{enemies:z($),nextStage:Gt(),evt:o}:{enemies:$,nextStage:Te(u?0:e+1,g?0:t+1),evt:o}};var et=()=>({level:1,mode:p.normal,practice:!1,stage:Te(),evt:I(),playerAngle:0,playerRadius:y/2,playerInvincible:0,deaths:0,frames:0,enemies:[]}),Ec=Object.defineProperty,Pc=Object.defineProperties,Sc=Object.getOwnPropertyDescriptors,ea=Object.getOwnPropertySymbols,Ac=Object.prototype.hasOwnProperty,kc=Object.prototype.propertyIsEnumerable,ta=(e,t,r)=>t in e?Ec(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Cc=(e,t)=>{for(var r in t||(t={}))Ac.call(t,r)&&ta(e,r,t[r]);if(ea)for(var r of ea(t))kc.call(t,r)&&ta(e,r,t[r]);return e},jc=(e,t)=>Pc(e,Sc(t));const{min:ra,max:Mc,round:na,random:aa}=w.globals,Tc=e=>{h.save(),h.beginPath(),h.fillStyle=`rgba(255, 255, 255, ${e})`,h.shadowColor="rgba(255, 255, 255, 0.5)",h.shadowBlur=10,h.font=`${S/4}px serif`,h.textAlign="center",h.fillText("\u8F2A\u5EFB",v,v-S/10),h.closePath(),h.restore()},Ic=e=>{h.save(),h.beginPath(),h.fillStyle=`rgba(255, 255, 255, ${e})`,h.shadowColor="rgba(255, 255, 255, 0.5)",h.shadowBlur=10,h.font=`${S/10}px serif`,h.textAlign="center",h.fillText("\u2212\u56DE\u5411\u2212",v,v+S/30),h.closePath(),h.restore()};var ia=(e=0)=>({mode:t,level:r,practice:n})=>{e===0&&(he.update(()=>({appearance:0,playerAngle:0})),ie.update(()=>({appearance:0})),Ee.update(()=>({appearance:0,deaths:0})),Pe.update(()=>({appearance:0,name:"-"}))),Fe(),Tc(ra(e/60,(165-e)/60,1));const a=Mc(ra((e-75)/30,(165-e)/60,1),0);if(Ic(a),Ur.update(()=>({startOpacity:(e>105&&!n?na(aa()):1)*a,practiceOpacity:(e>105&&n?na(aa()):1)*a})),Oe.update(()=>({opacity:e>105&&n?1:a})),e===105){const[i,s]=_r().reduce(([o,l],{id:c,param:d})=>c===q.mode?[d,l]:[q.start,q.practice].includes(c)?[o,c]:[o,l],[t,null]);return wt(),Oe.update(()=>({mode:i})),{nextId:x.title,nextArgs:[s===null?105:106],stateUpdate:{mode:i,practice:s===q.practice}}}return wt(),e===165?{nextId:n?x.practice:x.start,nextArgs:[],stateUpdate:{level:n?1:r,stage:Te()}}:{nextId:x.title,nextArgs:[e+1],stateUpdate:e===0?jc(Cc({},et()),{mode:t}):{}}};const{pi2:Dc,min:ge,max:Ht,trunc:Lc}=w.globals,Rc=e=>{h.save(),h.beginPath();const t=1-ge(Ht((e%60-15)/30,0),1);h.fillStyle=`rgba(255, 255, 255, ${t})`,h.shadowColor="rgba(255, 255, 255, 0.5)",h.shadowBlur=10,h.font=`${y/3}px serif`,h.textAlign="center",h.fillText(3-Lc(e/60),v,y/2),h.restore()};var Wc=(e=0)=>({level:t,mode:r})=>{e===0&&(he.update(()=>({level:t})),ie.update(()=>({mode:r})));const n=ge(e/30,1);return he.update(()=>({appearance:n})),ie.update(()=>({appearance:n})),Ee.update(()=>({appearance:n})),Pe.update(()=>({appearance:n,name:"-"})),Fe(),gt(),mt(ge(e/30,1)),xe(0,ge(Ht((e-60)/30,0),1)),h.globalAlpha=ge(Ht((e-30)/30,0),1),qe(v+y/2,v),h.globalAlpha=ge(e/30,1),Ge(),h.globalAlpha=1,e<180&&Rc(e),bt(-(e/160)*Dc),e<180?{nextId:x.start,nextArgs:[e+1],stateUpdate:{}}:{nextId:x.main,nextArgs:[],stateUpdate:{frames:0}}};const _c={opacity:0,top:0,fontSize:0,selected:null},B=e=>()=>yt(q.stage,e),Ie="min(3vw, 3vh)",Nc=e=>({display:e>0?"block":"none",position:"absolute",left:"50%",top:"20%",transform:"translate(-50%, 0)",textAlign:"center",fontSize:`calc(${Ie} * 1.7)`,fontFamily:"serif",color:"white",opacity:e}),zc=e=>({display:e>0?"block":"none",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:e}),F=e=>({outline:"none",border:`2px solid ${e?"white":"transparent"}`,margin:`calc(${Ie} / 4) 0 calc(${Ie} / 2)`,width:`calc(${Ie} * 7)`,fontSize:Ie,color:"white",backgroundColor:"transparent"}),Yt=Z(_c,e=>({opacity:t,selected:r})=>e`<div style=${Nc(t)}>Select Level</div><div style=${zc(t)}><button style=${F(r===1)} onClick=${B(1)}>Lv.1~10</button><button style=${F(r===2)} onClick=${B(2)}>Lv.11~20</button><br><button style=${F(r===3)} onClick=${B(3)}>Lv.21~30</button><button style=${F(r===4)} onClick=${B(4)}>Lv.31~40</button><br><button style=${F(r===5)} onClick=${B(5)}>Lv.41~50</button><button style=${F(r===6)} onClick=${B(6)}>Lv.51~60</button><br><button style=${F(r===7)} onClick=${B(7)}>Lv.61~70</button><button style=${F(r===8)} onClick=${B(8)}>Lv.71~80</button><br><button style=${F(r===9)} onClick=${B(9)}>Lv.81~90</button><button style=${F(r===10)} onClick=${B(10)}>Lv.91~100</button></div>`),{window:te}=w.globals,R={};te.addEventListener("keydown",({key:e})=>{R[e]=!0}),te.addEventListener("keyup",({key:e})=>{R[e]=!1});let oa=[];const tt=e=>{oa=[...e.touches]};te.addEventListener("touchstart",tt),te.addEventListener("touchmove",tt),te.addEventListener("touchend",tt),te.addEventListener("touchcancel",tt);const Uc=(e,t,r)=>{const n=r/t;return e.reduce((a,{clientX:i,clientY:s})=>{const o=i*n<s,l=s<r-i*n;return{left:a.left||o&&l,right:a.right||!o&&!l,up:a.up||!o&&l,down:a.down||o&&!l}},{})};var Xt=()=>{const e=Uc(oa,te.innerWidth,te.innerHeight);return{inner:R.a||R.ArrowLeft||e.left||!1,outer:R.d||R.ArrowRight||e.right||!1,quick:R.w||R.ArrowUp||e.up||!1,brake:R.s||R.ArrowDown||e.down||!1,pause:R.p||!1,escape:R.Escape||!1}};const{min:sa}=w.globals,Bc=[Te,Gt,qt,Ft,Bt,Ut,zt,Nt,_t,Wt];var Fc=(e=0,t=null)=>({mode:r})=>{if(Yt.update(()=>({selected:t,opacity:sa(e/30,(60-e)/30)})),Oe.update(()=>({mode:r,opacity:sa((60-e)/30,1)})),e===30){if(Xt().escape)return Yt.update(()=>({opacity:0})),Oe.update(()=>({opacity:0})),{nextId:x.title,nextArgs:[],stateUpdate:{}};const[n,a]=_r().reduce(([i,s],{id:o,param:l})=>o===q.mode?[l,s]:[i,l],[r,null]);return{nextId:x.practice,nextArgs:[a===null?30:31,a],stateUpdate:{mode:n,level:a&&(a-1)*10+1,stage:(Bc[a-1]||Te)()}}}return wt(),e<60?{nextId:x.practice,nextArgs:[e+1,t],stateUpdate:{}}:{nextId:x.start,nextArgs:[],stateUpdate:{}}};const qc=new Map([[E.swimOrb,xo],[E.linearOrb,fn],[E.orbToCenter,Eo],[E.lazer,Bo],[E.landolt,ds]]),la=new Map([[E.swimOrb,wo],[E.linearOrb,dn],[E.orbToCenter,dn],[E.lazer,Ho],[E.landolt,ls]]);var Gc=Object.defineProperty,Hc=Object.defineProperties,Yc=Object.getOwnPropertyDescriptors,rt=Object.getOwnPropertySymbols,ca=Object.prototype.hasOwnProperty,pa=Object.prototype.propertyIsEnumerable,da=(e,t,r)=>t in e?Gc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zt=(e,t)=>{for(var r in t||(t={}))ca.call(t,r)&&da(e,r,t[r]);if(rt)for(var r of rt(t))pa.call(t,r)&&da(e,r,t[r]);return e},Kt=(e,t)=>Hc(e,Yc(t)),Xc=(e,t)=>{var r={};for(var n in e)ca.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&rt)for(var n of rt(e))t.indexOf(n)<0&&pa.call(e,n)&&(r[n]=e[n]);return r};const{pi2:fa,cos:Zc,sin:Kc,min:Qc,max:ha,random:Jc}=w.globals,Vc=()=>({state:Xt()}),ep=({escape:e,mode:t})=>({returns:e?{nextId:x.title,nextArgs:[],stateUpdate:Kt(Zt({},et()),{mode:t})}:!1}),tp=({pause:e,pauseTime:t})=>({returns:e&&t>10?{nextId:x.pause,nextArgs:[0],stateUpdate:{}}:!1}),rp=e=>{var t=e,{evt:r}=t,n=Xc(t,["evt"]);return r.waitTime>=r.wait?{state:r.inputEffect(n,r)}:{}},np=({inner:e,outer:t,quick:r,brake:n,pa:a,pr:i})=>({state:{pa:a+.007+(r-n)*.005,pr:Qc(ha(i+(t-e)*2,10),y-10)}}),ap=()=>(gt(),mt(),bt(),{}),ua=({pa:e,pr:t})=>({state:{px:v+t*Zc(-e),py:v+t*Kc(-e)}}),ip=({practice:e,pa:t,pr:r,level:n,deaths:a,frames:i})=>{const s=t>=fa,o=n+(s?1:0);if(e&&s&&o%10===1)return{returns:{nextId:x.title,nextArgs:[],stateUpdate:{}}};if(n===101){if(a>=100)return{returns:{nextId:x.title,nextArgs:[],stateUpdate:{}}};xe(t);const{state:{px:l,py:c}}=ua({pa:t,pr:r});return qe(l,c),Ge(),{returns:{nextId:x.over,nextArgs:[],stateUpdate:{frames:i+1}}}}return{state:{pa:s?t%fa:t,level:o,levelUp:s}}},op=({playerInvincible:e,pa:t,px:r,py:n})=>(xe(t),(e===0||Jc()<.5)&&qe(r,n),{}),sp=({mode:e,level:t,levelUp:r,stage:n,pa:a,pr:i,px:s,py:o,playerInvincible:l,enemies:c,evt:d})=>{const f=n(e,t,r,{px:s,py:o,pa:a,pr:i,playerInvincible:l,enemies:c,evt:d});return{state:{stage:f.nextStage,evt:f.evt,enemies:f.enemies}}},lp=({enemies:e,px:t,py:r})=>{const n=e.reduce((a,i)=>{const{id:s}=i,{nextEnemies:o,hit:l}=qc.get(s)(i,t,r);return la.get(s)(h,i),{nextEnemies:a.nextEnemies.concat(o),hit:a.hit||l}},{nextEnemies:[],hit:!1});return{state:{enemies:n.nextEnemies,hit:n.hit}}},cp=({evt:e})=>{const{eventTime:t,duration:r,waitTime:n,wait:a,afterEffect:i,props:s}=e,o=n>=a;return Wr(o?1-t/r:n/a),{state:{evt:Kt(Zt({},e),{waitTime:n+1,eventTime:o?t+1:0,props:o?i(s,t,h):s})}}},pp=({mode:e,level:t,pa:r,evt:n})=>(he.update(()=>({level:t,playerAngle:r})),ie.update(()=>({mode:e})),Pe.update(()=>({name:n.name})),Ge(),{}),dp=({pa:e,pr:t})=>({state:{playerAngle:e,playerRadius:t}}),fp=e=>{const{level:t,mode:r,practice:n,stage:a,evt:i,playerAngle:s,playerRadius:o,playerInvincible:l,deaths:c,frames:d,enemies:f,hit:u}=e;return u&&l===0?(Ee.update(()=>({deaths:c+1})),{returns:{nextId:x.death,nextArgs:[],stateUpdate:{level:t,mode:r,practice:n,stage:a,evt:i,playerAngle:s,playerRadius:o,playerInvincible:l,deaths:c+1,frames:d+1,enemies:f}}}):{}},hp=({pauseTime:e,level:t,mode:r,practice:n,stage:a,evt:i,playerAngle:s,playerRadius:o,playerInvincible:l,deaths:c,frames:d,enemies:f})=>({returns:{nextId:x.main,nextArgs:[e+1],stateUpdate:{level:t,mode:r,practice:n,stage:a,evt:i,playerAngle:s,playerRadius:o,playerInvincible:ha(l-1,0),deaths:c,frames:d+1,enemies:f}}});var up=(e=0)=>t=>[Vc,ep,tp,ap,rp,np,ip,ua,op,sp,lp,cp,pp,dp,fp,hp].reduce((r,n,a,i)=>{const{state:s,returns:o}=n(r);return o?(i.splice(a),o):Object.assign(r,s)},Kt(Zt({},t),{pauseTime:e,pa:t.playerAngle,pr:t.playerRadius})),vp=Object.defineProperty,gp=Object.defineProperties,mp=Object.getOwnPropertyDescriptors,va=Object.getOwnPropertySymbols,bp=Object.prototype.hasOwnProperty,$p=Object.prototype.propertyIsEnumerable,ga=(e,t,r)=>t in e?vp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yp=(e,t)=>{for(var r in t||(t={}))bp.call(t,r)&&ga(e,r,t[r]);if(va)for(var r of va(t))$p.call(t,r)&&ga(e,r,t[r]);return e},wp=(e,t)=>gp(e,mp(t)),xp=e=>({mode:t})=>{const{escape:r,pause:n}=Xt();return r?{nextId:x.title,nextArgs:[],stateUpdate:wp(yp({},et()),{mode:t})}:e>10&&n?{nextId:x.main,nextArgs:[0],stateUpdate:{}}:{nextId:x.pause,nextArgs:[e+1],stateUpdate:{}}};const{pi2:ma,cos:Op,sin:Ep}=w.globals,Pp=(e,t,r)=>{h.save(),h.beginPath(),h.fillStyle=`rgba(255, 0, 0, ${1-r/90})`,h.arc(e,t,20+r/4.5,0,ma),h.fill(),h.closePath(),h.restore()},Sp=(e,t,r)=>{h.save(),h.beginPath();const n=h.createRadialGradient(e,t,0,e,t,y*2);n.addColorStop(0,"rgba(255, 0, 0, 0)"),n.addColorStop(.05,"rgba(255, 0, 0, 0)"),n.addColorStop(.3+.7*(r/90),"rgba(255, 0, 0, 0.5)"),h.fillStyle=n,h.arc(e,t,y*2,0,ma),h.fill(),h.closePath(),h.restore()};var Ap=(e=0)=>({playerAngle:t,playerRadius:r,enemies:n,evt:{wait:a,waitTime:i,eventTime:s,duration:o,afterEffect:l,props:c}})=>{Fe(),gt(),mt(),xe(t);const d=v+r*Op(-t),f=v+r*Ep(-t);return Pp(d,f,e),n.forEach(u=>la.get(u.id)(h,u)),Ge(),bt(),Wr(i>=a?1-s/o:i/a),Sp(d,f,e),l(c,s,h),e<90?{nextId:x.death,nextArgs:[e+1],stateUpdate:{}}:{nextId:x.main,nextArgs:[],stateUpdate:{playerInvincible:60,playerAngle:0,playerRadius:y/2}}};const{pi2:kp,min:nt,trunc:me}=w.globals,Cp=e=>{h.save(),h.fillStyle=`rgba(255, 255, 255, ${e})`,h.arc(v,v,y,0,kp),h.restore()},jp=e=>{h.save(),h.beginPath(),h.fillStyle=`rgba(0, 0, 0, ${e})`,h.shadowColor="rgba(0, 0, 0, 0.5)",h.shadowBlur=10,h.font=`${S/4}px serif`,h.textAlign="center",h.fillText("\u89E3\u8131",v,v-S/8),h.closePath(),h.restore()},Mp=e=>{h.save(),h.beginPath(),h.fillStyle=`rgba(0, 0, 0, ${e})`,h.shadowColor="rgba(0, 0, 0, 0.5)",h.shadowBlur=10,h.font=`${S/10}px serif`,h.textAlign="center",h.fillText("GAME OVER",v,v),h.closePath(),h.restore()},Tp=e=>{const t=e/60,r=me(t/60).toString().padStart(2,"0"),n=(me(t)%60).toString().padStart(2,"0"),a=me((t-me(t))*1e3).toString().padStart(3,"0");return`${r}:${n}.${a}`},Ip=(e,t,r,n)=>{h.save(),h.beginPath(),h.fillStyle=`rgba(0, 0, 0, ${n})`,h.shadowColor="rgba(0, 0, 0, 0.5)",h.shadowBlur=10,h.font=`${S/20}px serif`,h.textAlign="center",h.fillText(`Mode: ${Qr.get(e)}`,v,v+S*.1),h.fillText(`Death${t>=2?"s":""}: ${t}`,v,v+S*.2),h.fillText(`Time: ${r}`,v,v+S*.3)};var Dp=(e=0,t=null)=>({mode:r,deaths:n,frames:a})=>{if(e>690)return{nextId:x.over,nextArgs:[e,t],stateUpdate:{}};if(e<=120){const i=1-e/120;he.update(()=>({appearance:i,level:100})),ie.update(()=>({appearance:i})),Ee.update(()=>({appearance:i})),Pe.update(()=>({appearance:i})),vt.update(()=>({opacity:i}))}if(e>=120&&e<=420){const i=me((e-120)*.85),s=me((i+102)/2),o=`rgb(${i}, ${i}, ${i})`,l=`rgb(${s}, ${s}, ${s})`;document.body.style.backgroundImage=`radial-gradient(circle closest-side, ${o} 60%, ${l} 100%, #666 200%)`}return e===420&&vt.update(()=>({opacity:1})),e>=420&&(Fe(),Cp(nt((e-420)/120,1))),e>=420&&jp(nt((e-420)/120,1)),e>=570&&Mp(nt((e-570)/60,1)),e>=630&&Ip(r,n,t,nt((e-630)/60,1)),{nextId:x.over,nextArgs:[e+1,t||Tp(a)],stateUpdate:{}}};const{now:Lp}=w.globals,Rp=new Map([[x.title,ia],[x.start,Wc],[x.practice,Fc],[x.main,up],[x.pause,xp],[x.death,Ap],[x.over,Dp]]),ba=(e,t)=>()=>{Oi(Lp());const{nextId:r,nextArgs:n,stateUpdate:a}=e(t);return ba(Rp.get(r)(...n),Object.assign(t,a))},{bind:Wp}=w.hyperhtml;Wp(document.body)` ${vt.render()} ${he.render()} ${ie.render()} ${Ee.render()} ${Pe.render()} ${Ur.render()} ${Yt.render()} ${Oe.render()}`,wi(ba(ia(),et()))})();
