(function(){"use strict";/*! (c) Andrea Giammarchi - ISC */var Qt={};try{Qt.WeakMap=WeakMap}catch(t){Qt.WeakMap=function(e,r){var n=r.defineProperty,a=r.hasOwnProperty,s=i.prototype;return s.delete=function(c){return this.has(c)&&delete c[this._]},s.get=function(c){return this.has(c)?c[this._]:void 0},s.has=function(c){return a.call(c,this._)},s.set=function(c,l){return n(c,this._,{configurable:!0,value:l}),this},i;function i(c){n(this,"_",{value:"_@ungap/weakmap"+e++}),c&&c.forEach(o,this)}function o(c){this.set(c[0],c[1])}}(Math.random(),Object)}var nt=Qt.WeakMap;/*! (c) Andrea Giammarchi - ISC */var te={};try{te.WeakSet=WeakSet}catch(t){(function(e,r){var n=a.prototype;n.add=function(s){return this.has(s)||r(s,this._,{value:!0,configurable:!0}),this},n.has=function(s){return this.hasOwnProperty.call(s,this._)},n.delete=function(s){return this.has(s)&&delete s[this._]},te.WeakSet=a;function a(){r(this,"_",{value:"_@ungap/weakmap"+e++})}})(Math.random(),Object.defineProperty)}var pa=te.WeakSet;const{indexOf:da,slice:Wp}=[],at=(t,e,r,n,a,s)=>{const i="selectedIndex"in e;let o=i;for(;n<a;){const c=t(r[n],1);if(e.insertBefore(c,s),i&&o&&c.selected){o=!o;let{selectedIndex:l}=e;e.selectedIndex=l<0?n:da.call(e.querySelectorAll("option"),c)}n++}},fa=(t,e)=>t==e,ua=t=>t,Xe=(t,e,r,n,a,s,i)=>{const o=s-a;if(o<1)return-1;for(;r-e>=o;){let c=e,l=a;for(;c<r&&l<s&&i(t[c],n[l]);)c++,l++;if(l===s)return e;e=c+1}return-1},ha=(t,e,r,n,a,s)=>{for(;n<a&&s(r[n],t[e-1]);)n++,e--;return e===0},ee=(t,e,r,n,a)=>r<n?t(e[r],0):0<r?t(e[r-1],-0).nextSibling:a,gt=(t,e,r,n)=>{for(;r<n;)ma(t(e[r++],-1))},$t=-1,St=1,Mt=0,va=50,ga=(t,e,r,n,a,s,i,o)=>{let c=0,l=n<o?n:o;const d=Array(l++),f=Array(l);f[0]=-1;for(let $=1;$<l;$++)f[$]=i;const h=a.slice(s,i);for(let $=e;$<r;$++){const b=h.indexOf(t[$]);if(-1<b){const O=b+s;c=wa(f,l,O),-1<c&&(f[c]=O,d[c]={newi:$,oldi:O,prev:d[c-1]})}}for(c=--l,--i;f[c]>i;)--c;l=o+n-c;const g=Array(l);let w=d[c];for(--r;w;){const{newi:$,oldi:b}=w;for(;r>$;)g[--l]=St,--r;for(;i>b;)g[--l]=$t,--i;g[--l]=Mt,--r,--i,w=w.prev}for(;r>=e;)g[--l]=St,--r;for(;i>=s;)g[--l]=$t,--i;return g},$a=(t,e,r,n,a,s,i)=>{const o=r+s,c=[];let l,d,f,h,g,w,$;t:for(l=0;l<=o;l++){if(l>va)return null;for($=l-1,g=l?c[l-1]:[0,0],w=c[l]=[],d=-l;d<=l;d+=2){for(d===-l||d!==l&&g[$+d-1]<g[$+d+1]?h=g[$+d+1]:h=g[$+d-1]+1,f=h-d;h<s&&f<r&&i(n[a+h],t[e+f]);)h++,f++;if(h===s&&f===r)break t;w[l+d]=h}}const b=Array(l/2+o/2);let O=b.length-1;for(l=c.length-1;l>=0;l--){for(;h>0&&f>0&&i(n[a+h-1],t[e+f-1]);)b[O--]=Mt,h--,f--;if(!l)break;$=l-1,g=l?c[l-1]:[0,0],d=h-f,d===-l||d!==l&&g[$+d-1]<g[$+d+1]?(f--,b[O--]=St):(h--,b[O--]=$t)}return b},ba=(t,e,r,n,a,s,i,o,c)=>{const l=[],d=t.length;let f=i,h=0;for(;h<d;)switch(t[h++]){case Mt:a++,f++;break;case St:l.push(n[a]),at(e,r,n,a++,a,f<o?e(s[f],0):c);break;case $t:f++;break}for(h=0;h<d;)switch(t[h++]){case Mt:i++;break;case $t:-1<l.indexOf(s[i])?i++:gt(e,s,i++,i);break}},wa=(t,e,r)=>{let n=1,a=e;for(;n<a;){const s=(n+a)/2>>>0;r<t[s]?a=s:n=s+1}return n},ya=(t,e,r,n,a,s,i,o,c,l,d,f,h)=>{ba($a(r,n,s,i,o,l,f)||ga(r,n,a,s,i,o,c,l),t,e,r,n,i,o,d,h)},ma=t=>(t.remove||_a).call(t);function _a(){const{parentNode:t}=this;t&&t.removeChild(this)}/*! (c) 2018 Andrea Giammarchi (ISC) */const st=(t,e,r,n)=>{n||(n={});const a=n.compare||fa,s=n.node||ua,i=n.before==null?null:s(n.before,0),o=e.length;let c=o,l=0,d=r.length,f=0;for(;l<c&&f<d&&a(e[l],r[f]);)l++,f++;for(;l<c&&f<d&&a(e[c-1],r[d-1]);)c--,d--;const h=l===c,g=f===d;if(h&&g)return r;if(h&&f<d)return at(s,t,r,f,d,ee(s,e,l,o,i)),r;if(g&&l<c)return gt(s,e,l,c),r;const w=c-l,$=d-f;let b=-1;if(w<$){if(b=Xe(r,f,d,e,l,c,a),-1<b)return at(s,t,r,f,b,s(e[l],0)),at(s,t,r,b+w,d,ee(s,e,c,o,i)),r}else if($<w&&(b=Xe(e,l,c,r,f,d,a),-1<b))return gt(s,e,l,b),gt(s,e,b+$,c),r;return w<2||$<2?(at(s,t,r,f,d,s(e[l],0)),gt(s,e,l,c),r):w===$&&ha(r,d,e,l,c,a)?(at(s,t,r,f,d,ee(s,e,c,o,i)),r):(ya(s,t,r,f,d,$,e,l,c,w,o,a,i),r)};/*! (c) Andrea Giammarchi - ISC */var Ze={};Ze.CustomEvent=typeof CustomEvent=="function"?CustomEvent:function(t){return e[t]=new e("").constructor[t],e;function e(r,n){n||(n={});var a=document.createEvent("CustomEvent");return a.initCustomEvent(r,!!n.bubbles,!!n.cancelable,n.detail),a}}("prototype");var Ke=Ze.CustomEvent;/*! (c) Andrea Giammarchi - ISC */var re={};try{re.Map=Map}catch(t){re.Map=function(){var r=0,n=[],a=[];return{delete:function(i){var o=s(i);return o&&(n.splice(r,1),a.splice(r,1)),o},forEach:function(o,c){n.forEach(function(l,d){o.call(c,a[d],l,this)},this)},get:function(o){return s(o)?a[r]:void 0},has:function(o){return s(o)},set:function(o,c){return a[s(o)?r:n.push(o)-1]=c,this}};function s(i){return r=n.indexOf(i),-1<r}}}var Oa=re.Map;function At(){return this}function Pa(t){const e=new nt,r=Object.create,n=(o,c,l)=>(o.set(c,l),l),a=(o,c,l,d)=>{const f=c.get(o)||s(o,c);switch(typeof d){case"object":case"function":const h=f.w||(f.w=new nt);return h.get(d)||n(h,d,new o(l));default:const g=f.p||(f.p=r(null));return g[d]||(g[d]=new o(l))}},s=(o,c)=>{const l={w:null,p:null};return c.set(o,l),l},i=o=>{const c=new Oa;return e.set(o,c),c};Object.defineProperties(At,{for:{configurable:!0,value(o,c){return a(this,e.get(o)||i(o),o,c==null?"default":c)}}}),Object.defineProperties(At.prototype,{handleEvent:{value(o){const c=o.currentTarget;this["getAttribute"in c&&c.getAttribute("data-call")||"on"+o.type](o)}},html:ne("html",t),svg:ne("svg",t),state:ne("state",function(){return this.defaultState}),defaultState:{get(){return{}}},dispatch:{value(o,c){const{_wire$:l}=this;if(l){const d=new Ke(o,{bubbles:!0,cancelable:!0,detail:c});return d.component=this,(l.dispatchEvent?l:l.firstChild).dispatchEvent(d)}return!1}},setState:{value(o,c){const l=this.state,d=typeof o=="function"?o.call(this,l):o;for(const f in d)l[f]=d[f];return c!==!1&&this.render(),this}}})}const ne=(t,e)=>{const r="_"+t+"$";return{get(){return this[r]||Je(this,r,e.call(this,t))},set(n){Je(this,r,n)}}},Je=(t,e,r)=>Object.defineProperty(t,e,{configurable:!0,value:typeof r=="function"?function(){return t._wire$=r.apply(this,arguments)}:r})[e];Object.defineProperties(At.prototype,{ELEMENT_NODE:{value:1},nodeType:{value:-1}});const Qe={},Ct={},tr=[],xa=Ct.hasOwnProperty;let er=0;var bt={attributes:Qe,define:(t,e)=>{t.indexOf("-")<0?(t in Ct||(er=tr.push(t)),Ct[t]=e):Qe[t]=e},invoke:(t,e)=>{for(let r=0;r<er;r++){let n=tr[r];if(xa.call(t,n))return Ct[n](t[n],e)}}},rr=Array.isArray||function(t){var e=t.call([]);return function(n){return t.call(n)===e}}({}.toString);/*! (c) Andrea Giammarchi - ISC */var nr=function(t){var e="fragment",r="template",n="content"in i(r),a=n?function(c){var l=i(r);return l.innerHTML=c,l.content}:function(c){var l=i(e),d=i(r),f=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(c)){var h=RegExp.$1;d.innerHTML="<table>"+c+"</table>",f=d.querySelectorAll(h)}else d.innerHTML=c,f=d.childNodes;return s(l,f),l};return function(l,d){return(d==="svg"?o:a)(l)};function s(c,l){for(var d=l.length;d--;)c.appendChild(l[0])}function i(c){return c===e?t.createDocumentFragment():t.createElementNS("http://www.w3.org/1999/xhtml",c)}function o(c){var l=i(e),d=i("div");return d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+c+"</svg>",s(l,d.firstChild.childNodes),l}}(document);/*! (c) Andrea Giammarchi */function Ea(t){var e=t.Event,r=t.WeakSet,n=!0,a=null;return function(o){return n&&(n=!n,a=new r,s(o.ownerDocument)),a.add(o),o};function s(i){var o=new r,c=new r;try{new MutationObserver(h).observe(i,{subtree:!0,childList:!0})}catch($){var l=0,d=[],f=function(b){d.push(b),clearTimeout(l),l=setTimeout(function(){h(d.splice(l=0,d.length))},0)};i.addEventListener("DOMNodeRemoved",function(b){f({addedNodes:[],removedNodes:[b.target]})},!0),i.addEventListener("DOMNodeInserted",function(b){f({addedNodes:[b.target],removedNodes:[]})},!0)}function h($){for(var b,O=$.length,x=0;x<O;x++)b=$[x],g(b.removedNodes,"disconnected",c,o),g(b.addedNodes,"connected",o,c)}function g($,b,O,x){for(var S,k=new e(b),M=$.length,I=0;I<M;(S=$[I++]).nodeType===1&&w(S,k,b,O,x));}function w($,b,O,x,S){a.has($)&&!x.has($)&&(S.delete($),x.add($),$.dispatchEvent(b));for(var k=$.children||[],M=k.length,I=0;I<M;w(k[I++],b,O,x,S));}}}/*! (c) Andrea Giammarchi - ISC */var Sa=function(t,e,r,n,a){var s=a in t,i=t.createDocumentFragment();i[e](t[n]("g")),i[e](t[n](""));var o=s?t[a](i,!0):i[r](!0);return o.childNodes.length<2?function c(l,d){for(var f=l[r](),h=l.childNodes||[],g=h.length,w=0;d&&w<g;w++)f[e](c(h[w],d));return f}:s?t[a]:function(c,l){return c[r](!!l)}}(document,"appendChild","cloneNode","createTextNode","importNode"),ar="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")};/*! (c) Andrea Giammarchi - ISC */var Y="-"+Math.random().toFixed(6)+"%",ae=!1;try{(function(t,e,r){return e in t&&(t.innerHTML="<p "+r+'="'+Y+'"></p>',t[e].childNodes[0].getAttribute(r)==Y)})(document.createElement("template"),"content","tabindex")||(Y="_dt: "+Y.slice(1,-1)+";",ae=!0)}catch(t){}var kt="<!--"+Y+"-->",Ma=8,Aa=1,Ca=3,sr=/^(?:plaintext|script|style|textarea|title|xmp)$/i,ka=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function Ia(t){return t.join(kt).replace(Da,Na).replace(Ta,La)}var It=" \\f\\n\\r\\t",or="[^"+It+`\\/>"'=]+`,se="["+It+"]+"+or,ir="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",cr=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+or.replace("\\/","")+"))?)",Ta=new RegExp(ir+se+cr+"+)(["+It+"]*/?>)","g"),Da=new RegExp(ir+se+cr+"*)(["+It+"]*/>)","g"),ja=new RegExp("("+se+`\\s*=\\s*)(['"]?)`+kt+"\\2","gi");function La(t,e,r,n){return"<"+e+r.replace(ja,Wa)+n}function Wa(t,e,r){return e+(r||'"')+Y+(r||'"')}function Na(t,e,r){return ka.test(e)?t:"<"+e+r+"></"+e+">"}var Ra=t=>({get:e=>t.get(e),set:(e,r)=>(t.set(e,r),r)}),Ua=ae?function(t,e){var r=e.join(" ");return e.slice.call(t,0).sort(function(n,a){return r.indexOf(n.name)<=r.indexOf(a.name)?-1:1})}:function(t,e){return e.slice.call(t,0)};function Fa(t,e){for(var r=e.length,n=0;n<r;)t=t.childNodes[e[n++]];return t}function lr(t,e,r,n){for(var a=t.childNodes,s=a.length,i=0;i<s;){var o=a[i];switch(o.nodeType){case Aa:var c=n.concat(i);Ba(o,e,r,c),lr(o,e,r,c);break;case Ma:var l=o.textContent;if(l===Y)r.shift(),e.push(sr.test(t.nodeName)?dr(t,n):za(o,n.concat(i)));else switch(l.slice(0,2)){case"/*":if(l.slice(-2)!=="*/")break;case"\u{1F47B}":t.removeChild(o),i--,s--}break;case Ca:sr.test(t.nodeName)&&ar.call(o.textContent)===kt&&(r.shift(),e.push(dr(t,n)));break}i++}}function Ba(t,e,r,n){for(var a=t.attributes,s=[],i=[],o=Ua(a,r),c=o.length,l=0;l<c;){var d=o[l++],f=d.value===Y,h;if(f||1<(h=d.value.split(kt)).length){var g=d.name;if(s.indexOf(g)<0){s.push(g);var w=r.shift().replace(f?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+g+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),$=a[w]||a[w.toLowerCase()];if(f)e.push(pr($,n,w,null));else{for(var b=h.length-2;b--;)r.shift();e.push(pr($,n,w,h))}}i.push(d)}}c=i.length,l=0;for(var O=0<c&&ae&&!("ownerSVGElement"in t);l<c;){var x=i[l++];O&&(x.value=""),t.removeAttribute(x.name)}var S=t.nodeName;if(/^script$/i.test(S)){var k=document.createElement(S);for(c=a.length,l=0;l<c;)k.setAttributeNode(a[l++].cloneNode(!0));k.textContent=t.textContent,t.parentNode.replaceChild(k,t)}}function za(t,e){return{type:"any",node:t,path:e}}function pr(t,e,r,n){return{type:"attr",node:t,path:e,name:r,sparse:n}}function dr(t,e){return{type:"text",node:t,path:e}}var fr=Ra(new nt);function Ha(t,e){var r=(t.convert||Ia)(e),n=t.transform;n&&(r=n(r));var a=nr(r,t.type);ur(a);var s=[];return lr(a,s,e.slice(0),[]),{content:a,updates:function(i){for(var o=[],c=s.length,l=0,d=0;l<c;){var f=s[l++],h=Fa(i,f.path);switch(f.type){case"any":o.push({fn:t.any(h,[]),sparse:!1});break;case"attr":var g=f.sparse,w=t.attribute(h,f.name,f.node);g===null?o.push({fn:w,sparse:!1}):(d+=g.length-2,o.push({fn:w,sparse:!0,values:g}));break;case"text":o.push({fn:t.text(h),sparse:!1}),h.textContent="";break}}return c+=d,function(){var $=arguments.length;if(c!==$-1)throw new Error($-1+" values instead of "+c+`
`+e.join("${value}"));for(var b=1,O=1;b<$;){var x=o[b-O];if(x.sparse){var S=x.values,k=S[0],M=1,I=S.length;for(O+=I-2;M<I;)k+=arguments[b++]+S[M++];x.fn(k)}else x.fn(arguments[b++])}return i}}}}function Va(t,e){var r=fr.get(e)||fr.set(e,Ha(t,e));return r.updates(Sa.call(document,r.content,!0))}var qa=[];function Ga(t){var e=qa,r=ur;return function(n){return e!==n&&(r=Va(t,e=n)),r.apply(null,arguments)}}function ur(t){for(var e=t.childNodes,r=e.length;r--;){var n=e[r];n.nodeType!==1&&ar.call(n.textContent).length===0&&t.removeChild(n)}}/*! (c) Andrea Giammarchi - ISC */var Ya=function(){var t=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,e=/([^A-Z])([A-Z]+)/g;return function(o,c){return"ownerSVGElement"in o?n(o,c):s(o.style,!1)};function r(i,o,c){return o+"-"+c.toLowerCase()}function n(i,o){var c;return o?c=o.cloneNode(!0):(i.setAttribute("style","--hyper:style;"),c=i.getAttributeNode("style")),c.value="",i.setAttributeNode(c),s(c,!0)}function a(i){var o,c=[];for(o in i)c.push(o.replace(e,r),":",i[o],";");return c.join("")}function s(i,o){var c,l;return function(d){var f,h,g,w;switch(typeof d){case"object":if(d){if(c==="object"){if(!o&&l!==d)for(h in l)h in d||(i[h]="")}else o?i.value="":i.cssText="";f=o?{}:i;for(h in d)w=d[h],g=typeof w=="number"&&!t.test(h)?w+"px":w,!o&&/^--/.test(h)?f.setProperty(h,g):f[h]=g;c="object",o?i.value=a(l=f):l=d;break}default:l!=d&&(c="string",l=d,o?i.value=d||"":i.cssText=d||"");break}}}}();/*! (c) Andrea Giammarchi - ISC */var hr=function(t,e){return e=r.prototype,e.ELEMENT_NODE=1,e.nodeType=111,e.remove=function(n){var a=this.childNodes,s=this.firstChild,i=this.lastChild;if(this._=null,n&&a.length===2)i.parentNode.removeChild(i);else{var o=this.ownerDocument.createRange();o.setStartBefore(n?a[1]:s),o.setEndAfter(i),o.deleteContents()}return s},e.valueOf=function(n){var a=this._,s=a==null;if(s&&(a=this._=this.ownerDocument.createDocumentFragment()),s||n)for(var i=this.childNodes,o=0,c=i.length;o<c;o++)a.appendChild(i[o]);return a},r;function r(n){var a=this.childNodes=t.call(n,0);this.firstChild=a[0],this.lastChild=a[a.length-1],this.ownerDocument=a[0].ownerDocument,this._=null}}([].slice);const Xa=11,oe="ownerSVGElement",vr="connected",Za="dis"+vr,Ka=At.prototype.nodeType,Ja=hr.prototype.nodeType,Qa=Ea({Event:Ke,WeakSet:pa}),ts=t=>({html:t}),gr=(t,e)=>{switch(t.nodeType){case Ja:return 1/e<0?e?t.remove(!0):t.lastChild:e?t.valueOf(!0):t.firstChild;case Ka:return gr(t.render(),e);default:return t}},es=t=>"ELEMENT_NODE"in t,rs=(t,e,r)=>n=>{r!==!!n&&((r=!!n)?t.setAttribute(e,""):t.removeAttribute(e))},ns=(t,e,r)=>r?n=>{try{t[e]=n}catch(a){t.setAttribute(e,n)}}:n=>{t[e]=n},$r=(t,e)=>{e(t.placeholder),"text"in t?Promise.resolve(t.text).then(String).then(e):"any"in t?Promise.resolve(t.any).then(e):"html"in t?Promise.resolve(t.html).then(ts).then(e):Promise.resolve(bt.invoke(t,e)).then(e)},ie=t=>t!=null&&"then"in t,as=/^(?:form|list)$/i,Tt=[].slice,ss=(t,e)=>t.ownerDocument.createTextNode(e);function ce(t){return this.type=t,Ga(this)}ce.prototype={attribute(t,e,r){const n=oe in t;let a;if(e==="style")return Ya(t,r,n);if(e.slice(0,1)===".")return ns(t,e.slice(1),n);if(e.slice(0,1)==="?")return rs(t,e.slice(1));if(/^on/.test(e)){let s=e.slice(2);return s===vr||s===Za?Qa(t):e.toLowerCase()in t&&(s=s.toLowerCase()),i=>{a!==i&&(a&&t.removeEventListener(s,a,!1),a=i,i&&t.addEventListener(s,i,!1))}}else{if(e==="data"||!n&&e in t&&!as.test(e))return s=>{a!==s&&(a=s,t[e]!==s&&s==null?(t[e]="",t.removeAttribute(e)):t[e]=s)};if(e in bt.attributes)return s=>{const i=bt.attributes[e](t,s);a!==i&&(a=i,i==null?t.removeAttribute(e):t.setAttribute(e,i))};{let s=!1;const i=r.cloneNode(!0);return o=>{a!==o&&(a=o,i.value!==o&&(o==null?(s&&(s=!1,t.removeAttributeNode(i)),i.value=o):(i.value=o,s||(s=!0,t.setAttributeNode(i)))))}}}},any(t,e){const r={node:gr,before:t},n=oe in t?"svg":"html";let a=!1,s;const i=o=>{switch(typeof o){case"string":case"number":case"boolean":a?s!==o&&(s=o,e[0].textContent=o):(a=!0,s=o,e=st(t.parentNode,e,[ss(t,o)],r));break;case"function":i(o(t));break;case"object":case"undefined":if(o==null){a=!1,e=st(t.parentNode,e,[],r);break}default:if(a=!1,s=o,rr(o))if(o.length===0)e.length&&(e=st(t.parentNode,e,[],r));else switch(typeof o[0]){case"string":case"number":case"boolean":i({html:o});break;case"object":if(rr(o[0])&&(o=o.concat.apply([],o)),ie(o[0])){Promise.all(o).then(i);break}default:e=st(t.parentNode,e,o,r);break}else es(o)?e=st(t.parentNode,e,o.nodeType===Xa?Tt.call(o.childNodes):[o],r):ie(o)?o.then(i):"placeholder"in o?$r(o,i):"text"in o?i(String(o.text)):"any"in o?i(o.any):"html"in o?e=st(t.parentNode,e,Tt.call(nr([].concat(o.html).join(""),n).childNodes),r):"length"in o?i(Tt.call(o)):i(bt.invoke(o,i));break}};return i},text(t){let e;const r=n=>{if(e!==n){e=n;const a=typeof n;a==="object"&&n?ie(n)?n.then(r):"placeholder"in n?$r(n,r):"text"in n?r(String(n.text)):"any"in n?r(n.any):"html"in n?r([].concat(n.html).join("")):"length"in n?r(Tt.call(n).join("")):r(bt.invoke(n,r)):a==="function"?r(n(t)):t.textContent=n==null?"":n}};return r}};var br=typeof document!="object",le=function(t){var e="raw",r=function(l){return/(Firefox|Safari)\/(\d+)/.test(l)&&!/(Chrom[eium]+|Android)\/(\d+)/.test(l)},n=r((document.defaultView.navigator||{}).userAgent),a=!(e in t)||t.propertyIsEnumerable(e)||!Object.isFrozen(t[e]);if(n||a){var s={},i=function(l){for(var d=".",f=0;f<l.length;f++)d+=l[f].length+"."+l[f];return s[d]||(s[d]=l)};if(a)le=i;else{var o=new nt,c=function(l,d){return o.set(l,d),d};le=function(l){return o.get(l)||c(l,i(l))}}}else br=!0;return wr(t)};function wr(t){return br?t:le(t)}function yr(t){for(var e=arguments.length,r=[wr(t)],n=1;n<e;)r.push(arguments[n++]);return r}const mr=new nt,os=(t,e)=>t==null?pe(e||"html"):is(t,e||"html"),pe=t=>{let e,r,n;return function(){const a=yr.apply(null,arguments);return n!==a[0]?(n=a[0],r=new ce(t),e=cs(r.apply(r,a))):r.apply(r,a),e}},is=(t,e)=>{const r=e.indexOf(":");let n=mr.get(t),a=e;return-1<r&&(a=e.slice(r+1),e=e.slice(0,r)||"html"),n||mr.set(t,n={}),n[a]||(n[a]=pe(e))},cs=t=>{const e=t.childNodes,{length:r}=e;return r===1?e[0]:r?new hr(e):t},_r=new nt;function ls(){const t=_r.get(this),e=yr.apply(null,arguments);return t&&t.template===e[0]?t.tagger.apply(null,e):ps.apply(this,e),this}function ps(t){const e=oe in this?"svg":"html",r=new ce(e);_r.set(this,{tagger:r,template:t}),this.textContent="",this.appendChild(r.apply(null,arguments))}/*! (c) Andrea Giammarchi (ISC) */const ds=t=>ls.bind(t);Pa(pe);var m={hyperhtml:{wire:os,bind:ds},globals:{infinity:Number.POSITIVE_INFINITY,pi:Math.PI,pi2:Math.PI*2,min:Math.min,max:Math.max,abs:Math.abs,trunc:Math.trunc,round:Math.round,sqrt:Math.sqrt,cos:Math.cos,sin:Math.sin,atan2:Math.atan2,random:Math.random,now:Date.now,window,requestAnimationFrame,document}};const{requestAnimationFrame:fs}=m.globals,Or=t=>()=>fs(Or(t()));var us=t=>Or(t)(),Pr=t=>{let e=t;const r=new Map;return{next:n=>{e=n(e),r.forEach(a=>a(e))},subscribe:n=>{n(e);const a={};return r.set(a,n),a},unsubscribe:n=>r.delete(n)}};let Dt=[];const xr=Pr(0),hs=t=>{Dt.push(t),Dt.length===6&&(xr.next(()=>5e3/(t-Dt[0])),Dt=[])};var _={title:{},practice:{},start:{},main:{},pause:{},death:{},over:{}},vs=Object.defineProperty,Er=Object.getOwnPropertySymbols,gs=Object.prototype.hasOwnProperty,$s=Object.prototype.propertyIsEnumerable,Sr=(t,e,r)=>e in t?vs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mr=(t,e)=>{for(var r in e||(e={}))gs.call(e,r)&&Sr(t,r,e[r]);if(Er)for(var r of Er(e))$s.call(e,r)&&Sr(t,r,e[r]);return t};const{wire:bs}=m.hyperhtml;var X=(t,e)=>{const r=e(bs());let n=t;return{render:()=>r(n),update:a=>{n=Mr(Mr({},n),a(n)),r(n)}}};const{window:de}=m.globals,Ar=()=>({width:de.innerWidth,height:de.innerHeight}),N=Pr(Ar());de.addEventListener("resize",()=>N.next(Ar));const{pi2:ot,min:ws,cos:ys,sin:ms,document:_s}=m.globals,y=200,E=y*2+10,v=E/2,Z=_s.createElement("canvas");Z.width=E,Z.height=E,Object.assign(Z.style,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"});const u=Z.getContext("2d"),jt=Z.cloneNode(),A=jt.getContext("2d"),Lt=X({width:0,opacity:1},t=>({width:e,opacity:r})=>{const n={width:`${e}px`,height:`${e}px`,opacity:r};return Object.assign(Z.style,n),Object.assign(jt.style,n),t`${Z}${jt}`});N.subscribe(({width:t,height:e})=>{const r=ws(t,e)*.7;Lt.update(()=>({width:r}))});const Wt=()=>{Z.width=E,jt.width=E,u.clip(u.arc(v,v,y,0,ot))},fe=()=>{u.save(),u.beginPath(),u.fillStyle="black",u.arc(v,v,y,0,ot),u.fill(),u.closePath(),u.restore()},ue=(t=1)=>{u.save(),u.beginPath(),u.strokeStyle="white",u.lineWidth=1,u.moveTo(v,v),u.lineTo(v+t*y,v),u.stroke(),u.closePath(),u.restore()},wt=(t,e=1,r="red")=>{u.save(),u.beginPath(),u.strokeStyle=r,u.lineWidth=1,u.moveTo(v,v);const n=e*y;u.lineTo(v+n*ys(-t),v+n*ms(-t)),u.stroke(),u.closePath(),u.restore()},Nt=(t,e)=>{u.save(),u.beginPath();const r=u.createRadialGradient(t,e,0,t,e,20);r.addColorStop(0,"red"),r.addColorStop(1,"rgba(255, 0, 0, 0)"),u.fillStyle=r,u.arc(t,e,20,0,ot),u.fill(),u.closePath(),u.restore()},Rt=()=>{u.save(),u.beginPath(),u.fillStyle="white",u.arc(v,v,3,0,ot),u.fill(),u.closePath(),u.restore()},he=(t=-ot)=>{A.clearRect(0,0,E,E),A.save(),A.beginPath(),A.setLineDash([10,10]),A.strokeStyle="white",A.lineWidth=3,A.arc(v,v,y,0,t,!0),A.stroke(),A.closePath(),A.restore()},Cr=t=>{A.save(),A.beginPath(),A.setLineDash([10,10]),A.strokeStyle="magenta",A.lineWidth=3,A.arc(v,v,y,0,-t*ot,!0),A.stroke(),A.closePath(),A.restore()};var p={easy:{},normal:{},hard:{}};let ve=[];const H={mode:{},start:{},practice:{},stage:{}},ge=(t,e)=>ve.push({id:t,param:e}),kr=()=>ve.map(({id:t,param:e})=>({id:t,param:e})),$e=()=>{ve=[]},{min:Os,max:Ps}=m.globals,xs={startOpacity:0,practiceOpacity:0,mode:p.normal,fontSize:0},Ir=t=>()=>ge(t),Es=(t,e,r)=>({display:r>0?"block":"none",position:"absolute",left:"50%",top:`${t}px`,transform:"translate(-50%, 0)",textAlign:"center",lineHeight:`${e*1.5}px`,fontFamily:"serif"}),Tr=(t,e)=>({outline:"none",border:"none",margin:`${t/4}px 0 ${t/2}px`,fontSize:`${t}px`,color:"white",backgroundColor:"transparent",opacity:e}),be=X(xs,t=>({startOpacity:e,practiceOpacity:r,top:n,fontSize:a})=>t`<div style=${Es(n,a,Ps(e,r))}><button style=${Tr(a,e)} onClick=${Ir(H.start)}>Start Game</button><br><button style=${Tr(a,r)} onClick=${Ir(H.practice)}>Practice</button><br></div>`);N.subscribe(({width:t,height:e})=>{const r=Os(t,e),n=e/2+r*.1,a=r*.03;be.update(()=>({top:n,fontSize:a}))});const{min:Ss}=m.globals,Ms={opacity:0,mode:p.normal,top:0,fontSize:0},we=t=>()=>ge(H.mode,t),As=(t,e)=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:`${e}px`,transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:t}),ye=(t,e)=>({margin:`0 ${e/4}px`,outline:"none",border:`2px solid ${t?"white":"transparent"}`,fontSize:`${e}px`,color:"white",backgroundColor:"transparent"}),it=X(Ms,t=>({opacity:e,mode:r,top:n,fontSize:a})=>t`<div style=${As(e,n)}><button style=${ye(r===p.easy,a)} onClick=${we(p.easy)}>EASY</button><button style=${ye(r===p.normal,a)} onClick=${we(p.normal)}>NORMAL</button><button style=${ye(r===p.hard,a)} onClick=${we(p.hard)}>HARD</button></div>`);N.subscribe(({width:t,height:e})=>{const r=Ss(t,e),n=e/2+r*.25,a=r*.026;it.update(()=>({top:n,fontSize:a}))});var Cs=Object.defineProperty,ks=Object.defineProperties,Is=Object.getOwnPropertyDescriptors,Dr=Object.getOwnPropertySymbols,Ts=Object.prototype.hasOwnProperty,Ds=Object.prototype.propertyIsEnumerable,jr=(t,e,r)=>e in t?Cs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lr=(t,e)=>{for(var r in e||(e={}))Ts.call(e,r)&&jr(t,r,e[r]);if(Dr)for(var r of Dr(e))Ds.call(e,r)&&jr(t,r,e[r]);return t},Wr=(t,e)=>ks(t,Is(e));const{pi2:js,min:Ls,trunc:Ws}=m.globals,rt=X({level:1,playerAngle:0,appearance:0,x:0,y:0,w:0},t=>({level:e,playerAngle:r,appearance:n,x:a,y:s,w:i})=>{const o={position:"absolute",left:`${a}px`,top:`${s}px`,width:`${i}px`,height:`${i}px`},c=n*100,l=c/2,d=Wr(Lr({},o),{backgroundColor:"#966",clipPath:`polygon(100% 0, 50% 0, ${50-l}% ${l}%, ${100-c}% ${c}%)`}),f=Wr(Lr({},o),{color:"white",fontSize:`${i/5}px`,margin:`${i/10}px`,opacity:n}),h=Ws(r/js*100);return t`<div style="${d}"></div><div style="${f}">Lv.${e}<br>${h}%</div>`});N.subscribe(({width:t,height:e})=>{const r=Ls(t,e)*.7;rt.update(()=>({x:(t-r*1.05)/2,y:(e-r*1.05)/2,w:r*.2}))});var Ns=Object.defineProperty,Rs=Object.defineProperties,Us=Object.getOwnPropertyDescriptors,Nr=Object.getOwnPropertySymbols,Fs=Object.prototype.hasOwnProperty,Bs=Object.prototype.propertyIsEnumerable,Rr=(t,e,r)=>e in t?Ns(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zs=(t,e)=>{for(var r in e||(e={}))Fs.call(e,r)&&Rr(t,r,e[r]);if(Nr)for(var r of Nr(e))Bs.call(e,r)&&Rr(t,r,e[r]);return t},Hs=(t,e)=>Rs(t,Us(e));const{min:Vs,trunc:Ur}=m.globals,qs={mode:p.normal,fpsText:"60.00",appearance:0,x:0,y:0,w:0},Fr=new Map([[p.easy,"EASY"],[p.normal,"NORMAL"],[p.hard,"HARD"]]),K=X(qs,t=>({mode:e,fpsText:r,appearance:n,x:a,y:s,w:i})=>{const o={position:"absolute",left:`${a}px`,top:`${s}px`,width:`${i}px`,height:`${i}px`},c=n*100,l=c/2,d=Hs(zs({},o),{backgroundColor:"#696",clipPath:`polygon(0 0, 0 50%, ${l}% ${50+l}%, ${c}% ${c}%)`}),f={position:"absolute",bottom:`${i/10}px`,left:`${i/10}px`,color:"white",fontSize:`${i/5}px`,opacity:n};return t`<div style="${d}"></div><div style="${o}"><div style="position:relative;width:100%;height:100%"><div style="${f}">${Fr.get(e)}<br>${r}FPS</div></div></div>`});N.subscribe(({width:t,height:e})=>{const r=Vs(t,e)*.7;K.update(()=>({x:(t-r*1.05)/2,y:(e+r*.65)/2,w:r*.2}))}),xr.subscribe(t=>K.update(()=>{const e=Ur(t*100);return{fpsText:`${Ur(e/100)}.${(e%100).toString().padStart(2,"0")}`}}));var Gs=Object.defineProperty,Ys=Object.defineProperties,Xs=Object.getOwnPropertyDescriptors,Br=Object.getOwnPropertySymbols,Zs=Object.prototype.hasOwnProperty,Ks=Object.prototype.propertyIsEnumerable,zr=(t,e,r)=>e in t?Gs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Js=(t,e)=>{for(var r in e||(e={}))Zs.call(e,r)&&zr(t,r,e[r]);if(Br)for(var r of Br(e))Ks.call(e,r)&&zr(t,r,e[r]);return t},Qs=(t,e)=>Ys(t,Xs(e));const{min:to}=m.globals,ct=X({deaths:0,appearance:0,x:0,y:0,w:0},t=>({deaths:e,appearance:r,x:n,y:a,w:s})=>{const i={position:"absolute",left:`${n}px`,top:`${a}px`,width:`${s}px`,height:`${s}px`},o=r*100,c=o/2,l=Qs(Js({},i),{backgroundColor:"#669",clipPath:`polygon(50% 100%, ${50+c}% ${100-c}%, ${o}% ${100-o}%, 0 100%)`}),d={position:"absolute",bottom:`${s/10}px`,right:`${s/10}px`,textAlign:"right",fontSize:`${s/5}px`,color:"white",opacity:r};return t`<div style="${l}"></div><div style="${i}"><div style="position:relative;width:100%;height:100%"><div style="${d}">${e}<br>death${e>1?"s":""}</div></div></div>`});N.subscribe(({width:t,height:e})=>{const r=to(t,e)*.7;ct.update(()=>({x:(t+r*.65)/2,y:(e+r*.65)/2,w:r*.2}))});var eo=Object.defineProperty,ro=Object.defineProperties,no=Object.getOwnPropertyDescriptors,Hr=Object.getOwnPropertySymbols,ao=Object.prototype.hasOwnProperty,so=Object.prototype.propertyIsEnumerable,Vr=(t,e,r)=>e in t?eo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oo=(t,e)=>{for(var r in e||(e={}))ao.call(e,r)&&Vr(t,r,e[r]);if(Hr)for(var r of Hr(e))so.call(e,r)&&Vr(t,r,e[r]);return t},io=(t,e)=>ro(t,no(e));const{min:co}=m.globals,lt=X({name:"-",appearance:0,x:0,y:0,w:0},t=>({name:e,appearance:r,x:n,y:a,w:s})=>{const i={position:"absolute",left:`${n}px`,top:`${a}px`,width:`${s}px`,height:`${s}px`},o=r*100,c=o/2,l=io(oo({},i),{backgroundColor:"#969",clipPath:`polygon(100% 50%, ${100-c}% ${50-c}%, ${100-o}% ${100-o}%, 100% 100%)`}),d={position:"absolute",top:`${s/10}px`,right:`${s/10}px`,textAlign:"right",fontSize:`${s/5}px`,color:"white",opacity:r};return t`<div style="${l}"></div><div style="${i}"><div style="position:relative;width:100%;height:100%"><div style="${d}">Event<br>${e||"-"}</div></div></div>`});N.subscribe(({width:t,height:e})=>{const r=co(t,e)*.7;lt.update(()=>({x:(t+r*.65)/2,y:(e-r*1.05)/2,w:r*.2}))});var P={swimOrb:{},linearOrb:{},lazer:{},landolt:{}},lo=Object.defineProperty,po=Object.defineProperties,fo=Object.getOwnPropertyDescriptors,qr=Object.getOwnPropertySymbols,uo=Object.prototype.hasOwnProperty,ho=Object.prototype.propertyIsEnumerable,Gr=(t,e,r)=>e in t?lo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,me=(t,e)=>{for(var r in e||(e={}))uo.call(e,r)&&Gr(t,r,e[r]);if(qr)for(var r of qr(e))ho.call(e,r)&&Gr(t,r,e[r]);return t},_e=(t,e)=>po(t,fo(e));const{pi:vo,pi2:Yr,min:Oe,cos:Ut,sin:Ft}=m.globals,Bt=(t,e,r,n,a)=>{const s=t-r,i=e-n,o=a/2+3;return s*s+i*i<=o*o},Xr=(t,e,r,n,a,s)=>{t.save(),t.beginPath(),t.globalAlpha=.5,t.fillStyle=s,t.arc(r,n,a*(2-e/30),0,Yr),t.fill(),t.closePath(),t.restore()},Zr=(t,e,r,n,a,s,i)=>{t.save(),t.beginPath(),t.globalAlpha=i,t.fillStyle=a,t.strokeStyle=s,t.arc(e,r,n,0,Yr),t.fill(),t.stroke(),t.closePath(),t.restore()},R=(t,e,r,n,a=0,s="lime")=>({id:P.swimOrb,time:a,angle:t,radius:e,speed:r,width:n,color:s}),go=(t,{time:e,angle:r,radius:n,width:a,color:s})=>{const i=v+n*Ut(r),o=v+n*Ft(r);if(e<=30&&Xr(t,e,i,o,a,s),e>=15){const c=Oe(Oe((e-15)/30,1),(300-e)/30);Zr(t,i,o,a,"white",s,c)}},$o=(t,e,r)=>{const{time:n,angle:a,radius:s,speed:i,width:o}=t,c=v+s*Ut(a),l=v+s*Ft(a);return{nextEnemies:n>=300?[]:[_e(me({},t),{angle:a+(n<45?0:i),time:n+1})],hit:n<45||n>270?!1:Bt(e,r,c,l,o)}},J=(t,e,r,n,a,s,i,o=0)=>({id:P.linearOrb,time:o,x:t,y:e,angle:r,speed:n,width:a,fillColor:s,strokeColor:i}),Kr=(t,{time:e,x:r,y:n,width:a,fillColor:s,strokeColor:i})=>{if(e<=30&&Xr(t,e,r,n,a,i),e>=15){const o=Oe((e-15)/30,1);Zr(t,r,n,a,s,i,o)}},Jr=(t,e,r)=>{const{time:n,x:a,y:s,angle:i,speed:o,width:c}=t;if(n<45)return{nextEnemies:[_e(me({},t),{time:n+1})],hit:!1};const l=a+o*Ut(i),d=s+o*Ft(i),f=l-v,h=d-v,g=y+c/2;return f*f+h*h>g*g?{nextEnemies:[],hit:!1}:{nextEnemies:[_e(me({},t),{x:l,y:d,time:n+1})],hit:Bt(e,r,a,s,c)}},bo=(t,e,r,n,a,s=0)=>({id:P.orbToCenter,time:s,x:v+y*Ut(t),y:v+y*Ft(t),angle:t+vo,speed:e,width:r,fillColor:n,strokeColor:a}),wo=(t,e,r)=>{const{x:n,y:a,speed:s}=t;return Bt(v,v,n,a,s-3)?{nextEnemies:[],hit:!1}:Jr(t,e,r)};var Q={none:{},rotate:{},gravity:{},swap:{},mirror:{},memorial:{}};const Qr=t=>t;var pt=({id:t,name:e,wait:r,duration:n,inputEffect:a=Qr,afterEffect:s=Qr,props:i})=>({id:t,name:e,wait:r,waitTime:0,duration:n,eventTime:0,inputEffect:a,afterEffect:s,props:i});const{infinity:yo}=m.globals;var T=()=>pt({id:Q.none,name:"-",wait:yo,duration:0,props:{}}),mo=Object.defineProperty,_o=Object.defineProperties,Oo=Object.getOwnPropertyDescriptors,tn=Object.getOwnPropertySymbols,Po=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable,en=(t,e,r)=>e in t?mo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Eo=(t,e)=>{for(var r in e||(e={}))Po.call(e,r)&&en(t,r,e[r]);if(tn)for(var r of tn(e))xo.call(e,r)&&en(t,r,e[r]);return t},So=(t,e)=>_o(t,Oo(e));const{max:Mo,cos:Ao,sin:Co}=m.globals,{swimOrb:Pe,linearOrb:ko,orbToCenter:Io}=P,U=t=>t.flatMap(e=>e.id===Pe?[So(Eo({},e),{time:Mo(e.time,270)})]:[]),L=(t,e,r)=>n=>{const{id:a,angle:s,radius:i}=n;if([Pe,ko,Io].includes(a)){const{x:o,y:c}=a===Pe?{x:v+i*Ao(s),y:v+i*Co(s)}:n,l=o-e,d=c-r,f=60-t;return l*l+d*d<=f*f?[]:[n]}return[n]},yt=(t,e)=>(r,n,a,s)=>{const{id:i,eventTime:o,duration:c}=s;return i===Q.none?a===30?{nextEvt:t(r,n),nextEvtTime:a+1}:{nextEvt:s,nextEvtTime:a+1}:i!==Q.none&&o<c?{nextEvt:s,nextEvtTime:a+1}:{nextEvt:T(),nextEvtTime:-e.get(r)}},To=(t,e,r)=>(r.save(),r.resetTransform(),r.translate(v,v),r.rotate(e*t.speed),r.translate(-v,-v),r.drawImage(r.canvas,0,0),r.restore(),t);var rn=(t,e)=>pt({id:Q.rotate,name:"\u6D41\u8EE2",wait:300,duration:e,afterEffect:To,props:{speed:t}});const{document:Do,min:nn,max:an,abs:jo,cos:xe,sin:Ee}=m.globals,Se=(t,e,r,n=0)=>({id:P.lazer,time:n,x:t,y:e,angle:r}),sn=t=>an(E*2*((t-60)/15),0),on=t=>an(nn(t-75,155-t,15),1),Lo=(t,e,r,n,a,s)=>{const i=t-r,o=e-n,c=i*xe(a)+o*Ee(a),l=jo(-i*Ee(a)+o*xe(a))-3;return c>=0&&c<=sn(s)&&l<=on(s)/2},Wo=({time:t,x:e,y:r,angle:n},a,s)=>({nextEnemies:t>=185?[]:[Se(e,r,n,t+1)],hit:t>45&&t<155&&Lo(a,s,e,r,n,t)}),No=(t,e,r,n)=>{const a=1-e/30;t.save(),t.fillStyle=`rgba(255, 255, 0, ${a/2})`,t.beginPath();const s=20+a*40,i=s/2;t.fillRect(r-i,n-i,s,s),t.restore()},zt=Do.createElement("canvas");zt.width=20,zt.height=20;const C=zt.getContext("2d");C.strokeStyle="black",C.lineWidth=1,C.beginPath(),C.fillStyle="#ff0",C.moveTo(0,0),C.lineTo(8,2),C.lineTo(8,18),C.lineTo(0,20),C.closePath(),C.fill(),C.stroke(),C.fillStyle="#66f",C.fillRect(5,5,15,10),C.strokeRect(5,5,15,10),C.beginPath(),C.moveTo(10,10),C.lineTo(20,10),C.closePath(),C.stroke();const Ro=(t,e,r,n)=>{t.save(),t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=1,t.beginPath(),t.moveTo(e,r),t.lineTo(e+E*2*xe(n),r+E*2*Ee(n)),t.closePath(),t.stroke(),t.restore()},Uo=(t,e,r,n)=>{t.save();const a=on(n),s=t.createLinearGradient(e,r-a,e,r+a);s.addColorStop(0,"rgba(255, 255, 0, 0)"),s.addColorStop(.25,"rgba(255, 255, 0, 1)"),s.addColorStop(.75,"rgba(255, 255, 0, 1)"),s.addColorStop(1,"rgba(255, 255, 0, 0)"),t.fillStyle=s,t.fillRect(e,r-a,sn(n),a*2),t.restore()},Fo=(t,{time:e,x:r,y:n,angle:a})=>{e>=15&&e<=60&&Ro(t,r,n,a),t.save(),t.translate(r,n),t.rotate(a),t.translate(-r,-n),e<30&&No(t,e,r,n),e>15&&(t.globalAlpha=nn((e-15)/30,(185-e)/30,1),t.drawImage(zt,r-10,n-10)),e>60&&e<155&&(t.globalAlpha=1,Uo(t,r,n,e)),t.restore()};var Bo=Object.defineProperty,zo=Object.defineProperties,Ho=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertySymbols,Vo=Object.prototype.hasOwnProperty,qo=Object.prototype.propertyIsEnumerable,ln=(t,e,r)=>e in t?Bo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Me=(t,e)=>{for(var r in e||(e={}))Vo.call(e,r)&&ln(t,r,e[r]);if(cn)for(var r of cn(e))qo.call(e,r)&&ln(t,r,e[r]);return t},Ae=(t,e)=>zo(t,Ho(e));const{max:Ce}=m.globals,Go=(t,e)=>{const{radius:r,time:n}=t;return n<30?t:r===0?Ae(Me({},t),{time:Ce(n,270)}):Ae(Me({},t),{radius:Ce(r-e,0)})},Yo=(t,{props:{gravity:e}})=>{const{pr:r,enemies:n}=t;return Ae(Me({},t),{pr:Ce(r-e,10),enemies:n.map(a=>a.id!==P.swimOrb?a:Go(a,e))})};var Ht=(t,e)=>pt({id:Q.gravity,name:"\u91CD\u529B",wait:300,duration:e,inputEffect:Yo,props:{gravity:t,lines:[]}}),Xo=Object.defineProperty,Zo=Object.defineProperties,Ko=Object.getOwnPropertyDescriptors,pn=Object.getOwnPropertySymbols,Jo=Object.prototype.hasOwnProperty,Qo=Object.prototype.propertyIsEnumerable,dn=(t,e,r)=>e in t?Xo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ti=(t,e)=>{for(var r in e||(e={}))Jo.call(e,r)&&dn(t,r,e[r]);if(pn)for(var r of pn(e))Qo.call(e,r)&&dn(t,r,e[r]);return t},ei=(t,e)=>Zo(t,Ko(e));const{pi:fn,max:un,sqrt:ri,cos:hn,sin:vn}=m.globals,gn=(t,e,r,n,a,s,i,o)=>({id:P.landolt,x:t,y:e,angle:r,radius:n,angleSpeed:a,radiusSpeed:s,holeWidth:i,lineWidth:o}),ni=(t,{x:e,y:r,angle:n,radius:a,holeWidth:s,lineWidth:i})=>{t.save(),t.beginPath();const o=un(a-i,0),c=un(a+i,0),l=t.createRadialGradient(e,r,o,e,r,c);l.addColorStop(0,"rgba(200, 200, 200, 0.5)"),l.addColorStop(.25,"rgba(200, 200, 200, 1)"),l.addColorStop(.75,"rgba(200, 200, 200, 1)"),l.addColorStop(1,"rgba(200, 200, 200, 0.5)"),t.strokeStyle=l,t.lineWidth=i*2,t.lineCap="round",t.arc(e,r,a,n-s/2,n+s/2,!0),t.stroke(),t.restore()},ai=(t,e,r,n)=>{const a=t-v,s=e-v;return r>ri(a*a+s*s)+y+n*2},si=(t,e,r,n,a,s,i,o)=>{const c=i-t,l=o-e,d=c*c+l*l,f=n-s/2-3,h=n+s/2+3;if(d<f*f||d>h*h)return!1;const g=r-a/2+fn/2,w=r+a/2-fn/2;return hn(g)*c+vn(g)*l<0||hn(w)*c+vn(w)*l<0},oi=(t,e,r)=>{const{x:n,y:a,angle:s,radius:i,angleSpeed:o,radiusSpeed:c,holeWidth:l,lineWidth:d}=t;return{nextEnemies:ai(n,a,i,d)?[]:[ei(ti({},t),{angle:s+o,radius:i+c})],hit:si(n,a,s,i,l,d,e,r)}};var ii=Object.defineProperty,ci=Object.defineProperties,li=Object.getOwnPropertyDescriptors,$n=Object.getOwnPropertySymbols,pi=Object.prototype.hasOwnProperty,di=Object.prototype.propertyIsEnumerable,bn=(t,e,r)=>e in t?ii(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mt=(t,e)=>{for(var r in e||(e={}))pi.call(e,r)&&bn(t,r,e[r]);if($n)for(var r of $n(e))di.call(e,r)&&bn(t,r,e[r]);return t},_t=(t,e)=>ci(t,li(e));const{pi:fi,sqrt:ui,cos:wn,sin:yn,atan2:mn}=m.globals,_n={inner:!1,outer:!1,quick:!1,brake:!1},hi=(t,{eventTime:e,duration:r,props:{speed:n}})=>{if(e>=r)return{enemies:t.enemies.map(b=>b.id===P.swimOrb?_t(mt({},b),{color:"lime"}):b)};const{inner:a,outer:s,quick:i,brake:o,enemies:c}=t,l=s-a,d=o-i;if(l===0&&d===0)return _t(mt({},_n),{enemies:c.map(b=>b.id===P.swimOrb?_t(mt({},b),{color:"red"}):b)});const f=mn(d,l),h=wn(f),g=yn(f),w=n*h,$=n*g;return _t(mt({},_n),{enemies:c.map(b=>{if(b.id!==P.swimOrb)return b;const{angle:O,radius:x}=b,S=x*wn(O)+w,k=x*yn(O)+$,M=mn(k,S),I=ui(S*S+k*k),vt=y+b.width;return _t(mt({},b),{angle:I>vt?M+fi:M,radius:I>vt?vt*2-I:I,color:"red"})})})};var Vt=(t,e)=>pt({id:Q.swap,name:"\u904D\u6191",wait:300,duration:e,inputEffect:hi,props:{speed:t}}),vi=Object.defineProperty,gi=Object.defineProperties,$i=Object.getOwnPropertyDescriptors,On=Object.getOwnPropertySymbols,bi=Object.prototype.hasOwnProperty,wi=Object.prototype.propertyIsEnumerable,Pn=(t,e,r)=>e in t?vi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yi=(t,e)=>{for(var r in e||(e={}))bi.call(e,r)&&Pn(t,r,e[r]);if(On)for(var r of On(e))wi.call(e,r)&&Pn(t,r,e[r]);return t},mi=(t,e)=>gi(t,$i(e));const{pi:qt,min:_i,cos:xn,sin:En,random:Oi}=m.globals,Pi=({playerInvincible:t,pa:e,pr:r,enemies:n},a)=>{const{time:s}=a.props,i=_i(s/60,1);wt(e-qt,i,"cyan");const o=v+r*xn(-e+qt),c=v+r*En(-e+qt);return(i===1&&t===0||Oi()<.5)&&Nt(o,c),{pa:i===1&&t===0&&n.some(({id:d,angle:f,radius:h,width:g})=>{if(d===P.swimOrb){const w=v+h*xn(f),$=v+h*En(f);return Bt(w,$,o,c,g)}return!1})?e-qt:e,evt:mi(yi({},a),{props:{time:s+1}}),enemies:t>0?n.flatMap(L(t,o,c)):n}};var ke=t=>pt({id:Q.mirror,name:"\u88CF\u73FE",wait:300,duration:t,inputEffect:Pi,props:{time:0}}),xi=Object.defineProperty,Ei=Object.defineProperties,Si=Object.getOwnPropertyDescriptors,Sn=Object.getOwnPropertySymbols,Mi=Object.prototype.hasOwnProperty,Ai=Object.prototype.propertyIsEnumerable,Mn=(t,e,r)=>e in t?xi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ci=(t,e)=>{for(var r in e||(e={}))Mi.call(e,r)&&Mn(t,r,e[r]);if(Sn)for(var r of Sn(e))Ai.call(e,r)&&Mn(t,r,e[r]);return t},ki=(t,e)=>Ei(t,Si(e));const{pi2:Ii,infinity:Ti}=m.globals,Di=({deaths:t,pa:e},r)=>{const{props:{done:n,speed:a}}=r;return{pa:n?e+a:e+a-t*Ii,evt:ki(Ci({},r),{props:{done:!0,speed:a+1e-4}})}};var ji=()=>pt({id:Q.memorial,name:"\u56DE\u5411",wait:300,duration:Ti,inputEffect:Di,props:{done:!1,speed:0}}),Li=Object.defineProperty,Wi=Object.defineProperties,Ni=Object.getOwnPropertyDescriptors,An=Object.getOwnPropertySymbols,Ri=Object.prototype.hasOwnProperty,Ui=Object.prototype.propertyIsEnumerable,Cn=(t,e,r)=>e in t?Li(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ot=(t,e)=>{for(var r in e||(e={}))Ri.call(e,r)&&Cn(t,r,e[r]);if(An)for(var r of An(e))Ui.call(e,r)&&Cn(t,r,e[r]);return t},Pt=(t,e)=>Wi(t,Ni(e));const{pi:tt,pi2:Fi,infinity:kn,max:Bi,trunc:zi,cos:Ie,sin:Te,atan2:Hi,random:V}=m.globals,Vi=new Map([[p.easy,40],[p.normal,20],[p.hard,10]]),qi=new Map([[p.easy,()=>6+V()*2],[p.normal,()=>6+V()*3],[p.hard,()=>6+V()*4]]),Gi=new Map([[p.easy,()=>-.008*V()],[p.normal,()=>-.01*V()],[p.hard,()=>-.016*V()]]),Yi=(t,e)=>R(-e+.4+V()*tt*1.6,V()*y,Gi.get(t)(),qi.get(t)()),Xi=new Map([[p.easy,.02],[p.normal,.035],[p.hard,.05]]),Zi=new Map([[p.easy,500],[p.normal,350],[p.hard,250]]),Ki=t=>[...Array(4)].map((e,r)=>{const n=t+r*(tt/2);return Se(v+y*Ie(n),v+y*Te(n),n+1.125*tt)}),Ji=new Map([[p.easy,1],[p.normal,1.3],[p.hard,1.7]]),Qi=new Map([[p.easy,500],[p.normal,450],[p.hard,350]]),tc=new Map([[p.easy,{speed:.3,hole:tt/1.2,width:5}],[p.normal,{speed:.35,hole:tt/1.3,width:6}],[p.hard,{speed:.4,hole:tt/2,width:7}]]),ec=(t,e)=>{const{speed:r,hole:n,width:a}=tc.get(t),s=-e-tt*.7,i=v+y*.5*Ie(s),o=v+y*.5*Te(s);return gn(i,o,-e,1,.03,r,n,a)},rc=new Map([[p.easy,1],[p.normal,1.5],[p.hard,2]]),nc=new Map([[p.easy,35],[p.normal,20],[p.hard,15]]),In=["red","yellow","lime","cyan","blue","magenta"],ac=(t,e,r,n)=>{const a=v+y*Ie(t),s=v+y*Te(t),i=Hi(r-s,e-a);return J(a,s,i,1,6,"white",In[n])},sc=new Map([[p.easy,400],[p.normal,350],[p.hard,200]]),oc=new Map([[p.easy,{width:6,speed:.08}],[p.normal,{width:7,speed:.013}],[p.hard,{width:8,speed:.017}]]),ic=(t,e,r,n)=>{const{width:a,speed:s}=oc.get(t),i=a*3.5,o=-e-tt*.6,c=(r+(n?a:0))%i;return[...Array(zi(y/i)+1)].map((l,d)=>R(o,c+d*i,s,a,0,"gray"))},cc=new Map([[p.easy,150],[p.normal,100],[p.hard,80]]),lc=new Map([[p.easy,{speed:.8,length:8}],[p.normal,{speed:.9,length:12}],[p.hard,{speed:1,length:16}]]),pc=(t,e)=>{const{speed:r,length:n}=lc.get(t),a=Fi/n;return[...Array(n)].map((s,i)=>J(v,v,e+i*a,r,6,"white","blue"))},dc=yt((t,e)=>e===1?Pt(Ot({},rn((V()<.5?-1:1)*Xi.get(t),kn)),{wait:120}):e===3?Pt(Ot({},Ht(Ji.get(t),kn)),{wait:120}):e===5?Pt(Ot({},Vt(rc.get(t),t===p.hard?30:60)),{wait:60}):e===9?ji():T(),new Map([[p.easy,0],[p.normal,0],[p.hard,0]])),fc=(t,e)=>t===6?e.map(r=>r.id===P.swimOrb?Pt(Ot({},r),{color:"lime"}):r):t===5?e.filter(({id:r})=>r!==P.landolt):t===8?e.map(r=>r.id===P.lazer?Pt(Ot({},r),{time:Bi(r.time,155)}):r):t===9?U(e):e,De=(t=30,e=0,r=0,n=0,a=0,s=0,i=0,o=0,c=!1,l=0,d=0)=>(f,h,g,{enemies:w,px:$,py:b,pa:O,pr:x,playerInvincible:S,evt:k})=>{const M=(h-1)%10,I=e>=Vi.get(f),vt=M>=2&&M<=7&&r>=Zi.get(f),ca=M===4&&n>=Qi.get(f),Jt=M>=6&&a>=nc.get(f),Ge=M>=7&&o>=sc.get(f),Ye=M>=8&&l>=cc.get(f),Dp=M===9?[]:[I?[Yi(f,O)]:[],vt?Ki(-O):[],ca?[ec(f,O)]:[],Jt?[ac(s,$,b,i)]:[],Ge?ic(f,O,x,c):[],Ye?pc(f,d):[]].flat(),la=(S>0?w.flatMap(L(S,$,b)):w).concat(Dp),{nextEvt:jp,nextEvtTime:Lp}=M%2?dc(f,M,t,k):{nextEvt:T(),nextEvtTime:30};return{enemies:g?fc(M,la):la,nextStage:De(Lp,I?0:e+1,vt?0:r+1,ca?0:n+1,Jt?0:a+1,Jt?s+.5:s,Jt?(i+1)%In.length:i,Ge?0:o+1,Ge?!c:c,Ye?0:l+1,Ye?d:d-.3),evt:jp}},{pi:Tn,pi2:uc,trunc:Dn}=m.globals,hc=new Map([[p.easy,t=>200-t*10],[p.normal,t=>160-t*10],[p.hard,t=>120-t*8]]),jn=new Map([[p.easy,t=>({length:6+Dn(t/2),width:6,speed:1})],[p.normal,t=>({length:7+t,width:6,speed:1})],[p.hard,t=>({length:10+Dn(t/2),width:7,speed:1.5})]]),Ln=(t,e,r,n)=>{const{length:a,width:s,speed:i}=jn.get(t)(e),o=n?"blue":"magenta";return[...Array(a)].map((c,l)=>{const d=r+uc*(l/a)+(n?0:Tn/a);return n?J(v,v,d,i,s,"white",o):bo(d,i,s,"white",o)})},je=(t=0,e=0)=>(r,n,a,{enemies:s,px:i,py:o,pa:c,pr:l,playerInvincible:d})=>{const f=(n-1)%10,h=hc.get(r)(f),g=[d>0?s.flatMap(L(d,i,o)):s,t===h/2?Ln(r,f,e,!0):[],t>=h&&(r!==p.hard||f>=5)?Ln(r,f,e,!1):[],r===p.hard&&t>=h?[R(-c-.63,l,.01,6)]:[]].flat();return a&&n%10==1?{enemies:U(g),nextStage:De(),evt:T()}:{enemies:g,nextStage:je(t>=h?0:t+1,t>=h?e+Tn/jn.get(r)(f).length*1.2:e),evt:T()}},{pi:vc,random:gc}=m.globals,$c=new Map([[p.easy,t=>200-t*20],[p.normal,t=>175-t*20],[p.hard,t=>160-t*18]]),bc=new Map([[p.easy,t=>({length:5,width:8,speed:.01+t*.0015})],[p.normal,t=>({length:5,width:9,speed:.013+t*.002})],[p.hard,t=>({length:7,width:8.3,speed:.016+t*.0026})]]),wc=(t,e,r,n)=>{const a=-r+(n?1:-1)*vc*(.3+.4*gc()),{length:s,width:i,speed:o}=bc.get(t)(e),c=(n?-1:1)*o;return[...Array(s+1-n)].map((l,d)=>R(a,y*((d+n*.5)/s),c,i))},yc=new Map([[p.easy,t=>ke(200+t*10)],[p.normal,t=>ke(250+t*25)],[p.hard,t=>ke(300+t*25)]]),mc=new Map([[p.easy,200],[p.normal,100],[p.hard,0]]),_c=yt((t,e)=>yc.get(t)(e),mc),Le=(t=130,e=0,r=0)=>(n,a,s,{enemies:i,evt:o,px:c,py:l,pa:d,playerInvincible:f})=>{const h=(a-1)%10,g=t>=$c.get(n)(h%5),w=[f>0?i.flatMap(L(f,c,l)):i,g?wc(n,h%5,d,e):[]].flat(),{nextEvt:$,nextEvtTime:b}=h<5?{nextEvt:o,nextEvtTime:r}:_c(n,h,r,o);return s&&a%10==1?{enemies:U(w),nextStage:je(),evt:T()}:{enemies:w,nextStage:Le(g?0:t+1,g?1-e:e,b),evt:$}},{pi:Oc,cos:Pc,sin:xc,atan2:Ec}=m.globals,Sc=new Map([[p.easy,t=>30-t],[p.normal,t=>20-t],[p.hard,t=>15-t]]),Mc=new Map([[p.easy,6],[p.normal,5],[p.hard,6]]),Wn=["red","yellow","lime","cyan","blue","magenta"],Ac=(t,e,r,n,a,s)=>{const i=v+y*Pc(n),o=v+y*xc(n),c=Ec(r-o,e-i);return t<5?[J(i,o,c,1,a,"white",s)]:[J(i,o,c,1,a,"white",s),J(v*2-i,v*2-o,c+Oc,1,a,"white",s)]},We=(t=0,e=0,r=0)=>(n,a,s,{enemies:i,px:o,py:c,playerInvincible:l,evt:d})=>{const f=(a-1)%10,h=t>=Sc.get(n)(f%5),g=[l>0?i.flatMap(L(l,o,c)):i,h?Ac(f,o,c,e,Mc.get(n),Wn[r]):[]].flat();return s&&a%10==1?{enemies:U(g),nextStage:Le(),evt:T()}:{enemies:g,nextStage:We(h?0:t+1,e+.02,h?(r+1)%Wn.length:r),evt:d}},{pi:Nn,random:et}=m.globals,Cc=new Map([[p.easy,t=>30-t*2],[p.normal,t=>25-t*2],[p.hard,t=>15-t]]),kc=new Map([[p.easy,()=>-.008+.016*et()],[p.normal,()=>-.01+.02*et()],[p.hard,()=>-.016+.032*et()]]),Ic=new Map([[p.easy,()=>6+et()*3],[p.normal,()=>7+et()*4],[p.hard,()=>8+et()*5]]),Tc=new Map([[p.easy,t=>Vt(1,150+t*10)],[p.normal,t=>Vt(1.5,200+t*20)],[p.hard,t=>Vt(2,250+t*30)]]),Dc=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),jc=yt((t,e)=>Tc.get(t)(e),Dc),Ne=(t=0,e=0)=>(r,n,a,{enemies:s,evt:i,px:o,py:c,pa:l,playerInvincible:d})=>{const f=(n-1)%10,h=t>=Cc.get(r)(f),g=[d>0?s.flatMap(L(d,o,c)):s,h?[R(-l+Nn*.2+et()*Nn*1.6,y*et(),kc.get(r)(),Ic.get(r)())]:[]].flat(),{nextEvt:w,nextEvtTime:$}=jc(r,f,e,i);return a&&n%10==1?{enemies:U(g),nextStage:We(),evt:T()}:{enemies:g,nextStage:Ne(h?0:t+1,$),evt:w}},{pi:xt,pi2:Lc,cos:Wc,sin:Nc,random:F}=m.globals,Rc=new Map([[p.easy,t=>60-t*3],[p.normal,t=>54-t*4],[p.hard,t=>26-t*2]]),Uc=new Map([[p.easy,()=>-.008*F()],[p.normal,()=>-.01*F()],[p.hard,()=>-.01*F()]]),Fc=new Map([[p.easy,()=>6+F()*2],[p.normal,()=>6+F()*3],[p.hard,()=>6+F()*4]]),Bc=new Map([[p.easy,t=>500-t*20],[p.normal,t=>300-t*30],[p.hard,t=>250-t*30]]),zc=new Map([[p.easy,{speed:.4,hole:xt/1.3,width:5}],[p.normal,{speed:.5,hole:xt/1.5,width:6}],[p.hard,{speed:.6,hole:xt/2.3,width:7}]]),Hc=(t,e,r)=>{const{speed:n,hole:a,width:s}=zc.get(t),i=v+(e<=45?0:y/2*Wc(r)),o=v+(e<=45?0:y/2*Nc(r));return gn(i,o,F()*Lc,1,F()<.5?.03:-.03,n,a,s)},Re=(t=0,e=100)=>(r,n,a,{enemies:s,pa:i,px:o,py:c,playerInvincible:l})=>{const d=t>=Rc.get(r)(n-40),f=e>=Bc.get(r)((n-1)%5),h=[l>0?s.flatMap(L(l,o,c)):s,d?[R(-i+.4+F()*xt*1.6,y*F(),Uc.get(r)(),Fc.get(r)())]:[],f?[Hc(r,n,xt-i)]:[]].flat();return a&&n%10==1?{enemies:U(h),nextStage:Ne(),evt:T()}:{enemies:h,nextStage:Re(d?0:t+1,f?0:e+1),evt:T()}},{pi:Vc,pi2:Rn,min:qc,random:q}=m.globals,Gc=new Map([[p.easy,t=>28-t*2],[p.normal,t=>25-t*2],[p.hard,t=>15-t]]),Yc=new Map([[p.easy,()=>-.008*q()],[p.normal,()=>-.01*q()],[p.hard,()=>-.018*q()]]),Xc=new Map([[p.easy,()=>6+q()*2],[p.normal,()=>6+q()*3],[p.hard,()=>6+q()*4]]),Zc=new Map([[p.easy,t=>Ht(.5+t*.05,200)],[p.normal,t=>Ht(.5+t*.08,200)],[p.hard,t=>Ht(.5+t*.12,200)]]),Kc=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),Jc=yt((t,e)=>Zc.get(t)(e),Kc),Ue=(t=0,e=0,r=0)=>(n,a,s,{enemies:i,evt:o,px:c,py:l,pa:d,playerInvincible:f})=>{const h=(a-1)%10,g=t>=Gc.get(n)(h),w=n!==p.easy&&h>5&&e>=250-h*10,$=[f>0?i.flatMap(L(f,c,l)):i,g?[R(-d+.4+q()*Vc*1.6,y*qc(.7+q()*.4,1),Yc.get(n)(),Xc.get(n)())]:[],w?new Array(10).fill(q()*Rn).map((x,S)=>J(v,v,S/10*Rn+x,2,7,"white","blue")):[]].flat(),{nextEvt:b,nextEvtTime:O}=Jc(n,h,r,o);return s&&a%10==1?{enemies:U($),nextStage:Re(),evt:T()}:{enemies:$,nextStage:Ue(g?0:t+1,w?0:e+1,O),evt:b}},{pi:dt,cos:Qc,sin:tl,random:W}=m.globals,el=new Map([[p.easy,t=>30-t*2],[p.normal,t=>27-t*2],[p.hard,t=>14-t]]),rl=new Map([[p.easy,()=>-.008*W()],[p.normal,()=>-.01*W()],[p.hard,()=>-.01*W()]]),nl=new Map([[p.easy,()=>6+W()*2],[p.normal,()=>6+W()*3],[p.hard,()=>6+W()*4]]),al=new Map([[p.easy,{wait:t=>300-t*10,radius:.7,angle:t=>t+dt*(.9+W()*.2)}],[p.normal,{wait:t=>200-t*10,radius:.8,angle:t=>t+dt*(.9+W()*.2)}],[p.hard,{wait:t=>150-t*10,radius:.95,angle:t=>t+dt*(.8+W()*.4)}]]),Fe=(t=0,e=0,r=dt/3)=>(n,a,s,{enemies:i,px:o,py:c,pa:l,playerInvincible:d})=>{const f=t>=el.get(n)(a-20),{wait:h,radius:g,angle:w}=al.get(n),$=e>=h(a-20),b=[d>0?i.flatMap(L(d,o,c)):i,f?[R(-l+.4+W()*dt*1.6,W()*y,rl.get(n)(),nl.get(n)())]:[],$?[Se(v+g*y*Qc(r),v+g*y*tl(r),w(r))]:[]].flat();return s&&a%10==1?{enemies:U(b),evt:T(),nextStage:Ue()}:{enemies:b,evt:T(),nextStage:Fe(f?0:t+1,$?0:e+1,$?r+dt/3:r)}},{pi:sl,pi2:ol,random:G}=m.globals,il=new Map([[p.easy,t=>28-t*2],[p.normal,t=>25-t*2],[p.hard,t=>12-t]]),cl=new Map([[p.easy,()=>-.008*G()],[p.normal,()=>-.01*G()],[p.hard,()=>-.02*G()]]),ll=new Map([[p.easy,()=>6+G()*2],[p.normal,()=>6+G()*3],[p.hard,()=>6+G()*4]]),pl=new Map([[p.easy,t=>({speed:.02,rotateCount:t>5?2:1})],[p.normal,t=>({speed:.02,rotateCount:t>5?3:2})],[p.hard,t=>({speed:.05,rotateCount:t>5?4:2})]]),dl=new Map([[p.easy,600],[p.normal,300],[p.hard,0]]),fl=yt((t,e)=>{const{speed:r,rotateCount:n}=pl.get(t)(e);return rn((G()<.5?-1:1)*r,ol/r*n)},dl),Be=(t=0,e=0)=>(r,n,a,{enemies:s,evt:i,px:o,py:c,pa:l,playerInvincible:d})=>{const f=(n-1)%10,h=t>=il.get(r)(f),g=[d>0?s.flatMap(L(d,o,c)):s,h?[R(-l+.4+G()*sl*1.6,G()*y,cl.get(r)(),ll.get(r)())]:[]].flat(),{nextEvt:w,nextEvtTime:$}=fl(r,f,e,i);return a&&n%10==1?{enemies:U(g),nextStage:Fe(),evt:T()}:{enemies:g,nextStage:Be(h?0:t+1,$),evt:w}},{pi:ul,pi2:hl,random:D}=m.globals,Un=new Map([[p.easy,()=>6+D()*2],[p.normal,()=>6+D()*3],[p.hard,()=>6+D()*4]]),vl=new Map([[p.easy,t=>30-t*2],[p.normal,t=>27-t*2],[p.hard,t=>13-t]]),gl=new Map([[p.easy,()=>-.008*D()],[p.normal,()=>-.01*D()],[p.hard,()=>-.016*D()]]),$l=new Map([[p.easy,()=>!1],[p.normal,(t,e)=>t>5&&e>=30-t*2],[p.hard,(t,e)=>t>5&&e>=27-t*2]]),bl=new Map([[p.easy,()=>.5+D()*.5],[p.normal,()=>.7+D()*.6],[p.hard,()=>1+D()]]),Et=(t=0,e=0)=>(r,n,a,s)=>{const{enemies:i,evt:o,px:c,py:l,pa:d,playerInvincible:f}=s,h=t>=vl.get(r)(n),g=$l.get(r)(n,e),w=[f>0?i.flatMap(L(f,c,l)):i,h?[R(-d+.4+D()*ul*1.6,D()*y,gl.get(r)(),Un.get(r)())]:[],g?[J(v+(2*D()-1)*20,v+(2*D()-1)*20,D()*hl,bl.get(r)(),Un.get(r)(),"white","blue")]:[]].flat();return a&&n%10==1?{enemies:U(w),nextStage:Be(),evt:o}:{enemies:w,nextStage:Et(h?0:t+1,g?0:e+1),evt:o}};var Gt=()=>({level:1,mode:p.normal,practice:!1,stage:Et(),evt:T(),playerAngle:0,playerRadius:y/2,playerInvincible:0,deaths:0,frames:0,enemies:[]}),wl=Object.defineProperty,yl=Object.defineProperties,ml=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertySymbols,_l=Object.prototype.hasOwnProperty,Ol=Object.prototype.propertyIsEnumerable,Bn=(t,e,r)=>e in t?wl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pl=(t,e)=>{for(var r in e||(e={}))_l.call(e,r)&&Bn(t,r,e[r]);if(Fn)for(var r of Fn(e))Ol.call(e,r)&&Bn(t,r,e[r]);return t},xl=(t,e)=>yl(t,ml(e));const{min:zn,max:El,round:Hn,random:Vn}=m.globals,Sl=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${E/4}px serif`,u.textAlign="center",u.fillText("\u8F2A\u5EFB",v,v-E/10),u.closePath(),u.restore()},Ml=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${E/10}px serif`,u.textAlign="center",u.fillText("\u2212\u56DE\u5411\u2212",v,v+E/30),u.closePath(),u.restore()};var qn=(t=0)=>({mode:e,level:r,practice:n})=>{t===0&&(rt.update(()=>({appearance:0,playerAngle:0})),K.update(()=>({appearance:0})),ct.update(()=>({appearance:0,deaths:0})),lt.update(()=>({appearance:0,name:"-"}))),Wt(),Sl(zn(t/60,(165-t)/60,1));const a=El(zn((t-75)/30,(165-t)/60,1),0);if(Ml(a),be.update(()=>({startOpacity:(t>105&&!n?Hn(Vn()):1)*a,practiceOpacity:(t>105&&n?Hn(Vn()):1)*a})),it.update(()=>({opacity:t>105&&n?1:a})),t===105){const[s,i]=kr().reduce(([o,c],{id:l,param:d})=>l===H.mode?[d,c]:[H.start,H.practice].includes(l)?[o,l]:[o,c],[e,null]);return $e(),it.update(()=>({mode:s})),{nextId:_.title,nextArgs:[i===null?105:106],stateUpdate:{mode:s,practice:i===H.practice}}}return $e(),t===165?{nextId:n?_.practice:_.start,nextArgs:[],stateUpdate:{level:n?1:r,stage:Et()}}:{nextId:_.title,nextArgs:[t+1],stateUpdate:t===0?xl(Pl({},Gt()),{mode:e}):{}}};const{pi2:Al,min:ft,max:ze,trunc:Cl}=m.globals,kl=t=>{u.save(),u.beginPath();const e=1-ft(ze((t%60-15)/30,0),1);u.fillStyle=`rgba(255, 255, 255, ${e})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${y/3}px serif`,u.textAlign="center",u.fillText(3-Cl(t/60),v,y/2),u.restore()};var Il=(t=0)=>({level:e,mode:r})=>{t===0&&(rt.update(()=>({level:e})),K.update(()=>({mode:r})));const n=ft(t/30,1);return rt.update(()=>({appearance:n})),K.update(()=>({appearance:n})),ct.update(()=>({appearance:n})),lt.update(()=>({appearance:n,name:"-"})),Wt(),fe(),ue(ft(t/30,1)),wt(0,ft(ze((t-60)/30,0),1)),u.globalAlpha=ft(ze((t-30)/30,0),1),Nt(v+y/2,v),u.globalAlpha=ft(t/30,1),Rt(),u.globalAlpha=1,t<180&&kl(t),he(-(t/160)*Al),t<180?{nextId:_.start,nextArgs:[t+1],stateUpdate:{}}:{nextId:_.main,nextArgs:[],stateUpdate:{frames:0}}};const{min:Tl}=m.globals,Dl={opacity:0,top:0,fontSize:0,selected:null},B=t=>()=>ge(H.stage,t),jl=(t,e)=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"20%",transform:"translate(-50%, 0)",textAlign:"center",fontSize:`${e*1.7}px`,fontFamily:"serif",color:"white",opacity:t}),Ll=t=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:t}),z=(t,e)=>({outline:"none",border:`2px solid ${t?"white":"transparent"}`,margin:`${e/4}px 0 ${e/2}px`,width:`${e*7}px`,fontSize:`${e}px`,color:"white",backgroundColor:"transparent"}),Yt=X(Dl,t=>({opacity:e,fontSize:r,selected:n})=>t`<div style=${jl(e,r)}>Select Level</div><div style=${Ll(e)}><button style=${z(n===1,r)} onClick=${B(1)}>Lv.1~10</button><button style=${z(n===2,r)} onClick=${B(2)}>Lv.11~20</button><br><button style=${z(n===3,r)} onClick=${B(3)}>Lv.21~30</button><button style=${z(n===4,r)} onClick=${B(4)}>Lv.31~40</button><br><button style=${z(n===5,r)} onClick=${B(5)}>Lv.41~50</button><button style=${z(n===6,r)} onClick=${B(6)}>Lv.51~60</button><br><button style=${z(n===7,r)} onClick=${B(7)}>Lv.61~70</button><button style=${z(n===8,r)} onClick=${B(8)}>Lv.71~80</button><br><button style=${z(n===9,r)} onClick=${B(9)}>Lv.81~90</button><button style=${z(n===10,r)} onClick=${B(10)}>Lv.91~100</button></div>`);N.subscribe(({width:t,height:e})=>{const n=Tl(t,e)*.03;Yt.update(()=>({fontSize:n}))});const{window:ut}=m.globals,j={};ut.addEventListener("keydown",({key:t})=>{j[t]=!0}),ut.addEventListener("keyup",({key:t})=>{j[t]=!1});let Gn=[];const Xt=t=>{Gn=[...t.touches]};ut.addEventListener("touchstart",Xt),ut.addEventListener("touchmove",Xt),ut.addEventListener("touchend",Xt),ut.addEventListener("touchcancel",Xt);const Wl=(t,e,r)=>{const n=r/e;return t.reduce((a,{clientX:s,clientY:i})=>{const o=s*n<i,c=i<r-s*n;return{left:a.left||o&&c,right:a.right||!o&&!c,up:a.up||!o&&c,down:a.down||o&&!c}},{})};let Yn=0,Xn=0;N.subscribe(({width:t,height:e})=>{Yn=t,Xn=e});var He=()=>{const t=Wl(Gn,Yn,Xn);return{inner:j.a||j.ArrowLeft||t.left||!1,outer:j.d||j.ArrowRight||t.right||!1,quick:j.w||j.ArrowUp||t.up||!1,brake:j.s||j.ArrowDown||t.down||!1,pause:j.p||!1,escape:j.Escape||!1}};const{min:Zn}=m.globals,Nl=[Et,Be,Fe,Ue,Re,Ne,We,Le,je,De];var Rl=(t=0,e=null)=>({mode:r})=>{if(Yt.update(()=>({selected:e,opacity:Zn(t/30,(60-t)/30)})),it.update(()=>({mode:r,opacity:Zn((60-t)/30,1)})),t===30){if(He().escape)return Yt.update(()=>({opacity:0})),it.update(()=>({opacity:0})),{nextId:_.title,nextArgs:[],stateUpdate:{}};const[n,a]=kr().reduce(([s,i],{id:o,param:c})=>o===H.mode?[c,i]:[s,c],[r,null]);return{nextId:_.practice,nextArgs:[a===null?30:31,a],stateUpdate:{mode:n,level:a&&(a-1)*10+1,stage:(Nl[a-1]||Et)()}}}return $e(),t<60?{nextId:_.practice,nextArgs:[t+1,e],stateUpdate:{}}:{nextId:_.start,nextArgs:[],stateUpdate:{}}};const Ul=new Map([[P.swimOrb,$o],[P.linearOrb,Jr],[P.orbToCenter,wo],[P.lazer,Wo],[P.landolt,oi]]),Kn=new Map([[P.swimOrb,go],[P.linearOrb,Kr],[P.orbToCenter,Kr],[P.lazer,Fo],[P.landolt,ni]]);var Fl=Object.defineProperty,Bl=Object.defineProperties,zl=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,Jn=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable,ta=(t,e,r)=>e in t?Fl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ve=(t,e)=>{for(var r in e||(e={}))Jn.call(e,r)&&ta(t,r,e[r]);if(Zt)for(var r of Zt(e))Qn.call(e,r)&&ta(t,r,e[r]);return t},qe=(t,e)=>Bl(t,zl(e)),Hl=(t,e)=>{var r={};for(var n in t)Jn.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Zt)for(var n of Zt(t))e.indexOf(n)<0&&Qn.call(t,n)&&(r[n]=t[n]);return r};const{pi2:ea,cos:Vl,sin:ql,min:Gl,max:ra,random:Yl}=m.globals,Xl=()=>({state:He()}),Zl=({escape:t,mode:e})=>({returns:t?{nextId:_.title,nextArgs:[],stateUpdate:qe(Ve({},Gt()),{mode:e})}:!1}),Kl=({pause:t,pauseTime:e})=>({returns:t&&e>10?{nextId:_.pause,nextArgs:[0],stateUpdate:{}}:!1}),Jl=t=>{var e=t,{evt:r}=e,n=Hl(e,["evt"]);return r.waitTime>=r.wait?{state:r.inputEffect(n,r)}:{}},Ql=({inner:t,outer:e,quick:r,brake:n,pa:a,pr:s})=>({state:{pa:a+.007+(r-n)*.005,pr:Gl(ra(s+(e-t)*2,10),y-10)}}),tp=()=>(fe(),ue(),he(),{}),na=({pa:t,pr:e})=>({state:{px:v+e*Vl(-t),py:v+e*ql(-t)}}),ep=({practice:t,pa:e,pr:r,level:n,deaths:a,frames:s})=>{const i=e>=ea,o=n+(i?1:0);if(t&&i&&o%10==1)return{returns:{nextId:_.title,nextArgs:[],stateUpdate:{}}};if(n===101){if(a>=100)return{returns:{nextId:_.title,nextArgs:[],stateUpdate:{}}};wt(e);const{state:{px:c,py:l}}=na({pa:e,pr:r});return Nt(c,l),Rt(),{returns:{nextId:_.over,nextArgs:[],stateUpdate:{frames:s+1}}}}return{state:{pa:i?e%ea:e,level:o,levelUp:i}}},rp=({playerInvincible:t,pa:e,px:r,py:n})=>(wt(e),(t===0||Yl()<.5)&&Nt(r,n),{}),np=({mode:t,level:e,levelUp:r,stage:n,pa:a,pr:s,px:i,py:o,playerInvincible:c,enemies:l,evt:d})=>{const f=n(t,e,r,{px:i,py:o,pa:a,pr:s,playerInvincible:c,enemies:l,evt:d});return{state:{stage:f.nextStage,evt:f.evt,enemies:f.enemies}}},ap=({enemies:t,px:e,py:r})=>{const n=t.reduce((a,s)=>{const{id:i}=s,{nextEnemies:o,hit:c}=Ul.get(i)(s,e,r);return Kn.get(i)(u,s),{nextEnemies:a.nextEnemies.concat(o),hit:a.hit||c}},{nextEnemies:[],hit:!1});return{state:{enemies:n.nextEnemies,hit:n.hit}}},sp=({evt:t})=>{const{eventTime:e,duration:r,waitTime:n,wait:a,afterEffect:s,props:i}=t,o=n>=a;return Cr(o?1-e/r:n/a),{state:{evt:qe(Ve({},t),{waitTime:n+1,eventTime:o?e+1:0,props:o?s(i,e,u):i})}}},op=({mode:t,level:e,pa:r,evt:n})=>(rt.update(()=>({level:e,playerAngle:r})),K.update(()=>({mode:t})),lt.update(()=>({name:n.name})),Rt(),{}),ip=({pa:t,pr:e})=>({state:{playerAngle:t,playerRadius:e}}),cp=t=>{const{level:e,mode:r,practice:n,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l,frames:d,enemies:f,hit:h}=t;return h&&c===0?(ct.update(()=>({deaths:l+1})),{returns:{nextId:_.death,nextArgs:[],stateUpdate:{level:e,mode:r,practice:n,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l+1,frames:d+1,enemies:f}}}):{}},lp=({pauseTime:t,level:e,mode:r,practice:n,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l,frames:d,enemies:f})=>({returns:{nextId:_.main,nextArgs:[t+1],stateUpdate:{level:e,mode:r,practice:n,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:ra(c-1,0),deaths:l,frames:d+1,enemies:f}}});var pp=(t=0)=>e=>[Xl,Zl,Kl,tp,Jl,Ql,ep,na,rp,np,ap,sp,op,ip,cp,lp].reduce((r,n,a,s)=>{const{state:i,returns:o}=n(r);return o?(s.splice(a),o):Object.assign(r,i)},qe(Ve({},e),{pauseTime:t,pa:e.playerAngle,pr:e.playerRadius})),dp=Object.defineProperty,fp=Object.defineProperties,up=Object.getOwnPropertyDescriptors,aa=Object.getOwnPropertySymbols,hp=Object.prototype.hasOwnProperty,vp=Object.prototype.propertyIsEnumerable,sa=(t,e,r)=>e in t?dp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gp=(t,e)=>{for(var r in e||(e={}))hp.call(e,r)&&sa(t,r,e[r]);if(aa)for(var r of aa(e))vp.call(e,r)&&sa(t,r,e[r]);return t},$p=(t,e)=>fp(t,up(e)),bp=t=>({mode:e})=>{const{escape:r,pause:n}=He();return r?{nextId:_.title,nextArgs:[],stateUpdate:$p(gp({},Gt()),{mode:e})}:t>10&&n?{nextId:_.main,nextArgs:[0],stateUpdate:{}}:{nextId:_.pause,nextArgs:[t+1],stateUpdate:{}}};const{pi2:oa,cos:wp,sin:yp}=m.globals,mp=(t,e,r)=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 0, 0, ${1-r/90})`,u.arc(t,e,20+r/4.5,0,oa),u.fill(),u.closePath(),u.restore()},_p=(t,e,r)=>{u.save(),u.beginPath();const n=u.createRadialGradient(t,e,0,t,e,y*2);n.addColorStop(0,"rgba(255, 0, 0, 0)"),n.addColorStop(.05,"rgba(255, 0, 0, 0)"),n.addColorStop(.3+.7*(r/90),"rgba(255, 0, 0, 0.5)"),u.fillStyle=n,u.arc(t,e,y*2,0,oa),u.fill(),u.closePath(),u.restore()};var Op=(t=0)=>({playerAngle:e,playerRadius:r,enemies:n,evt:{wait:a,waitTime:s,eventTime:i,duration:o,afterEffect:c,props:l}})=>{Wt(),fe(),ue(),wt(e);const d=v+r*wp(-e),f=v+r*yp(-e);return mp(d,f,t),n.forEach(h=>Kn.get(h.id)(u,h)),Rt(),he(),Cr(s>=a?1-i/o:s/a),_p(d,f,t),c(l,i,u),t<90?{nextId:_.death,nextArgs:[t+1],stateUpdate:{}}:{nextId:_.main,nextArgs:[],stateUpdate:{playerInvincible:60,playerAngle:0,playerRadius:y/2}}};const{pi2:Pp,min:Kt,trunc:ht}=m.globals,xp=t=>{u.save(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.arc(v,v,y,0,Pp),u.restore()},Ep=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${t})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${E/4}px serif`,u.textAlign="center",u.fillText("\u89E3\u8131",v,v-E/8),u.closePath(),u.restore()},Sp=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${t})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${E/10}px serif`,u.textAlign="center",u.fillText("GAME OVER",v,v),u.closePath(),u.restore()},Mp=t=>{const e=t/60,r=ht(e/60).toString().padStart(2,"0"),n=(ht(e)%60).toString().padStart(2,"0"),a=ht((e-ht(e))*1e3).toString().padStart(3,"0");return`${r}:${n}.${a}`},Ap=(t,e,r,n)=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${n})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${E/20}px serif`,u.textAlign="center",u.fillText(`Mode: ${Fr.get(t)}`,v,v+E*.1),u.fillText(`Death${e>=2?"s":""}: ${e}`,v,v+E*.2),u.fillText(`Time: ${r}`,v,v+E*.3)};var Cp=(t=0,e=null)=>({mode:r,deaths:n,frames:a})=>{if(t>690)return{nextId:_.over,nextArgs:[t,e],stateUpdate:{}};if(t<=120){const s=1-t/120;rt.update(()=>({appearance:s,level:100})),K.update(()=>({appearance:s})),ct.update(()=>({appearance:s})),lt.update(()=>({appearance:s})),Lt.update(()=>({opacity:s}))}if(t>=120&&t<=420){const s=ht((t-120)*(255/300)),i=ht((s+102)/2),o=`rgb(${s}, ${s}, ${s})`,c=`rgb(${i}, ${i}, ${i})`;document.body.style.backgroundImage=`radial-gradient(circle closest-side, ${o} 60%, ${c} 100%, #666 200%)`}return t===420&&Lt.update(()=>({opacity:1})),t>=420&&(Wt(),xp(Kt((t-420)/120,1))),t>=420&&Ep(Kt((t-420)/120,1)),t>=570&&Sp(Kt((t-570)/60,1)),t>=630&&Ap(r,n,e,Kt((t-630)/60,1)),{nextId:_.over,nextArgs:[t+1,e||Mp(a)],stateUpdate:{}}};const{now:kp}=m.globals,Ip=new Map([[_.title,qn],[_.start,Il],[_.practice,Rl],[_.main,pp],[_.pause,bp],[_.death,Op],[_.over,Cp]]),ia=(t,e)=>()=>{hs(kp());const{nextId:r,nextArgs:n,stateUpdate:a}=t(e);return ia(Ip.get(r)(...n),Object.assign(e,a))},{bind:Tp}=m.hyperhtml;Tp(document.body)` ${Lt.render()} ${rt.render()} ${K.render()} ${ct.render()} ${lt.render()} ${be.render()} ${Yt.render()} ${it.render()}`,us(ia(qn(),Gt()))})();
