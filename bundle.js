(function(){"use strict";/*! (c) Andrea Giammarchi - ISC */var re={};try{re.WeakMap=WeakMap}catch{re.WeakMap=function(e,r){var n=r.defineProperty,a=r.hasOwnProperty,s=i.prototype;return s.delete=function(c){return this.has(c)&&delete c[this._]},s.get=function(c){return this.has(c)?c[this._]:void 0},s.has=function(c){return a.call(c,this._)},s.set=function(c,l){return n(c,this._,{configurable:!0,value:l}),this},i;function i(c){n(this,"_",{value:"_@ungap/weakmap"+e++}),c&&c.forEach(o,this)}function o(c){this.set(c[0],c[1])}}(Math.random(),Object)}var st=re.WeakMap;/*! (c) Andrea Giammarchi - ISC */var ne={};try{ne.WeakSet=WeakSet}catch{(function(e,r){var n=a.prototype;n.add=function(s){return this.has(s)||r(s,this._,{value:!0,configurable:!0}),this},n.has=function(s){return this.hasOwnProperty.call(s,this._)},n.delete=function(s){return this.has(s)&&delete s[this._]},ne.WeakSet=a;function a(){r(this,"_",{value:"_@ungap/weakmap"+e++})}})(Math.random(),Object.defineProperty)}var va=ne.WeakSet;const{indexOf:ga,slice:Np}=[],ot=(t,e,r,n,a,s)=>{const i="selectedIndex"in e;let o=i;for(;n<a;){const c=t(r[n],1);if(e.insertBefore(c,s),i&&o&&c.selected){o=!o;let{selectedIndex:l}=e;e.selectedIndex=l<0?n:ga.call(e.querySelectorAll("option"),c)}n++}},wa=(t,e)=>t==e,$a=t=>t,Je=(t,e,r,n,a,s,i)=>{const o=s-a;if(o<1)return-1;for(;r-e>=o;){let c=e,l=a;for(;c<r&&l<s&&i(t[c],n[l]);)c++,l++;if(l===s)return e;e=c+1}return-1},ba=(t,e,r,n,a,s)=>{for(;n<a&&s(r[n],t[e-1]);)n++,e--;return e===0},ae=(t,e,r,n,a)=>r<n?t(e[r],0):0<r?t(e[r-1],-0).nextSibling:a,gt=(t,e,r,n)=>{for(;r<n;)Ea(t(e[r++],-1))},wt=-1,kt=1,It=0,ya=50,ma=(t,e,r,n,a,s,i,o)=>{let c=0,l=n<o?n:o;const d=Array(l++),f=Array(l);f[0]=-1;for(let w=1;w<l;w++)f[w]=i;const h=a.slice(s,i);for(let w=e;w<r;w++){const $=h.indexOf(t[w]);if(-1<$){const O=$+s;c=Pa(f,l,O),-1<c&&(f[c]=O,d[c]={newi:w,oldi:O,prev:d[c-1]})}}for(c=--l,--i;f[c]>i;)--c;l=o+n-c;const g=Array(l);let b=d[c];for(--r;b;){const{newi:w,oldi:$}=b;for(;r>w;)g[--l]=kt,--r;for(;i>$;)g[--l]=wt,--i;g[--l]=It,--r,--i,b=b.prev}for(;r>=e;)g[--l]=kt,--r;for(;i>=s;)g[--l]=wt,--i;return g},_a=(t,e,r,n,a,s,i)=>{const o=r+s,c=[];let l,d,f,h,g,b,w;t:for(l=0;l<=o;l++){if(l>ya)return null;for(w=l-1,g=l?c[l-1]:[0,0],b=c[l]=[],d=-l;d<=l;d+=2){for(d===-l||d!==l&&g[w+d-1]<g[w+d+1]?h=g[w+d+1]:h=g[w+d-1]+1,f=h-d;h<s&&f<r&&i(n[a+h],t[e+f]);)h++,f++;if(h===s&&f===r)break t;b[l+d]=h}}const $=Array(l/2+o/2);let O=$.length-1;for(l=c.length-1;l>=0;l--){for(;h>0&&f>0&&i(n[a+h-1],t[e+f-1]);)$[O--]=It,h--,f--;if(!l)break;w=l-1,g=l?c[l-1]:[0,0],d=h-f,d===-l||d!==l&&g[w+d-1]<g[w+d+1]?(f--,$[O--]=kt):(h--,$[O--]=wt)}return $},Oa=(t,e,r,n,a,s,i,o,c)=>{const l=[],d=t.length;let f=i,h=0;for(;h<d;)switch(t[h++]){case It:a++,f++;break;case kt:l.push(n[a]),ot(e,r,n,a++,a,f<o?e(s[f],0):c);break;case wt:f++;break}for(h=0;h<d;)switch(t[h++]){case It:i++;break;case wt:-1<l.indexOf(s[i])?i++:gt(e,s,i++,i);break}},Pa=(t,e,r)=>{let n=1,a=e;for(;n<a;){const s=(n+a)/2>>>0;r<t[s]?a=s:n=s+1}return n},Sa=(t,e,r,n,a,s,i,o,c,l,d,f,h)=>{Oa(_a(r,n,s,i,o,l,f)||ma(r,n,a,s,i,o,c,l),t,e,r,n,i,o,d,h)},Ea=t=>(t.remove||xa).call(t);function xa(){const{parentNode:t}=this;t&&t.removeChild(this)}/*! (c) 2018 Andrea Giammarchi (ISC) */const it=(t,e,r,n)=>{n||(n={});const a=n.compare||wa,s=n.node||$a,i=n.before==null?null:s(n.before,0),o=e.length;let c=o,l=0,d=r.length,f=0;for(;l<c&&f<d&&a(e[l],r[f]);)l++,f++;for(;l<c&&f<d&&a(e[c-1],r[d-1]);)c--,d--;const h=l===c,g=f===d;if(h&&g)return r;if(h&&f<d)return ot(s,t,r,f,d,ae(s,e,l,o,i)),r;if(g&&l<c)return gt(s,e,l,c),r;const b=c-l,w=d-f;let $=-1;if(b<w){if($=Je(r,f,d,e,l,c,a),-1<$)return ot(s,t,r,f,$,s(e[l],0)),ot(s,t,r,$+b,d,ae(s,e,c,o,i)),r}else if(w<b&&($=Je(e,l,c,r,f,d,a),-1<$))return gt(s,e,l,$),gt(s,e,$+w,c),r;return b<2||w<2?(ot(s,t,r,f,d,s(e[l],0)),gt(s,e,l,c),r):b===w&&ba(r,d,e,l,c,a)?(ot(s,t,r,f,d,ae(s,e,c,o,i)),r):(Sa(s,t,r,f,d,w,e,l,c,b,o,a,i),r)};/*! (c) Andrea Giammarchi - ISC */var Qe={};Qe.CustomEvent=typeof CustomEvent=="function"?CustomEvent:function(t){return e[t]=new e("").constructor[t],e;function e(r,n){n||(n={});var a=document.createEvent("CustomEvent");return a.initCustomEvent(r,!!n.bubbles,!!n.cancelable,n.detail),a}}("prototype");var tr=Qe.CustomEvent;/*! (c) Andrea Giammarchi - ISC */var se={};try{se.Map=Map}catch{se.Map=function(){var r=0,n=[],a=[];return{delete:function(i){var o=s(i);return o&&(n.splice(r,1),a.splice(r,1)),o},forEach:function(o,c){n.forEach(function(l,d){o.call(c,a[d],l,this)},this)},get:function(o){return s(o)?a[r]:void 0},has:function(o){return s(o)},set:function(o,c){return a[s(o)?r:n.push(o)-1]=c,this}};function s(i){return r=n.indexOf(i),-1<r}}}var Ma=se.Map;function Tt(){return this}function Aa(t){const e=new st,r=Object.create,n=(o,c,l)=>(o.set(c,l),l),a=(o,c,l,d)=>{const f=c.get(o)||s(o,c);switch(typeof d){case"object":case"function":const h=f.w||(f.w=new st);return h.get(d)||n(h,d,new o(l));default:const g=f.p||(f.p=r(null));return g[d]||(g[d]=new o(l))}},s=(o,c)=>{const l={w:null,p:null};return c.set(o,l),l},i=o=>{const c=new Ma;return e.set(o,c),c};Object.defineProperties(Tt,{for:{configurable:!0,value(o,c){return a(this,e.get(o)||i(o),o,c??"default")}}}),Object.defineProperties(Tt.prototype,{handleEvent:{value(o){const c=o.currentTarget;this["getAttribute"in c&&c.getAttribute("data-call")||"on"+o.type](o)}},html:oe("html",t),svg:oe("svg",t),state:oe("state",function(){return this.defaultState}),defaultState:{get(){return{}}},dispatch:{value(o,c){const{_wire$:l}=this;if(l){const d=new tr(o,{bubbles:!0,cancelable:!0,detail:c});return d.component=this,(l.dispatchEvent?l:l.firstChild).dispatchEvent(d)}return!1}},setState:{value(o,c){const l=this.state,d=typeof o=="function"?o.call(this,l):o;for(const f in d)l[f]=d[f];return c!==!1&&this.render(),this}}})}const oe=(t,e)=>{const r="_"+t+"$";return{get(){return this[r]||er(this,r,e.call(this,t))},set(n){er(this,r,n)}}},er=(t,e,r)=>Object.defineProperty(t,e,{configurable:!0,value:typeof r=="function"?function(){return t._wire$=r.apply(this,arguments)}:r})[e];Object.defineProperties(Tt.prototype,{ELEMENT_NODE:{value:1},nodeType:{value:-1}});const rr={},Dt={},nr=[],Ca=Dt.hasOwnProperty;let ar=0;var $t={attributes:rr,define:(t,e)=>{t.indexOf("-")<0?(t in Dt||(ar=nr.push(t)),Dt[t]=e):rr[t]=e},invoke:(t,e)=>{for(let r=0;r<ar;r++){let n=nr[r];if(Ca.call(t,n))return Dt[n](t[n],e)}}},sr=Array.isArray||function(t){var e=t.call([]);return function(n){return t.call(n)===e}}({}.toString);/*! (c) Andrea Giammarchi - ISC */var or=function(t){var e="fragment",r="template",n="content"in i(r),a=n?function(c){var l=i(r);return l.innerHTML=c,l.content}:function(c){var l=i(e),d=i(r),f=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(c)){var h=RegExp.$1;d.innerHTML="<table>"+c+"</table>",f=d.querySelectorAll(h)}else d.innerHTML=c,f=d.childNodes;return s(l,f),l};return function(l,d){return(d==="svg"?o:a)(l)};function s(c,l){for(var d=l.length;d--;)c.appendChild(l[0])}function i(c){return c===e?t.createDocumentFragment():t.createElementNS("http://www.w3.org/1999/xhtml",c)}function o(c){var l=i(e),d=i("div");return d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+c+"</svg>",s(l,d.firstChild.childNodes),l}}(document);/*! (c) Andrea Giammarchi */function ka(t){var e=t.Event,r=t.WeakSet,n=!0,a=null;return function(o){return n&&(n=!n,a=new r,s(o.ownerDocument)),a.add(o),o};function s(i){var o=new r,c=new r;try{new MutationObserver(h).observe(i,{subtree:!0,childList:!0})}catch{var l=0,d=[],f=function($){d.push($),clearTimeout(l),l=setTimeout(function(){h(d.splice(l=0,d.length))},0)};i.addEventListener("DOMNodeRemoved",function($){f({addedNodes:[],removedNodes:[$.target]})},!0),i.addEventListener("DOMNodeInserted",function($){f({addedNodes:[$.target],removedNodes:[]})},!0)}function h(w){for(var $,O=w.length,S=0;S<O;S++)$=w[S],g($.removedNodes,"disconnected",c,o),g($.addedNodes,"connected",o,c)}function g(w,$,O,S){for(var x,k=new e($),M=w.length,I=0;I<M;(x=w[I++]).nodeType===1&&b(x,k,$,O,S));}function b(w,$,O,S,x){a.has(w)&&!S.has(w)&&(x.delete(w),S.add(w),w.dispatchEvent($));for(var k=w.children||[],M=k.length,I=0;I<M;b(k[I++],$,O,S,x));}}}/*! (c) Andrea Giammarchi - ISC */var Ia=function(t,e,r,n,a){var s=a in t,i=t.createDocumentFragment();i[e](t[n]("g")),i[e](t[n](""));var o=s?t[a](i,!0):i[r](!0);return o.childNodes.length<2?function c(l,d){for(var f=l[r](),h=l.childNodes||[],g=h.length,b=0;d&&b<g;b++)f[e](c(h[b],d));return f}:s?t[a]:function(c,l){return c[r](!!l)}}(document,"appendChild","cloneNode","createTextNode","importNode"),ir="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")};/*! (c) Andrea Giammarchi - ISC */var G="-"+Math.random().toFixed(6)+"%",ie=!1;try{(function(t,e,r){return e in t&&(t.innerHTML="<p "+r+'="'+G+'"></p>',t[e].childNodes[0].getAttribute(r)==G)})(document.createElement("template"),"content","tabindex")||(G="_dt: "+G.slice(1,-1)+";",ie=!0)}catch{}var jt="<!--"+G+"-->",Ta=8,Da=1,ja=3,cr=/^(?:plaintext|script|style|textarea|title|xmp)$/i,La=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function Wa(t){return t.join(jt).replace(Ra,Ba).replace(Na,za)}var Lt=" \\f\\n\\r\\t",lr="[^"+Lt+`\\/>"'=]+`,ce="["+Lt+"]+"+lr,pr="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",dr=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+lr.replace("\\/","")+"))?)",Na=new RegExp(pr+ce+dr+"+)(["+Lt+"]*/?>)","g"),Ra=new RegExp(pr+ce+dr+"*)(["+Lt+"]*/>)","g"),Ua=new RegExp("("+ce+`\\s*=\\s*)(['"]?)`+jt+"\\2","gi");function za(t,e,r,n){return"<"+e+r.replace(Ua,Fa)+n}function Fa(t,e,r){return e+(r||'"')+G+(r||'"')}function Ba(t,e,r){return La.test(e)?t:"<"+e+r+"></"+e+">"}var Va=t=>({get:e=>t.get(e),set:(e,r)=>(t.set(e,r),r)}),qa=ie?function(t,e){var r=e.join(" ");return e.slice.call(t,0).sort(function(n,a){return r.indexOf(n.name)<=r.indexOf(a.name)?-1:1})}:function(t,e){return e.slice.call(t,0)};function Ha(t,e){for(var r=e.length,n=0;n<r;)t=t.childNodes[e[n++]];return t}function fr(t,e,r,n){for(var a=t.childNodes,s=a.length,i=0;i<s;){var o=a[i];switch(o.nodeType){case Da:var c=n.concat(i);Ga(o,e,r,c),fr(o,e,r,c);break;case Ta:var l=o.textContent;if(l===G)r.shift(),e.push(cr.test(t.nodeName)?hr(t,n):Ya(o,n.concat(i)));else switch(l.slice(0,2)){case"/*":if(l.slice(-2)!=="*/")break;case"\u{1F47B}":t.removeChild(o),i--,s--}break;case ja:cr.test(t.nodeName)&&ir.call(o.textContent)===jt&&(r.shift(),e.push(hr(t,n)));break}i++}}function Ga(t,e,r,n){for(var a=t.attributes,s=[],i=[],o=qa(a,r),c=o.length,l=0;l<c;){var d=o[l++],f=d.value===G,h;if(f||1<(h=d.value.split(jt)).length){var g=d.name;if(s.indexOf(g)<0){s.push(g);var b=r.shift().replace(f?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+g+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),w=a[b]||a[b.toLowerCase()];if(f)e.push(ur(w,n,b,null));else{for(var $=h.length-2;$--;)r.shift();e.push(ur(w,n,b,h))}}i.push(d)}}c=i.length,l=0;for(var O=0<c&&ie&&!("ownerSVGElement"in t);l<c;){var S=i[l++];O&&(S.value=""),t.removeAttribute(S.name)}var x=t.nodeName;if(/^script$/i.test(x)){var k=document.createElement(x);for(c=a.length,l=0;l<c;)k.setAttributeNode(a[l++].cloneNode(!0));k.textContent=t.textContent,t.parentNode.replaceChild(k,t)}}function Ya(t,e){return{type:"any",node:t,path:e}}function ur(t,e,r,n){return{type:"attr",node:t,path:e,name:r,sparse:n}}function hr(t,e){return{type:"text",node:t,path:e}}var vr=Va(new st);function Xa(t,e){var r=(t.convert||Wa)(e),n=t.transform;n&&(r=n(r));var a=or(r,t.type);gr(a);var s=[];return fr(a,s,e.slice(0),[]),{content:a,updates:function(i){for(var o=[],c=s.length,l=0,d=0;l<c;){var f=s[l++],h=Ha(i,f.path);switch(f.type){case"any":o.push({fn:t.any(h,[]),sparse:!1});break;case"attr":var g=f.sparse,b=t.attribute(h,f.name,f.node);g===null?o.push({fn:b,sparse:!1}):(d+=g.length-2,o.push({fn:b,sparse:!0,values:g}));break;case"text":o.push({fn:t.text(h),sparse:!1}),h.textContent="";break}}return c+=d,function(){var w=arguments.length;if(c!==w-1)throw new Error(w-1+" values instead of "+c+`
`+e.join("${value}"));for(var $=1,O=1;$<w;){var S=o[$-O];if(S.sparse){var x=S.values,k=x[0],M=1,I=x.length;for(O+=I-2;M<I;)k+=arguments[$++]+x[M++];S.fn(k)}else S.fn(arguments[$++])}return i}}}}function Za(t,e){var r=vr.get(e)||vr.set(e,Xa(t,e));return r.updates(Ia.call(document,r.content,!0))}var Ka=[];function Ja(t){var e=Ka,r=gr;return function(n){return e!==n&&(r=Za(t,e=n)),r.apply(null,arguments)}}function gr(t){for(var e=t.childNodes,r=e.length;r--;){var n=e[r];n.nodeType!==1&&ir.call(n.textContent).length===0&&t.removeChild(n)}}/*! (c) Andrea Giammarchi - ISC */var Qa=function(){var t=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,e=/([^A-Z])([A-Z]+)/g;return function(o,c){return"ownerSVGElement"in o?n(o,c):s(o.style,!1)};function r(i,o,c){return o+"-"+c.toLowerCase()}function n(i,o){var c;return o?c=o.cloneNode(!0):(i.setAttribute("style","--hyper:style;"),c=i.getAttributeNode("style")),c.value="",i.setAttributeNode(c),s(c,!0)}function a(i){var o,c=[];for(o in i)c.push(o.replace(e,r),":",i[o],";");return c.join("")}function s(i,o){var c,l;return function(d){var f,h,g,b;switch(typeof d){case"object":if(d){if(c==="object"){if(!o&&l!==d)for(h in l)h in d||(i[h]="")}else o?i.value="":i.cssText="";f=o?{}:i;for(h in d)b=d[h],g=typeof b=="number"&&!t.test(h)?b+"px":b,!o&&/^--/.test(h)?f.setProperty(h,g):f[h]=g;c="object",o?i.value=a(l=f):l=d;break}default:l!=d&&(c="string",l=d,o?i.value=d||"":i.cssText=d||"");break}}}}();/*! (c) Andrea Giammarchi - ISC */var wr=function(t,e){return e=r.prototype,e.ELEMENT_NODE=1,e.nodeType=111,e.remove=function(n){var a=this.childNodes,s=this.firstChild,i=this.lastChild;if(this._=null,n&&a.length===2)i.parentNode.removeChild(i);else{var o=this.ownerDocument.createRange();o.setStartBefore(n?a[1]:s),o.setEndAfter(i),o.deleteContents()}return s},e.valueOf=function(n){var a=this._,s=a==null;if(s&&(a=this._=this.ownerDocument.createDocumentFragment()),s||n)for(var i=this.childNodes,o=0,c=i.length;o<c;o++)a.appendChild(i[o]);return a},r;function r(n){var a=this.childNodes=t.call(n,0);this.firstChild=a[0],this.lastChild=a[a.length-1],this.ownerDocument=a[0].ownerDocument,this._=null}}([].slice);const ts=11,le="ownerSVGElement",$r="connected",es="dis"+$r,rs=Tt.prototype.nodeType,ns=wr.prototype.nodeType,as=ka({Event:tr,WeakSet:va}),ss=t=>({html:t}),br=(t,e)=>{switch(t.nodeType){case ns:return 1/e<0?e?t.remove(!0):t.lastChild:e?t.valueOf(!0):t.firstChild;case rs:return br(t.render(),e);default:return t}},os=t=>"ELEMENT_NODE"in t,is=(t,e,r)=>n=>{r!==!!n&&((r=!!n)?t.setAttribute(e,""):t.removeAttribute(e))},cs=(t,e,r)=>r?n=>{try{t[e]=n}catch{t.setAttribute(e,n)}}:n=>{t[e]=n},yr=(t,e)=>{e(t.placeholder),"text"in t?Promise.resolve(t.text).then(String).then(e):"any"in t?Promise.resolve(t.any).then(e):"html"in t?Promise.resolve(t.html).then(ss).then(e):Promise.resolve($t.invoke(t,e)).then(e)},pe=t=>t!=null&&"then"in t,ls=/^(?:form|list)$/i,Wt=[].slice,ps=(t,e)=>t.ownerDocument.createTextNode(e);function de(t){return this.type=t,Ja(this)}de.prototype={attribute(t,e,r){const n=le in t;let a;if(e==="style")return Qa(t,r,n);if(e.slice(0,1)===".")return cs(t,e.slice(1),n);if(e.slice(0,1)==="?")return is(t,e.slice(1));if(/^on/.test(e)){let s=e.slice(2);return s===$r||s===es?as(t):e.toLowerCase()in t&&(s=s.toLowerCase()),i=>{a!==i&&(a&&t.removeEventListener(s,a,!1),a=i,i&&t.addEventListener(s,i,!1))}}else{if(e==="data"||!n&&e in t&&!ls.test(e))return s=>{a!==s&&(a=s,t[e]!==s&&s==null?(t[e]="",t.removeAttribute(e)):t[e]=s)};if(e in $t.attributes)return s=>{const i=$t.attributes[e](t,s);a!==i&&(a=i,i==null?t.removeAttribute(e):t.setAttribute(e,i))};{let s=!1;const i=r.cloneNode(!0);return o=>{a!==o&&(a=o,i.value!==o&&(o==null?(s&&(s=!1,t.removeAttributeNode(i)),i.value=o):(i.value=o,s||(s=!0,t.setAttributeNode(i)))))}}}},any(t,e){const r={node:br,before:t},n=le in t?"svg":"html";let a=!1,s;const i=o=>{switch(typeof o){case"string":case"number":case"boolean":a?s!==o&&(s=o,e[0].textContent=o):(a=!0,s=o,e=it(t.parentNode,e,[ps(t,o)],r));break;case"function":i(o(t));break;case"object":case"undefined":if(o==null){a=!1,e=it(t.parentNode,e,[],r);break}default:if(a=!1,s=o,sr(o))if(o.length===0)e.length&&(e=it(t.parentNode,e,[],r));else switch(typeof o[0]){case"string":case"number":case"boolean":i({html:o});break;case"object":if(sr(o[0])&&(o=o.concat.apply([],o)),pe(o[0])){Promise.all(o).then(i);break}default:e=it(t.parentNode,e,o,r);break}else os(o)?e=it(t.parentNode,e,o.nodeType===ts?Wt.call(o.childNodes):[o],r):pe(o)?o.then(i):"placeholder"in o?yr(o,i):"text"in o?i(String(o.text)):"any"in o?i(o.any):"html"in o?e=it(t.parentNode,e,Wt.call(or([].concat(o.html).join(""),n).childNodes),r):"length"in o?i(Wt.call(o)):i($t.invoke(o,i));break}};return i},text(t){let e;const r=n=>{if(e!==n){e=n;const a=typeof n;a==="object"&&n?pe(n)?n.then(r):"placeholder"in n?yr(n,r):"text"in n?r(String(n.text)):"any"in n?r(n.any):"html"in n?r([].concat(n.html).join("")):"length"in n?r(Wt.call(n).join("")):r($t.invoke(n,r)):a==="function"?r(n(t)):t.textContent=n??""}};return r}};var mr=typeof document!="object",fe=function(t){var e="raw",r=function(l){return/(Firefox|Safari)\/(\d+)/.test(l)&&!/(Chrom[eium]+|Android)\/(\d+)/.test(l)},n=r((document.defaultView.navigator||{}).userAgent),a=!(e in t)||t.propertyIsEnumerable(e)||!Object.isFrozen(t[e]);if(n||a){var s={},i=function(l){for(var d=".",f=0;f<l.length;f++)d+=l[f].length+"."+l[f];return s[d]||(s[d]=l)};if(a)fe=i;else{var o=new st,c=function(l,d){return o.set(l,d),d};fe=function(l){return o.get(l)||c(l,i(l))}}}else mr=!0;return _r(t)};function _r(t){return mr?t:fe(t)}function Or(t){for(var e=arguments.length,r=[_r(t)],n=1;n<e;)r.push(arguments[n++]);return r}const Pr=new st,ds=(t,e)=>t==null?ue(e||"html"):fs(t,e||"html"),ue=t=>{let e,r,n;return function(){const a=Or.apply(null,arguments);return n!==a[0]?(n=a[0],r=new de(t),e=us(r.apply(r,a))):r.apply(r,a),e}},fs=(t,e)=>{const r=e.indexOf(":");let n=Pr.get(t),a=e;return-1<r&&(a=e.slice(r+1),e=e.slice(0,r)||"html"),n||Pr.set(t,n={}),n[a]||(n[a]=ue(e))},us=t=>{const e=t.childNodes,{length:r}=e;return r===1?e[0]:r?new wr(e):t},Sr=new st;function hs(){const t=Sr.get(this),e=Or.apply(null,arguments);return t&&t.template===e[0]?t.tagger.apply(null,e):vs.apply(this,e),this}function vs(t){const e=le in this?"svg":"html",r=new de(e);Sr.set(this,{tagger:r,template:t}),this.textContent="",this.appendChild(r.apply(null,arguments))}/*! (c) Andrea Giammarchi (ISC) */const gs=t=>hs.bind(t);Aa(ue);var m={hyperhtml:{wire:ds,bind:gs},globals:{infinity:Number.POSITIVE_INFINITY,pi:Math.PI,pi2:Math.PI*2,min:Math.min,max:Math.max,abs:Math.abs,trunc:Math.trunc,round:Math.round,sqrt:Math.sqrt,cos:Math.cos,sin:Math.sin,atan2:Math.atan2,random:Math.random,now:Date.now,window,requestAnimationFrame,document}};const{requestAnimationFrame:ws}=m.globals,Er=t=>()=>ws(Er(t()));var $s=t=>Er(t)(),bs=t=>{let e=t;const r=new Map;return{next:n=>{e=n(e),r.forEach(a=>a(e))},subscribe:n=>{n(e);const a={};return r.set(a,n),a},unsubscribe:n=>r.delete(n)}};let Nt=[];const xr=bs(0),ys=t=>{Nt.push(t),Nt.length===6&&(xr.next(()=>5e3/(t-Nt[0])),Nt=[])};var _={title:{},practice:{},start:{},main:{},pause:{},death:{},over:{}},ms=Object.defineProperty,Mr=Object.getOwnPropertySymbols,_s=Object.prototype.hasOwnProperty,Os=Object.prototype.propertyIsEnumerable,Ar=(t,e,r)=>e in t?ms(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cr=(t,e)=>{for(var r in e||(e={}))_s.call(e,r)&&Ar(t,r,e[r]);if(Mr)for(var r of Mr(e))Os.call(e,r)&&Ar(t,r,e[r]);return t};const{wire:Ps}=m.hyperhtml;var Y=(t,e)=>{const r=e(Ps());let n=t;return{render:()=>r(n),update:a=>{n=Cr(Cr({},n),a(n)),r(n)}}};const{pi2:ct,cos:Ss,sin:Es,document:xs}=m.globals,y=200,E=y*2+10,v=E/2,X=xs.createElement("canvas");X.width=E,X.height=E,Object.assign(X.style,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"min(70vw, 70vh)",height:"min(70vw, 70vh)"});const u=X.getContext("2d"),Rt=X.cloneNode(),A=Rt.getContext("2d"),he=Y({width:0,opacity:1},t=>({opacity:e})=>(X.style.opacity=e,Rt.style.opacity=e,t`${X}${Rt}`)),Ut=()=>{X.width=E,Rt.width=E,u.clip(u.arc(v,v,y,0,ct))},ve=()=>{u.save(),u.beginPath(),u.fillStyle="black",u.arc(v,v,y,0,ct),u.fill(),u.closePath(),u.restore()},ge=(t=1)=>{u.save(),u.beginPath(),u.strokeStyle="white",u.lineWidth=1,u.moveTo(v,v),u.lineTo(v+t*y,v),u.stroke(),u.closePath(),u.restore()},bt=(t,e=1,r="red")=>{u.save(),u.beginPath(),u.strokeStyle=r,u.lineWidth=1,u.moveTo(v,v);const n=e*y;u.lineTo(v+n*Ss(-t),v+n*Es(-t)),u.stroke(),u.closePath(),u.restore()},zt=(t,e)=>{u.save(),u.beginPath();const r=u.createRadialGradient(t,e,0,t,e,20);r.addColorStop(0,"red"),r.addColorStop(1,"rgba(255, 0, 0, 0)"),u.fillStyle=r,u.arc(t,e,20,0,ct),u.fill(),u.closePath(),u.restore()},Ft=()=>{u.save(),u.beginPath(),u.fillStyle="white",u.arc(v,v,3,0,ct),u.fill(),u.closePath(),u.restore()},we=(t=-ct)=>{A.clearRect(0,0,E,E),A.save(),A.beginPath(),A.setLineDash([10,10]),A.strokeStyle="white",A.lineWidth=3,A.arc(v,v,y,0,t,!0),A.stroke(),A.closePath(),A.restore()},kr=t=>{A.save(),A.beginPath(),A.setLineDash([10,10]),A.strokeStyle="magenta",A.lineWidth=3,A.arc(v,v,y,0,-t*ct,!0),A.stroke(),A.closePath(),A.restore()};var p={easy:{},normal:{},hard:{}};let $e=[];const B={mode:{},start:{},practice:{},stage:{}},be=(t,e)=>$e.push({id:t,param:e}),Ir=()=>$e.map(({id:t,param:e})=>({id:t,param:e})),ye=()=>{$e=[]},{max:Ms}=m.globals,As={startOpacity:0,practiceOpacity:0,mode:p.normal,fontSize:0},Tr=t=>()=>be(t),Bt="min(3vw, 3vh)",Cs=t=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"calc(50vh + min(10vw, 10vh))",transform:"translate(-50%, 0)",textAlign:"center",lineHeight:`calc(${Bt} * 1.5)`,fontFamily:"serif"}),Dr=t=>({outline:"none",border:"none",margin:`calc(${Bt} / 4) 0 calc(${Bt} / 2)`,fontSize:Bt,color:"white",backgroundColor:"transparent",opacity:t}),jr=Y(As,t=>({startOpacity:e,practiceOpacity:r})=>t`<div style=${Cs(Ms(e,r))}><button style=${Dr(e)} onClick=${Tr(B.start)}>Start Game</button><br><button style=${Dr(r)} onClick=${Tr(B.practice)}>Practice</button><br></div>`),ks={opacity:0,mode:p.normal},me=t=>()=>be(B.mode,t),Is=t=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"calc(50vh + min(25vw, 25vh))",transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:t}),Lr="min(2.6vw, 2.6vh)",_e=t=>({margin:`0 calc(${Lr} / 4)`,outline:"none",border:`2px solid ${t?"white":"transparent"}`,fontSize:Lr,color:"white",backgroundColor:"transparent"}),yt=Y(ks,t=>({opacity:e,mode:r,top:n})=>t`<div style=${Is(e)}><button style=${_e(r===p.easy)} onClick=${me(p.easy)}>EASY</button><button style=${_e(r===p.normal)} onClick=${me(p.normal)}>NORMAL</button><button style=${_e(r===p.hard)} onClick=${me(p.hard)}>HARD</button></div>`);var Ts=Object.defineProperty,Ds=Object.defineProperties,js=Object.getOwnPropertyDescriptors,Wr=Object.getOwnPropertySymbols,Ls=Object.prototype.hasOwnProperty,Ws=Object.prototype.propertyIsEnumerable,Nr=(t,e,r)=>e in t?Ts(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rr=(t,e)=>{for(var r in e||(e={}))Ls.call(e,r)&&Nr(t,r,e[r]);if(Wr)for(var r of Wr(e))Ws.call(e,r)&&Nr(t,r,e[r]);return t},Ur=(t,e)=>Ds(t,js(e));const{pi2:Ns,trunc:Rs}=m.globals,Us={level:1,playerAngle:0,appearance:0},lt="min(70vw, 70vh)",zr={position:"absolute",left:`calc(50vw - ${lt} * 0.525)`,top:`calc(50vh - ${lt} * 0.525)`,width:`calc(${lt} * 0.2)`,height:`calc(${lt} * 0.2)`},pt=Y(Us,t=>({level:e,playerAngle:r,appearance:n})=>{const a=n*100,s=a/2,i=Ur(Rr({},zr),{backgroundColor:"#966",clipPath:`polygon(100% 0, 50% 0, ${50-s}% ${s}%, ${100-a}% ${a}%)`}),o=Ur(Rr({},zr),{color:"white",fontSize:`calc(${lt} * 0.04)`,margin:`calc(${lt} * 0.02)`,opacity:n}),c=Rs(r/Ns*100);return t`<div style="${i}"></div><div style="${o}">Lv.${e}<br>${c}%</div>`});var zs=Object.defineProperty,Fs=Object.defineProperties,Bs=Object.getOwnPropertyDescriptors,Fr=Object.getOwnPropertySymbols,Vs=Object.prototype.hasOwnProperty,qs=Object.prototype.propertyIsEnumerable,Br=(t,e,r)=>e in t?zs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hs=(t,e)=>{for(var r in e||(e={}))Vs.call(e,r)&&Br(t,r,e[r]);if(Fr)for(var r of Fr(e))qs.call(e,r)&&Br(t,r,e[r]);return t},Gs=(t,e)=>Fs(t,Bs(e));const{trunc:Vr}=m.globals,Ys={mode:p.normal,fpsText:"60.00",appearance:0},qr=new Map([[p.easy,"EASY"],[p.normal,"NORMAL"],[p.hard,"HARD"]]),et="min(70vw, 70vh)",Hr={position:"absolute",left:`calc(50vw - ${et} * 0.525)`,top:`calc(50vh + ${et} * 0.325)`,width:`calc(${et} * 0.2)`,height:`calc(${et} * 0.2)`},rt=Y(Ys,t=>({mode:e,fpsText:r,appearance:n})=>{const a=n*100,s=a/2,i=Gs(Hs({},Hr),{backgroundColor:"#696",clipPath:`polygon(0 0, 0 50%, ${s}% ${50+s}%, ${a}% ${a}%)`}),o={position:"absolute",bottom:`calc(${et} * 0.02)`,left:`calc(${et} * 0.02)`,color:"white",fontSize:`calc(${et} * 0.04)`,opacity:n};return t`<div style="${i}"></div><div style="${Hr}"><div style="position:relative;width:100%;height:100%"><div style="${o}">${qr.get(e)}<br>${r}FPS</div></div></div>`});xr.subscribe(t=>rt.update(()=>{const e=Vr(t*100);return{fpsText:`${Vr(e/100)}.${(e%100).toString().padStart(2,"0")}`}}));var Xs=Object.defineProperty,Zs=Object.defineProperties,Ks=Object.getOwnPropertyDescriptors,Gr=Object.getOwnPropertySymbols,Js=Object.prototype.hasOwnProperty,Qs=Object.prototype.propertyIsEnumerable,Yr=(t,e,r)=>e in t?Xs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,to=(t,e)=>{for(var r in e||(e={}))Js.call(e,r)&&Yr(t,r,e[r]);if(Gr)for(var r of Gr(e))Qs.call(e,r)&&Yr(t,r,e[r]);return t},eo=(t,e)=>Zs(t,Ks(e));const ro={deaths:0,appearance:0},nt="min(70vw, 70vh)",Xr={position:"absolute",left:`calc(50vw + ${nt} * 0.325)`,top:`calc(50vh + ${nt} * 0.325)`,width:`calc(${nt} * 0.2)`,height:`calc(${nt} * 0.2)`},mt=Y(ro,t=>({deaths:e,appearance:r})=>{const n=r*100,a=n/2,s=eo(to({},Xr),{backgroundColor:"#669",clipPath:`polygon(50% 100%, ${50+a}% ${100-a}%, ${n}% ${100-n}%, 0 100%)`}),i={position:"absolute",bottom:`calc(${nt} * 0.02)`,right:`calc(${nt} * 0.02)`,textAlign:"right",fontSize:`calc(${nt} * 0.04)`,color:"white",opacity:r};return t`<div style="${s}"></div><div style="${Xr}"><div style="position:relative;width:100%;height:100%"><div style="${i}">${e}<br>death${e>1?"s":""}</div></div></div>`});var no=Object.defineProperty,ao=Object.defineProperties,so=Object.getOwnPropertyDescriptors,Zr=Object.getOwnPropertySymbols,oo=Object.prototype.hasOwnProperty,io=Object.prototype.propertyIsEnumerable,Kr=(t,e,r)=>e in t?no(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,co=(t,e)=>{for(var r in e||(e={}))oo.call(e,r)&&Kr(t,r,e[r]);if(Zr)for(var r of Zr(e))io.call(e,r)&&Kr(t,r,e[r]);return t},lo=(t,e)=>ao(t,so(e));const po={name:"-",appearance:0},at="min(70vw, 70vh)",Jr={position:"absolute",left:`calc(50vw + ${at} * 0.325)`,top:`calc(50vh - ${at} * 0.525)`,width:`calc(${at} * 0.2)`,height:`calc(${at} * 0.2)`},_t=Y(po,t=>({name:e,appearance:r})=>{const n=r*100,a=n/2,s=lo(co({},Jr),{backgroundColor:"#969",clipPath:`polygon(100% 50%, ${100-a}% ${50-a}%, ${100-n}% ${100-n}%, 100% 100%)`}),i={position:"absolute",top:`calc(${at} * 0.02)`,right:`calc(${at} * 0.02)`,textAlign:"right",fontSize:`calc(${at} * 0.04)`,color:"white",opacity:r};return t`<div style="${s}"></div><div style="${Jr}"><div style="position:relative;width:100%;height:100%"><div style="${i}">Event<br>${e||"-"}</div></div></div>`});var P={swimOrb:{},linearOrb:{},lazer:{},landolt:{}},fo=Object.defineProperty,uo=Object.defineProperties,ho=Object.getOwnPropertyDescriptors,Qr=Object.getOwnPropertySymbols,vo=Object.prototype.hasOwnProperty,go=Object.prototype.propertyIsEnumerable,tn=(t,e,r)=>e in t?fo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Oe=(t,e)=>{for(var r in e||(e={}))vo.call(e,r)&&tn(t,r,e[r]);if(Qr)for(var r of Qr(e))go.call(e,r)&&tn(t,r,e[r]);return t},Pe=(t,e)=>uo(t,ho(e));const{pi:wo,pi2:en,min:Se,cos:Vt,sin:qt}=m.globals,Ht=(t,e,r,n,a)=>{const s=t-r,i=e-n,o=a/2+3;return s*s+i*i<=o*o},rn=(t,e,r,n,a,s)=>{t.save(),t.beginPath(),t.globalAlpha=.5,t.fillStyle=s,t.arc(r,n,a*(2-e/30),0,en),t.fill(),t.closePath(),t.restore()},nn=(t,e,r,n,a,s,i)=>{t.save(),t.beginPath(),t.globalAlpha=i,t.fillStyle=a,t.strokeStyle=s,t.arc(e,r,n,0,en),t.fill(),t.stroke(),t.closePath(),t.restore()},N=(t,e,r,n,a=0,s="lime")=>({id:P.swimOrb,time:a,angle:t,radius:e,speed:r,width:n,color:s}),$o=(t,{time:e,angle:r,radius:n,width:a,color:s})=>{const i=v+n*Vt(r),o=v+n*qt(r);if(e<=30&&rn(t,e,i,o,a,s),e>=15){const c=Se(Se((e-15)/30,1),(300-e)/30);nn(t,i,o,a,"white",s,c)}},bo=(t,e,r)=>{const{time:n,angle:a,radius:s,speed:i,width:o}=t,c=v+s*Vt(a),l=v+s*qt(a);return{nextEnemies:n>=300?[]:[Pe(Oe({},t),{angle:a+(n<45?0:i),time:n+1})],hit:n<45||n>270?!1:Ht(e,r,c,l,o)}},Z=(t,e,r,n,a,s,i,o=0)=>({id:P.linearOrb,time:o,x:t,y:e,angle:r,speed:n,width:a,fillColor:s,strokeColor:i}),an=(t,{time:e,x:r,y:n,width:a,fillColor:s,strokeColor:i})=>{if(e<=30&&rn(t,e,r,n,a,i),e>=15){const o=Se((e-15)/30,1);nn(t,r,n,a,s,i,o)}},sn=(t,e,r)=>{const{time:n,x:a,y:s,angle:i,speed:o,width:c}=t;if(n<45)return{nextEnemies:[Pe(Oe({},t),{time:n+1})],hit:!1};const l=a+o*Vt(i),d=s+o*qt(i),f=l-v,h=d-v,g=y+c/2;return f*f+h*h>g*g?{nextEnemies:[],hit:!1}:{nextEnemies:[Pe(Oe({},t),{x:l,y:d,time:n+1})],hit:Ht(e,r,a,s,c)}},yo=(t,e,r,n,a,s=0)=>({id:P.orbToCenter,time:s,x:v+y*Vt(t),y:v+y*qt(t),angle:t+wo,speed:e,width:r,fillColor:n,strokeColor:a}),mo=(t,e,r)=>{const{x:n,y:a,speed:s}=t;return Ht(v,v,n,a,s-3)?{nextEnemies:[],hit:!1}:sn(t,e,r)};var K={none:{},rotate:{},gravity:{},swap:{},mirror:{},memorial:{}};const on=t=>t;var dt=({id:t,name:e,wait:r,duration:n,inputEffect:a=on,afterEffect:s=on,props:i})=>({id:t,name:e,wait:r,waitTime:0,duration:n,eventTime:0,inputEffect:a,afterEffect:s,props:i});const{infinity:_o}=m.globals;var T=()=>dt({id:K.none,name:"-",wait:_o,duration:0,props:{}}),Oo=Object.defineProperty,Po=Object.defineProperties,So=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertySymbols,Eo=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable,ln=(t,e,r)=>e in t?Oo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mo=(t,e)=>{for(var r in e||(e={}))Eo.call(e,r)&&ln(t,r,e[r]);if(cn)for(var r of cn(e))xo.call(e,r)&&ln(t,r,e[r]);return t},Ao=(t,e)=>Po(t,So(e));const{max:Co,cos:ko,sin:Io}=m.globals,{swimOrb:Ee,linearOrb:To,orbToCenter:Do}=P,R=t=>t.flatMap(e=>e.id===Ee?[Ao(Mo({},e),{time:Co(e.time,270)})]:[]),L=(t,e,r)=>n=>{const{id:a,angle:s,radius:i}=n;if([Ee,To,Do].includes(a)){const{x:o,y:c}=a===Ee?{x:v+i*ko(s),y:v+i*Io(s)}:n,l=o-e,d=c-r,f=60-t;return l*l+d*d<=f*f?[]:[n]}return[n]},Ot=(t,e)=>(r,n,a,s)=>{const{id:i,eventTime:o,duration:c}=s;return i===K.none?a===30?{nextEvt:t(r,n),nextEvtTime:a+1}:{nextEvt:s,nextEvtTime:a+1}:i!==K.none&&o<c?{nextEvt:s,nextEvtTime:a+1}:{nextEvt:T(),nextEvtTime:-e.get(r)}},jo=(t,e,r)=>(r.save(),r.resetTransform(),r.translate(v,v),r.rotate(e*t.speed),r.translate(-v,-v),r.drawImage(r.canvas,0,0),r.restore(),t);var pn=(t,e)=>dt({id:K.rotate,name:"\u6D41\u8EE2",wait:300,duration:e,afterEffect:jo,props:{speed:t}});const{document:Lo,min:dn,max:fn,abs:Wo,cos:xe,sin:Me}=m.globals,Ae=(t,e,r,n=0)=>({id:P.lazer,time:n,x:t,y:e,angle:r}),un=t=>fn(E*2*((t-60)/15),0),hn=t=>fn(dn(t-75,155-t,15),1),No=(t,e,r,n,a,s)=>{const i=t-r,o=e-n,c=i*xe(a)+o*Me(a),l=Wo(-i*Me(a)+o*xe(a))-3;return c>=0&&c<=un(s)&&l<=hn(s)/2},Ro=({time:t,x:e,y:r,angle:n},a,s)=>({nextEnemies:t>=185?[]:[Ae(e,r,n,t+1)],hit:t>45&&t<155&&No(a,s,e,r,n,t)}),Uo=(t,e,r,n)=>{const a=1-e/30;t.save(),t.fillStyle=`rgba(255, 255, 0, ${a/2})`,t.beginPath();const s=20+a*40,i=s/2;t.fillRect(r-i,n-i,s,s),t.restore()},Gt=Lo.createElement("canvas");Gt.width=20,Gt.height=20;const C=Gt.getContext("2d");C.strokeStyle="black",C.lineWidth=1,C.beginPath(),C.fillStyle="#ff0",C.moveTo(0,0),C.lineTo(8,2),C.lineTo(8,18),C.lineTo(0,20),C.closePath(),C.fill(),C.stroke(),C.fillStyle="#66f",C.fillRect(5,5,15,10),C.strokeRect(5,5,15,10),C.beginPath(),C.moveTo(10,10),C.lineTo(20,10),C.closePath(),C.stroke();const zo=(t,e,r,n)=>{t.save(),t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=1,t.beginPath(),t.moveTo(e,r),t.lineTo(e+E*2*xe(n),r+E*2*Me(n)),t.closePath(),t.stroke(),t.restore()},Fo=(t,e,r,n)=>{t.save();const a=hn(n),s=t.createLinearGradient(e,r-a,e,r+a);s.addColorStop(0,"rgba(255, 255, 0, 0)"),s.addColorStop(.25,"rgba(255, 255, 0, 1)"),s.addColorStop(.75,"rgba(255, 255, 0, 1)"),s.addColorStop(1,"rgba(255, 255, 0, 0)"),t.fillStyle=s,t.fillRect(e,r-a,un(n),a*2),t.restore()},Bo=(t,{time:e,x:r,y:n,angle:a})=>{e>=15&&e<=60&&zo(t,r,n,a),t.save(),t.translate(r,n),t.rotate(a),t.translate(-r,-n),e<30&&Uo(t,e,r,n),e>15&&(t.globalAlpha=dn((e-15)/30,(185-e)/30,1),t.drawImage(Gt,r-10,n-10)),e>60&&e<155&&(t.globalAlpha=1,Fo(t,r,n,e)),t.restore()};var Vo=Object.defineProperty,qo=Object.defineProperties,Ho=Object.getOwnPropertyDescriptors,vn=Object.getOwnPropertySymbols,Go=Object.prototype.hasOwnProperty,Yo=Object.prototype.propertyIsEnumerable,gn=(t,e,r)=>e in t?Vo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ce=(t,e)=>{for(var r in e||(e={}))Go.call(e,r)&&gn(t,r,e[r]);if(vn)for(var r of vn(e))Yo.call(e,r)&&gn(t,r,e[r]);return t},ke=(t,e)=>qo(t,Ho(e));const{max:Ie}=m.globals,Xo=(t,e)=>{const{radius:r,time:n}=t;return n<30?t:r===0?ke(Ce({},t),{time:Ie(n,270)}):ke(Ce({},t),{radius:Ie(r-e,0)})},Zo=(t,{props:{gravity:e}})=>{const{pr:r,enemies:n}=t;return ke(Ce({},t),{pr:Ie(r-e,10),enemies:n.map(a=>a.id!==P.swimOrb?a:Xo(a,e))})};var Yt=(t,e)=>dt({id:K.gravity,name:"\u91CD\u529B",wait:300,duration:e,inputEffect:Zo,props:{gravity:t,lines:[]}}),Ko=Object.defineProperty,Jo=Object.defineProperties,Qo=Object.getOwnPropertyDescriptors,wn=Object.getOwnPropertySymbols,ti=Object.prototype.hasOwnProperty,ei=Object.prototype.propertyIsEnumerable,$n=(t,e,r)=>e in t?Ko(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ri=(t,e)=>{for(var r in e||(e={}))ti.call(e,r)&&$n(t,r,e[r]);if(wn)for(var r of wn(e))ei.call(e,r)&&$n(t,r,e[r]);return t},ni=(t,e)=>Jo(t,Qo(e));const{pi:bn,max:yn,sqrt:ai,cos:mn,sin:_n}=m.globals,On=(t,e,r,n,a,s,i,o)=>({id:P.landolt,x:t,y:e,angle:r,radius:n,angleSpeed:a,radiusSpeed:s,holeWidth:i,lineWidth:o}),si=(t,{x:e,y:r,angle:n,radius:a,holeWidth:s,lineWidth:i})=>{t.save(),t.beginPath();const o=yn(a-i,0),c=yn(a+i,0),l=t.createRadialGradient(e,r,o,e,r,c);l.addColorStop(0,"rgba(200, 200, 200, 0.5)"),l.addColorStop(.25,"rgba(200, 200, 200, 1)"),l.addColorStop(.75,"rgba(200, 200, 200, 1)"),l.addColorStop(1,"rgba(200, 200, 200, 0.5)"),t.strokeStyle=l,t.lineWidth=i*2,t.lineCap="round",t.arc(e,r,a,n-s/2,n+s/2,!0),t.stroke(),t.restore()},oi=(t,e,r,n)=>{const a=t-v,s=e-v;return r>ai(a*a+s*s)+y+n*2},ii=(t,e,r,n,a,s,i,o)=>{const c=i-t,l=o-e,d=c*c+l*l,f=n-s/2-3,h=n+s/2+3;if(d<f*f||d>h*h)return!1;const g=r-a/2+bn/2,b=r+a/2-bn/2;return mn(g)*c+_n(g)*l<0||mn(b)*c+_n(b)*l<0},ci=(t,e,r)=>{const{x:n,y:a,angle:s,radius:i,angleSpeed:o,radiusSpeed:c,holeWidth:l,lineWidth:d}=t;return{nextEnemies:oi(n,a,i,d)?[]:[ni(ri({},t),{angle:s+o,radius:i+c})],hit:ii(n,a,s,i,l,d,e,r)}};var li=Object.defineProperty,pi=Object.defineProperties,di=Object.getOwnPropertyDescriptors,Pn=Object.getOwnPropertySymbols,fi=Object.prototype.hasOwnProperty,ui=Object.prototype.propertyIsEnumerable,Sn=(t,e,r)=>e in t?li(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pt=(t,e)=>{for(var r in e||(e={}))fi.call(e,r)&&Sn(t,r,e[r]);if(Pn)for(var r of Pn(e))ui.call(e,r)&&Sn(t,r,e[r]);return t},St=(t,e)=>pi(t,di(e));const{pi:hi,sqrt:vi,cos:En,sin:xn,atan2:Mn}=m.globals,An={inner:!1,outer:!1,quick:!1,brake:!1},gi=(t,{eventTime:e,duration:r,props:{speed:n}})=>{if(e>=r)return{enemies:t.enemies.map($=>$.id===P.swimOrb?St(Pt({},$),{color:"lime"}):$)};const{inner:a,outer:s,quick:i,brake:o,enemies:c}=t,l=s-a,d=o-i;if(l===0&&d===0)return St(Pt({},An),{enemies:c.map($=>$.id===P.swimOrb?St(Pt({},$),{color:"red"}):$)});const f=Mn(d,l),h=En(f),g=xn(f),b=n*h,w=n*g;return St(Pt({},An),{enemies:c.map($=>{if($.id!==P.swimOrb)return $;const{angle:O,radius:S}=$,x=S*En(O)+b,k=S*xn(O)+w,M=Mn(k,x),I=vi(x*x+k*k),vt=y+$.width;return St(Pt({},$),{angle:I>vt?M+hi:M,radius:I>vt?vt*2-I:I,color:"red"})})})};var Xt=(t,e)=>dt({id:K.swap,name:"\u904D\u6191",wait:300,duration:e,inputEffect:gi,props:{speed:t}}),wi=Object.defineProperty,$i=Object.defineProperties,bi=Object.getOwnPropertyDescriptors,Cn=Object.getOwnPropertySymbols,yi=Object.prototype.hasOwnProperty,mi=Object.prototype.propertyIsEnumerable,kn=(t,e,r)=>e in t?wi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_i=(t,e)=>{for(var r in e||(e={}))yi.call(e,r)&&kn(t,r,e[r]);if(Cn)for(var r of Cn(e))mi.call(e,r)&&kn(t,r,e[r]);return t},Oi=(t,e)=>$i(t,bi(e));const{pi:Zt,min:Pi,cos:In,sin:Tn,random:Si}=m.globals,Ei=({playerInvincible:t,pa:e,pr:r,enemies:n},a)=>{const{time:s}=a.props,i=Pi(s/60,1);bt(e-Zt,i,"cyan");const o=v+r*In(-e+Zt),c=v+r*Tn(-e+Zt);return(i===1&&t===0||Si()<.5)&&zt(o,c),{pa:i===1&&t===0&&n.some(({id:d,angle:f,radius:h,width:g})=>{if(d===P.swimOrb){const b=v+h*In(f),w=v+h*Tn(f);return Ht(b,w,o,c,g)}return!1})?e-Zt:e,evt:Oi(_i({},a),{props:{time:s+1}}),enemies:t>0?n.flatMap(L(t,o,c)):n}};var Te=t=>dt({id:K.mirror,name:"\u88CF\u73FE",wait:300,duration:t,inputEffect:Ei,props:{time:0}}),xi=Object.defineProperty,Mi=Object.defineProperties,Ai=Object.getOwnPropertyDescriptors,Dn=Object.getOwnPropertySymbols,Ci=Object.prototype.hasOwnProperty,ki=Object.prototype.propertyIsEnumerable,jn=(t,e,r)=>e in t?xi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ii=(t,e)=>{for(var r in e||(e={}))Ci.call(e,r)&&jn(t,r,e[r]);if(Dn)for(var r of Dn(e))ki.call(e,r)&&jn(t,r,e[r]);return t},Ti=(t,e)=>Mi(t,Ai(e));const{pi2:Di,infinity:ji}=m.globals,Li=({deaths:t,pa:e},r)=>{const{props:{done:n,speed:a}}=r;return{pa:n?e+a:e+a-t*Di,evt:Ti(Ii({},r),{props:{done:!0,speed:a+1e-4}})}};var Wi=()=>dt({id:K.memorial,name:"\u56DE\u5411",wait:300,duration:ji,inputEffect:Li,props:{done:!1,speed:0}}),Ni=Object.defineProperty,Ri=Object.defineProperties,Ui=Object.getOwnPropertyDescriptors,Ln=Object.getOwnPropertySymbols,zi=Object.prototype.hasOwnProperty,Fi=Object.prototype.propertyIsEnumerable,Wn=(t,e,r)=>e in t?Ni(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Et=(t,e)=>{for(var r in e||(e={}))zi.call(e,r)&&Wn(t,r,e[r]);if(Ln)for(var r of Ln(e))Fi.call(e,r)&&Wn(t,r,e[r]);return t},xt=(t,e)=>Ri(t,Ui(e));const{pi:J,pi2:Bi,infinity:Nn,max:Vi,trunc:qi,cos:De,sin:je,atan2:Hi,random:V}=m.globals,Gi=new Map([[p.easy,40],[p.normal,20],[p.hard,10]]),Yi=new Map([[p.easy,()=>6+V()*2],[p.normal,()=>6+V()*3],[p.hard,()=>6+V()*4]]),Xi=new Map([[p.easy,()=>-.008*V()],[p.normal,()=>-.01*V()],[p.hard,()=>-.016*V()]]),Zi=(t,e)=>N(-e+.4+V()*J*1.6,V()*y,Xi.get(t)(),Yi.get(t)()),Ki=new Map([[p.easy,.02],[p.normal,.035],[p.hard,.05]]),Ji=new Map([[p.easy,500],[p.normal,350],[p.hard,250]]),Qi=t=>[...Array(4)].map((e,r)=>{const n=t+r*(J/2);return Ae(v+y*De(n),v+y*je(n),n+1.125*J)}),tc=new Map([[p.easy,1],[p.normal,1.3],[p.hard,1.7]]),ec=new Map([[p.easy,500],[p.normal,450],[p.hard,350]]),rc=new Map([[p.easy,{speed:.3,hole:J/1.2,width:5}],[p.normal,{speed:.35,hole:J/1.3,width:6}],[p.hard,{speed:.4,hole:J/2,width:7}]]),nc=(t,e)=>{const{speed:r,hole:n,width:a}=rc.get(t),s=-e-J*.7,i=v+y*.5*De(s),o=v+y*.5*je(s);return On(i,o,-e,1,.03,r,n,a)},ac=new Map([[p.easy,1],[p.normal,1.5],[p.hard,2]]),sc=new Map([[p.easy,35],[p.normal,20],[p.hard,15]]),Rn=["red","yellow","lime","cyan","blue","magenta"],oc=(t,e,r,n)=>{const a=v+y*De(t),s=v+y*je(t),i=Hi(r-s,e-a);return Z(a,s,i,1,6,"white",Rn[n])},ic=new Map([[p.easy,400],[p.normal,350],[p.hard,200]]),cc=new Map([[p.easy,{width:6,speed:.08}],[p.normal,{width:7,speed:.013}],[p.hard,{width:8,speed:.017}]]),lc=(t,e,r,n)=>{const{width:a,speed:s}=cc.get(t),i=a*3.5,o=-e-J*.6,c=(r+(n?a:0))%i;return[...Array(qi(y/i)+1)].map((l,d)=>N(o,c+d*i,s,a,0,"gray"))},pc=new Map([[p.easy,150],[p.normal,100],[p.hard,80]]),dc=new Map([[p.easy,{speed:.8,length:8}],[p.normal,{speed:.9,length:12}],[p.hard,{speed:1,length:16}]]),fc=(t,e)=>{const{speed:r,length:n}=dc.get(t),a=Bi/n;return[...Array(n)].map((s,i)=>Z(v,v,e+i*a,r,6,"white","blue"))},uc=Ot((t,e)=>e===1?xt(Et({},pn((V()<.5?-1:1)*Ki.get(t),Nn)),{wait:120}):e===3?xt(Et({},Yt(tc.get(t),Nn)),{wait:120}):e===5?xt(Et({},Xt(ac.get(t),t===p.hard?30:60)),{wait:60}):e===9?Wi():T(),new Map([[p.easy,0],[p.normal,0],[p.hard,0]])),hc=(t,e)=>t===6?e.map(r=>r.id===P.swimOrb?xt(Et({},r),{color:"lime"}):r):t===5?e.filter(({id:r})=>r!==P.landolt):t===8?e.map(r=>r.id===P.lazer?xt(Et({},r),{time:Vi(r.time,155)}):r):t===9?R(e):e,Le=(t=30,e=0,r=0,n=0,a=0,s=0,i=0,o=0,c=!1,l=0,d=0)=>(f,h,g,{enemies:b,px:w,py:$,pa:O,pr:S,playerInvincible:x,evt:k})=>{const M=(h-1)%10,I=e>=Gi.get(f),vt=M>=2&&M<=7&&r>=Ji.get(f),ua=M===4&&n>=ec.get(f),ee=M>=6&&a>=sc.get(f),Ze=M>=7&&o>=ic.get(f),Ke=M>=8&&l>=pc.get(f),jp=M===9?[]:[I?[Zi(f,O)]:[],vt?Qi(-O):[],ua?[nc(f,O)]:[],ee?[oc(s,w,$,i)]:[],Ze?lc(f,O,S,c):[],Ke?fc(f,d):[]].flat(),ha=(x>0?b.flatMap(L(x,w,$)):b).concat(jp),{nextEvt:Lp,nextEvtTime:Wp}=M%2?uc(f,M,t,k):{nextEvt:T(),nextEvtTime:30};return{enemies:g?hc(M,ha):ha,nextStage:Le(Wp,I?0:e+1,vt?0:r+1,ua?0:n+1,ee?0:a+1,ee?s+.5:s,ee?(i+1)%Rn.length:i,Ze?0:o+1,Ze?!c:c,Ke?0:l+1,Ke?d:d-.3),evt:Lp}},{pi:Un,pi2:vc,trunc:zn}=m.globals,gc=new Map([[p.easy,t=>200-t*10],[p.normal,t=>160-t*10],[p.hard,t=>120-t*8]]),Fn=new Map([[p.easy,t=>({length:6+zn(t/2),width:6,speed:1})],[p.normal,t=>({length:7+t,width:6,speed:1})],[p.hard,t=>({length:10+zn(t/2),width:7,speed:1.5})]]),Bn=(t,e,r,n)=>{const{length:a,width:s,speed:i}=Fn.get(t)(e),o=n?"blue":"magenta";return[...Array(a)].map((c,l)=>{const d=r+vc*(l/a)+(n?0:Un/a);return n?Z(v,v,d,i,s,"white",o):yo(d,i,s,"white",o)})},We=(t=0,e=0)=>(r,n,a,{enemies:s,px:i,py:o,pa:c,pr:l,playerInvincible:d})=>{const f=(n-1)%10,h=gc.get(r)(f),g=[d>0?s.flatMap(L(d,i,o)):s,t===h/2?Bn(r,f,e,!0):[],t>=h&&(r!==p.hard||f>=5)?Bn(r,f,e,!1):[],r===p.hard&&t>=h?[N(-c-.63,l,.01,6)]:[]].flat();return a&&n%10===1?{enemies:R(g),nextStage:Le(),evt:T()}:{enemies:g,nextStage:We(t>=h?0:t+1,t>=h?e+Un/Fn.get(r)(f).length*1.2:e),evt:T()}},{pi:wc,random:$c}=m.globals,bc=new Map([[p.easy,t=>200-t*20],[p.normal,t=>175-t*20],[p.hard,t=>160-t*18]]),yc=new Map([[p.easy,t=>({length:5,width:8,speed:.01+t*.0015})],[p.normal,t=>({length:5,width:9,speed:.013+t*.002})],[p.hard,t=>({length:7,width:8.3,speed:.016+t*.0026})]]),mc=(t,e,r,n)=>{const a=-r+(n?1:-1)*wc*(.3+.4*$c()),{length:s,width:i,speed:o}=yc.get(t)(e),c=(n?-1:1)*o;return[...Array(s+1-n)].map((l,d)=>N(a,y*((d+n*.5)/s),c,i))},_c=new Map([[p.easy,t=>Te(200+t*10)],[p.normal,t=>Te(250+t*25)],[p.hard,t=>Te(300+t*25)]]),Oc=new Map([[p.easy,200],[p.normal,100],[p.hard,0]]),Pc=Ot((t,e)=>_c.get(t)(e),Oc),Ne=(t=130,e=0,r=0)=>(n,a,s,{enemies:i,evt:o,px:c,py:l,pa:d,playerInvincible:f})=>{const h=(a-1)%10,g=t>=bc.get(n)(h%5),b=[f>0?i.flatMap(L(f,c,l)):i,g?mc(n,h%5,d,e):[]].flat(),{nextEvt:w,nextEvtTime:$}=h<5?{nextEvt:o,nextEvtTime:r}:Pc(n,h,r,o);return s&&a%10===1?{enemies:R(b),nextStage:We(),evt:T()}:{enemies:b,nextStage:Ne(g?0:t+1,g?1-e:e,$),evt:w}},{pi:Sc,cos:Ec,sin:xc,atan2:Mc}=m.globals,Ac=new Map([[p.easy,t=>30-t],[p.normal,t=>20-t],[p.hard,t=>15-t]]),Cc=new Map([[p.easy,6],[p.normal,5],[p.hard,6]]),Vn=["red","yellow","lime","cyan","blue","magenta"],kc=(t,e,r,n,a,s)=>{const i=v+y*Ec(n),o=v+y*xc(n),c=Mc(r-o,e-i);return t<5?[Z(i,o,c,1,a,"white",s)]:[Z(i,o,c,1,a,"white",s),Z(v*2-i,v*2-o,c+Sc,1,a,"white",s)]},Re=(t=0,e=0,r=0)=>(n,a,s,{enemies:i,px:o,py:c,playerInvincible:l,evt:d})=>{const f=(a-1)%10,h=t>=Ac.get(n)(f%5),g=[l>0?i.flatMap(L(l,o,c)):i,h?kc(f,o,c,e,Cc.get(n),Vn[r]):[]].flat();return s&&a%10===1?{enemies:R(g),nextStage:Ne(),evt:T()}:{enemies:g,nextStage:Re(h?0:t+1,e+.02,h?(r+1)%Vn.length:r),evt:d}},{pi:qn,random:Q}=m.globals,Ic=new Map([[p.easy,t=>30-t*2],[p.normal,t=>25-t*2],[p.hard,t=>15-t]]),Tc=new Map([[p.easy,()=>-.008+.016*Q()],[p.normal,()=>-.01+.02*Q()],[p.hard,()=>-.016+.032*Q()]]),Dc=new Map([[p.easy,()=>6+Q()*3],[p.normal,()=>7+Q()*4],[p.hard,()=>8+Q()*5]]),jc=new Map([[p.easy,t=>Xt(1,150+t*10)],[p.normal,t=>Xt(1.5,200+t*20)],[p.hard,t=>Xt(2,250+t*30)]]),Lc=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),Wc=Ot((t,e)=>jc.get(t)(e),Lc),Ue=(t=0,e=0)=>(r,n,a,{enemies:s,evt:i,px:o,py:c,pa:l,playerInvincible:d})=>{const f=(n-1)%10,h=t>=Ic.get(r)(f),g=[d>0?s.flatMap(L(d,o,c)):s,h?[N(-l+qn*.2+Q()*qn*1.6,y*Q(),Tc.get(r)(),Dc.get(r)())]:[]].flat(),{nextEvt:b,nextEvtTime:w}=Wc(r,f,e,i);return a&&n%10===1?{enemies:R(g),nextStage:Re(),evt:T()}:{enemies:g,nextStage:Ue(h?0:t+1,w),evt:b}},{pi:Mt,pi2:Nc,cos:Rc,sin:Uc,random:U}=m.globals,zc=new Map([[p.easy,t=>60-t*3],[p.normal,t=>54-t*4],[p.hard,t=>26-t*2]]),Fc=new Map([[p.easy,()=>-.008*U()],[p.normal,()=>-.01*U()],[p.hard,()=>-.01*U()]]),Bc=new Map([[p.easy,()=>6+U()*2],[p.normal,()=>6+U()*3],[p.hard,()=>6+U()*4]]),Vc=new Map([[p.easy,t=>500-t*20],[p.normal,t=>300-t*30],[p.hard,t=>250-t*30]]),qc=new Map([[p.easy,{speed:.4,hole:Mt/1.3,width:5}],[p.normal,{speed:.5,hole:Mt/1.5,width:6}],[p.hard,{speed:.6,hole:Mt/2.3,width:7}]]),Hc=(t,e,r)=>{const{speed:n,hole:a,width:s}=qc.get(t),i=v+(e<=45?0:y/2*Rc(r)),o=v+(e<=45?0:y/2*Uc(r));return On(i,o,U()*Nc,1,U()<.5?.03:-.03,n,a,s)},ze=(t=0,e=100)=>(r,n,a,{enemies:s,pa:i,px:o,py:c,playerInvincible:l})=>{const d=t>=zc.get(r)(n-40),f=e>=Vc.get(r)((n-1)%5),h=[l>0?s.flatMap(L(l,o,c)):s,d?[N(-i+.4+U()*Mt*1.6,y*U(),Fc.get(r)(),Bc.get(r)())]:[],f?[Hc(r,n,Mt-i)]:[]].flat();return a&&n%10===1?{enemies:R(h),nextStage:Ue(),evt:T()}:{enemies:h,nextStage:ze(d?0:t+1,f?0:e+1),evt:T()}},{pi:Gc,pi2:Hn,min:Yc,random:q}=m.globals,Xc=new Map([[p.easy,t=>28-t*2],[p.normal,t=>25-t*2],[p.hard,t=>15-t]]),Zc=new Map([[p.easy,()=>-.008*q()],[p.normal,()=>-.01*q()],[p.hard,()=>-.018*q()]]),Kc=new Map([[p.easy,()=>6+q()*2],[p.normal,()=>6+q()*3],[p.hard,()=>6+q()*4]]),Jc=new Map([[p.easy,t=>Yt(.5+t*.05,200)],[p.normal,t=>Yt(.5+t*.08,200)],[p.hard,t=>Yt(.5+t*.12,200)]]),Qc=new Map([[p.easy,300],[p.normal,300],[p.hard,0]]),tl=Ot((t,e)=>Jc.get(t)(e),Qc),Fe=(t=0,e=0,r=0)=>(n,a,s,{enemies:i,evt:o,px:c,py:l,pa:d,playerInvincible:f})=>{const h=(a-1)%10,g=t>=Xc.get(n)(h),b=n!==p.easy&&h>5&&e>=250-h*10,w=[f>0?i.flatMap(L(f,c,l)):i,g?[N(-d+.4+q()*Gc*1.6,y*Yc(.7+q()*.4,1),Zc.get(n)(),Kc.get(n)())]:[],b?new Array(10).fill(q()*Hn).map((S,x)=>Z(v,v,x/10*Hn+S,2,7,"white","blue")):[]].flat(),{nextEvt:$,nextEvtTime:O}=tl(n,h,r,o);return s&&a%10===1?{enemies:R(w),nextStage:ze(),evt:T()}:{enemies:w,nextStage:Fe(g?0:t+1,b?0:e+1,O),evt:$}},{pi:ft,cos:el,sin:rl,random:W}=m.globals,nl=new Map([[p.easy,t=>30-t*2],[p.normal,t=>27-t*2],[p.hard,t=>14-t]]),al=new Map([[p.easy,()=>-.008*W()],[p.normal,()=>-.01*W()],[p.hard,()=>-.01*W()]]),sl=new Map([[p.easy,()=>6+W()*2],[p.normal,()=>6+W()*3],[p.hard,()=>6+W()*4]]),ol=new Map([[p.easy,{wait:t=>300-t*10,radius:.7,angle:t=>t+ft*(.9+W()*.2)}],[p.normal,{wait:t=>200-t*10,radius:.8,angle:t=>t+ft*(.9+W()*.2)}],[p.hard,{wait:t=>150-t*10,radius:.95,angle:t=>t+ft*(.8+W()*.4)}]]),Be=(t=0,e=0,r=ft/3)=>(n,a,s,{enemies:i,px:o,py:c,pa:l,playerInvincible:d})=>{const f=t>=nl.get(n)(a-20),{wait:h,radius:g,angle:b}=ol.get(n),w=e>=h(a-20),$=[d>0?i.flatMap(L(d,o,c)):i,f?[N(-l+.4+W()*ft*1.6,W()*y,al.get(n)(),sl.get(n)())]:[],w?[Ae(v+g*y*el(r),v+g*y*rl(r),b(r))]:[]].flat();return s&&a%10===1?{enemies:R($),evt:T(),nextStage:Fe()}:{enemies:$,evt:T(),nextStage:Be(f?0:t+1,w?0:e+1,w?r+ft/3:r)}},{pi:il,pi2:cl,random:H}=m.globals,ll=new Map([[p.easy,t=>28-t*2],[p.normal,t=>25-t*2],[p.hard,t=>12-t]]),pl=new Map([[p.easy,()=>-.008*H()],[p.normal,()=>-.01*H()],[p.hard,()=>-.02*H()]]),dl=new Map([[p.easy,()=>6+H()*2],[p.normal,()=>6+H()*3],[p.hard,()=>6+H()*4]]),fl=new Map([[p.easy,t=>({speed:.02,rotateCount:t>5?2:1})],[p.normal,t=>({speed:.02,rotateCount:t>5?3:2})],[p.hard,t=>({speed:.05,rotateCount:t>5?4:2})]]),ul=new Map([[p.easy,600],[p.normal,300],[p.hard,0]]),hl=Ot((t,e)=>{const{speed:r,rotateCount:n}=fl.get(t)(e);return pn((H()<.5?-1:1)*r,cl/r*n)},ul),Ve=(t=0,e=0)=>(r,n,a,{enemies:s,evt:i,px:o,py:c,pa:l,playerInvincible:d})=>{const f=(n-1)%10,h=t>=ll.get(r)(f),g=[d>0?s.flatMap(L(d,o,c)):s,h?[N(-l+.4+H()*il*1.6,H()*y,pl.get(r)(),dl.get(r)())]:[]].flat(),{nextEvt:b,nextEvtTime:w}=hl(r,f,e,i);return a&&n%10===1?{enemies:R(g),nextStage:Be(),evt:T()}:{enemies:g,nextStage:Ve(h?0:t+1,w),evt:b}},{pi:vl,pi2:gl,random:D}=m.globals,Gn=new Map([[p.easy,()=>6+D()*2],[p.normal,()=>6+D()*3],[p.hard,()=>6+D()*4]]),wl=new Map([[p.easy,t=>30-t*2],[p.normal,t=>27-t*2],[p.hard,t=>13-t]]),$l=new Map([[p.easy,()=>-.008*D()],[p.normal,()=>-.01*D()],[p.hard,()=>-.016*D()]]),bl=new Map([[p.easy,()=>!1],[p.normal,(t,e)=>t>5&&e>=30-t*2],[p.hard,(t,e)=>t>5&&e>=27-t*2]]),yl=new Map([[p.easy,()=>.5+D()*.5],[p.normal,()=>.7+D()*.6],[p.hard,()=>1+D()]]),At=(t=0,e=0)=>(r,n,a,s)=>{const{enemies:i,evt:o,px:c,py:l,pa:d,playerInvincible:f}=s,h=t>=wl.get(r)(n),g=bl.get(r)(n,e),b=[f>0?i.flatMap(L(f,c,l)):i,h?[N(-d+.4+D()*vl*1.6,D()*y,$l.get(r)(),Gn.get(r)())]:[],g?[Z(v+(2*D()-1)*20,v+(2*D()-1)*20,D()*gl,yl.get(r)(),Gn.get(r)(),"white","blue")]:[]].flat();return a&&n%10===1?{enemies:R(b),nextStage:Ve(),evt:o}:{enemies:b,nextStage:At(h?0:t+1,g?0:e+1),evt:o}};var Kt=()=>({level:1,mode:p.normal,practice:!1,stage:At(),evt:T(),playerAngle:0,playerRadius:y/2,playerInvincible:0,deaths:0,frames:0,enemies:[]}),ml=Object.defineProperty,_l=Object.defineProperties,Ol=Object.getOwnPropertyDescriptors,Yn=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,Sl=Object.prototype.propertyIsEnumerable,Xn=(t,e,r)=>e in t?ml(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,El=(t,e)=>{for(var r in e||(e={}))Pl.call(e,r)&&Xn(t,r,e[r]);if(Yn)for(var r of Yn(e))Sl.call(e,r)&&Xn(t,r,e[r]);return t},xl=(t,e)=>_l(t,Ol(e));const{min:Zn,max:Ml,round:Kn,random:Jn}=m.globals,Al=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${E/4}px serif`,u.textAlign="center",u.fillText("\u8F2A\u5EFB",v,v-E/10),u.closePath(),u.restore()},Cl=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${E/10}px serif`,u.textAlign="center",u.fillText("\u2212\u56DE\u5411\u2212",v,v+E/30),u.closePath(),u.restore()};var Qn=(t=0)=>({mode:e,level:r,practice:n})=>{t===0&&(pt.update(()=>({appearance:0,playerAngle:0})),rt.update(()=>({appearance:0})),mt.update(()=>({appearance:0,deaths:0})),_t.update(()=>({appearance:0,name:"-"}))),Ut(),Al(Zn(t/60,(165-t)/60,1));const a=Ml(Zn((t-75)/30,(165-t)/60,1),0);if(Cl(a),jr.update(()=>({startOpacity:(t>105&&!n?Kn(Jn()):1)*a,practiceOpacity:(t>105&&n?Kn(Jn()):1)*a})),yt.update(()=>({opacity:t>105&&n?1:a})),t===105){const[s,i]=Ir().reduce(([o,c],{id:l,param:d})=>l===B.mode?[d,c]:[B.start,B.practice].includes(l)?[o,l]:[o,c],[e,null]);return ye(),yt.update(()=>({mode:s})),{nextId:_.title,nextArgs:[i===null?105:106],stateUpdate:{mode:s,practice:i===B.practice}}}return ye(),t===165?{nextId:n?_.practice:_.start,nextArgs:[],stateUpdate:{level:n?1:r,stage:At()}}:{nextId:_.title,nextArgs:[t+1],stateUpdate:t===0?xl(El({},Kt()),{mode:e}):{}}};const{pi2:kl,min:ut,max:qe,trunc:Il}=m.globals,Tl=t=>{u.save(),u.beginPath();const e=1-ut(qe((t%60-15)/30,0),1);u.fillStyle=`rgba(255, 255, 255, ${e})`,u.shadowColor="rgba(255, 255, 255, 0.5)",u.shadowBlur=10,u.font=`${y/3}px serif`,u.textAlign="center",u.fillText(3-Il(t/60),v,y/2),u.restore()};var Dl=(t=0)=>({level:e,mode:r})=>{t===0&&(pt.update(()=>({level:e})),rt.update(()=>({mode:r})));const n=ut(t/30,1);return pt.update(()=>({appearance:n})),rt.update(()=>({appearance:n})),mt.update(()=>({appearance:n})),_t.update(()=>({appearance:n,name:"-"})),Ut(),ve(),ge(ut(t/30,1)),bt(0,ut(qe((t-60)/30,0),1)),u.globalAlpha=ut(qe((t-30)/30,0),1),zt(v+y/2,v),u.globalAlpha=ut(t/30,1),Ft(),u.globalAlpha=1,t<180&&Tl(t),we(-(t/160)*kl),t<180?{nextId:_.start,nextArgs:[t+1],stateUpdate:{}}:{nextId:_.main,nextArgs:[],stateUpdate:{frames:0}}};const jl={opacity:0,top:0,fontSize:0,selected:null},z=t=>()=>be(B.stage,t),Ct="min(3vw, 3vh)",Ll=t=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"20%",transform:"translate(-50%, 0)",textAlign:"center",fontSize:`calc(${Ct} * 1.7)`,fontFamily:"serif",color:"white",opacity:t}),Wl=t=>({display:t>0?"block":"none",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center",fontFamily:"serif",opacity:t}),F=t=>({outline:"none",border:`2px solid ${t?"white":"transparent"}`,margin:`calc(${Ct} / 4) 0 calc(${Ct} / 2)`,width:`calc(${Ct} * 7)`,fontSize:Ct,color:"white",backgroundColor:"transparent"}),He=Y(jl,t=>({opacity:e,selected:r})=>t`<div style=${Ll(e)}>Select Level</div><div style=${Wl(e)}><button style=${F(r===1)} onClick=${z(1)}>Lv.1~10</button><button style=${F(r===2)} onClick=${z(2)}>Lv.11~20</button><br><button style=${F(r===3)} onClick=${z(3)}>Lv.21~30</button><button style=${F(r===4)} onClick=${z(4)}>Lv.31~40</button><br><button style=${F(r===5)} onClick=${z(5)}>Lv.41~50</button><button style=${F(r===6)} onClick=${z(6)}>Lv.51~60</button><br><button style=${F(r===7)} onClick=${z(7)}>Lv.61~70</button><button style=${F(r===8)} onClick=${z(8)}>Lv.71~80</button><br><button style=${F(r===9)} onClick=${z(9)}>Lv.81~90</button><button style=${F(r===10)} onClick=${z(10)}>Lv.91~100</button></div>`),{window:tt}=m.globals,j={};tt.addEventListener("keydown",({key:t})=>{j[t]=!0}),tt.addEventListener("keyup",({key:t})=>{j[t]=!1});let ta=[];const Jt=t=>{ta=[...t.touches]};tt.addEventListener("touchstart",Jt),tt.addEventListener("touchmove",Jt),tt.addEventListener("touchend",Jt),tt.addEventListener("touchcancel",Jt);const Nl=(t,e,r)=>{const n=r/e;return t.reduce((a,{clientX:s,clientY:i})=>{const o=s*n<i,c=i<r-s*n;return{left:a.left||o&&c,right:a.right||!o&&!c,up:a.up||!o&&c,down:a.down||o&&!c}},{})};var Ge=()=>{const t=Nl(ta,tt.innerWidth,tt.innerHeight);return{inner:j.a||j.ArrowLeft||t.left||!1,outer:j.d||j.ArrowRight||t.right||!1,quick:j.w||j.ArrowUp||t.up||!1,brake:j.s||j.ArrowDown||t.down||!1,pause:j.p||!1,escape:j.Escape||!1}};const{min:ea}=m.globals,Rl=[At,Ve,Be,Fe,ze,Ue,Re,Ne,We,Le];var Ul=(t=0,e=null)=>({mode:r})=>{if(He.update(()=>({selected:e,opacity:ea(t/30,(60-t)/30)})),yt.update(()=>({mode:r,opacity:ea((60-t)/30,1)})),t===30){if(Ge().escape)return He.update(()=>({opacity:0})),yt.update(()=>({opacity:0})),{nextId:_.title,nextArgs:[],stateUpdate:{}};const[n,a]=Ir().reduce(([s,i],{id:o,param:c})=>o===B.mode?[c,i]:[s,c],[r,null]);return{nextId:_.practice,nextArgs:[a===null?30:31,a],stateUpdate:{mode:n,level:a&&(a-1)*10+1,stage:(Rl[a-1]||At)()}}}return ye(),t<60?{nextId:_.practice,nextArgs:[t+1,e],stateUpdate:{}}:{nextId:_.start,nextArgs:[],stateUpdate:{}}};const zl=new Map([[P.swimOrb,bo],[P.linearOrb,sn],[P.orbToCenter,mo],[P.lazer,Ro],[P.landolt,ci]]),ra=new Map([[P.swimOrb,$o],[P.linearOrb,an],[P.orbToCenter,an],[P.lazer,Bo],[P.landolt,si]]);var Fl=Object.defineProperty,Bl=Object.defineProperties,Vl=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,na=Object.prototype.hasOwnProperty,aa=Object.prototype.propertyIsEnumerable,sa=(t,e,r)=>e in t?Fl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ye=(t,e)=>{for(var r in e||(e={}))na.call(e,r)&&sa(t,r,e[r]);if(Qt)for(var r of Qt(e))aa.call(e,r)&&sa(t,r,e[r]);return t},Xe=(t,e)=>Bl(t,Vl(e)),ql=(t,e)=>{var r={};for(var n in t)na.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Qt)for(var n of Qt(t))e.indexOf(n)<0&&aa.call(t,n)&&(r[n]=t[n]);return r};const{pi2:oa,cos:Hl,sin:Gl,min:Yl,max:ia,random:Xl}=m.globals,Zl=()=>({state:Ge()}),Kl=({escape:t,mode:e})=>({returns:t?{nextId:_.title,nextArgs:[],stateUpdate:Xe(Ye({},Kt()),{mode:e})}:!1}),Jl=({pause:t,pauseTime:e})=>({returns:t&&e>10?{nextId:_.pause,nextArgs:[0],stateUpdate:{}}:!1}),Ql=t=>{var e=t,{evt:r}=e,n=ql(e,["evt"]);return r.waitTime>=r.wait?{state:r.inputEffect(n,r)}:{}},tp=({inner:t,outer:e,quick:r,brake:n,pa:a,pr:s})=>({state:{pa:a+.007+(r-n)*.005,pr:Yl(ia(s+(e-t)*2,10),y-10)}}),ep=()=>(ve(),ge(),we(),{}),ca=({pa:t,pr:e})=>({state:{px:v+e*Hl(-t),py:v+e*Gl(-t)}}),rp=({practice:t,pa:e,pr:r,level:n,deaths:a,frames:s})=>{const i=e>=oa,o=n+(i?1:0);if(t&&i&&o%10===1)return{returns:{nextId:_.title,nextArgs:[],stateUpdate:{}}};if(n===101){if(a>=100)return{returns:{nextId:_.title,nextArgs:[],stateUpdate:{}}};bt(e);const{state:{px:c,py:l}}=ca({pa:e,pr:r});return zt(c,l),Ft(),{returns:{nextId:_.over,nextArgs:[],stateUpdate:{frames:s+1}}}}return{state:{pa:i?e%oa:e,level:o,levelUp:i}}},np=({playerInvincible:t,pa:e,px:r,py:n})=>(bt(e),(t===0||Xl()<.5)&&zt(r,n),{}),ap=({mode:t,level:e,levelUp:r,stage:n,pa:a,pr:s,px:i,py:o,playerInvincible:c,enemies:l,evt:d})=>{const f=n(t,e,r,{px:i,py:o,pa:a,pr:s,playerInvincible:c,enemies:l,evt:d});return{state:{stage:f.nextStage,evt:f.evt,enemies:f.enemies}}},sp=({enemies:t,px:e,py:r})=>{const n=t.reduce((a,s)=>{const{id:i}=s,{nextEnemies:o,hit:c}=zl.get(i)(s,e,r);return ra.get(i)(u,s),{nextEnemies:a.nextEnemies.concat(o),hit:a.hit||c}},{nextEnemies:[],hit:!1});return{state:{enemies:n.nextEnemies,hit:n.hit}}},op=({evt:t})=>{const{eventTime:e,duration:r,waitTime:n,wait:a,afterEffect:s,props:i}=t,o=n>=a;return kr(o?1-e/r:n/a),{state:{evt:Xe(Ye({},t),{waitTime:n+1,eventTime:o?e+1:0,props:o?s(i,e,u):i})}}},ip=({mode:t,level:e,pa:r,evt:n})=>(pt.update(()=>({level:e,playerAngle:r})),rt.update(()=>({mode:t})),_t.update(()=>({name:n.name})),Ft(),{}),cp=({pa:t,pr:e})=>({state:{playerAngle:t,playerRadius:e}}),lp=t=>{const{level:e,mode:r,practice:n,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l,frames:d,enemies:f,hit:h}=t;return h&&c===0?(mt.update(()=>({deaths:l+1})),{returns:{nextId:_.death,nextArgs:[],stateUpdate:{level:e,mode:r,practice:n,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l+1,frames:d+1,enemies:f}}}):{}},pp=({pauseTime:t,level:e,mode:r,practice:n,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:c,deaths:l,frames:d,enemies:f})=>({returns:{nextId:_.main,nextArgs:[t+1],stateUpdate:{level:e,mode:r,practice:n,stage:a,evt:s,playerAngle:i,playerRadius:o,playerInvincible:ia(c-1,0),deaths:l,frames:d+1,enemies:f}}});var dp=(t=0)=>e=>[Zl,Kl,Jl,ep,Ql,tp,rp,ca,np,ap,sp,op,ip,cp,lp,pp].reduce((r,n,a,s)=>{const{state:i,returns:o}=n(r);return o?(s.splice(a),o):Object.assign(r,i)},Xe(Ye({},e),{pauseTime:t,pa:e.playerAngle,pr:e.playerRadius})),fp=Object.defineProperty,up=Object.defineProperties,hp=Object.getOwnPropertyDescriptors,la=Object.getOwnPropertySymbols,vp=Object.prototype.hasOwnProperty,gp=Object.prototype.propertyIsEnumerable,pa=(t,e,r)=>e in t?fp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wp=(t,e)=>{for(var r in e||(e={}))vp.call(e,r)&&pa(t,r,e[r]);if(la)for(var r of la(e))gp.call(e,r)&&pa(t,r,e[r]);return t},$p=(t,e)=>up(t,hp(e)),bp=t=>({mode:e})=>{const{escape:r,pause:n}=Ge();return r?{nextId:_.title,nextArgs:[],stateUpdate:$p(wp({},Kt()),{mode:e})}:t>10&&n?{nextId:_.main,nextArgs:[0],stateUpdate:{}}:{nextId:_.pause,nextArgs:[t+1],stateUpdate:{}}};const{pi2:da,cos:yp,sin:mp}=m.globals,_p=(t,e,r)=>{u.save(),u.beginPath(),u.fillStyle=`rgba(255, 0, 0, ${1-r/90})`,u.arc(t,e,20+r/4.5,0,da),u.fill(),u.closePath(),u.restore()},Op=(t,e,r)=>{u.save(),u.beginPath();const n=u.createRadialGradient(t,e,0,t,e,y*2);n.addColorStop(0,"rgba(255, 0, 0, 0)"),n.addColorStop(.05,"rgba(255, 0, 0, 0)"),n.addColorStop(.3+.7*(r/90),"rgba(255, 0, 0, 0.5)"),u.fillStyle=n,u.arc(t,e,y*2,0,da),u.fill(),u.closePath(),u.restore()};var Pp=(t=0)=>({playerAngle:e,playerRadius:r,enemies:n,evt:{wait:a,waitTime:s,eventTime:i,duration:o,afterEffect:c,props:l}})=>{Ut(),ve(),ge(),bt(e);const d=v+r*yp(-e),f=v+r*mp(-e);return _p(d,f,t),n.forEach(h=>ra.get(h.id)(u,h)),Ft(),we(),kr(s>=a?1-i/o:s/a),Op(d,f,t),c(l,i,u),t<90?{nextId:_.death,nextArgs:[t+1],stateUpdate:{}}:{nextId:_.main,nextArgs:[],stateUpdate:{playerInvincible:60,playerAngle:0,playerRadius:y/2}}};const{pi2:Sp,min:te,trunc:ht}=m.globals,Ep=t=>{u.save(),u.fillStyle=`rgba(255, 255, 255, ${t})`,u.arc(v,v,y,0,Sp),u.restore()},xp=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${t})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${E/4}px serif`,u.textAlign="center",u.fillText("\u89E3\u8131",v,v-E/8),u.closePath(),u.restore()},Mp=t=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${t})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${E/10}px serif`,u.textAlign="center",u.fillText("GAME OVER",v,v),u.closePath(),u.restore()},Ap=t=>{const e=t/60,r=ht(e/60).toString().padStart(2,"0"),n=(ht(e)%60).toString().padStart(2,"0"),a=ht((e-ht(e))*1e3).toString().padStart(3,"0");return`${r}:${n}.${a}`},Cp=(t,e,r,n)=>{u.save(),u.beginPath(),u.fillStyle=`rgba(0, 0, 0, ${n})`,u.shadowColor="rgba(0, 0, 0, 0.5)",u.shadowBlur=10,u.font=`${E/20}px serif`,u.textAlign="center",u.fillText(`Mode: ${qr.get(t)}`,v,v+E*.1),u.fillText(`Death${e>=2?"s":""}: ${e}`,v,v+E*.2),u.fillText(`Time: ${r}`,v,v+E*.3)};var kp=(t=0,e=null)=>({mode:r,deaths:n,frames:a})=>{if(t>690)return{nextId:_.over,nextArgs:[t,e],stateUpdate:{}};if(t<=120){const s=1-t/120;pt.update(()=>({appearance:s,level:100})),rt.update(()=>({appearance:s})),mt.update(()=>({appearance:s})),_t.update(()=>({appearance:s})),he.update(()=>({opacity:s}))}if(t>=120&&t<=420){const s=ht((t-120)*.85),i=ht((s+102)/2),o=`rgb(${s}, ${s}, ${s})`,c=`rgb(${i}, ${i}, ${i})`;document.body.style.backgroundImage=`radial-gradient(circle closest-side, ${o} 60%, ${c} 100%, #666 200%)`}return t===420&&he.update(()=>({opacity:1})),t>=420&&(Ut(),Ep(te((t-420)/120,1))),t>=420&&xp(te((t-420)/120,1)),t>=570&&Mp(te((t-570)/60,1)),t>=630&&Cp(r,n,e,te((t-630)/60,1)),{nextId:_.over,nextArgs:[t+1,e||Ap(a)],stateUpdate:{}}};const{now:Ip}=m.globals,Tp=new Map([[_.title,Qn],[_.start,Dl],[_.practice,Ul],[_.main,dp],[_.pause,bp],[_.death,Pp],[_.over,kp]]),fa=(t,e)=>()=>{ys(Ip());const{nextId:r,nextArgs:n,stateUpdate:a}=t(e);return fa(Tp.get(r)(...n),Object.assign(e,a))},{bind:Dp}=m.hyperhtml;Dp(document.body)` ${he.render()} ${pt.render()} ${rt.render()} ${mt.render()} ${_t.render()} ${jr.render()} ${He.render()} ${yt.render()}`,$s(fa(Qn(),Kt()))})();
